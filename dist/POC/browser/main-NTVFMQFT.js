var dk=Object.defineProperty,A$=Object.defineProperties;var S$=Object.getOwnPropertyDescriptors;var lk=Object.getOwnPropertySymbols,M$=Object.getPrototypeOf,P$=Object.prototype.hasOwnProperty,k$=Object.prototype.propertyIsEnumerable,R$=Reflect.get;var uk=(n,e,t)=>e in n?dk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})P$.call(e,t)&&uk(n,t,e[t]);if(lk)for(var t of lk(e))k$.call(e,t)&&uk(n,t,e[t]);return n},ue=(n,e)=>A$(n,S$(e));var F$=(n,e)=>{for(var t in e)dk(n,t,{get:e[t],enumerable:!0})};var Ro=(n,e,t)=>R$(M$(n),t,e);var x=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var oC;function aC(){return oC}function Vs(n){let e=oC;return oC=n,e}var N$=Symbol("NotFound"),Hg=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function bl(n){return n===N$||n?.name==="\u0275NotFound"}function Kg(n,e){return Object.is(n,e)}var un=null,zg=!1,cC=1,U$=null,jn=Symbol("SIGNAL");function Re(n){let e=un;return un=n,e}function Yg(){return un}var Ba={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Cl(n){if(zg)throw new Error("");if(un===null)return;un.consumerOnSignalRead(n);let e=un.nextProducerIndex++;if(Xg(un),e<un.producerNode.length&&un.producerNode[e]!==n&&Gd(un)){let t=un.producerNode[e];Zg(t,un.producerIndexOfThis[e])}un.producerNode[e]!==n&&(un.producerNode[e]=n,un.producerIndexOfThis[e]=Gd(un)?fk(n,un,e):0),un.producerLastReadVersion[e]=n.version}function hk(){cC++}function Jg(n){if(!(Gd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cC)){if(!n.producerMustRecompute(n)&&!Kd(n)){Gg(n);return}n.producerRecomputeValue(n),Gg(n)}}function lC(n){if(n.liveConsumerNode===void 0)return;let e=zg;zg=!0;try{for(let t of n.liveConsumerNode)t.dirty||O$(t)}finally{zg=e}}function uC(){return un?.consumerAllowSignalWrites!==!1}function O$(n){n.dirty=!0,lC(n),n.consumerMarkedDirty?.(n)}function Gg(n){n.dirty=!1,n.lastCleanEpoch=cC}function ja(n){return n&&(n.nextProducerIndex=0),Re(n)}function El(n,e){if(Re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Gd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Kd(n){Xg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Jg(t),r!==t.version))return!0}return!1}function Qg(n){if(Xg(n),Gd(n))for(let e=0;e<n.producerNode.length;e++)Zg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fk(n,e,t){if(pk(n),n.liveConsumerNode.length===0&&gk(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=fk(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Zg(n,e){if(pk(n),n.liveConsumerNode.length===1&&gk(n))for(let r=0;r<n.producerNode.length;r++)Zg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Xg(i),i.producerIndexOfThis[r]=e}}function Gd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Xg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function pk(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function gk(n){return n.producerNode!==void 0}function em(n){U$?.(n)}function tm(n,e){let t=Object.create(L$);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Jg(t),Cl(t),t.value===qd)throw t.error;return t.value};return r[jn]=t,em(t),r}var Wg=Symbol("UNSET"),qg=Symbol("COMPUTING"),qd=Symbol("ERRORED"),L$=ue(H({},Ba),{value:Wg,dirty:!0,error:null,equal:Kg,kind:"computed",producerMustRecompute(n){return n.value===Wg||n.value===qg},producerRecomputeValue(n){if(n.value===qg)throw new Error("");let e=n.value;n.value=qg;let t=ja(n),r,i=!1;try{r=n.computation(),Re(null),i=e!==Wg&&e!==qd&&r!==qd&&n.equal(e,r)}catch(s){r=qd,n.error=s}finally{El(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function V$(){throw new Error}var mk=V$;function yk(n){mk(n)}function dC(n){mk=n}var B$=null;function hC(n,e){let t=Object.create(nm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>_k(t);return r[jn]=t,em(t),[r,o=>Il(t,o),o=>fC(t,o)]}function _k(n){return Cl(n),n.value}function Il(n,e){uC()||yk(n),n.equal(n.value,e)||(n.value=e,j$(n))}function fC(n,e){uC()||yk(n),Il(n,e(n.value))}var nm=ue(H({},Ba),{equal:Kg,value:void 0,kind:"signal"});function j$(n){n.version++,hk(),lC(n),B$?.(n)}function De(n){return typeof n=="function"}function Dl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rm=Dl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $a(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $t=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(De(r))try{r()}catch(s){e=s instanceof rm?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{vk(s)}catch(o){e=e??[],o instanceof rm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new rm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vk(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$a(t,e)}remove(e){let{_finalizers:t}=this;t&&$a(t,e),e instanceof n&&e._removeParent(this)}};$t.EMPTY=(()=>{let n=new $t;return n.closed=!0,n})();var pC=$t.EMPTY;function im(n){return n instanceof $t||n&&"closed"in n&&De(n.remove)&&De(n.add)&&De(n.unsubscribe)}function vk(n){De(n)?n():n.unsubscribe()}var Ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xl={setTimeout(n,e,...t){let{delegate:r}=xl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sm(n){xl.setTimeout(()=>{let{onUnhandledError:e}=Ei;if(e)e(n);else throw n})}function Yd(){}var wk=gC("C",void 0,void 0);function bk(n){return gC("E",void 0,n)}function Ck(n){return gC("N",n,void 0)}function gC(n,e,t){return{kind:n,value:e,error:t}}var Ha=null;function Tl(n){if(Ei.useDeprecatedSynchronousErrorHandling){let e=!Ha;if(e&&(Ha={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ha;if(Ha=null,t)throw r}}else n()}function Ek(n){Ei.useDeprecatedSynchronousErrorHandling&&Ha&&(Ha.errorThrown=!0,Ha.error=n)}var za=class extends $t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,im(e)&&e.add(this)):this.destination=z$}static create(e,t,r){return new Al(e,t,r)}next(e){this.isStopped?yC(Ck(e),this):this._next(e)}error(e){this.isStopped?yC(bk(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yC(wk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$$=Function.prototype.bind;function mC(n,e){return $$.call(n,e)}var _C=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){om(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){om(r)}else om(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){om(t)}}},Al=class extends za{constructor(e,t,r){super();let i;if(De(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mC(e.next,s),error:e.error&&mC(e.error,s),complete:e.complete&&mC(e.complete,s)}):i=e}this.destination=new _C(i)}};function om(n){Ei.useDeprecatedSynchronousErrorHandling?Ek(n):sm(n)}function H$(n){throw n}function yC(n,e){let{onStoppedNotification:t}=Ei;t&&xl.setTimeout(()=>t(n,e))}var z$={closed:!0,next:Yd,error:H$,complete:Yd};var Sl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nr(n){return n}function vC(...n){return wC(n)}function wC(n){return n.length===0?nr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=q$(t)?t:new Al(t,r,i);return Tl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ik(r),new r((i,s)=>{let o=new Al({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Sl](){return this}pipe(...t){return wC(t)(this)}toPromise(t){return t=Ik(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ik(n){var e;return(e=n??Ei.Promise)!==null&&e!==void 0?e:Promise}function W$(n){return n&&De(n.next)&&De(n.error)&&De(n.complete)}function q$(n){return n&&n instanceof za||W$(n)&&im(n)}function bC(n){return De(n?.lift)}function Te(n){return e=>{if(bC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(n,e,t,r,i){return new Jd(n,e,t,r,i)}var Jd=class extends za{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ml(){return Te((n,e)=>{let t=null;n._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Pl=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $t;let t=this.getSubject();e.add(this.source.subscribe(be(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$t.EMPTY)}return e}refCount(){return Ml()(this)}};var Dk=Dl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Rt=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new am(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Dk}next(t){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?pC:(this.currentObservers=null,s.push(t),new $t(()=>{this.currentObservers=null,$a(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new am(e,t),n})(),am=class extends Rt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:pC}};var dn=class extends Rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var CC={now(){return(CC.delegate||Date).now()},delegate:void 0};var cm=class extends $t{constructor(e,t){super()}schedule(e,t=0){return this}};var Qd={setInterval(n,e,...t){let{delegate:r}=Qd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Qd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var kl=class extends cm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Qd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Qd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$a(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Rl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Rl.now=CC.now;var Fl=class extends Rl{constructor(e,t=Rl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Zd=new Fl(kl);var lm=class extends kl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var um=class extends Fl{};var EC=new um(lm);var gr=new ye(n=>n.complete());function xk(n){return n&&De(n.schedule)}function Tk(n){return n[n.length-1]}function dm(n){return De(Tk(n))?n.pop():void 0}function Fo(n){return xk(Tk(n))?n.pop():void 0}function IC(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Sk(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Ak(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wa(n){return this instanceof Wa?(this.v=n,this):new Wa(n)}function Mk(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){r[p]&&(i[p]=function(w){return new Promise(function(b,A){s.push([p,w,b,A])>1||c(p,w)})},y&&(i[p]=y(i[p])))}function c(p,y){try{l(r[p](y))}catch(w){f(s[0][3],w)}}function l(p){p.value instanceof Wa?Promise.resolve(p.value.v).then(u,h):f(s[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,y){p(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Pk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ak=="function"?Ak(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var hm=n=>n&&typeof n.length=="number"&&typeof n!="function";function fm(n){return De(n?.then)}function pm(n){return De(n[Sl])}function gm(n){return Symbol.asyncIterator&&De(n?.[Symbol.asyncIterator])}function mm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function G$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ym=G$();function _m(n){return De(n?.[ym])}function vm(n){return Mk(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Wa(t.read());if(i)return yield Wa(void 0);yield yield Wa(r)}}finally{t.releaseLock()}})}function wm(n){return De(n?.getReader)}function Ht(n){if(n instanceof ye)return n;if(n!=null){if(pm(n))return K$(n);if(hm(n))return Y$(n);if(fm(n))return J$(n);if(gm(n))return kk(n);if(_m(n))return Q$(n);if(wm(n))return Z$(n)}throw mm(n)}function K$(n){return new ye(e=>{let t=n[Sl]();if(De(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Y$(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function J$(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,sm)})}function Q$(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kk(n){return new ye(e=>{X$(n,e).catch(t=>e.error(t))})}function Z$(n){return kk(vm(n))}function X$(n,e){var t,r,i,s;return Sk(this,void 0,void 0,function*(){try{for(t=Pk(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function mr(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function No(n,e=0){return Te((t,r)=>{t.subscribe(be(r,i=>mr(r,n,()=>r.next(i),e),()=>mr(r,n,()=>r.complete(),e),i=>mr(r,n,()=>r.error(i),e)))})}function Uo(n,e=0){return Te((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Rk(n,e){return Ht(n).pipe(Uo(e),No(e))}function Fk(n,e){return Ht(n).pipe(Uo(e),No(e))}function Nk(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Uk(n,e){return new ye(t=>{let r;return mr(t,e,()=>{r=n[ym](),mr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>De(r?.return)&&r.return()})}function bm(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{mr(t,e,()=>{let r=n[Symbol.asyncIterator]();mr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ok(n,e){return bm(vm(n),e)}function Lk(n,e){if(n!=null){if(pm(n))return Rk(n,e);if(hm(n))return Nk(n,e);if(fm(n))return Fk(n,e);if(gm(n))return bm(n,e);if(_m(n))return Uk(n,e);if(wm(n))return Ok(n,e)}throw mm(n)}function _t(n,e){return e?Lk(n,e):Ht(n)}function fe(...n){let e=Fo(n);return _t(n,e)}function Nl(n,e){let t=De(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function DC(n){return!!n&&(n instanceof ye||De(n.lift)&&De(n.subscribe))}var Bs=Dl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(n,e){return Te((t,r)=>{let i=0;t.subscribe(be(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:eH}=Array;function tH(n,e){return eH(e)?n(...e):n(e)}function Cm(n){return Ce(e=>tH(n,e))}var{isArray:nH}=Array,{getPrototypeOf:rH,prototype:iH,keys:sH}=Object;function Em(n){if(n.length===1){let e=n[0];if(nH(e))return{args:e,keys:null};if(oH(e)){let t=sH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function oH(n){return n&&typeof n=="object"&&rH(n)===iH}function Im(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dm(...n){let e=Fo(n),t=dm(n),{args:r,keys:i}=Em(n);if(r.length===0)return _t([],e);let s=new ye(aH(r,e,i?o=>Im(i,o):nr));return t?s.pipe(Cm(t)):s}function aH(n,e,t=nr){return r=>{Vk(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Vk(e,()=>{let l=_t(n[c],e),u=!1;l.subscribe(be(r,h=>{s[c]=h,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Vk(n,e,t){n?mr(t,n,e):e()}function Bk(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,h=!1,f=()=>{h&&!c.length&&!l&&e.complete()},p=w=>l<r?y(w):c.push(w),y=w=>{s&&e.next(w),l++;let b=!1;Ht(t(w,u++)).subscribe(be(e,A=>{i?.(A),s?p(A):e.next(A)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let A=c.shift();o?mr(e,o,()=>y(A)):y(A)}f()}catch(A){e.error(A)}}))};return n.subscribe(be(e,p,()=>{h=!0,f()})),()=>{a?.()}}function Qt(n,e,t=1/0){return De(e)?Qt((r,i)=>Ce((s,o)=>e(r,s,i,o))(Ht(n(r,i))),t):(typeof e=="number"&&(t=e),Te((r,i)=>Bk(r,i,n,t)))}function jk(n=1/0){return Qt(nr,n)}function $k(){return jk(1)}function Ul(...n){return $k()(_t(n,Fo(n)))}function Xd(n){return new ye(e=>{Ht(n()).subscribe(e)})}function xC(...n){let e=dm(n),{args:t,keys:r}=Em(n),i=new ye(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let h=!1;Ht(t[u]).subscribe(be(s,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(r?Im(r,a):a),s.complete())}))}});return e?i.pipe(Cm(e)):i}function hn(n,e){return Te((t,r)=>{let i=0;t.subscribe(be(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Oo(n){return Te((e,t)=>{let r=null,i=!1,s;r=e.subscribe(be(t,void 0,void 0,o=>{s=Ht(n(o,Oo(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Hk(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(be(o,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function js(n,e){return De(e)?Qt(n,e,1):Qt(n,1)}function TC(n,e=Zd){return Te((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(be(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Lo(n){return Te((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $s(n){return n<=0?()=>gr:Te((e,t)=>{let r=0;e.subscribe(be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function eh(n,e=nr){return n=n??cH,Te((t,r)=>{let i,s=!0;t.subscribe(be(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function cH(n,e){return n===e}function xm(n=lH){return Te((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lH(){return new Bs}function qa(n){return Te((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Hs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):nr,$s(1),t?Lo(e):xm(()=>new Bs))}function AC(n,e,t,r){return Te((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=y=>{a.forEach(y),y(s)},l=y=>c(w=>w.error(y)),u=0,h=!1,f=new Jd(s,y=>{try{let w=n(y),b=a.get(w);if(!b){a.set(w,b=r?r():new Rt);let A=p(w,b);if(s.next(A),t){let P=be(b,()=>{b.complete(),P?.unsubscribe()},void 0,void 0,()=>a.delete(w));f.add(Ht(t(A)).subscribe(P))}}b.next(o?o(y):y)}catch(w){l(w)}},()=>c(y=>y.complete()),l,()=>a.clear(),()=>(h=!0,u===0));i.subscribe(f);function p(y,w){let b=new ye(A=>{u++;let P=w.subscribe(A);return()=>{P.unsubscribe(),--u===0&&h&&f.unsubscribe()}});return b.key=y,b}})}function Ol(n){return n<=0?()=>gr:Te((e,t)=>{let r=[];e.subscribe(be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function SC(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):nr,Ol(1),t?Lo(e):xm(()=>new Bs))}function MC(){return Te((n,e)=>{let t,r=!1;n.subscribe(be(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function PC(n,e){return Te(Hk(n,e,arguments.length>=2,!0))}function th(...n){let e=Fo(n);return Te((t,r)=>{(e?Ul(n,t,e):Ul(n,t)).subscribe(r)})}function Pn(n,e){return Te((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(be(r,c=>{i?.unsubscribe();let l=0,u=s++;Ht(n(c,u)).subscribe(i=be(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tm(n){return Te((e,t)=>{Ht(n).subscribe(be(t,()=>t.complete(),Yd)),!t.closed&&e.subscribe(t)})}function vn(n,e,t){let r=De(n)||e||t?{next:n,error:e,complete:t}:n;return r?Te((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(be(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):nr}function zk(n){let e=Re(null);try{return n()}finally{Re(e)}}var km="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ne=class extends Error{code;constructor(e,t){super(Rm(e,t)),this.code=e}};function uH(n){return`NG0${Math.abs(n)}`}function Rm(n,e){return`${uH(n)}${e?": "+e:""}`}var Qa=globalThis;function Dt(n){for(let e in n)if(n[e]===Dt)return e;throw Error("")}function Kk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function yr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(yr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function zC(n,e){return n?e?`${n} ${e}`:n:e||""}var dH=Dt({__forward_ref__:Dt});function _r(n){return n.__forward_ref__=_r,n.toString=function(){return yr(this())},n}function kn(n){return WC(n)?n():n}function WC(n){return typeof n=="function"&&n.hasOwnProperty(dH)&&n.__forward_ref__===_r}function Yk(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function sh(n){return hH(n,Fm)}function qC(n){return sh(n)!==null}function hH(n,e){return n.hasOwnProperty(e)&&n[e]||null}function fH(n){let e=n?.[Fm]??null;return e||null}function RC(n){return n&&n.hasOwnProperty(Sm)?n[Sm]:null}var Fm=Dt({\u0275prov:Dt}),Sm=Dt({\u0275inj:Dt}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function GC(n){return n&&!!n.\u0275providers}var KC=Dt({\u0275cmp:Dt}),YC=Dt({\u0275dir:Dt}),JC=Dt({\u0275pipe:Dt}),QC=Dt({\u0275mod:Dt}),rh=Dt({\u0275fac:Dt}),Za=Dt({__NG_ELEMENT_ID__:Dt}),Wk=Dt({__NG_ENV_ID__:Dt});function Qi(n){return typeof n=="string"?n:n==null?"":String(n)}function Jk(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Qi(n)}function ZC(n,e){throw new ne(-200,n)}function Nm(n,e){throw new ne(-201,!1)}var FC;function Qk(){return FC}function rr(n){let e=FC;return FC=n,e}function XC(n,e,t){let r=sh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Nm(n,"Injector")}var pH={},Ga=pH,NC="__NG_DI_FLAG__",UC=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ka(t)||0;try{return this.injector.get(e,r&8?null:Ga,r)}catch(i){if(bl(i))return i;throw i}}},Mm="ngTempTokenPath",gH="ngTokenPath",mH=/\n/gm,yH="\u0275",qk="__source";function _H(n,e=0){let t=aC();if(t===void 0)throw new ne(-203,!1);if(t===null)return XC(n,void 0,e);{let r=vH(e),i=t.retrieve(n,r);if(bl(i)){if(r.optional)return null;throw i}return i}}function oe(n,e=0){return(Qk()||_H)(kn(n),e)}function W(n,e){return oe(n,Ka(e))}function Ka(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vH(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function OC(n){let e=[];for(let t=0;t<n.length;t++){let r=kn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=wH(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function eE(n,e){return n[NC]=e,n.prototype[NC]=e,n}function wH(n){return n[NC]}function bH(n,e,t,r){let i=n[Mm];throw e[qk]&&i.unshift(e[qk]),n.message=CH(`
`+n.message,i,t,r),n[gH]=i,n[Mm]=null,n}function CH(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yH?n.slice(2):n;let i=yr(e);if(Array.isArray(e))i=e.map(yr).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):yr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mH,`
  `)}`}function Vo(n,e){let t=n.hasOwnProperty(rh);return t?n[rh]:null}function Zk(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function Xk(n){return n.flat(Number.POSITIVE_INFINITY)}function Um(n,e){n.forEach(t=>Array.isArray(t)?Um(t,e):e(t))}function tE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function oh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function eR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function tR(n,e,t){let r=Vl(n,e);return r>=0?n[r|1]=t:(r=~r,eR(n,r,e,t)),r}function Om(n,e){let t=Vl(n,e);if(t>=0)return n[t|1]}function Vl(n,e){return EH(n,e,1)}function EH(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var $o={},Nr=[],Ws=new ee(""),nE=new ee("",-1),rE=new ee(""),ih=class{get(e,t=Ga){if(t===Ga)throw new Hg(`NullInjectorError: No provider for ${yr(e)}!`);return t}};function iE(n){return n[QC]||null}function Ho(n){return n[KC]||null}function sE(n){return n[YC]||null}function nR(n){return n[JC]||null}function fn(n){return{\u0275providers:n}}function rR(n){return fn([{provide:Ws,multi:!0,useValue:n}])}function Lm(...n){return{\u0275providers:oE(!0,n),\u0275fromNgModule:!0}}function oE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Um(e,o=>{let a=o;Pm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iR(i,s),t}function iR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];aE(i,s=>{e(s,r)})}}function Pm(n,e,t,r){if(n=kn(n),!n)return!1;let i=null,s=RC(n),o=!s&&Ho(n);if(!s&&!o){let c=n.ngModule;if(s=RC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Pm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Um(s.imports,u=>{Pm(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&iR(l,e)}if(!a){let l=Vo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nr},i),e({provide:rE,useValue:i,multi:!0},i),e({provide:Ws,useValue:()=>oe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;aE(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function aE(n,e){for(let t of n)GC(t)&&(t=t.\u0275providers),Array.isArray(t)?aE(t,e):e(t)}var IH=Dt({provide:String,useValue:Dt});function sR(n){return n!==null&&typeof n=="object"&&IH in n}function DH(n){return!!(n&&n.useExisting)}function xH(n){return!!(n&&n.useFactory)}function Ya(n){return typeof n=="function"}function oR(n){return!!n.useClass}var ah=new ee(""),Am={},Gk={},kC;function ch(){return kC===void 0&&(kC=new ih),kC}var Zt=class{},Ja=class extends Zt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,VC(e,o=>this.processProvider(o)),this.records.set(nE,Ll(void 0,this)),i.has("environment")&&this.records.set(Zt,Ll(void 0,this));let s=this.records.get(ah);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rE,Nr,{self:!0}))}retrieve(e,t){let r=Ka(t)||0;try{return this.get(e,Ga,r)}catch(i){if(bl(i))return i;throw i}}destroy(){nh(this),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return nh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){nh(this);let t=Vs(this),r=rr(void 0),i;try{return e()}finally{Vs(t),rr(r)}}get(e,t=Ga,r){if(nh(this),e.hasOwnProperty(Wk))return e[Wk](this);let i=Ka(r),s,o=Vs(this),a=rr(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=PH(e)&&sh(e);u&&this.injectableDefInScope(u)?l=Ll(LC(e),Am):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=i&2?ch():this.parent;return t=i&8&&t===Ga?null:t,c.get(e,t)}catch(c){if(bl(c)){if((c[Mm]=c[Mm]||[]).unshift(yr(e)),o)throw c;return bH(c,e,"R3InjectorError",this.source)}else throw c}finally{rr(a),Vs(o)}}resolveInjectorInitializers(){let e=Re(null),t=Vs(this),r=rr(void 0),i;try{let s=this.get(Ws,Nr,{self:!0});for(let o of s)o()}finally{Vs(t),rr(r),Re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(yr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=kn(e);let t=Ya(e)?e:kn(e&&e.provide),r=AH(e);if(!Ya(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ll(void 0,Am,!0),i.factory=()=>OC(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Re(null);try{return t.value===Gk?ZC(yr(e)):t.value===Am&&(t.value=Gk,t.value=t.factory()),typeof t.value=="object"&&t.value&&MH(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function LC(n){let e=sh(n),t=e!==null?e.factory:Vo(n);if(t!==null)return t;if(n instanceof ee)throw new ne(204,!1);if(n instanceof Function)return TH(n);throw new ne(204,!1)}function TH(n){if(n.length>0)throw new ne(204,!1);let t=fH(n);return t!==null?()=>t.factory(n):()=>new n}function AH(n){if(sR(n))return Ll(void 0,n.useValue);{let e=cE(n);return Ll(e,Am)}}function cE(n,e,t){let r;if(Ya(n)){let i=kn(n);return Vo(i)||LC(i)}else if(sR(n))r=()=>kn(n.useValue);else if(xH(n))r=()=>n.useFactory(...OC(n.deps||[]));else if(DH(n))r=()=>oe(kn(n.useExisting));else{let i=kn(n&&(n.useClass||n.provide));if(SH(n))r=()=>new i(...OC(n.deps));else return Vo(i)||LC(i)}return r}function nh(n){if(n.destroyed)throw new ne(205,!1)}function Ll(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function SH(n){return!!n.deps}function MH(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PH(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function VC(n,e){for(let t of n)Array.isArray(t)?VC(t,e):t&&GC(t)?VC(t.\u0275providers,e):e(t)}function pn(n,e){let t;n instanceof Ja?(nh(n),t=n):t=new UC(n);let r,i=Vs(t),s=rr(void 0);try{return e()}finally{Vs(i),rr(s)}}function aR(){return Qk()!==void 0||aC()!=null}var Ii=0,Se=1,Ee=2,wn=3,Zr=4,Xr=5,lh=6,Bl=7,$n=8,Xa=9,Zi=10,zt=11,jl=12,lE=13,ec=14,ei=15,zo=16,tc=17,Xi=18,uh=19,uE=20,zs=21,Vm=22,dh=23,Ur=24,Bm=25,Hn=26,cR=1;var Wo=7,hh=8,nc=9,sr=10;function es(n){return Array.isArray(n)&&typeof n[cR]=="object"}function Di(n){return Array.isArray(n)&&n[cR]===!0}function jm(n){return(n.flags&4)!==0}function qo(n){return n.componentOffset>-1}function fh(n){return(n.flags&1)===1}function ts(n){return!!n.template}function $l(n){return(n[Ee]&512)!==0}function rc(n){return(n[Ee]&256)===256}var dE="svg",lR="math";function ti(n){for(;Array.isArray(n);)n=n[Ii];return n}function hE(n,e){return ti(e[n])}function xi(n,e){return ti(e[n.index])}function $m(n,e){return n.data[e]}function Hm(n,e){return n[e]}function fE(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ni(n,e){let t=e[n];return es(t)?t:t[Ii]}function uR(n){return(n[Ee]&4)===4}function zm(n){return(n[Ee]&128)===128}function dR(n){return Di(n[wn])}function ic(n,e){return e==null?null:n[e]}function pE(n){n[tc]=0}function gE(n){n[Ee]&1024||(n[Ee]|=1024,zm(n)&&gh(n))}function hR(n,e){for(;n>0;)e=e[ec],n--;return e}function ph(n){return!!(n[Ee]&9216||n[Ur]?.dirty)}function Wm(n){n[Zi].changeDetectionScheduler?.notify(8),n[Ee]&64&&(n[Ee]|=1024),ph(n)&&gh(n)}function gh(n){n[Zi].changeDetectionScheduler?.notify(0);let e=Bo(n);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!zm(e)));)e=Bo(e)}function mE(n,e){if(rc(n))throw new ne(911,!1);n[zs]===null&&(n[zs]=[]),n[zs].push(e)}function fR(n,e){if(n[zs]===null)return;let t=n[zs].indexOf(e);t!==-1&&n[zs].splice(t,1)}function Bo(n){let e=n[wn];return Di(e)?e[wn]:e}function yE(n){return n[Bl]??=[]}function _E(n){return n.cleanup??=[]}function pR(n,e,t,r){let i=yE(e);i.push(t),n.firstCreatePass&&_E(n).push(r,i.length-1)}var Ae={lFrame:SR(null),bindingsEnabled:!0,skipHydrationRootTNode:null},mh=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(mh||{}),kH=0,BC=!1;function gR(){return Ae.lFrame.elementDepthCount}function mR(){Ae.lFrame.elementDepthCount++}function yR(){Ae.lFrame.elementDepthCount--}function qm(){return Ae.bindingsEnabled}function _R(){return Ae.skipHydrationRootTNode!==null}function vR(n){return Ae.skipHydrationRootTNode===n}function wR(){Ae.skipHydrationRootTNode=null}function He(){return Ae.lFrame.lView}function gn(){return Ae.lFrame.tView}function Y(n){return Ae.lFrame.contextLView=n,n[$n]}function J(n){return Ae.lFrame.contextLView=null,n}function or(){let n=vE();for(;n!==null&&n.type===64;)n=n.parent;return n}function vE(){return Ae.lFrame.currentTNode}function bR(){let n=Ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Go(n,e){let t=Ae.lFrame;t.currentTNode=n,t.isParent=e}function Gm(){return Ae.lFrame.isParent}function wE(){Ae.lFrame.isParent=!1}function CR(){return Ae.lFrame.contextLView}function bE(n){Yk("Must never be called in production mode"),kH=n}function CE(){return BC}function EE(n){let e=BC;return BC=n,e}function yh(){let n=Ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function IE(){return Ae.lFrame.bindingIndex}function ER(n){return Ae.lFrame.bindingIndex=n}function _h(){return Ae.lFrame.bindingIndex++}function Km(n){let e=Ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function IR(){return Ae.lFrame.inI18n}function DR(n,e){let t=Ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ym(e)}function xR(){return Ae.lFrame.currentDirectiveIndex}function Ym(n){Ae.lFrame.currentDirectiveIndex=n}function TR(n){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function DE(){return Ae.lFrame.currentQueryIndex}function Jm(n){Ae.lFrame.currentQueryIndex=n}function RH(n){let e=n[Se];return e.type===2?e.declTNode:e.type===1?n[Xr]:null}function xE(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=RH(s),i===null||(s=s[ec],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ae.lFrame=AR();return r.currentTNode=e,r.lView=n,!0}function Qm(n){let e=AR(),t=n[Se];Ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AR(){let n=Ae.lFrame,e=n===null?null:n.child;return e===null?SR(n):e}function SR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function MR(){let n=Ae.lFrame;return Ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var TE=MR;function Zm(){let n=MR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PR(n){return(Ae.lFrame.contextLView=hR(n,Ae.lFrame.contextLView))[$n]}function qs(){return Ae.lFrame.selectedIndex}function Ko(n){Ae.lFrame.selectedIndex=n}function Xm(){let n=Ae.lFrame;return $m(n.tView,n.selectedIndex)}function Me(){Ae.lFrame.currentNamespace=dE}function Rn(){FH()}function FH(){Ae.lFrame.currentNamespace=null}function kR(){return Ae.lFrame.currentNamespace}var RR=!0;function vh(){return RR}function wh(n){RR=n}function jC(n,e=null,t=null,r){let i=AE(n,e,t,r);return i.resolveInjectorInitializers(),i}function AE(n,e=null,t=null,r,i=new Set){let s=[t||Nr,Lm(n)];return r=r||(typeof n=="object"?void 0:yr(n)),new Ja(s,e||ch(),r||null,i)}var vt=class n{static THROW_IF_NOT_FOUND=Ga;static NULL=new ih;static create(e,t){if(Array.isArray(e))return jC({name:""},t,e,"");{let r=e.name??"";return jC({name:r},e.parent,e.providers,r)}}static \u0275prov=ce({token:n,providedIn:"any",factory:()=>oe(nE)});static __NG_ELEMENT_ID__=-1},en=new ee(""),Gs=(()=>{class n{static __NG_ELEMENT_ID__=NH;static __NG_ENV_ID__=t=>t}return n})(),$C=class extends Gs{_lView;constructor(e){super(),this._lView=e}get destroyed(){return rc(this._lView)}onDestroy(e){let t=this._lView;return mE(t,e),()=>fR(t,e)}};function NH(){return new $C(He())}var Ji=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vr=new ee("",{providedIn:"root",factory:()=>{let n=W(Zt),e;return t=>{e??=n.get(Ji),e.handleError(t)}}}),FR={provide:Ws,useValue:()=>void W(Ji),multi:!0},UH=new ee("",{providedIn:"root",factory:()=>{let n=W(en).defaultView;if(!n)return;let e=W(vr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{e(s.error),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),W(Gs).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function SE(){return fn([rR(()=>void W(UH))])}function ME(n){return typeof n=="function"&&n[jn]!==void 0}function Ks(n,e){let[t,r,i]=hC(n,e?.equal),s=t,o=s[jn];return s.set=r,s.update=i,s.asReadonly=NR.bind(s),s}function NR(){let n=this[jn];if(n.readonlyFn===void 0){let e=()=>this();e[jn]=n,n.readonlyFn=e}return n.readonlyFn}function PE(n){return ME(n)&&typeof n.set=="function"}var jo=class{},bh=new ee("",{providedIn:"root",factory:()=>!1});var kE=new ee(""),RE=new ee("");var Ys=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new dn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ye(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),Yo=(()=>{class n{internalPendingTasks=W(Ys);scheduler=W(jo);errorHandler=W(vr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ch(...n){}var FE=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new HC})}return n})(),HC=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Kl(n){return{toString:n}.toString()}var e0="__parameters__";function zH(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function dF(n,e,t){return Kl(()=>{let r=zH(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let h=c.hasOwnProperty(e0)?c[e0]:Object.defineProperty(c,e0,{value:[]})[e0];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Wt=eE(dF("Optional"),8);var hF=eE(dF("SkipSelf"),4);function WH(n){return typeof n=="function"}var o0=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function fF(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var is=(()=>{let n=()=>pF;return n.ngInherit=!0,n})();function pF(n){return n.type.prototype.ngOnChanges&&(n.setInput=GH),qH}function qH(){let n=mF(this),e=n?.current;if(e){let t=n.previous;if(t===$o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function GH(n,e,t,r,i){let s=this.declaredInputs[r],o=mF(n)||KH(n,{previous:$o,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new o0(l&&l.currentValue,t,c===$o),fF(n,e,i,t)}var gF="__ngSimpleChanges__";function mF(n){return n[gF]||null}function KH(n,e){return n[gF]=e}var UR=[];var ft=function(n,e=null,t){for(let r=0;r<UR.length;r++){let i=UR[r];i(n,e,t)}};function YH(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=pF(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function _I(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function n0(n,e,t){yF(n,e,3,t)}function r0(n,e,t,r){(n[Ee]&3)===t&&yF(n,e,t,r)}function NE(n,e){let t=n[Ee];(t&3)===e&&(t&=16383,t+=1,n[Ee]=t)}function yF(n,e,t,r){let i=r!==void 0?n[tc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[tc]+=65536),(a<s||s==-1)&&(JH(n,t,e,c),n[tc]=(n[tc]&4294901760)+c+2),c++}function OR(n,e){ft(4,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),ft(5,n,e)}}function JH(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ee]>>14<n[tc]>>16&&(n[Ee]&3)===e&&(n[Ee]+=16384,OR(a,s)):OR(a,s)}var zl=-1,ac=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function QH(n){return(n.flags&8)!==0}function ZH(n){return(n.flags&16)!==0}function XH(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];tz(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ez(n){return n===3||n===4||n===6}function tz(n){return n.charCodeAt(0)===64}function Wl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?LR(n,t,i,null,e[++r]):LR(n,t,i,null,null))}}return n}function LR(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function _F(n){return n!==zl}function a0(n){return n&32767}function nz(n){return n>>16}function c0(n,e){let t=nz(n),r=e;for(;t>0;)r=r[ec],t--;return r}var qE=!0;function l0(n){let e=qE;return qE=n,e}var rz=256,vF=rz-1,wF=5,iz=0,ns={};function sz(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Za)&&(r=t[Za]),r==null&&(r=t[Za]=iz++);let i=r&vF,s=1<<i;e.data[n+(i>>wF)]|=s}function u0(n,e){let t=bF(n,e);if(t!==-1)return t;let r=e[Se];r.firstCreatePass&&(n.injectorIndex=e.length,UE(r.data,n),UE(e,null),UE(r.blueprint,null));let i=vI(n,e),s=n.injectorIndex;if(_F(i)){let o=a0(i),a=c0(i,e),c=a[Se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function UE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function bF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function vI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=xF(i),r===null)return zl;if(t++,i=i[ec],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zl}function GE(n,e,t){sz(n,e,t)}function CF(n,e,t){if(t&8||n!==void 0)return n;Nm(e,"NodeInjector")}function EF(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Xa],s=rr(void 0);try{return i?i.get(e,r,t&8):XC(e,r,t&8)}finally{rr(s)}}return CF(r,e,t)}function IF(n,e,t,r=0,i){if(n!==null){if(e[Ee]&2048&&!(r&2)){let o=lz(n,e,t,r,ns);if(o!==ns)return o}let s=DF(n,e,t,r,ns);if(s!==ns)return s}return EF(e,t,r,i)}function DF(n,e,t,r,i){let s=az(t);if(typeof s=="function"){if(!xE(e,n,r))return r&1?CF(i,t,r):EF(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Nm(t);else return o}finally{TE()}}else if(typeof s=="number"){let o=null,a=bF(n,e),c=zl,l=r&1?e[ei][Xr]:null;for((a===-1||r&4)&&(c=a===-1?vI(n,e):e[a+8],c===zl||!BR(r,!1)?a=-1:(o=e[Se],a=a0(c),e=c0(c,e)));a!==-1;){let u=e[Se];if(VR(s,a,u.data)){let h=oz(a,e,t,o,r,l);if(h!==ns)return h}c=e[a+8],c!==zl&&BR(r,e[Se].data[a+8]===l)&&VR(s,a,e)?(o=u,a=a0(c),e=c0(c,e)):a=-1}}return i}function oz(n,e,t,r,i,s){let o=e[Se],a=o.data[n+8],c=r==null?qo(a)&&qE:r!=o&&(a.type&3)!==0,l=i&1&&s===a,u=i0(a,o,t,c,l);return u!==null?Dh(e,o,u,a):ns}function i0(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,h=r?a:a+u,f=i?a+u:l;for(let p=h;p<f;p++){let y=o[p];if(p<c&&t===y||p>=c&&y.type===t)return p}if(i){let p=o[c];if(p&&ts(p)&&p.type===t)return c}return null}function Dh(n,e,t,r){let i=n[t],s=e.data;if(i instanceof ac){let o=i;o.resolving&&ZC(Jk(s[t]));let a=l0(o.canSeeViewProviders);o.resolving=!0;let c=s[t].type||s[t],l,u=o.injectImpl?rr(o.injectImpl):null,h=xE(n,r,0);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&YH(t,s[t],e)}finally{u!==null&&rr(u),l0(a),o.resolving=!1,TE()}}return i}function az(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Za)?n[Za]:void 0;return typeof e=="number"?e>=0?e&vF:cz:e}function VR(n,e,t){let r=1<<n;return!!(t[e+(n>>wF)]&r)}function BR(n,e){return!(n&2)&&!(n&1&&e)}var oc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return IF(this._tNode,this._lView,e,Ka(r),t)}};function cz(){return new oc(or(),He())}function ss(n){return Kl(()=>{let e=n.prototype.constructor,t=e[rh]||KE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[rh]||KE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function KE(n){return WC(n)?()=>{let e=KE(kn(n));return e&&e()}:Vo(n)}function lz(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ee]&2048&&!$l(o);){let a=DF(s,o,t,r|2,ns);if(a!==ns)return a;let c=s.parent;if(!c){let l=o[uE];if(l){let u=l.get(t,ns,r);if(u!==ns)return u}c=xF(o),o=o[ec]}s=c}return i}function xF(n){let e=n[Se],t=e.type;return t===2?e.declTNode:t===1?n[Xr]:null}function uz(){return Yl(or(),He())}function Yl(n,e){return new Or(xi(n,e))}var Or=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=uz}return n})();function dz(n){return n instanceof Or?n.nativeElement:n}function hz(){return this._results[Symbol.iterator]()}var d0=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Rt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Xk(e);(this._changesDetected=!Zk(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=hz};function TF(n){return(n.flags&128)===128}var wI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wI||{}),AF=new Map,fz=0;function pz(){return fz++}function gz(n){AF.set(n[uh],n)}function YE(n){AF.delete(n[uh])}var jR="__ngContext__";function Jl(n,e){es(e)?(n[jR]=e[uh],gz(e)):n[jR]=e}function SF(n){return PF(n[jl])}function MF(n){return PF(n[Zr])}function PF(n){for(;n!==null&&!Di(n);)n=n[Zr];return n}var JE;function bI(n){JE=n}function kF(){if(JE!==void 0)return JE;if(typeof document<"u")return document;throw new ne(210,!1)}var C0=new ee("",{providedIn:"root",factory:()=>mz}),mz="ng",E0=new ee(""),Lr=new ee("",{providedIn:"platform",factory:()=>"unknown"});var I0=new ee("",{providedIn:"root",factory:()=>kF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yz="h",_z="b";var RF=!1,FF=new ee("",{providedIn:"root",factory:()=>RF});var vz=(n,e,t,r)=>{};function wz(n,e,t,r){vz(n,e,t,r)}var bz=()=>null;function NF(n,e,t=!1){return bz(n,e,t)}function UF(n,e){let t=n.contentQueries;if(t!==null){let r=Re(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Jm(s),a.contentQueries(2,e[o],o)}}}finally{Re(r)}}}function QE(n,e,t){Jm(0);let r=Re(null);try{e(n,t)}finally{Re(r)}}function CI(n,e,t){if(jm(e)){let r=Re(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Re(r)}}}var Js=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Js||{});var h0=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${km})`}};function EI(n){return n instanceof h0?n.changingThisBreaksApplicationSecurity:n}function OF(n,e){let t=LF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${km})`)}return t===e}function LF(n){return n instanceof h0&&n.getTypeName()||null}var Cz=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VF(n){return n=String(n),n.match(Cz)?n:"unsafe:"+n}var II=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(II||{});function dc(n){let e=Ez();return e?e.sanitize(II.URL,n)||"":OF(n,"URL")?EI(n):VF(Qi(n))}function Ez(){let n=He();return n&&n[Zi].sanitizer}var Iz=/^>|^->|<!--|-->|--!>|<!-$/g,Dz=/(<|>)/g,xz="\u200B$1\u200B";function Tz(n){return n.replace(Iz,e=>e.replace(Dz,xz))}function BF(n){return n instanceof Function?n():n}function Az(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var jF="ng-template";function Sz(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Az(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(DI(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function DI(n){return n.type===4&&n.value!==jF}function Mz(n,e,t){let r=n.type===4&&!t?jF:n.value;return e===r}function Pz(n,e,t){let r=4,i=n.attrs,s=i!==null?Fz(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ti(r)&&!Ti(c))return!1;if(o&&Ti(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Mz(n,c,t)||c===""&&e.length===1){if(Ti(r))return!1;o=!0}}else if(r&8){if(i===null||!Sz(n,i,c,t)){if(Ti(r))return!1;o=!0}}else{let l=e[++a],u=kz(c,i,DI(n),t);if(u===-1){if(Ti(r))return!1;o=!0;continue}if(l!==""){let h;if(u>s?h="":h=i[u+1].toLowerCase(),r&2&&l!==h){if(Ti(r))return!1;o=!0}}}}return Ti(r)||o}function Ti(n){return(n&1)===0}function kz(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Nz(e,n)}function Rz(n,e,t=!1){for(let r=0;r<e.length;r++)if(Pz(n,e[r],t))return!0;return!1}function Fz(n){for(let e=0;e<n.length;e++){let t=n[e];if(ez(t))return e}return n.length}function Nz(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $R(n,e){return n?":not("+e.trim()+")":e}function Uz(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ti(o)&&(e+=$R(s,i),i=""),r=o,s=s||!Ti(r);t++}return i!==""&&(e+=$R(s,i)),e}function Oz(n){return n.map(Uz).join(",")}function Lz(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Ti(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Vr={};function Vz(n,e){return n.createText(e)}function Bz(n,e,t){n.setValue(e,t)}function jz(n,e){return n.createComment(Tz(e))}function $F(n,e,t){return n.createElement(e,t)}function f0(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HF(n,e,t){n.appendChild(e,t)}function HR(n,e,t,r,i){r!==null?f0(n,e,t,r,i):HF(n,e,t)}function $z(n,e,t){n.removeChild(null,e,t)}function Hz(n,e,t){n.setAttribute(e,"style",t)}function zz(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zF(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&XH(n,e,r),i!==null&&zz(n,e,i),s!==null&&Hz(n,e,s)}function xI(n,e,t,r,i,s,o,a,c,l,u){let h=Hn+r,f=h+i,p=Wz(h,f),y=typeof l=="function"?l():l;return p[Se]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:u}}function Wz(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vr);return t}function qz(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=xI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function TI(n,e,t,r,i,s,o,a,c,l,u){let h=e.blueprint.slice();return h[Ii]=i,h[Ee]=r|4|128|8|64|1024,(l!==null||n&&n[Ee]&2048)&&(h[Ee]|=2048),pE(h),h[wn]=h[ec]=n,h[$n]=t,h[Zi]=o||n&&n[Zi],h[zt]=a||n&&n[zt],h[Xa]=c||n&&n[Xa]||null,h[Xr]=s,h[uh]=pz(),h[lh]=u,h[uE]=l,h[ei]=e.type==2?n[ei]:h,h}function Gz(n,e,t){let r=xi(e,n),i=qz(t),s=n[Zi].rendererFactory,o=AI(n,TI(n,i,null,WF(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function WF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function qF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function AI(n,e){return n[jl]?n[lE][Zr]=e:n[jl]=e,n[lE]=e,e}function E(n=1){GF(gn(),He(),qs()+n,!1)}function GF(n,e,t,r){if(!r)if((e[Ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&n0(e,s,t)}else{let s=n.preOrderHooks;s!==null&&r0(e,s,0,t)}Ko(t)}var D0=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(D0||{});function ZE(n,e,t,r){let i=Re(null);try{let[s,o,a]=n.inputs[t],c=null;(o&D0.SignalBased)!==0&&(c=e[s][jn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):fF(e,c,s,r)}finally{Re(i)}}function KF(n,e,t,r,i){let s=qs(),o=r&2;try{Ko(-1),o&&e.length>Hn&&GF(n,e,Hn,!1),ft(o?2:0,i,t),t(r,i)}finally{Ko(s),ft(o?3:1,i,t)}}function x0(n,e,t){e7(n,e,t),(t.flags&64)===64&&t7(n,e,t)}function SI(n,e,t=xi){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Kz(n,e,t,r){let s=r.get(FF,RF)||t===Js.ShadowDom,o=n.selectRootElement(e,s);return Yz(o),o}function Yz(n){Jz(n)}var Jz=()=>null;function Qz(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function YF(n,e,t,r,i,s){let o=e[Se];if(PI(n,o,e,t,r)){qo(n)&&Xz(e,n.index);return}Zz(n,e,t,r,i,s)}function Zz(n,e,t,r,i,s){if(n.type&3){let o=xi(n,e);t=Qz(t),r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Xz(n,e){let t=ni(e,n);t[Ee]&16||(t[Ee]|=64)}function e7(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qo(t)&&Gz(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||u0(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Dh(e,n,o,t);if(Jl(c,e),s!==null&&s7(e,o-r,c,a,t,s),ts(a)){let l=ni(t.index,e);l[$n]=Dh(e,n,o,t)}}}function t7(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=xR();try{Ko(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Ym(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&n7(c,l)}}finally{Ko(-1),Ym(o)}}function n7(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function MI(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];Rz(e,s.selectors,!1)&&(r??=[],ts(s)?r.unshift(s):r.push(s))}return r}function r7(n,e,t,r,i,s){let o=xi(n,e);i7(e[zt],o,s,n.value,t,r,i)}function i7(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Qi(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function s7(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];ZE(r,t,c,l)}}function o7(n,e){let t=n[Xa];if(!t)return;t.get(vr,null)?.(e)}function PI(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],h=e.data[l];ZE(h,t[l],u,i),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];ZE(u,l,r,i),a=!0}return a}function a7(n,e){let t=ni(e,n),r=t[Se];c7(r,t);let i=t[Ii];i!==null&&t[lh]===null&&(t[lh]=NF(i,t[Xa])),ft(18),kI(r,t,t[$n]),ft(19,t[$n])}function c7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function kI(n,e,t){Qm(e);try{let r=n.viewQuery;r!==null&&QE(1,r,t);let i=n.template;i!==null&&KF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xi]?.finishViewCreation(n),n.staticContentQueries&&UF(n,e),n.staticViewQueries&&QE(2,n.viewQuery,t);let s=n.components;s!==null&&l7(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ee]&=-5,Zm()}}function l7(n,e){for(let t=0;t<e.length;t++)a7(n,e[t])}function u7(n,e,t,r){let i=Re(null);try{let s=e.tView,a=n[Ee]&4096?4096:16,c=TI(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[zo]=l;let u=n[Xi];return u!==null&&(c[Xi]=u.createEmbeddedView(s)),kI(s,c,t),c}finally{Re(i)}}function zR(n,e){return!e||e.firstChild===null||TF(n)}var WR=!1,d7=new ee(""),h7;function RI(n,e){return h7(n,e)}var rs=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(rs||{});function FI(n){return(n.flags&32)===32}function Hl(n,e,t,r,i){if(r!=null){let s,o=!1;Di(r)?s=r:es(r)&&(o=!0,r=r[Ii]);let a=ti(r);n===0&&t!==null?i==null?HF(e,t,a):f0(e,t,a,i||null,!0):n===1&&t!==null?f0(e,t,a,i||null,!0):n===2?$z(e,a,o):n===3&&e.destroyNode(a),s!=null&&I7(e,n,s,t,i)}}function f7(n,e){JF(n,e),e[Ii]=null,e[Xr]=null}function p7(n,e,t,r,i,s){r[Ii]=i,r[Xr]=e,A0(n,r,t,1,i,s)}function JF(n,e){e[Zi].changeDetectionScheduler?.notify(9),A0(n,e,e[zt],2,null,null)}function g7(n){let e=n[jl];if(!e)return OE(n[Se],n);for(;e;){let t=null;if(es(e))t=e[jl];else{let r=e[sr];r&&(t=r)}if(!t){for(;e&&!e[Zr]&&e!==n;)es(e)&&OE(e[Se],e),e=e[wn];e===null&&(e=n),es(e)&&OE(e[Se],e),t=e&&e[Zr]}e=t}}function NI(n,e){let t=n[nc],r=t.indexOf(e);t.splice(r,1)}function QF(n,e){if(rc(e))return;let t=e[zt];t.destroyNode&&A0(n,e,t,3,null,null),g7(e)}function OE(n,e){if(rc(e))return;let t=Re(null);try{e[Ee]&=-129,e[Ee]|=256,e[Ur]&&Qg(e[Ur]),y7(n,e),m7(n,e),e[Se].type===1&&e[zt].destroy();let r=e[zo];if(r!==null&&Di(e[wn])){r!==e[wn]&&NI(r,e);let i=e[Xi];i!==null&&i.detachView(n)}YE(e)}finally{Re(t)}}function m7(n,e){let t=n.cleanup,r=e[Bl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Bl]=null);let i=e[zs];if(i!==null){e[zs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[dh];if(s!==null){e[dh]=null;for(let o of s)o.destroy()}}function y7(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ac)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ft(4,a,c);try{c.call(a)}finally{ft(5,a,c)}}else{ft(4,i,s);try{s.call(i)}finally{ft(5,i,s)}}}}}function _7(n,e,t){return v7(n,e.parent,t)}function v7(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ii];if(qo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Js.None||i===Js.Emulated)return null}return xi(r,t)}function w7(n,e,t){return C7(n,e,t)}function b7(n,e,t){return n.type&40?xi(n,t):null}var C7=b7,qR;function T0(n,e,t,r){let i=_7(n,r,e),s=e[zt],o=r.parent||e[Xr],a=w7(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)HR(s,i,t[c],a,!1);else HR(s,i,t,a,!1);qR!==void 0&&qR(s,r,e,t,i)}function Eh(n,e){if(e!==null){let t=e.type;if(t&3)return xi(e,n);if(t&4)return XE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Eh(n,r);{let i=n[e.index];return Di(i)?XE(-1,i):ti(i)}}else{if(t&128)return Eh(n,e.next);if(t&32)return RI(e,n)()||ti(n[e.index]);{let r=ZF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Bo(n[ei]);return Eh(i,r)}else return Eh(n,e.next)}}}return null}function ZF(n,e){if(e!==null){let r=n[ei][Xr],i=e.projection;return r.projection[i]}return null}function XE(n,e){let t=sr+n+1;if(t<e.length){let r=e[t],i=r[Se].firstChild;if(i!==null)return Eh(r,i)}return e[Wo]}function UI(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Jl(ti(a),r),t.flags|=2),!FI(t))if(c&8)UI(n,e,t.child,r,i,s,!1),Hl(e,n,i,a,s);else if(c&32){let l=RI(t,r),u;for(;u=l();)Hl(e,n,i,u,s);Hl(e,n,i,a,s)}else c&16?E7(n,e,r,t,i,s):Hl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function A0(n,e,t,r,i,s){UI(t,r,n.firstChild,e,i,s,!1)}function E7(n,e,t,r,i,s){let o=t[ei],c=o[Xr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Hl(e,n,i,u,s)}else{let l=c,u=o[wn];TF(r)&&(l.flags|=128),UI(n,e,l,u,i,s,!0)}}function I7(n,e,t,r,i){let s=t[Wo],o=ti(t);s!==o&&Hl(e,n,r,s,i);for(let a=sr;a<t.length;a++){let c=t[a];A0(c[Se],c,n,e,r,s)}}function D7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:rs.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=rs.Important),n.setStyle(t,r,i,s))}}function xh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ti(s)),Di(s)&&XF(s,r);let o=t.type;if(o&8)xh(n,e,t.child,r);else if(o&32){let a=RI(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ZF(e,t);if(Array.isArray(a))r.push(...a);else{let c=Bo(e[ei]);xh(c[Se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function XF(n,e){for(let t=sr;t<n.length;t++){let r=n[t],i=r[Se].firstChild;i!==null&&xh(r[Se],r,i,e)}n[Wo]!==n[Ii]&&e.push(n[Wo])}function eN(n){if(n[Bm]!==null){for(let e of n[Bm])e.impl.addSequence(e);n[Bm].length=0}}var tN=[];function x7(n){return n[Ur]??T7(n)}function T7(n){let e=tN.pop()??Object.create(S7);return e.lView=n,e}function A7(n){n.lView[Ur]!==n&&(n.lView=null,tN.push(n))}var S7=ue(H({},Ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{gh(n.lView)},consumerOnSignalRead(){this.lView[Ur]=this}});function M7(n){let e=n[Ur]??Object.create(P7);return e.lView=n,e}var P7=ue(H({},Ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Bo(n.lView);for(;e&&!nN(e[Se]);)e=Bo(e);e&&gE(e)},consumerOnSignalRead(){this.lView[Ur]=this}});function nN(n){return n.type!==2}function rN(n){if(n[dh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[dh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ee]&8192)}}var k7=100;function OI(n,e=0){let r=n[Zi].rendererFactory,i=!1;i||r.begin?.();try{R7(n,e)}finally{i||r.end?.()}}function R7(n,e){let t=CE();try{EE(!0),eI(n,e);let r=0;for(;ph(n);){if(r===k7)throw new ne(103,!1);r++,eI(n,1)}}finally{EE(t)}}function iN(n,e){bE(e?mh.Exhaustive:mh.OnlyDirtyViews);try{OI(n)}finally{bE(mh.Off)}}function F7(n,e,t,r){if(rc(e))return;let i=e[Ee],s=!1,o=!1;Qm(e);let a=!0,c=null,l=null;s||(nN(n)?(l=x7(e),c=ja(l)):Yg()===null?(a=!1,l=M7(e),c=ja(l)):e[Ur]&&(Qg(e[Ur]),e[Ur]=null));try{pE(e),ER(n.bindingStartIndex),t!==null&&KF(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&n0(e,p,null)}else{let p=n.preOrderHooks;p!==null&&r0(e,p,0,null),NE(e,0)}if(o||N7(e),rN(e),sN(e,0),n.contentQueries!==null&&UF(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&n0(e,p)}else{let p=n.contentHooks;p!==null&&r0(e,p,1),NE(e,1)}O7(n,e);let h=n.components;h!==null&&aN(e,h,0);let f=n.viewQuery;if(f!==null&&QE(2,f,r),!s)if(u){let p=n.viewCheckHooks;p!==null&&n0(e,p)}else{let p=n.viewHooks;p!==null&&r0(e,p,2),NE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vm]){for(let p of e[Vm])p();e[Vm]=null}s||(eN(e),e[Ee]&=-73)}catch(u){throw s||gh(e),u}finally{l!==null&&(El(l,c),a&&A7(l)),Zm()}}function sN(n,e){for(let t=SF(n);t!==null;t=MF(t))for(let r=sr;r<t.length;r++){let i=t[r];oN(i,e)}}function N7(n){for(let e=SF(n);e!==null;e=MF(e)){if(!(e[Ee]&2))continue;let t=e[nc];for(let r=0;r<t.length;r++){let i=t[r];gE(i)}}}function U7(n,e,t){ft(18);let r=ni(e,n);oN(r,t),ft(19,r[$n])}function oN(n,e){zm(n)&&eI(n,e)}function eI(n,e){let r=n[Se],i=n[Ee],s=n[Ur],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Kd(s)),o||=!1,s&&(s.dirty=!1),n[Ee]&=-9217,o)F7(r,n,r.template,n[$n]);else if(i&8192){let a=Re(null);try{rN(n),sN(n,1);let c=r.components;c!==null&&aN(n,c,1),eN(n)}finally{Re(a)}}}function aN(n,e,t){for(let r=0;r<e.length;r++)U7(n,e[r],t)}function O7(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ko(~i);else{let s=i,o=t[++r],a=t[++r];DR(o,s);let c=e[s];ft(24,c),a(2,c),ft(25,c)}}}finally{Ko(-1)}}function LI(n,e){let t=CE()?64:1088;for(n[Zi].changeDetectionScheduler?.notify(e);n;){n[Ee]|=t;let r=Bo(n);if($l(n)&&!r)return n;n=r}return null}function cN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function L7(n,e,t,r=!0){let i=e[Se];if(V7(i,e,n,t),r){let o=XE(t,n),a=e[zt],c=a.parentNode(n[Wo]);c!==null&&p7(i,n[Xr],a,e,c,o)}let s=e[lh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function tI(n,e){if(n.length<=sr)return;let t=sr+e,r=n[t];if(r){let i=r[zo];i!==null&&i!==n&&NI(i,r),e>0&&(n[t-1][Zr]=r[Zr]);let s=oh(n,sr+e);f7(r[Se],r);let o=s[Xi];o!==null&&o.detachView(s[Se]),r[wn]=null,r[Zr]=null,r[Ee]&=-129}return r}function V7(n,e,t,r){let i=sr+r,s=t.length;r>0&&(t[i-1][Zr]=e),r<s-sr?(e[Zr]=t[i],tE(t,sr+r,e)):(t.push(e),e[Zr]=null),e[wn]=t;let o=e[zo];o!==null&&t!==o&&lN(o,e);let a=e[Xi];a!==null&&a.insertView(n),Wm(e),e[Ee]|=128}function lN(n,e){let t=n[nc],r=e[wn];if(es(r))n[Ee]|=2;else{let i=r[wn][ei];e[ei]!==i&&(n[Ee]|=2)}t===null?n[nc]=[e]:t.push(e)}var Jo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Se];return xh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$n]}set context(e){this._lView[$n]=e}get destroyed(){return rc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wn];if(Di(e)){let t=e[hh],r=t?t.indexOf(this):-1;r>-1&&(tI(e,r),oh(t,r))}this._attachedToViewContainer=!1}QF(this._lView[Se],this._lView)}onDestroy(e){mE(this._lView,e)}markForCheck(){LI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){Wm(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,OI(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Xa].get(d7,WR)}catch{this.exhaustive=WR}}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$l(this._lView),t=this._lView[zo];t!==null&&!e&&NI(t,this._lView),JF(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;let t=$l(this._lView),r=this._lView[zo];r!==null&&!t&&lN(r,this._lView),Wm(this._lView)}};var Qo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=B7;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=u7(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Jo(s)}}return n})();function B7(){return S0(or(),He())}function S0(n,e){return n.type&4?new Qo(e,n,Yl(n,e)):null}function M0(n,e,t,r,i){let s=n.data[e];if(s===null)s=j7(n,e,t,r,i),IR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=bR();s.injectorIndex=o===null?-1:o.injectorIndex}return Go(s,!0),s}function j7(n,e,t,r,i){let s=vE(),o=Gm(),a=o?s:s&&s.parent,c=n.data[e]=H7(n,a,t,e,r,i);return $7(n,c,s,o),c}function $7(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function H7(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return _R()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var LCe=new RegExp(`^(\\d+)*(${_z}|${yz})*(.*)`);var z7=()=>null;function GR(n,e){return z7(n,e)}var uN=class{},P0=class{},nI=class{resolveComponentFactory(e){throw new ne(917,!1)}},hc=class{static NULL=new nI},cc=class{},Zo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>W7()}return n})();function W7(){let n=He(),e=or(),t=ni(e.index,n);return(es(t)?t:n)[zt]}var dN=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>null})}return n})();var s0={},rI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,s0,r);return i!==s0||t===s0?i:this.parentInjector.get(e,t,r)}};function iI(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zC(i,a);else if(s==2){let c=a,l=e[++o];r=zC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function X(n,e=0){let t=He();if(t===null)return oe(n,e);let r=or();return IF(r,t,kn(n),e)}function VI(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}K7(n,e,t,a,s,c,l)}s!==null&&r!==null&&q7(t,r,s)}function q7(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ne(-301,!1);r.push(e[i],s)}}function G7(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function K7(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let f=0;f<a;f++){let p=r[f];!c&&ts(p)&&(c=!0,G7(n,t,f)),GE(u0(t,e),n,p.type)}eW(t,n.data.length,a);for(let f=0;f<a;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,h=qF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let p=r[f];if(t.mergedAttrs=Wl(t.mergedAttrs,p.hostAttrs),J7(n,t,e,h,p),X7(h,p,i),o!==null&&o.has(p)){let[w,b]=o.get(p);t.directiveToIndex.set(p.type,[h,w+t.directiveStart,b+t.directiveStart])}else(s===null||!s.has(p))&&t.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let y=p.type.prototype;!l&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}Y7(n,t,s)}function Y7(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))KR(0,e,i,r),KR(1,e,i,r),JR(e,r,!1);else{let s=t.get(i);YR(0,e,s,r),YR(1,e,s,r),JR(e,r,!0)}}}function KR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),hN(e,s)}}function YR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),hN(e,o)}}function hN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function JR(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||DI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function J7(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Vo(i.type,!0)),o=new ac(s,ts(i),X);n.blueprint[r]=o,t[r]=o,Q7(n,e,r,qF(n,t,i.hostVars,Vr),i)}function Q7(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Z7(o)!=a&&o.push(a),o.push(t,r,s)}}function Z7(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function X7(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ts(e)&&(t[""]=n)}}function eW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fN(n,e,t,r,i,s,o,a){let c=e.consts,l=ic(c,o),u=M0(e,n,2,r,l);return s&&VI(e,t,u,ic(c,a),i),u.mergedAttrs=Wl(u.mergedAttrs,u.attrs),u.attrs!==null&&iI(u,u.attrs,!1),u.mergedAttrs!==null&&iI(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function pN(n,e){_I(n,e),jm(e)&&n.queries.elementEnd(e)}function BI(n){return mN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function jI(n,e,t){return n[e]=t}function Qs(n,e,t){if(t===Vr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $I(n,e,t,r){let i=Qs(n,e,t);return Qs(n,e+1,r)||i}function yN(n,e,t,r,i){let s=$I(n,e,t,r);return Qs(n,e+2,i)||s}function LE(n,e,t){return function r(i){let s=qo(n)?ni(n.index,e):e;LI(s,5);let o=e[$n],a=QR(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=QR(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function QR(n,e,t,r){let i=Re(null);try{return ft(6,e,t),t(r)!==!1}catch(s){return o7(n,s),!1}finally{ft(7,e,t),Re(i)}}function tW(n,e,t,r,i,s,o,a){let c=fh(n),l=!1,u=null;if(!r&&c&&(u=nW(e,t,s,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let h=xi(n,t),f=r?r(h):h;wz(t,f,s,a);let p=i.listen(f,s,a),y=r?w=>r(ti(w[n.index])):n.index;_N(y,e,t,s,a,p,!1)}return l}function nW(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Bl],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function _N(n,e,t,r,i,s,o){let a=e.firstCreatePass?_E(e):null,c=yE(t),l=c.length;c.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function ZR(n,e,t,r,i,s){let o=e[t],a=e[Se],l=a.data[t].outputs[r],h=o[l].subscribe(s);_N(n.index,a,e,i,s,h,!0)}var sI=Symbol("BINDING");var p0=class extends hc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ho(e);return new ql(t,this.ngModule)}};function rW(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&D0.SignalBased)!==0};return i&&(s.transform=i),s})}function iW(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function sW(n,e,t){let r=e instanceof Zt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new rI(t,r):t}function oW(n){let e=n.get(cc,null);if(e===null)throw new ne(407,!1);let t=n.get(dN,null),r=n.get(jo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function aW(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return $F(e,t,t==="svg"?dE:t==="math"?lR:null)}var ql=class extends P0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=rW(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=iW(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Oz(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ft(22);let a=Re(null);try{let c=this.componentDef,l=cW(r,c,o,s),u=sW(c,i||this.ngModule,e),h=oW(u),f=h.rendererFactory.createRenderer(null,c),p=r?Kz(f,r,c.encapsulation,u):aW(c,f),y=o?.some(XR)||s?.some(A=>typeof A!="function"&&A.bindings.some(XR)),w=TI(null,l,null,512|WF(c),null,null,h,f,u,null,NF(p,u,!0));w[Hn]=p,Qm(w);let b=null;try{let A=fN(Hn,l,w,"#host",()=>l.directiveRegistry,!0,0);p&&(zF(f,p,A),Jl(p,w)),x0(l,w,A),CI(l,A,w),pN(l,A),t!==void 0&&uW(A,this.ngContentSelectors,t),b=ni(A.index,w),w[$n]=b[$n],kI(l,w,null)}catch(A){throw b!==null&&YE(b),YE(w),A}finally{ft(23),Zm()}return new g0(this.componentType,w,!!y)}finally{Re(a)}}};function cW(n,e,t,r){let i=n?["ng-version","20.0.3"]:Lz(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[sI].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let f of h.bindings){a+=f[sI].requiredVars;let p=u+1;f.create&&(f.targetIdx=p,(s??=[]).push(f)),f.update&&(f.targetIdx=p,(o??=[]).push(f))}}let c=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,f=sE(h);c.push(f)}return xI(0,null,lW(s,o),1,a,c,null,null,null,[i],null)}function lW(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function XR(n){let e=n[sI].kind;return e==="input"||e==="twoWay"}var g0=class extends uN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=$m(t[Se],Hn),this.location=Yl(this._tNode,t),this.instance=ni(this._tNode.index,t)[$n],this.hostView=this.changeDetectorRef=new Jo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=PI(r,i[Se],i,e,t);this.previousInputValues.set(e,t);let o=ni(r.index,i);LI(o,1)}get injector(){return new oc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uW(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ai=(()=>{class n{static __NG_ELEMENT_ID__=dW}return n})();function dW(){let n=or();return wN(n,He())}var hW=Ai,vN=class extends hW{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yl(this._hostTNode,this._hostLView)}get injector(){return new oc(this._hostTNode,this._hostLView)}get parentInjector(){let e=vI(this._hostTNode,this._hostLView);if(_F(e)){let t=c0(e,this._hostLView),r=a0(e),i=t[Se].data[r+8];return new oc(i,t)}else return new oc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=eF(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=GR(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,zR(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!WH(e),l;if(c)l=t;else{let b=t||{};l=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef,o=b.directives,a=b.bindings}let u=c?e:new ql(Ho(e)),h=r||this.parentInjector;if(!s&&u.ngModule==null){let A=(c?h:this.parentInjector).get(Zt,null);A&&(s=A)}let f=Ho(u.componentType??{}),p=GR(this._lContainer,f?.id??null),y=p?.firstChild??null,w=u.create(h,i,y,s,o,a);return this.insertImpl(w.hostView,l,zR(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[wn],l=new vN(c,c[Xr],c[wn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return L7(o,i,s,r),e.attachToViewContainerRef(),tE(VE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=eF(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=tI(this._lContainer,t);r&&(oh(VE(this._lContainer),t),QF(r[Se],r))}detach(e){let t=this._adjustIndex(e,-1),r=tI(this._lContainer,t);return r&&oh(VE(this._lContainer),t)!=null?new Jo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eF(n){return n[hh]}function VE(n){return n[hh]||(n[hh]=[])}function wN(n,e){let t,r=e[n.index];return Di(r)?t=r:(t=cN(r,e,null,n),e[n.index]=t,AI(e,t)),pW(t,e,n,r),new vN(t,n,e)}function fW(n,e){let t=n[zt],r=t.createComment(""),i=xi(e,n),s=t.parentNode(i);return f0(t,s,r,t.nextSibling(i),!1),r}var pW=yW,gW=()=>!1;function mW(n,e,t){return gW(n,e,t)}function yW(n,e,t,r){if(n[Wo])return;let i;t.type&8?i=ti(r):i=fW(e,t),n[Wo]=i}var oI=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},aI=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)HI(e,t).matches!==null&&this.queries[t].setDirty()}},cI=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=DW(e):this.predicate=e}},lI=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},uI=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,_W(t,s)),this.matchTNodeWithReadOption(e,t,i0(t,e,s,!1,!1))}else r===Qo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,i0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Or||i===Ai||i===Qo&&t.type&4)this.addMatch(t.index,-2);else{let s=i0(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function _W(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function vW(n,e){return n.type&11?Yl(n,e):n.type&4?S0(n,e):null}function wW(n,e,t,r){return t===-1?vW(e,n):t===-2?bW(n,e,r):Dh(n,n[Se],t,e)}function bW(n,e,t){if(t===Or)return Yl(e,n);if(t===Qo)return S0(e,n);if(t===Ai)return wN(e,n)}function bN(n,e,t,r){let i=e[Xi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(wW(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function dI(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=bN(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let h=sr;h<u.length;h++){let f=u[h];f[zo]===f[wn]&&dI(f[Se],f,l,r)}if(u[nc]!==null){let h=u[nc];for(let f=0;f<h.length;f++){let p=h[f];dI(p[Se],p,l,r)}}}}}return r}function CW(n,e){return n[Xi].queries[e].queryList}function EW(n,e,t){let r=new d0((t&4)===4);return pR(n,e,r,r.destroy),(e[Xi]??=new aI).queries.push(new oI(r))-1}function IW(n,e,t){let r=gn();return r.firstCreatePass&&(xW(r,new cI(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),EW(r,He(),e)}function DW(n){return n.split(",").map(e=>e.trim())}function xW(n,e,t){n.queries===null&&(n.queries=new lI),n.queries.track(new uI(e,t))}function HI(n,e){return n.queries.getByIndex(e)}function TW(n,e){let t=n[Se],r=HI(t,e);return r.crossesNgTemplate?dI(t,n,e,[]):bN(t,n,r,e)}var tF=new Set;function k0(n){tF.has(n)||(tF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lc=class{},R0=class{};var m0=class extends lc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new p0(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=iE(e);this._bootstrapComponents=BF(s.bootstrap),this._r3Injector=AE(e,t,[{provide:lc,useValue:this},{provide:hc,useValue:this.componentFactoryResolver},...r],yr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},y0=class extends R0{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new m0(this.moduleType,e,[])}};var Th=class extends lc{injector;componentFactoryResolver=new p0(this);instance=null;constructor(e){super();let t=new Ja([...e.providers,{provide:lc,useValue:this},{provide:hc,useValue:this.componentFactoryResolver}],e.parent||ch(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sh(n,e,t=null){return new Th({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var AW=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=oE(!1,t.type),i=r.length>0?Sh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ce({token:n,providedIn:"environment",factory:()=>new n(oe(Zt))})}return n})();function Ve(n){return Kl(()=>{let e=CN(n),t=ue(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(AW).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Js.Emulated,styles:n.styles||Nr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&k0("NgStandalone"),EN(t);let r=n.dependencies;return t.directiveDefs=nF(r,!1),t.pipeDefs=nF(r,!0),t.id=RW(t),t})}function SW(n){return Ho(n)||sE(n)}function MW(n){return n!==null}function wr(n){return Kl(()=>({type:n.type,bootstrap:n.bootstrap||Nr,declarations:n.declarations||Nr,imports:n.imports||Nr,exports:n.exports||Nr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PW(n,e){if(n==null)return $o;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=D0.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function kW(n){if(n==null)return $o;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Et(n){return Kl(()=>{let e=CN(n);return EN(e),e})}function Mh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function CN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Nr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:PW(n.inputs,e),outputs:kW(n.outputs),debugInfo:null}}function EN(n){n.features?.forEach(e=>e(n))}function nF(n,e){if(!n)return null;let t=e?nR:SW;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(MW)}function RW(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function FW(n){return Object.getPrototypeOf(n.prototype).constructor}function br(n){let e=FW(n.type),t=!0,r=[n];for(;e;){let i;if(ts(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=BE(n.inputs),o.declaredInputs=BE(n.declaredInputs),o.outputs=BE(n.outputs);let a=i.hostBindings;a&&VW(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&OW(n,c),l&&LW(n,l),NW(n,i),Kk(n.outputs,i.outputs),ts(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===br&&(t=!1)}}e=Object.getPrototypeOf(e)}UW(r)}function NW(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function UW(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wl(i.hostAttrs,t=Wl(t,i.hostAttrs))}}function BE(n){return n===$o?{}:n===Nr?[]:n}function OW(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function LW(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function VW(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function BW(n,e,t,r,i,s,o,a,c){let l=e.consts,u=M0(e,n,4,o||null,a||null);qm()&&VI(e,t,u,ic(l,c),MI),u.mergedAttrs=Wl(u.mergedAttrs,u.attrs),_I(e,u);let h=u.tView=xI(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function jW(n,e,t,r,i,s,o,a,c,l,u){let h=t+Hn,f=e.firstCreatePass?BW(h,e,n,r,i,s,o,a,l):e.data[h];c&&(f.flags|=c),Go(f,!1);let p=$W(e,n,f,t);vh()&&T0(e,n,p,f),Jl(p,n);let y=cN(p,n,p,f);return n[h]=y,AI(n,y),mW(y,f,n),fh(f)&&x0(e,n,f),l!=null&&SI(n,f,u),f}function G(n,e,t,r,i,s,o,a){let c=He(),l=gn(),u=ic(l.consts,s);return jW(c,l,n,e,t,r,i,u,void 0,o,a),G}var $W=HW;function HW(n,e,t,r){return wh(!0),e[zt].createComment("")}var zI=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(zI||{}),Ph=new ee(""),IN=!1,hI=class extends Rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aR()&&(this.destroyRef=W(Gs,{optional:!0})??void 0,this.pendingTasks=W(Ys,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof $t&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},xt=hI;function DN(n){let e,t;function r(){n=Ch;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rF(n){return queueMicrotask(()=>n()),()=>{n=Ch}}var WI="isAngularZone",_0=WI+"_ID",zW=0,Le=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new xt(!1);onMicrotaskEmpty=new xt(!1);onStable=new xt(!1);onError=new xt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=IN}=e;if(typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,GW(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(WI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ne(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,WW,Ch,Ch);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},WW={};function qI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function qW(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){DN(()=>{n.callbackScheduled=!1,fI(n),n.isCheckStableRunning=!0,qI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),fI(n)}function GW(n){let e=()=>{qW(n)},t=zW++;n._inner=n._inner.fork({name:"angular",properties:{[WI]:!0,[_0]:t,[_0+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(KW(c))return r.invokeTask(s,o,a,c);try{return iF(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sF(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return iF(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!YW(c)&&e(),sF(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,fI(n),qI(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function fI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sF(n){n._nesting--,qI(n)}var v0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new xt;onMicrotaskEmpty=new xt;onStable=new xt;onError=new xt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function KW(n){return xN(n,"__ignore_ng_zone__")}function YW(n){return xN(n,"__scheduler_tick__")}function xN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var TN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();var GI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KI=new ee("");function Xo(n){return!!n&&typeof n.then=="function"}function YI(n){return!!n&&typeof n.subscribe=="function"}var AN=new ee("");var JI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=W(AN,{optional:!0})??[];injector=W(vt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=pn(this.injector,i);if(Xo(s))t.push(s);else if(YI(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),F0=new ee("");function SN(){dC(()=>{let n="";throw new ne(600,n)})}function MN(n){return n.isBoundToModule}var JW=10;var fc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=W(vr);afterRenderManager=W(TN);zonelessEnabled=W(bh);rootEffectScheduler=W(FE);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Rt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=W(Ys);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(t=>!t))}constructor(){W(Ph,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=W(Zt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=vt.NULL){return this._injector.get(Le).run(()=>{ft(10);let o=t instanceof P0;if(!this._injector.get(JI).done){let y="";throw new ne(405,y)}let c;o?c=t:c=this._injector.get(hc).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=MN(c)?void 0:this._injector.get(lc),u=r||c.selector,h=c.create(i,[],u,l),f=h.location.nativeElement,p=h.injector.get(KI,null);return p?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Ih(this.components,h),p?.unregisterApplication(f)}),this._loadComponent(h),ft(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ft(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(zI.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ne(101,!1);let t=Re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Re(t),this.afterTick.next(),ft(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(cc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<JW;)ft(14),this.synchronizeOnce(),ft(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ph(i))continue;let s=r&&!this.zonelessEnabled?0:1;OI(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ph(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ih(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(F0,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ih(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ih(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kh(n,e,t,r){let i=He(),s=_h();if(Qs(i,s,e)){let o=gn(),a=Xm();r7(a,i,n,e,t,r)}return kh}function F(n,e,t){let r=He(),i=_h();if(Qs(r,i,e)){let s=gn(),o=Xm();YF(o,r,n,e,r[zt],t)}return F}function oF(n,e,t,r,i){PI(e,n,t,i?"class":"style",r)}function m(n,e,t,r){let i=He(),s=gn(),o=Hn+n,a=i[zt],c=s.firstCreatePass?fN(o,s,i,e,MI,qm(),t,r):s.data[o],l=QW(s,i,c,a,e,n);i[o]=l;let u=fh(c);return Go(c,!0),zF(a,l,c),!FI(c)&&vh()&&T0(s,i,l,c),(gR()===0||u)&&Jl(l,i),mR(),u&&(x0(s,i,c),CI(s,c,i)),r!==null&&SI(i,c),m}function _(){let n=or();Gm()?wE():(n=n.parent,Go(n,!1));let e=n;vR(e)&&wR(),yR();let t=gn();return t.firstCreatePass&&pN(t,e),e.classesWithoutHost!=null&&QH(e)&&oF(t,e,He(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZH(e)&&oF(t,e,He(),e.stylesWithoutHost,!1),_}function re(n,e,t,r){return m(n,e,t,r),_(),re}var QW=(n,e,t,r,i,s)=>(wh(!0),$F(r,i,kR()));function ZW(n,e,t,r,i){let s=e.consts,o=ic(s,r),a=M0(e,n,8,"ng-container",o);o!==null&&iI(a,o,!0);let c=ic(s,i);return qm()&&VI(e,t,a,c,MI),a.mergedAttrs=Wl(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function ri(n,e,t){let r=He(),i=gn(),s=n+Hn,o=i.firstCreatePass?ZW(s,i,r,e,t):i.data[s];Go(o,!0);let a=XW(i,r,o,n);return r[s]=a,vh()&&T0(i,r,a,o),Jl(a,r),fh(o)&&(x0(i,r,o),CI(i,o,r)),t!=null&&SI(r,o),ri}function ii(){let n=or(),e=gn();return Gm()?wE():(n=n.parent,Go(n,!1)),e.firstCreatePass&&(_I(e,n),jm(n)&&e.queries.elementEnd(n)),ii}function N0(n,e,t){return ri(n,e,t),ii(),N0}var XW=(n,e,t,r)=>(wh(!0),jz(e[zt],""));function ae(){return He()}var sc=void 0;function eq(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var tq=["en",[["a","p"],["AM","PM"],sc],[["AM","PM"],sc,sc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sc,"{1} 'at' {0}",sc],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eq],jE={};function Cr(n){let e=nq(n),t=aF(e);if(t)return t;let r=e.split("-")[0];if(t=aF(r),t)return t;if(r==="en")return tq;throw new ne(701,!1)}function aF(n){return n in jE||(jE[n]=Qa.ng&&Qa.ng.common&&Qa.ng.common.locales&&Qa.ng.common.locales[n]),jE[n]}var qt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(qt||{});function nq(n){return n.toLowerCase().replace(/_/g,"-")}var Rh="en-US";var rq=Rh;function PN(n){typeof n=="string"&&(rq=n.toLowerCase().replace(/_/g,"-"))}function K(n,e,t){let r=He(),i=gn(),s=or();return kN(i,r,r[zt],s,n,e,t),K}function kN(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=LE(r,e,s),tW(r,n,e,o,t,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let f=u[h],p=u[h+1];c??=LE(r,e,s),ZR(r,e,f,p,i,c)}if(l&&l.length)for(let h of l)c??=LE(r,e,s),ZR(r,e,h,i,i,c)}}function O(n=1){return PR(n)}function Fh(n,e,t){IW(n,e,t)}function Nh(n){let e=He(),t=gn(),r=DE();Jm(r+1);let i=HI(t,r);if(n.dirty&&uR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=TW(e,r);n.reset(s,dz),n.notifyOnChanges()}return!0}return!1}function Uh(){return CW(He(),DE())}function os(n){let e=CR();return Hm(e,Hn+n)}function t0(n,e){return n<<17|e<<2}function uc(n){return n>>17&32767}function iq(n){return(n&2)==2}function sq(n,e){return n&131071|e<<17}function pI(n){return n|2}function Gl(n){return(n&131068)>>2}function $E(n,e){return n&-131069|e<<2}function oq(n){return(n&1)===1}function gI(n){return n|1}function aq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=uc(o),c=Gl(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Vl(h,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let f=uc(n[a+1]);n[r+1]=t0(f,a),f!==0&&(n[f+1]=$E(n[f+1],r)),n[a+1]=sq(n[a+1],r)}else n[r+1]=t0(a,0),a!==0&&(n[a+1]=$E(n[a+1],r)),a=r;else n[r+1]=t0(c,0),a===0?a=r:n[c+1]=$E(n[c+1],r),c=r;l&&(n[r+1]=pI(n[r+1])),cF(n,u,r,!0),cF(n,u,r,!1),cq(e,u,n,r,s),o=t0(a,c),s?e.classBindings=o:e.styleBindings=o}function cq(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Vl(s,e)>=0&&(t[r+1]=gI(t[r+1]))}function cF(n,e,t,r){let i=n[t+1],s=e===null,o=r?uc(i):Gl(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];lq(c,e)&&(a=!0,n[o+1]=r?gI(l):pI(l)),o=r?uc(l):Gl(l)}a&&(n[t+1]=r?pI(i):gI(i))}function lq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Vl(n,e)>=0:!1}function Ql(n,e,t){return RN(n,e,t,!1),Ql}function Gt(n,e){return RN(n,e,null,!0),Gt}function RN(n,e,t,r){let i=He(),s=gn(),o=Km(2);if(s.firstUpdatePass&&dq(s,n,o,r),e!==Vr&&Qs(i,o,e)){let a=s.data[qs()];mq(s,a,i,i[zt],n,i[o+1]=yq(e,t),r,o)}}function uq(n,e){return e>=n.expandoStartIndex}function dq(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[qs()],o=uq(n,t);_q(s,r)&&e===null&&!o&&(e=!1),e=hq(i,s,e,r),aq(i,s,e,t,o,r)}}function hq(n,e,t,r){let i=TR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=HE(null,n,e,t,r),t=Ah(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=HE(i,n,e,t,r),s===null){let c=fq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=HE(null,n,e,c[1],r),c=Ah(c,e.attrs,r),pq(n,e,r,c))}else s=gq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function fq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Gl(r)!==0)return n[uc(r)]}function pq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[uc(i)]=r}function gq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ah(r,o,t)}return Ah(r,e.attrs,t)}function HE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ah(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ah(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tR(n,o,t?!0:e[++s]))}return n===void 0?null:n}function mq(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=oq(l)?lF(c,e,t,i,Gl(l),o):void 0;if(!w0(u)){w0(s)||iq(l)&&(s=lF(c,null,t,i,a,o));let h=hE(qs(),t);D7(r,o,h,i,s)}}function lF(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,f=t[i+1];f===Vr&&(f=h?Nr:void 0);let p=h?Om(f,r):u===r?f:void 0;if(l&&!w0(p)&&(p=Om(c,r)),w0(p)&&(a=p,o))return a;let y=n[i+1];i=o?uc(y):Gl(y)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Om(c,r))}return a}function w0(n){return n!==void 0}function yq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=yr(EI(n)))),n}function _q(n,e){return(n.flags&(e?8:16))!==0}function C(n,e=""){let t=He(),r=gn(),i=n+Hn,s=r.firstCreatePass?M0(r,i,1,e,null):r.data[i],o=vq(r,t,s,e,n);t[i]=o,vh()&&T0(r,t,o,s),Go(s,!1)}var vq=(n,e,t,r,i)=>(wh(!0),Vz(e[zt],r));function wq(n,e,t,r=""){return Qs(n,_h(),t)?e+Qi(t)+r:Vr}function bq(n,e,t,r,i,s=""){let o=IE(),a=$I(n,o,t,i);return Km(2),a?e+Qi(t)+r+Qi(i)+s:Vr}function Cq(n,e,t,r,i,s,o,a=""){let c=IE(),l=yN(n,c,t,i,o);return Km(3),l?e+Qi(t)+r+Qi(i)+s+Qi(o)+a:Vr}function Q(n){return le("",n),Q}function le(n,e,t){let r=He(),i=wq(r,n,e,t);return i!==Vr&&QI(r,qs(),i),le}function Zl(n,e,t,r,i){let s=He(),o=bq(s,n,e,t,r,i);return o!==Vr&&QI(s,qs(),o),Zl}function U0(n,e,t,r,i,s,o){let a=He(),c=Cq(a,n,e,t,r,i,s,o);return c!==Vr&&QI(a,qs(),c),U0}function QI(n,e,t){let r=hE(e,n);Bz(n[zt],r,t)}function de(n,e,t){PE(e)&&(e=e());let r=He(),i=_h();if(Qs(r,i,e)){let s=gn(),o=Xm();YF(o,r,n,e,r[zt],t)}return de}function pe(n,e){let t=PE(n);return t&&n.set(e),t}function he(n,e){let t=He(),r=gn(),i=or();return kN(r,t,t[zt],i,n,e),he}function Eq(n,e,t){let r=gn();if(r.firstCreatePass){let i=ts(n);mI(t,r.data,r.blueprint,i,!0),mI(e,r.data,r.blueprint,i,!1)}}function mI(n,e,t,r,i){if(n=kn(n),Array.isArray(n))for(let s=0;s<n.length;s++)mI(n[s],e,t,r,i);else{let s=gn(),o=He(),a=or(),c=Ya(n)?n:kn(n.provide),l=cE(n),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(Ya(n)||!n.multi){let p=new ac(l,i,X),y=WE(c,e,i?u:u+f,h);y===-1?(GE(u0(a,o),s,c),zE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),o.push(p)):(t[y]=p,o[y]=p)}else{let p=WE(c,e,u+f,h),y=WE(c,e,u,u+f),w=p>=0&&t[p],b=y>=0&&t[y];if(i&&!b||!i&&!w){GE(u0(a,o),s,c);let A=xq(i?Dq:Iq,t.length,i,r,l);!i&&b&&(t[y].providerFactory=A),zE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(A),o.push(A)}else{let A=FN(t[i?y:p],l,!i&&r);zE(s,n,p>-1?p:y,A)}!i&&r&&b&&t[y].componentProviders++}}}function zE(n,e,t,r){let i=Ya(e),s=oR(e);if(i||s){let c=(s?kn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function FN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function WE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Iq(n,e,t,r){return yI(this.multi,[])}function Dq(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Dh(t,t[Se],this.providerFactory.index,r);s=a.slice(0,o),yI(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],yI(i,s);return s}function yI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function xq(n,e,t,r,i){let s=new ac(n,t,X);return s.multi=[],s.index=e,s.componentProviders=0,FN(s,i,r&&!t),s}function ar(n,e=[]){return t=>{t.providersResolver=(r,i)=>Eq(r,i?i(n):n,e)}}function zn(n,e,t,r,i){return NN(He(),yh(),n,e,t,r,i)}function Oh(n,e,t,r,i,s){return Aq(He(),yh(),n,e,t,r,i,s)}function ZI(n,e){let t=n[e];return t===Vr?void 0:t}function Tq(n,e,t,r,i,s){let o=e+t;return Qs(n,o,i)?jI(n,o+1,s?r.call(s,i):r(i)):ZI(n,o+1)}function NN(n,e,t,r,i,s,o){let a=e+t;return $I(n,a,i,s)?jI(n,a+2,o?r.call(o,i,s):r(i,s)):ZI(n,a+2)}function Aq(n,e,t,r,i,s,o,a){let c=e+t;return yN(n,c,i,s,o)?jI(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):ZI(n,c+3)}function bn(n,e){let t=gn(),r,i=n+Hn;t.firstCreatePass?(r=Sq(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Vo(r.type,!0)),o,a=rr(X);try{let c=l0(!1),l=s();return l0(c),fE(t,He(),i,l),l}finally{rr(a)}}function Sq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function si(n,e,t){let r=n+Hn,i=He(),s=Hm(i,r);return UN(i,r)?Tq(i,yh(),e,s.transform,t,s):s.transform(t)}function pc(n,e,t,r){let i=n+Hn,s=He(),o=Hm(s,i);return UN(s,i)?NN(s,yh(),e,o.transform,t,r,o):o.transform(t,r)}function UN(n,e){return n[Se].data[e].pure}function ea(n,e){return S0(n,e)}var b0=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},XI=(()=>{class n{compileModuleSync(t){return new y0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=iE(t),s=BF(i.declarations).reduce((o,a)=>{let c=Ho(a);return c&&o.push(new ql(c)),o},[]);return new b0(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mq=(()=>{class n{zone=W(Le);changeDetectionScheduler=W(jo);applicationRef=W(fc);applicationErrorHandler=W(vr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ON=new ee("",{factory:()=>!1});function eD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Le(ue(H({},nD()),{scheduleInRootZone:t})),[{provide:Le,useFactory:n},{provide:Ws,multi:!0,useFactory:()=>{let r=W(Mq,{optional:!0});return()=>r.initialize()}},{provide:Ws,multi:!0,useFactory:()=>{let r=W(Pq);return()=>{r.initialize()}}},e===!0?{provide:kE,useValue:!0}:[],{provide:RE,useValue:t??IN},{provide:vr,useFactory:()=>{let r=W(Le),i=W(Zt),s;return o=>{s??=i.get(Ji),r.runOutsideAngular(()=>s.handleError(o))}}}]}function tD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=eD({ngZoneFactory:()=>{let i=nD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&k0("NgZone_CoalesceEvent"),new Le(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return fn([{provide:ON,useValue:!0},{provide:bh,useValue:!1},r])}function nD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Pq=(()=>{class n{subscription=new $t;initialized=!1;zone=W(Le);pendingTasks=W(Ys);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var LN=(()=>{class n{applicationErrorHandler=W(vr);appRef=W(fc);taskService=W(Ys);ngZone=W(Le);zonelessEnabled=W(bh);tracing=W(Ph,{optional:!0});disableScheduling=W(kE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $t;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_0):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(W(RE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof v0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?rF:DN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rF(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kq(){return typeof $localize<"u"&&$localize.locale||Rh}var Xl=new ee("",{providedIn:"root",factory:()=>W(Xl,{optional:!0,skipSelf:!0})||kq()});function Si(n){return zk(n)}function eu(n,e){return tm(n,e?.equal)}var VN=class{[jn];constructor(e){this[jn]=e}destroy(){this[jn].destroy()}};var HN=Symbol("InputSignalNode#UNSET"),qq=ue(H({},nm),{transformFn:void 0,applyValueToInputSignal(n,e){Il(n,e)}});function zN(n,e){let t=Object.create(qq);t.value=n,t.transformFn=e?.transform;function r(){if(Cl(t),t.value===HN){let i=null;throw new ne(-950,i)}return t.value}return r[jn]=t,r}var Gq=new ee("");Gq.__NG_ELEMENT_ID__=n=>{let e=or();if(e===null)throw new ne(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new ne(204,!1)};function BN(n,e){return zN(n,e)}function Kq(n){return zN(HN,n)}var WN=(BN.required=Kq,BN);var tu=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qN=new tu("20.0.3");var rD=new ee(""),Yq=new ee("");function Lh(n){return!n.moduleRef}function Jq(n){let e=Lh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Le);return t.run(()=>{Lh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Lh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(rD);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(rD);o.add(s),n.moduleRef.onDestroy(()=>{Ih(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Zq(r,t,()=>{let s=e.get(JI);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Xl,Rh);if(PN(o||Rh),!e.get(Yq,!0))return Lh(n)?e.get(fc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Lh(n)){let c=e.get(fc);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return Qq?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var Qq;function Zq(n,e,t){try{let r=t();return Xo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var O0=null;function Xq(n=[],e){return vt.create({name:e,providers:[{provide:ah,useValue:"platform"},{provide:rD,useValue:new Set([()=>O0=null])},...n]})}function eG(n=[]){if(O0)return O0;let e=Xq(n);return O0=e,SN(),tG(e),e}function tG(n){let e=n.get(E0,null);pn(n,()=>{e?.forEach(t=>t())})}function cD(){return!1}var gc=(()=>{class n{static __NG_ELEMENT_ID__=nG}return n})();function nG(n){return rG(or(),He(),(n&16)===16)}function rG(n,e,t){if(qo(n)&&!t){let r=ni(n.index,e);return new Jo(r,r)}else if(n.type&175){let r=e[ei];return new Jo(r,e)}return null}var iD=class{constructor(){}supports(e){return BI(e)}create(e){return new sD(e)}},iG=(n,e)=>e,sD=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||iG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<jN(r,i,s)?t:r,a=jN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let p=f<s.length?s[f]:s[f]=0,y=p+f;u<=y&&y<l&&(s[f]=p+1)}let h=o.previousIndex;s[h]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!BI(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,gN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new oD(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new L0),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new L0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},oD=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},aD=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},L0=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new aD,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function $N(){return new lD([new iD])}var lD=(()=>{class n{factories;static \u0275prov=ce({token:n,providedIn:"root",factory:$N});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$N()),deps:[[n,new hF,new Wt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ne(901,!1)}}return n})();function GN(n){ft(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=eG(r),s=[eD({}),{provide:jo,useExisting:LN},FR,...t||[]],o=new Th({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Jq({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ft(9)}}function V0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var JN=null;function oi(){return JN}function uD(n){JN??=n}var Vh=class{},dD=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(QN),providedIn:"platform"})}return n})();var QN=(()=>{class n extends dD{_location;_history;_doc=W(en);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oi().getBaseHref(this._doc)}onPopState(t){let r=oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ZN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function KN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ta(n){return n&&n[0]!=="?"?`?${n}`:n}var B0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(eU),providedIn:"root"})}return n})(),XN=new ee(""),eU=(()=>{class n extends B0{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(en).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ZN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ta(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ta(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ta(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(oe(dD),oe(XN,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nu=(()=>{class n{_subject=new Rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=aG(KN(YN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ta(r))}normalize(t){return n.stripTrailingSlash(oG(this._basePath,YN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ta(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ta(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ta;static joinWithSlash=ZN;static stripTrailingSlash=KN;static \u0275fac=function(r){return new(r||n)(oe(B0))};static \u0275prov=ce({token:n,factory:()=>sG(),providedIn:"root"})}return n})();function sG(){return new nu(oe(B0))}function oG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function YN(n){return n.replace(/\/index.html$/,"")}function aG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var _D=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(_D||{});var Wn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Wn||{}),ct=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ct||{}),Er=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Er||{}),Ir={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function oU(n){return Cr(n)[qt.LocaleId]}function aU(n,e,t){let r=Cr(n),i=[r[qt.DayPeriodsFormat],r[qt.DayPeriodsStandalone]],s=ai(i,e);return ai(s,t)}function cU(n,e,t){let r=Cr(n),i=[r[qt.DaysFormat],r[qt.DaysStandalone]],s=ai(i,e);return ai(s,t)}function lU(n,e,t){let r=Cr(n),i=[r[qt.MonthsFormat],r[qt.MonthsStandalone]],s=ai(i,e);return ai(s,t)}function uU(n,e){let r=Cr(n)[qt.Eras];return ai(r,e)}function Bh(n,e){let t=Cr(n);return ai(t[qt.DateFormat],e)}function jh(n,e){let t=Cr(n);return ai(t[qt.TimeFormat],e)}function $h(n,e){let r=Cr(n)[qt.DateTimeFormat];return ai(r,e)}function as(n,e){let t=Cr(n),r=t[qt.NumberSymbols][e];if(typeof r>"u"){if(e===Ir.CurrencyDecimal)return t[qt.NumberSymbols][Ir.Decimal];if(e===Ir.CurrencyGroup)return t[qt.NumberSymbols][Ir.Group]}return r}function dU(n,e){return Cr(n)[qt.NumberFormats][e]}function hU(n){if(!n[qt.ExtraData])throw new ne(2303,!1)}function fU(n){let e=Cr(n);return hU(e),(e[qt.ExtraData][2]||[]).map(r=>typeof r=="string"?hD(r):[hD(r[0]),hD(r[1])])}function pU(n,e,t){let r=Cr(n);hU(r);let i=[r[qt.ExtraData][0],r[qt.ExtraData][1]],s=ai(i,e)||[];return ai(s,t)||[]}function ai(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ne(2304,!1)}function hD(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var cG=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,j0={},lG=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gU(n,e,t,r){let i=_G(n);e=Zs(t,e)||e;let o=[],a;for(;e;)if(a=lG.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=yU(r,c),i=yG(i,r));let l="";return o.forEach(u=>{let h=gG(u);l+=h?h(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function q0(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Zs(n,e){let t=oU(n);if(j0[t]??={},j0[t][e])return j0[t][e];let r="";switch(e){case"shortDate":r=Bh(n,Er.Short);break;case"mediumDate":r=Bh(n,Er.Medium);break;case"longDate":r=Bh(n,Er.Long);break;case"fullDate":r=Bh(n,Er.Full);break;case"shortTime":r=jh(n,Er.Short);break;case"mediumTime":r=jh(n,Er.Medium);break;case"longTime":r=jh(n,Er.Long);break;case"fullTime":r=jh(n,Er.Full);break;case"short":let i=Zs(n,"shortTime"),s=Zs(n,"shortDate");r=$0($h(n,Er.Short),[i,s]);break;case"medium":let o=Zs(n,"mediumTime"),a=Zs(n,"mediumDate");r=$0($h(n,Er.Medium),[o,a]);break;case"long":let c=Zs(n,"longTime"),l=Zs(n,"longDate");r=$0($h(n,Er.Long),[c,l]);break;case"full":let u=Zs(n,"fullTime"),h=Zs(n,"fullDate");r=$0($h(n,Er.Full),[u,h]);break}return r&&(j0[t][e]=r),r}function $0(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Mi(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function uG(n,e){return Mi(n,3).substring(0,e)}function tn(n,e,t=0,r=!1,i=!1){return function(s,o){let a=dG(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return uG(a,e);let c=as(o,Ir.MinusSign);return Mi(a,e,c,r,i)}}function dG(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ne(2301,!1)}}function wt(n,e,t=Wn.Format,r=!1){return function(i,s){return hG(i,s,n,e,t,r)}}function hG(n,e,t,r,i,s){switch(t){case 2:return lU(e,i,r)[n.getMonth()];case 1:return cU(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=fU(e),u=pU(e,i,r),h=l.findIndex(f=>{if(Array.isArray(f)){let[p,y]=f,w=o>=p.hours&&a>=p.minutes,b=o<y.hours||o===y.hours&&a<y.minutes;if(p.hours<y.hours){if(w&&b)return!0}else if(w||b)return!0}else if(f.hours===o&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return aU(e,i,r)[o<12?0:1];case 3:return uU(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ne(2302,!1)}}function H0(n){return function(e,t,r){let i=-1*r,s=as(t,Ir.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Mi(o,2,s)+Mi(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Mi(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Mi(o,2,s)+":"+Mi(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Mi(o,2,s)+":"+Mi(Math.abs(i%60),2,s);default:throw new ne(2302,!1)}}}var fG=0,W0=4;function pG(n){let e=q0(n,fG,1).getDay();return q0(n,0,1+(e<=W0?W0:W0+7)-e)}function mU(n){let e=n.getDay(),t=e===0?-3:W0-e;return q0(n.getFullYear(),n.getMonth(),n.getDate()+t)}function fD(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=mU(t),o=pG(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Mi(i,n,as(r,Ir.MinusSign))}}function z0(n,e=!1){return function(t,r){let s=mU(t).getFullYear();return Mi(s,n,as(r,Ir.MinusSign),e)}}var pD={};function gG(n){if(pD[n])return pD[n];let e;switch(n){case"G":case"GG":case"GGG":e=wt(3,ct.Abbreviated);break;case"GGGG":e=wt(3,ct.Wide);break;case"GGGGG":e=wt(3,ct.Narrow);break;case"y":e=tn(0,1,0,!1,!0);break;case"yy":e=tn(0,2,0,!0,!0);break;case"yyy":e=tn(0,3,0,!1,!0);break;case"yyyy":e=tn(0,4,0,!1,!0);break;case"Y":e=z0(1);break;case"YY":e=z0(2,!0);break;case"YYY":e=z0(3);break;case"YYYY":e=z0(4);break;case"M":case"L":e=tn(1,1,1);break;case"MM":case"LL":e=tn(1,2,1);break;case"MMM":e=wt(2,ct.Abbreviated);break;case"MMMM":e=wt(2,ct.Wide);break;case"MMMMM":e=wt(2,ct.Narrow);break;case"LLL":e=wt(2,ct.Abbreviated,Wn.Standalone);break;case"LLLL":e=wt(2,ct.Wide,Wn.Standalone);break;case"LLLLL":e=wt(2,ct.Narrow,Wn.Standalone);break;case"w":e=fD(1);break;case"ww":e=fD(2);break;case"W":e=fD(1,!0);break;case"d":e=tn(2,1);break;case"dd":e=tn(2,2);break;case"c":case"cc":e=tn(7,1);break;case"ccc":e=wt(1,ct.Abbreviated,Wn.Standalone);break;case"cccc":e=wt(1,ct.Wide,Wn.Standalone);break;case"ccccc":e=wt(1,ct.Narrow,Wn.Standalone);break;case"cccccc":e=wt(1,ct.Short,Wn.Standalone);break;case"E":case"EE":case"EEE":e=wt(1,ct.Abbreviated);break;case"EEEE":e=wt(1,ct.Wide);break;case"EEEEE":e=wt(1,ct.Narrow);break;case"EEEEEE":e=wt(1,ct.Short);break;case"a":case"aa":case"aaa":e=wt(0,ct.Abbreviated);break;case"aaaa":e=wt(0,ct.Wide);break;case"aaaaa":e=wt(0,ct.Narrow);break;case"b":case"bb":case"bbb":e=wt(0,ct.Abbreviated,Wn.Standalone,!0);break;case"bbbb":e=wt(0,ct.Wide,Wn.Standalone,!0);break;case"bbbbb":e=wt(0,ct.Narrow,Wn.Standalone,!0);break;case"B":case"BB":case"BBB":e=wt(0,ct.Abbreviated,Wn.Format,!0);break;case"BBBB":e=wt(0,ct.Wide,Wn.Format,!0);break;case"BBBBB":e=wt(0,ct.Narrow,Wn.Format,!0);break;case"h":e=tn(3,1,-12);break;case"hh":e=tn(3,2,-12);break;case"H":e=tn(3,1);break;case"HH":e=tn(3,2);break;case"m":e=tn(4,1);break;case"mm":e=tn(4,2);break;case"s":e=tn(5,1);break;case"ss":e=tn(5,2);break;case"S":e=tn(6,1);break;case"SS":e=tn(6,2);break;case"SSS":e=tn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=H0(0);break;case"ZZZZZ":e=H0(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=H0(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=H0(2);break;default:return null}return pD[n]=e,e}function yU(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function mG(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function yG(n,e,t){let i=n.getTimezoneOffset(),s=yU(e,i);return mG(n,-1*(s-i))}function _G(n){if(tU(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return q0(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(cG))return vG(r)}let e=new Date(n);if(!tU(e))throw new ne(2302,!1);return e}function vG(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function tU(n){return n instanceof Date&&!isNaN(n.valueOf())}var wG=/^(\d+)?\.((\d+)(-(\d+))?)?$/,nU=22,G0=".",Hh="0",bG=";",CG=",",gD="#";function EG(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=as(t,Ir.Infinity);else{let l=xG(n);o&&(l=DG(l));let u=e.minInt,h=e.minFrac,f=e.maxFrac;if(s){let P=s.match(wG);if(P===null)throw new ne(2306,!1);let U=P[1],V=P[3],B=P[5];U!=null&&(u=mD(U)),V!=null&&(h=mD(V)),B!=null?f=mD(B):V!=null&&h>f&&(f=h)}TG(l,h,f);let p=l.digits,y=l.integerLen,w=l.exponent,b=[];for(c=p.every(P=>!P);y<u;y++)p.unshift(0);for(;y<0;y++)p.unshift(0);y>0?b=p.splice(y,p.length):(b=p,p=[0]);let A=[];for(p.length>=e.lgSize&&A.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)A.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&A.unshift(p.join("")),a=A.join(as(t,r)),b.length&&(a+=as(t,i)+b.join("")),w&&(a+=as(t,Ir.Exponential)+"+"+w)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function _U(n,e,t){let r=dU(e,_D.Decimal),i=IG(r,as(e,Ir.MinusSign));return EG(n,i,e,Ir.Group,Ir.Decimal,t)}function IG(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(bG),i=r[0],s=r[1],o=i.indexOf(G0)!==-1?i.split(G0):[i.substring(0,i.lastIndexOf(Hh)+1),i.substring(i.lastIndexOf(Hh)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(gD));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===Hh?t.minFrac=t.maxFrac=u+1:h===gD?t.maxFrac=u+1:t.posSuf+=h}let l=a.split(CG);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-t.posPre.length-t.posSuf.length,h=s.indexOf(gD);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function DG(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function xG(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(G0))>-1&&(e=e.replace(G0,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Hh;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Hh;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>nU&&(r=r.splice(0,nU-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function TG(n,e,t){if(e>t)throw new ne(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let h=o;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let h=1;h<o;h++)r[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,u=r.reduceRight(function(h,f,p,y){return f=f+h,y[p]=f<10?f:f-10,c&&(y[p]===0&&p>=l?y.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function mD(n){let e=parseInt(n);if(isNaN(e))throw new ne(2305,!1);return e}var yD=/\s+/,rU=[],Br=(()=>{class n{_ngEl;_renderer;initialClasses=rU;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(yD):rU}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(yD):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(yD).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(X(Or),X(Zo))};static \u0275dir=Et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var K0=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new K0(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),iU(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);iU(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(Ai),X(Qo),X(lD))};static \u0275dir=Et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function iU(n,e){n.context.$implicit=e.item}var Ze=(()=>{class n{_viewContainer;_context=new Y0;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sU(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sU(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(Ai),X(Qo))};static \u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Y0=class{$implicit=null;ngIf=null};function sU(n,e){if(n&&!n.createEmbeddedView)throw new ne(2020,!1)}function vD(n,e){return new ne(2100,!1)}var AG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Xs=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw vD(n,t);return t.replace(AG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Mh({name:"titlecase",type:n,pure:!0})}return n})();var SG="mediumDate",vU=new ee(""),wU=new ee(""),Pi=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??SG,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gU(t,o,s||this.locale,a)}catch(o){throw vD(n,o.message)}}static \u0275fac=function(r){return new(r||n)(X(Xl,16),X(vU,24),X(wU,24))};static \u0275pipe=Mh({name:"date",type:n,pure:!0})}return n})();var wD=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!MG(t))return null;i||=this._locale;try{let s=PG(t);return _U(s,i,r)}catch(s){throw vD(n,s.message)}}static \u0275fac=function(r){return new(r||n)(X(Xl,16))};static \u0275pipe=Mh({name:"number",type:n,pure:!0})}return n})();function MG(n){return!(n==null||n===""||n!==n)}function PG(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new ne(2309,!1);return n}var Ye=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=wr({type:n});static \u0275inj=ir({})}return n})();function zh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var mc=class{};var bD="browser",kG="server";function Wh(n){return n===bD}function bU(n){return n===kG}var Z0=new ee(""),DD=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(oe(Z0),oe(Le))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),qh=class{_doc;constructor(e){this._doc=e}manager},J0="ng-app-id";function CU(n){for(let e of n)e.remove()}function EU(n,e){let t=e.createElement("style");return t.textContent=n,t}function RG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${J0}="${e}"],link[${J0}="${e}"]`);if(i)for(let s of i)s.removeAttribute(J0),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function ED(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var xD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=bU(s),RG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,EU);r?.forEach(i=>this.addUsage(i,this.external,ED))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(CU(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])CU(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,EU(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,ED(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(J0,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(oe(en),oe(C0),oe(I0,8),oe(Lr))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),CD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},TD=/%COMP%/g;var DU="%COMP%",FG=`_nghost-${DU}`,NG=`_ngcontent-${DU}`,UG=!0,OG=new ee("",{providedIn:"root",factory:()=>UG});function LG(n){return NG.replace(TD,n)}function VG(n){return FG.replace(TD,n)}function xU(n,e){return e.map(t=>t.replace(TD,n))}var AD=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Gh(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Q0?i.applyToHost(t):i instanceof Kh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Js.Emulated:s=new Q0(c,l,r,this.appId,u,o,a,h,f);break;case Js.ShadowDom:return new ID(c,l,t,r,o,a,this.nonce,h,f);default:s=new Kh(c,l,r,u,o,a,h,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(oe(DD),oe(xD),oe(C0),oe(OG),oe(en),oe(Lr),oe(Le),oe(I0),oe(Ph,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),Gh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(CD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=CD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=CD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(rs.DashCase|rs.Important)?e.style.setProperty(t,r,i&rs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&rs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=oi().getGlobalEventTarget(this.doc,e),!e))throw new ne(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function IU(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ID=class extends Gh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=xU(i.id,u);for(let f of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}let h=i.getExternalStyles?.();if(h)for(let f of h){let p=ED(f,s);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kh=class extends Gh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?xU(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Q0=class extends Kh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,l,u),this.contentAttr=LG(u),this.hostAttr=VG(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var X0=class n extends Vh{supportsDOMEvents=!0;static makeCurrent(){uD(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BG();return t==null?null:jG(t)}resetBaseElement(){Yh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zh(document.cookie,e)}},Yh=null;function BG(){return Yh=Yh||document.head.querySelector("base"),Yh?Yh.getAttribute("href"):null}function jG(n){return new URL(n,document.baseURI).pathname}var $G=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),AU=(()=>{class n extends qh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(oe(en))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),TU=["alt","control","meta","shift"],HG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SU=(()=>{class n extends qh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oi().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TU.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=HG[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TU.forEach(o=>{if(o!==i){let a=zG[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(oe(en))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function SD(n,e){return GN(H({rootComponent:n},WG(e)))}function WG(n){return{appProviders:[...JG,...n?.providers??[]],platformProviders:YG}}function qG(){X0.makeCurrent()}function GG(){return new Ji}function KG(){return bI(document),document}var YG=[{provide:Lr,useValue:bD},{provide:E0,useValue:qG,multi:!0},{provide:en,useFactory:KG}];var JG=[{provide:ah,useValue:"root"},{provide:Ji,useFactory:GG},{provide:Z0,useClass:AU,multi:!0,deps:[en]},{provide:Z0,useClass:SU,multi:!0,deps:[en]},AD,xD,DD,{provide:cc,useExisting:AD},{provide:mc,useClass:$G},[]];var iu=class{},Jh=class{},na=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ty=class{encodeKey(e){return MU(e)}encodeValue(e){return MU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function QG(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var ZG=/%(\d[a-f0-9])/gi,XG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function MU(n){return encodeURIComponent(n).replace(ZG,(e,t)=>XG[t]??e)}function ey(n){return`${n}`}var eo=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new ty,e.fromString){if(e.fromObject)throw new ne(2805,!1);this.map=QG(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ey):[ey(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ey(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ey(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ny=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function eK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function PU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function kU(n){return typeof Blob<"u"&&n instanceof Blob}function RU(n){return typeof FormData<"u"&&n instanceof FormData}function tK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var FU="Content-Type",NU="Accept",UU="X-Request-URL",OU="text/plain",LU="application/json",nK=`${LU}, ${OU}, */*`,ru=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(eK(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new na,this.context??=new ny,!this.params)this.params=new eo,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||PU(this.body)||kU(this.body)||RU(this.body)||tK(this.body)?this.body:this.body instanceof eo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||RU(this.body)?null:kU(this.body)?this.body.type||null:PU(this.body)?null:typeof this.body=="string"?OU:this.body instanceof eo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?LU:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,y)=>p.set(y,e.setHeaders[y]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((p,y)=>p.set(y,e.setParams[y]),h)),new n(t,r,a,{params:h,headers:u,context:f,reportProgress:l,responseType:i,withCredentials:c,transferCache:o,keepalive:s})}},cs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(cs||{}),su=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new na,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ry=class n extends su{constructor(e={}){super(e)}type=cs.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qh=class n extends su{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=cs.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zh=class extends su{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},rK=200,iK=204;function MD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var sy=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ru)s=t;else{let c;i.headers instanceof na?c=i.headers:c=new na(i.headers);let l;i.params&&(i.params instanceof eo?l=i.params:l=new eo({fromObject:i.params})),s=new ru(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let o=fe(s).pipe(js(c=>this.handler.handle(c)));if(t instanceof ru||i.observe==="events")return o;let a=o.pipe(hn(c=>c instanceof Qh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ce(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ne(2806,!1);return c.body}));case"blob":return a.pipe(Ce(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ne(2807,!1);return c.body}));case"text":return a.pipe(Ce(c=>{if(c.body!==null&&typeof c.body!="string")throw new ne(2808,!1);return c.body}));case"json":default:return a.pipe(Ce(c=>c.body))}case"response":return a;default:throw new ne(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new eo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,MD(i,r))}post(t,r,i={}){return this.request("POST",t,MD(i,r))}put(t,r,i={}){return this.request("PUT",t,MD(i,r))}static \u0275fac=function(r){return new(r||n)(oe(iu))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var sK=new ee("");function oK(n,e){return e(n)}function aK(n,e,t){return(r,i)=>pn(t,()=>e(r,s=>n(s,i)))}var VU=new ee(""),BU=new ee(""),jU=new ee("",{providedIn:"root",factory:()=>!0});var iy=(()=>{class n extends iu{backend;injector;chain=null;pendingTasks=W(Yo);contributeToStability=W(jU);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(VU),...this.injector.get(BU,[])]));this.chain=r.reduceRight((i,s)=>aK(i,s,this.injector),oK)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(qa(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(oe(Jh),oe(Zt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var cK=/^\)\]\}',?\n/,lK=RegExp(`^${UU}:`,"m");function uK(n){return"responseURL"in n&&n.responseURL?n.responseURL:lK.test(n.getAllResponseHeaders())?n.getResponseHeader(UU):null}var PD=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ne(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?_t(r.\u0275loadImpl()):fe(null)).pipe(Pn(()=>new ye(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((w,b)=>o.setRequestHeader(w,b.join(","))),t.headers.has(NU)||o.setRequestHeader(NU,nK),!t.headers.has(FU)){let w=t.detectContentTypeHeader();w!==null&&o.setRequestHeader(FU,w)}if(t.responseType){let w=t.responseType.toLowerCase();o.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=o.statusText||"OK",b=new na(o.getAllResponseHeaders()),A=uK(o)||t.url;return c=new ry({headers:b,status:o.status,statusText:w,url:A}),c},u=()=>{let{headers:w,status:b,statusText:A,url:P}=l(),U=null;b!==iK&&(U=typeof o.response>"u"?o.responseText:o.response),b===0&&(b=U?rK:0);let V=b>=200&&b<300;if(t.responseType==="json"&&typeof U=="string"){let B=U;U=U.replace(cK,"");try{U=U!==""?JSON.parse(U):null}catch($){U=B,V&&(V=!1,U={error:$,text:U})}}V?(s.next(new Qh({body:U,headers:w,status:b,statusText:A,url:P||void 0})),s.complete()):s.error(new Zh({error:U,headers:w,status:b,statusText:A,url:P||void 0}))},h=w=>{let{url:b}=l(),A=new Zh({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(A)},f=!1,p=w=>{f||(s.next(l()),f=!0);let b={type:cs.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),t.responseType==="text"&&o.responseText&&(b.partialText=o.responseText),s.next(b)},y=w=>{let b={type:cs.UploadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),s.next(b)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:cs.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(oe(mc))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),$U=new ee(""),dK="XSRF-TOKEN",hK=new ee("",{providedIn:"root",factory:()=>dK}),fK="X-XSRF-TOKEN",pK=new ee("",{providedIn:"root",factory:()=>fK}),Xh=class{},gK=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(oe(en),oe(hK))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function mK(n,e){let t=n.url.toLowerCase();if(!W($U)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=W(Xh).getToken(),i=W(pK);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function kD(...n){let e=[sy,PD,iy,{provide:iu,useExisting:iy},{provide:Jh,useFactory:()=>W(sK,{optional:!0})??W(PD)},{provide:VU,useValue:mK,multi:!0},{provide:$U,useValue:!0},{provide:Xh,useClass:gK}];for(let t of n)e.push(...t.\u0275providers);return fn(e)}var oy=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(oe(en))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pe="primary",gf=Symbol("RouteTitle"),OD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function vc(n){return new OD(n)}function QU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _K(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ls(n[t],e[t]))return!1;return!0}function ls(n,e){let t=n?LD(n):void 0,r=e?LD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ZU(n[i],e[i]))return!1;return!0}function LD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ZU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function XU(n){return n.length>0?n[n.length-1]:null}function ro(n){return DC(n)?n:Xo(n)?_t(Promise.resolve(n)):fe(n)}var vK={exact:tO,subset:nO},eO={exact:wK,subset:bK,ignored:()=>!0};function zU(n,e,t){return vK[t.paths](n.root,e.root,t.matrixParams)&&eO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function wK(n,e){return ls(n,e)}function tO(n,e,t){if(!yc(n.segments,e.segments)||!ly(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!tO(n.children[r],e.children[r],t))return!1;return!0}function bK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZU(n[t],e[t]))}function nO(n,e,t){return rO(n,e,e.segments,t)}function rO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!yc(i,t)||e.hasChildren()||!ly(i,t,r))}else if(n.segments.length===t.length){if(!yc(n.segments,t)||!ly(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!nO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!yc(n.segments,i)||!ly(n.segments,i,r)||!n.children[Pe]?!1:rO(n.children[Pe],e,s,r)}}function ly(n,e,t){return e.every((r,i)=>eO[t](n[i].parameters,r.parameters))}var ds=class{root;queryParams;fragment;_queryParamMap;constructor(e=new nt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vc(this.queryParams),this._queryParamMap}toString(){return IK.serialize(this)}},nt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uy(this)}},ra=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vc(this.parameters),this._parameterMap}toString(){return sO(this)}};function CK(n,e){return yc(n,e)&&n.every((t,r)=>ls(t.parameters,e[r].parameters))}function yc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function EK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var mf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>new wc,providedIn:"root"})}return n})(),wc=class{parse(e){let t=new BD(e);return new ds(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ef(e.root,!0)}`,r=TK(e.queryParams),i=typeof e.fragment=="string"?`#${DK(e.fragment)}`:"";return`${t}${r}${i}`}},IK=new wc;function uy(n){return n.segments.map(e=>sO(e)).join("/")}function ef(n,e){if(!n.hasChildren())return uy(n);if(e){let t=n.children[Pe]?ef(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Pe&&r.push(`${i}:${ef(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=EK(n,(r,i)=>i===Pe?[ef(n.children[Pe],!1)]:[`${i}:${ef(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${uy(n)}/${t[0]}`:`${uy(n)}/(${t.join("//")})`}}function iO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ay(n){return iO(n).replace(/%3B/gi,";")}function DK(n){return encodeURI(n)}function VD(n){return iO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dy(n){return decodeURIComponent(n)}function WU(n){return dy(n.replace(/\+/g,"%20"))}function sO(n){return`${VD(n.path)}${xK(n.parameters)}`}function xK(n){return Object.entries(n).map(([e,t])=>`;${VD(e)}=${VD(t)}`).join("")}function TK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ay(t)}=${ay(i)}`).join("&"):`${ay(t)}=${ay(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var AK=/^[^\/()?;#]+/;function RD(n){let e=n.match(AK);return e?e[0]:""}var SK=/^[^\/()?;=#]+/;function MK(n){let e=n.match(SK);return e?e[0]:""}var PK=/^[^=?&#]+/;function kK(n){let e=n.match(PK);return e?e[0]:""}var RK=/^[^&#]+/;function FK(n){let e=n.match(RK);return e?e[0]:""}var BD=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new nt(e,t)),r}parseSegment(){let e=RD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new ra(dy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=MK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=RD(this.remaining);i&&(r=i,this.capture(r))}e[dy(t)]=dy(r)}parseQueryParam(e){let t=kK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=FK(this.remaining);o&&(r=o,this.capture(r))}let i=WU(t),s=WU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=RD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Pe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Pe]:new nt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function oO(n){return n.segments.length>0?new nt([],{[Pe]:n}):n}function aO(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=aO(i);if(r===Pe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new nt(n.segments,e);return NK(t)}function NK(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new nt(n.segments.concat(e.segments),e.children)}return n}function uu(n){return n instanceof ds}function cO(n,e,t=null,r=null){let i=lO(n);return uO(i,e,t,r)}function lO(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new nt(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=oO(r);return e??i}function uO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return FD(i,i,i,t,r);let s=UK(e);if(s.toRoot())return FD(i,i,new nt([],{}),t,r);let o=OK(s,i,n),a=o.processChildren?nf(o.segmentGroup,o.index,s.commands):hO(o.segmentGroup,o.index,s.commands);return FD(i,o.segmentGroup,a,t,r)}function hy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function of(n){return typeof n=="object"&&n!=null&&n.outlets}function FD(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=dO(n,e,t);let a=oO(aO(o));return new ds(a,s,i)}function dO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=dO(s,e,t)}),new nt(n.segments,r)}var fy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hy(r[0]))throw new ne(4003,!1);let i=r.find(of);if(i&&i!==XU(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fy(t,e,r)}var cu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function OK(n,e,t){if(n.isAbsolute)return new cu(e,!0,0);if(!t)return new cu(e,!1,NaN);if(t.parent===null)return new cu(t,!0,0);let r=hy(n.commands[0])?0:1,i=t.segments.length-1+r;return LK(t,i,n.numberOfDoubleDots)}function LK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new cu(r,!1,i-s)}function VK(n){return of(n[0])?n[0].outlets:{[Pe]:n}}function hO(n,e,t){if(n??=new nt([],{}),n.segments.length===0&&n.hasChildren())return nf(n,e,t);let r=BK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new nt(n.segments.slice(0,r.pathIndex),{});return s.children[Pe]=new nt(n.segments.slice(r.pathIndex),n.children),nf(s,0,i)}else return r.match&&i.length===0?new nt(n.segments,{}):r.match&&!n.hasChildren()?jD(n,e,t):r.match?nf(n,0,i):jD(n,e,t)}function nf(n,e,t){if(t.length===0)return new nt(n.segments,{});{let r=VK(t),i={};if(Object.keys(r).some(s=>s!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let s=nf(n.children[Pe],e,t);return new nt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=hO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new nt(n.segments,i)}}function BK(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(of(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!GU(c,l,o))return s;r+=2}else{if(!GU(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(of(s)){let c=jK(s.outlets);return new nt(r,c)}if(i===0&&hy(t[0])){let c=n.segments[e];r.push(new ra(c.path,qU(t[0]))),i++;continue}let o=of(s)?s.outlets[Pe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&hy(a)?(r.push(new ra(o,qU(a))),i+=2):(r.push(new ra(o,{})),i++)}return new nt(r,{})}function jK(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=jD(new nt([],{}),0,r))}),e}function qU(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GU(n,e,t){return n==t.path&&ls(e,t.parameters)}var rf="imperative",Cn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Cn||{}),$r=class{id;url;constructor(e,t){this.id=e,this.url=t}},bc=class extends $r{type=Cn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},to=class extends $r{urlAfterRedirects;type=Cn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(cr||{}),af=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(af||{}),us=class extends $r{reason;code;type=Cn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},no=class extends $r{reason;code;type=Cn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},du=class extends $r{error;target;type=Cn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},cf=class extends $r{urlAfterRedirects;state;type=Cn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends $r{urlAfterRedirects;state;type=Cn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gy=class extends $r{urlAfterRedirects;state;shouldActivate;type=Cn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},my=class extends $r{urlAfterRedirects;state;type=Cn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yy=class extends $r{urlAfterRedirects;state;type=Cn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_y=class{route;type=Cn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vy=class{route;type=Cn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wy=class{snapshot;type=Cn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},by=class{snapshot;type=Cn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cy=class{snapshot;type=Cn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hu=class{snapshot;type=Cn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lf=class{},fu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $K(n){return!(n instanceof lf)&&!(n instanceof fu)}function HK(n,e){return n.providers&&!n._injector&&(n._injector=Sh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ki(n){return n.outlet||Pe}function zK(n,e){let t=n.filter(r=>ki(r)===e);return t.push(...n.filter(r=>ki(r)!==e)),t}function yf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ey=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return yf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new mu(this.rootInjector)}},mu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ey(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(oe(Zt))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$D(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$D(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=HD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return HD(e,this._root).map(t=>t.value)}};function $D(n,e){if(n===e.value)return e;for(let t of e.children){let r=$D(n,t);if(r)return r}return null}function HD(n,e){if(n===e.value)return[e];for(let t of e.children){let r=HD(n,t);if(r.length)return r.unshift(e),r}return[]}var jr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function au(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var uf=class extends Iy{snapshot;constructor(e,t){super(e),this.snapshot=t,QD(this,e)}toString(){return this.snapshot.toString()}};function fO(n){let e=WK(n),t=new dn([new ra("",{})]),r=new dn({}),i=new dn({}),s=new dn({}),o=new dn(""),a=new ia(t,r,s,o,i,Pe,n,e.root);return a.snapshot=e.root,new uf(new jr(a,[]),e)}function WK(n){let e={},t={},r={},i="",s=new _c([],e,r,i,t,Pe,n,null,{});return new df("",new jr(s,[]))}var ia=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ce(l=>l[gf]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>vc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>vc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&gO(i)&&(r.resolve[gf]=i.title),r}var _c=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[gf]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},df=class extends Iy{url;constructor(e,t){super(t),this.url=e,QD(this,t)}toString(){return pO(this._root)}};function QD(n,e){e.value._routerState=n,e.children.forEach(t=>QD(n,t))}function pO(n){let e=n.children.length>0?` { ${n.children.map(pO).join(", ")} } `:"";return`${n.value}${e}`}function ND(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ls(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ls(e.params,t.params)||n.paramsSubject.next(t.params),_K(e.url,t.url)||n.urlSubject.next(t.url),ls(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zD(n,e){let t=ls(n.params,e.params)&&CK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||zD(n.parent,e.parent))}function gO(n){return typeof n.title=="string"||n.title===null}var mO=new ee(""),_f=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new xt;deactivateEvents=new xt;attachEvents=new xt;detachEvents=new xt;routerOutletData=WN(void 0);parentContexts=W(mu);location=W(Ai);changeDetector=W(gc);inputBinder=W(Sy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new WD(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[is]})}return n})(),WD=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ia?this.route:e===mu?this.childContexts:e===mO?this.outletData:this.parent.get(e,t)}},Sy=new ee("");var vf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ve({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&re(0,"router-outlet")},dependencies:[_f],encapsulation:2})}return n})();function ZD(n){let e=n.children&&n.children.map(ZD),t=e?ue(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=vf),t}function qK(n,e,t){let r=hf(n,e._root,t?t._root:void 0);return new uf(r,e)}function hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=GK(n,e,t);return new jr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>hf(n,a)),o}}let r=KK(e.value),i=e.children.map(s=>hf(n,s));return new jr(r,i)}}function GK(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hf(n,r,i);return hf(n,r)})}function KK(n){return new ia(new dn(n.url),new dn(n.params),new dn(n.queryParams),new dn(n.fragment),new dn(n.data),n.outlet,n.component,n)}var pu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},yO="ngNavigationCancelingError";function xy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=uu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_O(!1,cr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function _O(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[yO]=!0,t.cancellationCode=e,t}function YK(n){return vO(n)&&uu(n.url)}function vO(n){return!!n&&n[yO]}var JK=(n,e,t,r)=>Ce(i=>(new qD(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),qD=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ND(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=au(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=au(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=au(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=au(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new by(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(ND(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ND(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ty=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},lu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function QK(n,e,t){let r=n._root,i=e?e._root:null;return tf(r,i,t,[r.value])}function ZK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qC(n)?n:e.get(n):r}function tf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=au(e);return n.children.forEach(o=>{XK(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>sf(a,t.getContext(o),i)),i}function XK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=eY(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ty(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?tf(n,e,a?a.children:null,r,i):tf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lu(a.outlet.component,o))}else o&&sf(e,a,i),i.canActivateChecks.push(new Ty(r)),s.component?tf(n,null,a?a.children:null,r,i):tf(n,null,t,r,i);return i}function eY(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!yc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yc(n.url,e.url)||!ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zD(n,e)||!ls(n.queryParams,e.queryParams);case"paramsChange":default:return!zD(n,e)}}function sf(n,e,t){let r=au(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?sf(o,e.children.getContext(s),t):sf(o,null,t):sf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new lu(e.outlet.component,i)):t.canDeactivateChecks.push(new lu(null,i)):t.canDeactivateChecks.push(new lu(null,i))}function wf(n){return typeof n=="function"}function tY(n){return typeof n=="boolean"}function nY(n){return n&&wf(n.canLoad)}function rY(n){return n&&wf(n.canActivate)}function iY(n){return n&&wf(n.canActivateChild)}function sY(n){return n&&wf(n.canDeactivate)}function oY(n){return n&&wf(n.canMatch)}function wO(n){return n instanceof Bs||n?.name==="EmptyError"}var cy=Symbol("INITIAL_VALUE");function gu(){return Pn(n=>Dm(n.map(e=>e.pipe($s(1),th(cy)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===cy)return cy;if(t===!1||aY(t))return t}return!0}),hn(e=>e!==cy),$s(1)))}function aY(n){return uu(n)||n instanceof pu}function cY(n,e){return Qt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?fe(ue(H({},t),{guardsResult:!0})):lY(o,r,i,n).pipe(Qt(a=>a&&tY(a)?uY(r,s,n,e):fe(a)),Ce(a=>ue(H({},t),{guardsResult:a})))})}function lY(n,e,t,r){return _t(n).pipe(Qt(i=>gY(i.component,i.route,t,e,r)),Hs(i=>i!==!0,!0))}function uY(n,e,t,r){return _t(e).pipe(js(i=>Ul(hY(i.route.parent,r),dY(i.route,r),pY(n,i.path,t),fY(n,i.route,t))),Hs(i=>i!==!0,!0))}function dY(n,e){return n!==null&&e&&e(new Cy(n)),fe(!0)}function hY(n,e){return n!==null&&e&&e(new wy(n)),fe(!0)}function fY(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(s=>Xd(()=>{let o=yf(e)??t,a=yu(s,o),c=rY(a)?a.canActivate(e,n):pn(o,()=>a(e,n));return ro(c).pipe(Hs())}));return fe(i).pipe(gu())}function pY(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>ZK(o)).filter(o=>o!==null).map(o=>Xd(()=>{let a=o.guards.map(c=>{let l=yf(o.node)??t,u=yu(c,l),h=iY(u)?u.canActivateChild(r,n):pn(l,()=>u(r,n));return ro(h).pipe(Hs())});return fe(a).pipe(gu())}));return fe(s).pipe(gu())}function gY(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return fe(!0);let o=s.map(a=>{let c=yf(e)??i,l=yu(a,c),u=sY(l)?l.canDeactivate(n,e,t,r):pn(c,()=>l(n,e,t,r));return ro(u).pipe(Hs())});return fe(o).pipe(gu())}function mY(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return fe(!0);let s=i.map(o=>{let a=yu(o,n),c=nY(a)?a.canLoad(e,t):pn(n,()=>a(e,t));return ro(c)});return fe(s).pipe(gu(),bO(r))}function bO(n){return vC(vn(e=>{if(typeof e!="boolean")throw xy(n,e)}),Ce(e=>e===!0))}function yY(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return fe(!0);let s=i.map(o=>{let a=yu(o,n),c=oY(a)?a.canMatch(e,t):pn(n,()=>a(e,t));return ro(c)});return fe(s).pipe(gu(),bO(r))}var ff=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},pf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ou(n){return Nl(new ff(n))}function _Y(n){return Nl(new ne(4e3,!1))}function vY(n){return Nl(_O(!1,cr.GuardRejected))}var GD=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[Pe])return _Y(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,t,r,i,s){return wY(t,i,s).pipe(Ce(o=>{if(o instanceof ds)throw new pf(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new pf(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ds(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new nt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function wY(n,e,t){if(typeof n=="string")return fe(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:h}=e;return ro(pn(t,()=>r({params:l,data:u,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:h})))}var KD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bY(n,e,t,r,i){let s=CO(n,e,t);return s.matched?(r=HK(e,r),yY(r,e,t,i).pipe(Ce(o=>o===!0?s:H({},KD)))):fe(s)}function CO(n,e,t){if(e.path==="**")return CY(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},KD):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QU)(t,n,e);if(!i)return H({},KD);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function CY(n){return{matched:!0,parameters:n.length>0?XU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function KU(n,e,t,r){return t.length>0&&DY(n,t,r)?{segmentGroup:new nt(e,IY(r,new nt(t,n.children))),slicedSegments:[]}:t.length===0&&xY(n,t,r)?{segmentGroup:new nt(n.segments,EY(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:t}}function EY(n,e,t,r){let i={};for(let s of t)if(My(n,e,s)&&!r[ki(s)]){let o=new nt([],{});i[ki(s)]=o}return H(H({},r),i)}function IY(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&ki(r)!==Pe){let i=new nt([],{});t[ki(r)]=i}return t}function DY(n,e,t){return t.some(r=>My(n,e,r)&&ki(r)!==Pe)}function xY(n,e,t){return t.some(r=>My(n,e,r))}function My(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function TY(n,e,t){return e.length===0&&!n.children[t]}var YD=class{};function AY(n,e,t,r,i,s,o="emptyOnly"){return new JD(n,e,t,r,i,o,s).recognize()}var SY=31,JD=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new GD(this.urlSerializer,this.urlTree)}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=KU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{let i=new jr(r,t),s=new df("",i),o=cO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new _c([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),Oo(r=>{if(r instanceof pf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ff?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Ce(o=>o instanceof jr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return _t(s).pipe(js(o=>{let a=r.children[o],c=zK(t,o);return this.processSegmentGroup(e,c,a,o,i)}),PC((o,a)=>(o.push(...a),o)),Lo(null),SC(),Qt(o=>{if(o===null)return ou(r);let a=EO(o);return MY(a),fe(a)}))}processSegment(e,t,r,i,s,o,a){return _t(t).pipe(js(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Oo(l=>{if(l instanceof ff)return fe(null);throw l}))),Hs(c=>!!c),Oo(c=>{if(wO(c))return TY(r,i,s)?fe(new YD):ou(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return ki(r)!==o&&(o===Pe||!My(i,s,r))?ou(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ou(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=CO(t,i,s);if(!c)return ou(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SY&&(this.allowRedirects=!1));let p=new _c(s,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,YU(i),ki(i),i.component??i._loadedComponent??null,i,JU(i)),y=Dy(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(y.params),p.data=Object.freeze(y.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,p,e).pipe(Pn(b=>this.applyRedirects.lineralizeSegments(i,b)),Qt(b=>this.processSegment(e,r,t,b.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=bY(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Pn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Pn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=c,y=new _c(f,h,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,YU(r),ki(r),r.component??r._loadedComponent??null,r,JU(r)),w=Dy(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let{segmentGroup:b,slicedSegments:A}=KU(t,f,p,l);if(A.length===0&&b.hasChildren())return this.processChildren(u,l,b,y).pipe(Ce(U=>new jr(y,U)));if(l.length===0&&A.length===0)return fe(new jr(y,[]));let P=ki(r)===s;return this.processSegment(u,l,b,A,P?Pe:s,!0,y).pipe(Ce(U=>new jr(y,U instanceof jr?[U]:[])))}))):ou(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):mY(e,t,r,this.urlSerializer).pipe(Qt(i=>i?this.configLoader.loadChildren(e,t).pipe(vn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):vY(t))):fe({routes:[],injector:e})}};function MY(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function PY(n){let e=n.value.routeConfig;return e&&e.path===""}function EO(n){let e=[],t=new Set;for(let r of n){if(!PY(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=EO(r.children);e.push(new jr(r.value,i))}return e.filter(r=>!t.has(r))}function YU(n){return n.data||{}}function JU(n){return n.resolve||{}}function kY(n,e,t,r,i,s){return Qt(o=>AY(n,e,t,r,o.extractedUrl,i,s).pipe(Ce(({state:a,tree:c})=>ue(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function RY(n,e){return Qt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of IO(c))o.add(l);let a=0;return _t(o).pipe(js(c=>s.has(c)?FY(c,r,n,e):(c.data=Dy(c,c.parent,n).resolve,fe(void 0))),vn(()=>a++),Ol(1),Qt(c=>a===o.size?fe(t):gr))})}function IO(n){let e=n.children.map(t=>IO(t)).flat();return[n,...e]}function FY(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!gO(i)&&(s[gf]=i.title),Xd(()=>(n.data=Dy(n,n.parent,t).resolve,NY(s,n,e,r).pipe(Ce(o=>(n._resolvedData=o,n.data=H(H({},n.data),o),null)))))}function NY(n,e,t,r){let i=LD(n);if(i.length===0)return fe({});let s={};return _t(i).pipe(Qt(o=>UY(n[o],e,t,r).pipe(Hs(),vn(a=>{if(a instanceof pu)throw xy(new wc,a);s[o]=a}))),Ol(1),Ce(()=>s),Oo(o=>wO(o)?gr:Nl(o)))}function UY(n,e,t,r){let i=yf(e)??r,s=yu(n,i),o=s.resolve?s.resolve(e,t):pn(i,()=>s(e,t));return ro(o)}function UD(n){return Pn(e=>{let t=n(e);return t?_t(t).pipe(Ce(()=>e)):fe(e)})}var XD=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[gf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(DO),providedIn:"root"})}return n})(),DO=(()=>{class n extends XD{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(oe(oy))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bf=new ee("",{providedIn:"root",factory:()=>({})}),Cf=new ee(""),xO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=W(XI);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ro(t.loadComponent()).pipe(Ce(AO),vn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),qa(()=>{this.componentLoaders.delete(t)})),i=new Pl(r,()=>new Rt).pipe(Ml());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=TO(r,this.compiler,t,this.onLoadEndListener).pipe(qa(()=>{this.childrenLoaders.delete(r)})),o=new Pl(s,()=>new Rt).pipe(Ml());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TO(n,e,t,r){return ro(n.loadChildren()).pipe(Ce(AO),Qt(i=>i instanceof R0||Array.isArray(i)?fe(i):_t(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Cf,[],{optional:!0,self:!0}).flat()),{routes:o.map(ZD),injector:s}}))}function OY(n){return n&&typeof n=="object"&&"default"in n}function AO(n){return OY(n)?n.default:n}var Py=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(LY),providedIn:"root"})}return n})(),LY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SO=new ee("");var MO=new ee(""),PO=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Rt;transitionAbortWithErrorSubject=new Rt;configLoader=W(xO);environmentInjector=W(Zt);destroyRef=W(Gs);urlSerializer=W(mf);rootContexts=W(mu);location=W(nu);inputBindingEnabled=W(Sy,{optional:!0})!==null;titleStrategy=W(XD);options=W(bf,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=W(Py);createViewTransition=W(SO,{optional:!0});navigationErrorHandler=W(MO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new _y(i)),r=i=>this.events.next(new vy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ue(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new dn(null),this.transitions.pipe(hn(r=>r!==null),Pn(r=>{let i=!1;return fe(r).pipe(Pn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",cr.SupersededByNewNavigation),gr;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ue(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&a!=="reload"){let c="";return this.events.next(new no(s.id,this.urlSerializer.serialize(s.rawUrl),c,af.IgnoredSameUrlNavigation)),s.resolve(!1),gr}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return fe(s).pipe(Pn(c=>(this.events.next(new bc(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?gr:Promise.resolve(c))),kY(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ue(H({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new cf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:f}=s,p=new bc(c,this.urlSerializer.serialize(l),u,h);this.events.next(p);let y=fO(this.rootComponentType).snapshot;return this.currentTransition=r=ue(H({},s),{targetSnapshot:y,urlAfterRedirects:l,extras:ue(H({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,fe(r)}else{let c="";return this.events.next(new no(s.id,this.urlSerializer.serialize(s.extractedUrl),c,af.IgnoredByUrlHandlingStrategy)),s.resolve(!1),gr}}),vn(s=>{let o=new py(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),Ce(s=>(this.currentTransition=r=ue(H({},s),{guards:QK(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),cY(this.environmentInjector,s=>this.events.next(s)),vn(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw xy(this.urlSerializer,s.guardsResult);let o=new gy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),hn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",cr.GuardRejected),!1)),UD(s=>{if(s.guards.canActivateChecks.length!==0)return fe(s).pipe(vn(o=>{let a=new my(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Pn(o=>{let a=!1;return fe(o).pipe(RY(this.paramsInheritanceStrategy,this.environmentInjector),vn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",cr.NoDataFromResolver)}}))}),vn(o=>{let a=new yy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),UD(s=>{let o=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(vn(l=>{a.component=l}),Ce(()=>{})));for(let l of a.children)c.push(...o(l));return c};return Dm(o(s.targetSnapshot.root)).pipe(Lo(null),$s(1))}),UD(()=>this.afterPreactivation()),Pn(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return a?_t(a).pipe(Ce(()=>r)):fe(r)}),Ce(s=>{let o=qK(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ue(H({},s),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),vn(()=>{this.events.next(new lf)}),JK(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),$s(1),Tm(new ye(s=>{let o=r.abortController.signal,a=()=>s.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(hn(()=>!i&&!r.targetRouterState),vn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",cr.Aborted)}))),vn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new to(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Tm(this.transitionAbortWithErrorSubject.pipe(vn(s=>{throw s}))),qa(()=>{i||this.cancelNavigationTransition(r,"",cr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Oo(s=>{if(this.destroyed)return r.resolve(!1),gr;if(i=!0,vO(s))this.events.next(new us(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),YK(s)?this.events.next(new fu(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new du(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let a=pn(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof pu){let{message:c,cancellationCode:l}=xy(this.urlSerializer,a);this.events.next(new us(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new fu(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return gr}))}))}cancelNavigationTransition(t,r,i){let s=new us(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VY(n){return n!==rf}var kO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(BY),providedIn:"root"})}return n})(),Ay=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},BY=(()=>{class n extends Ay{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RO=(()=>{class n{urlSerializer=W(mf);options=W(bf,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=W(nu);urlHandlingStrategy=W(Py);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ds;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ds?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=fO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:()=>W(jY),providedIn:"root"})}return n})(),jY=(()=>{class n extends RO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof bc?this.updateStateMemento():t instanceof no?this.commitTransition(r):t instanceof cf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof lf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof us&&t.code!==cr.SupersededByNewNavigation&&t.code!==cr.Redirect?this.restoreHistory(r):t instanceof du?this.restoreHistory(r,!0):t instanceof to&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ex(n,e){n.events.pipe(hn(t=>t instanceof to||t instanceof us||t instanceof du||t instanceof no),Ce(t=>t instanceof to||t instanceof no?0:(t instanceof us?t.code===cr.Redirect||t.code===cr.SupersededByNewNavigation:!1)?2:1),hn(t=>t!==2),$s(1)).subscribe(()=>{e()})}var $Y={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ci=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=W(GI);stateManager=W(RO);options=W(bf,{optional:!0})||{};pendingTasks=W(Ys);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=W(PO);urlSerializer=W(mf);location=W(nu);urlHandlingStrategy=W(Py);injector=W(Zt);_events=new Rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=W(kO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=W(Cf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!W(Sy,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new $t;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof us&&r.code!==cr.Redirect&&r.code!==cr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof to)this.navigated=!0;else if(r instanceof fu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VY(i.source)},o);this.scheduleNavigation(a,rf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$K(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.injector.get(vr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ZD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=lO(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return uO(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=uu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rf,null,r)}navigate(t,r={skipLocationChange:!1}){return zY(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},$Y):r===!1?i=H({},HY):i=r,uu(t))return zU(this.currentUrlTree,t,i);let s=this.parseUrl(t);return zU(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,f)=>{a=h,c=f});let u=this.pendingTasks.add();return ex(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ne(4008,!1)}var qY=new ee("");function tx(n,...e){return fn([{provide:Cf,multi:!0,useValue:n},[],{provide:ia,useFactory:GY,deps:[ci]},{provide:F0,multi:!0,useFactory:KY},e.map(t=>t.\u0275providers)])}function GY(n){return n.routerState.root}function KY(){let n=W(vt);return e=>{let t=n.get(fc);if(e!==t.components[0])return;let r=n.get(ci),i=n.get(YY);n.get(JY)===1&&r.initialNavigation(),n.get(QY,null,{optional:!0})?.setUpPreloading(),n.get(qY,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YY=new ee("",{factory:()=>new Rt}),JY=new ee("",{providedIn:"root",factory:()=>1});var QY=new ee("");var FO=()=>{};var rx={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Z=function(n,e){if(!n)throw Cc(e)},Cc=function(n){return new Error("Firebase Database ("+rx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var OO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},XY=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(f=64)),r.push(t[u],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XY(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new ix;let f=s<<2|a>>4;if(r.push(f),l!==64){let p=a<<4&240|l>>2;if(r.push(p),h!==64){let y=l<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ix=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ox=function(n){let e=OO(n);return wu.encodeByteArray(e,!0)},If=function(n){return ox(n).replace(/\./g,"")},_u=function(n){try{return wu.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LO(n){return VO(void 0,n)}function VO(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!eJ(t)||(n[t]=VO(n[t],e[t]));return n}function eJ(n){return n!=="__proto__"}function ax(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tJ=()=>ax().__FIREBASE_DEFAULTS__,nJ=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rJ=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&_u(n[1]);return e&&JSON.parse(e)},Fy=()=>{try{return FO()||tJ()||nJ()||rJ()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cx=n=>{var e,t;return(t=(e=Fy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ny=n=>{let e=cx(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lx=()=>{var n;return(n=Fy())===null||n===void 0?void 0:n.config},ux=n=>{var e;return(e=Fy())===null||e===void 0?void 0:e[`_${n}`]};var Ri=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Fi(n){return n.endsWith(".cloudworkstations.dev")}function bu(n){return x(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Uy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[If(JSON.stringify(t)),If(JSON.stringify(o)),""].join(".")}var Ef={};function iJ(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ef))Ef[e]?n.emulator.push(e):n.prod.push(e);return n}function sJ(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var NO=!1;function Cu(n,e){if(typeof window>"u"||typeof document>"u"||!Fi(window.location.host)||Ef[n]===e||Ef[n]||NO)return;Ef[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",s=iJ().prod.length>0;function o(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{NO=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){let f=sJ(r),p=t("text"),y=document.getElementById(p)||document.createElement("span"),w=t("learnmore"),b=document.getElementById(w)||document.createElement("a"),A=t("preprendIcon"),P=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let U=f.element;a(U),u(b,w);let V=l();c(P,A),U.append(P,y,b,V),document.body.appendChild(U)}s?(y.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Df(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function oJ(){var n;let e=(n=Fy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Oy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jO(){let n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hs(){return rx.NODE_CLIENT===!0||rx.NODE_ADMIN===!0}function $O(){return!oJ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sa(){try{return typeof indexedDB=="object"}catch{return!1}}function Tf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function dx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var aJ="FirebaseError",Nn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aJ,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lr.prototype.create)}},lr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?cJ(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nn(i,a,r)}};function cJ(n,e){return n.replace(lJ,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var lJ=/\{\$([^}]+)}/g;function vu(n){return JSON.parse(n)}function nn(n){return JSON.stringify(n)}var HO=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=vu(_u(s[0])||""),t=vu(_u(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var zO=function(n){let e=HO(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},WO=function(n){let e=HO(n).claims;return typeof e=="object"&&e.admin===!0};function Ni(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ec(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Af(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sf(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function ur(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(UO(s)&&UO(o)){if(!ur(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function UO(n){return n!==null&&typeof n=="object"}function Ic(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Iu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Ry=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){let f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):h<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function qO(n,e){let t=new sx(n,e);return t.subscribe.bind(t)}var sx=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");uJ(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nx),i.error===void 0&&(i.error=nx),i.complete===void 0&&(i.complete=nx);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uJ(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nx(){}function Ly(n,e){return`${n} failed: ${e} argument `}var GO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,Z(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Mf=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var dJ=1e3,hJ=2,fJ=4*60*60*1e3,pJ=.5;function Vy(n,e=dJ,t=hJ){let r=e*Math.pow(t,n),i=Math.round(pJ*r*(Math.random()-.5)*2);return Math.min(fJ,r+i)}function We(n){return n&&n._delegate?n._delegate:n}var Ft=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Dc="[DEFAULT]";var By=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ri;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mJ(e))try{this.getOrInitializeService({instanceIdentifier:Dc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Dc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return x(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Dc){return this.instances.has(e)}getOptions(e=Dc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gJ(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dc){return this.component?this.component.multipleInstances?e:Dc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gJ(n){return n===Dc?void 0:n}function mJ(n){return n.instantiationMode==="EAGER"}var Pf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new By(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var yJ=[],Ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ue||{}),_J={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},vJ=Ue.INFO,wJ={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},bJ=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=wJ[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Dr=class{constructor(e){this.name=e,this._logLevel=vJ,this._logHandler=bJ,this._userLogHandler=null,yJ.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_J[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var CJ=(n,e)=>e.some(t=>n instanceof t),KO,YO;function EJ(){return KO||(KO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IJ(){return YO||(YO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JO=new WeakMap,fx=new WeakMap,QO=new WeakMap,hx=new WeakMap,gx=new WeakMap;function DJ(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(fs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&JO.set(t,n)}).catch(()=>{}),gx.set(e,n),e}function xJ(n){if(fx.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});fx.set(n,e)}var px={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZO(n){px=n(px)}function TJ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(jy(this),e,...t);return QO.set(r,e.sort?e.sort():[e]),fs(r)}:IJ().includes(n)?function(...e){return n.apply(jy(this),e),fs(JO.get(this))}:function(...e){return fs(n.apply(jy(this),e))}}function AJ(n){return typeof n=="function"?TJ(n):(n instanceof IDBTransaction&&xJ(n),CJ(n,EJ())?new Proxy(n,px):n)}function fs(n){if(n instanceof IDBRequest)return DJ(n);if(hx.has(n))return hx.get(n);let e=AJ(n);return e!==n&&(hx.set(n,e),gx.set(e,n)),e}var jy=n=>gx.get(n);function $y(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=fs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(fs(o.result),c.oldVersion,c.newVersion,fs(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var SJ=["get","getKey","getAll","getAllKeys","count"],MJ=["put","add","delete","clear"],mx=new Map;function XO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mx.get(e))return mx.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=MJ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SJ.includes(t)))return;let s=function(o,...a){return x(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return mx.set(e,s),s}ZO(n=>ue(H({},n),{get:(e,t,r)=>XO(e,t)||n.get(e,t,r),has:(e,t)=>!!XO(e,t)||n.has(e,t)}));var _x=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PJ(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function PJ(n){let e=n.getComponent();return e?.type==="VERSION"}var vx="@firebase/app",eL="0.13.1";var io=new Dr("@firebase/app"),kJ="@firebase/app-compat",RJ="@firebase/analytics-compat",FJ="@firebase/analytics",NJ="@firebase/app-check-compat",UJ="@firebase/app-check",OJ="@firebase/auth",LJ="@firebase/auth-compat",VJ="@firebase/database",BJ="@firebase/data-connect",jJ="@firebase/database-compat",$J="@firebase/functions",HJ="@firebase/functions-compat",zJ="@firebase/installations",WJ="@firebase/installations-compat",qJ="@firebase/messaging",GJ="@firebase/messaging-compat",KJ="@firebase/performance",YJ="@firebase/performance-compat",JJ="@firebase/remote-config",QJ="@firebase/remote-config-compat",ZJ="@firebase/storage",XJ="@firebase/storage-compat",eQ="@firebase/firestore",tQ="@firebase/ai",nQ="@firebase/firestore-compat",rQ="firebase",iQ="11.9.0";var wx="[DEFAULT]",sQ={[vx]:"fire-core",[kJ]:"fire-core-compat",[FJ]:"fire-analytics",[RJ]:"fire-analytics-compat",[UJ]:"fire-app-check",[NJ]:"fire-app-check-compat",[OJ]:"fire-auth",[LJ]:"fire-auth-compat",[VJ]:"fire-rtdb",[BJ]:"fire-data-connect",[jJ]:"fire-rtdb-compat",[$J]:"fire-fn",[HJ]:"fire-fn-compat",[zJ]:"fire-iid",[WJ]:"fire-iid-compat",[qJ]:"fire-fcm",[GJ]:"fire-fcm-compat",[KJ]:"fire-perf",[YJ]:"fire-perf-compat",[JJ]:"fire-rc",[QJ]:"fire-rc-compat",[ZJ]:"fire-gcs",[XJ]:"fire-gcs-compat",[eQ]:"fire-fst",[nQ]:"fire-fst-compat",[tQ]:"fire-vertex","fire-js":"fire-js",[rQ]:"fire-js-all"};var kf=new Map,oQ=new Map,bx=new Map;function tL(n,e){try{n.container.addComponent(e)}catch(t){io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mn(n){let e=n.name;if(bx.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;bx.set(e,n);for(let t of kf.values())tL(t,n);for(let t of oQ.values())tL(t,n);return!0}function xr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gn(n){return n==null?!1:n.settings!==void 0}var aQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new lr("app","Firebase",aQ);var Cx=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}};var ps=iQ;function Dx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:wx,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw oa.create("bad-app-name",{appName:String(i)});if(t||(t=lx()),!t)throw oa.create("no-options");let s=kf.get(i);if(s){if(ur(t,s.options)&&ur(r,s.config))return s;throw oa.create("duplicate-app",{appName:i})}let o=new Pf(i);for(let c of bx.values())o.addComponent(c);let a=new Cx(t,r,o);return kf.set(i,a),a}function li(n=wx){let e=kf.get(n);if(!e&&n===wx&&lx())return Dx();if(!e)throw oa.create("no-app",{appName:n});return e}function Hy(){return Array.from(kf.values())}function ze(n,e,t){var r;let i=(r=sQ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(a.join(" "));return}mn(new Ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var cQ="firebase-heartbeat-database",lQ=1,Rf="firebase-heartbeat-store",yx=null;function sL(){return yx||(yx=$y(cQ,lQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rf)}catch(t){console.warn(t)}}}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),yx}function uQ(n){return x(this,null,function*(){try{let t=(yield sL()).transaction(Rf),r=yield t.objectStore(Rf).get(oL(n));return yield t.done,r}catch(e){if(e instanceof Nn)io.warn(e.message);else{let t=oa.create("idb-get",{originalErrorMessage:e?.message});io.warn(t.message)}}})}function nL(n,e){return x(this,null,function*(){try{let r=(yield sL()).transaction(Rf,"readwrite");yield r.objectStore(Rf).put(e,oL(n)),yield r.done}catch(t){if(t instanceof Nn)io.warn(t.message);else{let r=oa.create("idb-set",{originalErrorMessage:t?.message});io.warn(r.message)}}})}function oL(n){return`${n.name}!${n.options.appId}`}var dQ=1024,hQ=30,Ex=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ix(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return x(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rL();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>hQ){let o=pQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){io.warn(r)}})}getHeartbeatsHeader(){return x(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=rL(),{heartbeatsToSend:r,unsentEntries:i}=fQ(this._heartbeatsCache.heartbeats),s=If(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return io.warn(t),""}})}};function rL(){return new Date().toISOString().substring(0,10)}function fQ(n,e=dQ){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ix=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return x(this,null,function*(){return sa()?Tf().then(()=>!0).catch(()=>!1):!1})}read(){return x(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield uQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return x(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return x(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function iL(n){return If(JSON.stringify({version:2,heartbeats:n})).length}function pQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function gQ(n){mn(new Ft("platform-logger",e=>new _x(e),"PRIVATE")),mn(new Ft("heartbeat",e=>new Ex(e),"PRIVATE")),ze(vx,eL,n),ze(vx,eL,"esm2017"),ze("fire-js","")}gQ("");var mQ="firebase",yQ="11.9.1";ze(mQ,yQ,"app");function aL(n){n===void 0&&(n=W(vt));let e=n.get(Yo);return t=>new ye(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Tr=new tu("ANGULARFIRE2_VERSION");function so(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gs=(n,e)=>{let t=e?[e]:Hy(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Du=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Du||{}),cL=cD()&&typeof Zone<"u"?Du.WARN:Du.SILENT;var zy=class{zone;delegate;constructor(e,t=EC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ui=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=W(Le);this.outsideAngular=t.runOutsideAngular(()=>new zy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new zy(typeof Zone>"u"?void 0:Zone.current,Zd))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lL=!1;function _Q(n,e){!lL&&(cL>Du.SILENT||cD())&&(lL=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),cL>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function vQ(n){let e=W(Le,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function xc(n){let e=W(Le,{optional:!0});return e?e.run(()=>n()):n()}var wQ=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),pn(t,()=>xc(()=>n.apply(void 0,r)))),qe=(n,e,t)=>(t||=e?Du.WARN:Du.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=W(ui),o=W(Yo),a=W(Zt)}catch{return _Q(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=xc(()=>o.add())),i[l]=wQ(i[l],r,a));let c=vQ(()=>n.apply(this,i));return e?c instanceof ye?c.pipe(Uo(s.outsideAngular),No(s.insideAngular),aL(a)):c instanceof Promise?xc(()=>{let l=o.add();return new Promise((u,h)=>{c.then(f=>pn(a,()=>xc(()=>u(f))),f=>pn(a,()=>xc(()=>h(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:xc(()=>c):c instanceof ye?c.pipe(Uo(s.outsideAngular),No(s.insideAngular)):xc(()=>c)});var Hr=class{constructor(e){return e}},Ui=class{constructor(){return Hy()}};function bQ(n){return n&&n.length===1?n[0]:new Hr(li())}var xx=new ee("angularfire2._apps"),CQ={provide:Hr,useFactory:bQ,deps:[[new Wt,xx]]},EQ={provide:Ui,deps:[[new Wt,xx]]};function IQ(n){return(e,t)=>{let r=t.get(Lr);ze("angularfire",Tr.full,"core"),ze("angularfire",Tr.full,"app"),ze("angular",qN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Hr(i)}}function uL(n,...e){return fn([CQ,EQ,{provide:xx,useFactory:IQ(n),multi:!0,deps:[Le,vt,ui,...e]}])}var Wy=qe(Dx,!0);var DQ=new Map,xQ={activated:!1,tokenObservers:[]},TQ={initialized:!1,enabled:!1};function Oi(n){return DQ.get(n)||Object.assign({},xQ)}function pL(){return TQ}var AQ="https://content-firebaseappcheck.googleapis.com/v1";var SQ="exchangeDebugToken",dL={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},oPe=24*60*60*1e3;var Sx=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new Ri,this.pending.promise.catch(t=>{}),yield MQ(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ri,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function MQ(n){return new Promise(e=>{setTimeout(e,n)})}var PQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},aa=new lr("appCheck","AppCheck",PQ);function gL(n){if(!Oi(n).activated)throw aa.create("use-before-activation",{appName:n.name})}function mL(r,i){return x(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(p){throw aa.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw aa.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(p){throw aa.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw aa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function yL(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${AQ}/projects/${t}/apps/${r}:${SQ}?key=${i}`,body:{debug_token:e}}}var kQ="firebase-app-check-database",RQ=1,Mx="firebase-app-check-store";var qy=null;function FQ(){return qy||(qy=new Promise((n,e)=>{try{let t=indexedDB.open(kQ,RQ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(aa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Mx,{keyPath:"compositeKey"})}}}catch(t){e(aa.create("storage-open",{originalErrorMessage:t?.message}))}}),qy)}function NQ(n,e){return UQ(OQ(n),e)}function UQ(n,e){return x(this,null,function*(){let r=(yield FQ()).transaction(Mx,"readwrite"),s=r.objectStore(Mx).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(aa.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function OQ(n){return`${n.options.appId}-${n.name}`}var Ff=new Dr("@firebase/app-check");function Tx(n,e){return sa()?NQ(n,e).catch(t=>{Ff.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _L(){return pL().enabled}function vL(){return x(this,null,function*(){let n=pL();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var LQ={error:"UNKNOWN_ERROR"};function VQ(n){return wu.encodeString(JSON.stringify(n),!1)}function Px(n,e=!1,t=!1){return x(this,null,function*(){let r=n.app;gL(r);let i=Oi(r),s=i.token,o;if(s&&!Nf(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Nf(l)?s=l:yield Tx(r,void 0))}if(!e&&s&&Nf(s))return{token:s.token};let a=!1;if(_L())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=mL(yL(r,yield vL()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Tx(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ff.warn(l.message):t&&Ff.error(l),Ax(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield Oi(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ff.warn(l.message):t&&Ff.error(l),o=l}let c;return s?o?Nf(s)?c={token:s.token,internalError:o}:c=Ax(o):(c={token:s.token},i.token=s,yield Tx(r,s)):c=Ax(o),a&&HQ(r,c),c})}function BQ(n){return x(this,null,function*(){let e=n.app;gL(e);let{provider:t}=Oi(e);if(_L()){let r=yield vL(),{token:i}=yield mL(yL(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function jQ(n,e,t,r){let{app:i}=n,s=Oi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Nf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),hL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>hL(n))}function wL(n,e){let t=Oi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function hL(n){let{app:e}=n,t=Oi(e),r=t.tokenRefresher;r||(r=$Q(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $Q(n){let{app:e}=n;return new Sx(()=>x(null,null,function*(){let t=Oi(e),r;if(t.token?r=yield Px(n,!0):r=yield Px(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Oi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},dL.RETRIAL_MIN_WAIT,dL.RETRIAL_MAX_WAIT)}function HQ(n,e){let t=Oi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nf(n){return n.expireTimeMillis-Date.now()>0}function Ax(n){return{token:VQ(LQ),error:n}}var kx=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Oi(this.app);for(let t of e)wL(this.app,t.next);return Promise.resolve()}};function zQ(n,e){return new kx(n,e)}function WQ(n){return{getToken:e=>Px(n,e),getLimitedUseToken:()=>BQ(n),addTokenListener:e=>jQ(n,"INTERNAL",e),removeTokenListener:e=>wL(n.app,e)}}var qQ="@firebase/app-check",GQ="0.10.0";var KQ="app-check",fL="app-check-internal";function YQ(){mn(new Ft(KQ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zQ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fL).initialize()})),mn(new Ft(fL,n=>{let e=n.getProvider("app-check").getImmediate();return WQ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ze(qQ,GQ)}YQ();var JQ="app-check";var ca=class{constructor(){return gs(JQ)}};var QQ=["localhost","0.0.0.0","127.0.0.1"],vPe=typeof window<"u"&&QQ.includes(window.location.hostname);function UL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var OL=UL,LL=new lr("auth","Firebase",UL());var Zy=new Dr("@firebase/auth");function ZQ(n,...e){Zy.logLevel<=Ue.WARN&&Zy.warn(`Auth (${ps}): ${n}`,...e)}function Ky(n,...e){Zy.logLevel<=Ue.ERROR&&Zy.error(`Auth (${ps}): ${n}`,...e)}function ys(n,...e){throw r1(n,...e)}function Tc(n,...e){return r1(n,...e)}function VL(n,e,t){let r=Object.assign(Object.assign({},OL()),{[e]:t});return new lr("auth","Firebase",r).create(e,{appName:n.name})}function co(n){return VL(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r1(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return LL.create(n,...e)}function _e(n,e,...t){if(!n)throw r1(e,...t)}function oo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ky(e),new Error(e)}function da(n,e){n||oo(e)}function Ux(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function XQ(){return bL()==="http:"||bL()==="https:"}function bL(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function eZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XQ()||xf()||"connection"in navigator)?navigator.onLine:!0}function tZ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ac=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,da(t>e,"Short delay should be less than long delay!"),this.isMobile=Df()||Oy()}get(){return eZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function i1(n,e){da(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xy=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iZ=new Ac(3e4,6e4);function ha(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function lo(s,o,a,c){return x(this,arguments,function*(n,e,t,r,i={}){return BL(n,i,()=>x(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=Ic(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:f},l);return BO()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Fi(n.emulatorConfig.host)&&(p.credentials="include"),Xy.fetch()(yield jL(n,n.config.apiHost,t,h),p)}))})}function BL(n,e,t){return x(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},nZ),e);try{let i=new Ox(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Gy(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gy(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Gy(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Gy(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw VL(n,u,l);ys(n,u)}}catch(i){if(i instanceof Nn)throw i;ys(n,"network-request-failed",{message:String(i)})}})}function Hf(s,o,a,c){return x(this,arguments,function*(n,e,t,r,i={}){let l=yield lo(n,e,t,r,i);return"mfaPendingCredential"in l&&ys(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function jL(n,e,t,r){return x(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?i1(n.config,i):`${n.config.apiScheme}://${i}`;return rZ.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function sZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ox=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tc(this.auth,"network-request-failed")),iZ.get())})}};function Gy(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Tc(n,e,r);return i.customData._tokenResponse=t,i}function CL(n){return n!==void 0&&n.enterprise!==void 0}var Lx=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sZ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function oZ(n,e){return x(this,null,function*(){return lo(n,"GET","/v2/recaptchaConfig",ha(n,e))})}function aZ(n,e){return x(this,null,function*(){return lo(n,"POST","/v1/accounts:delete",e)})}function e_(n,e){return x(this,null,function*(){return lo(n,"POST","/v1/accounts:lookup",e)})}function Of(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function s1(n,e=!1){return x(this,null,function*(){let t=We(n),r=yield t.getIdToken(e),i=o1(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Of(Rx(i.auth_time)),issuedAtTime:Of(Rx(i.iat)),expirationTime:Of(Rx(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Rx(n){return Number(n)*1e3}function o1(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ky("JWT malformed, contained fewer than 3 sections"),null;try{let i=_u(t);return i?JSON.parse(i):(Ky("Failed to decode base64 JWT payload"),null)}catch(i){return Ky("Caught error parsing JWT payload as JSON",i?.toString()),null}}function EL(n){let e=o1(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xu(n,e,t=!1){return x(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nn&&cZ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function cZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vx=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>x(this,null,function*(){yield this.iteration()}),t)}iteration(){return x(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Of(this.lastLoginAt),this.creationTime=Of(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function t_(n){return x(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield xu(n,e_(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$L(s.providerUserInfo):[],a=lZ(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function a1(n){return x(this,null,function*(){let e=We(n);yield t_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lZ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $L(n){return n.map(e=>{var{providerId:t}=e,r=IC(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uZ(n,e){return x(this,null,function*(){let t=yield BL(n,{},()=>x(null,null,function*(){let r=Ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield jL(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Fi(n.emulatorConfig.host)&&(c.credentials="include"),Xy.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function dZ(n,e){return x(this,null,function*(){return lo(n,"POST","/v2/accounts:revokeToken",ha(n,e))})}var Lf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=EL(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return x(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return x(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield uZ(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return oo("not implemented")}};function la(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ua=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=IC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vf(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return x(this,null,function*(){let t=yield xu(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return s1(this,e)}reload(){return a1(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return x(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield t_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return x(this,null,function*(){if(Gn(this.auth.app))return Promise.reject(co(this.auth));let e=yield this.getIdToken();return yield xu(this,aZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,A=(l=t.createdAt)!==null&&l!==void 0?l:void 0,P=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:U,emailVerified:V,isAnonymous:B,providerData:$,stsTokenManager:S}=t;_e(U&&S,e,"internal-error");let D=Lf.fromJSON(this.name,S);_e(typeof U=="string",e,"internal-error"),la(h,e.name),la(f,e.name),_e(typeof V=="boolean",e,"internal-error"),_e(typeof B=="boolean",e,"internal-error"),la(p,e.name),la(y,e.name),la(w,e.name),la(b,e.name),la(A,e.name),la(P,e.name);let T=new n({uid:U,auth:e,email:f,emailVerified:V,displayName:h,isAnonymous:B,photoURL:y,phoneNumber:p,tenantId:w,stsTokenManager:D,createdAt:A,lastLoginAt:P});return $&&Array.isArray($)&&(T.providerData=$.map(k=>Object.assign({},k))),b&&(T._redirectEventId=b),T}static _fromIdTokenResponse(e,t,r=!1){return x(this,null,function*(){let i=new Lf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield t_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return x(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?$L(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Lf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Vf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var IL=new Map;function ao(n){da(n instanceof Function,"Expected a class definition");let e=IL.get(n);return e?(da(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IL.set(n,e),e)}var hZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return x(this,null,function*(){return!0})}_set(t,r){return x(this,null,function*(){this.storage[t]=r})}_get(t){return x(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return x(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Bx=hZ;function Yy(n,e,t){return`firebase:${n}:${e}:${t}`}var n_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Yy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return x(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield e_(this.auth,{idToken:e}).catch(()=>{});return t?ua._fromGetAccountInfoResponse(this.auth,t,e):null}return ua._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return x(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return x(this,null,function*(){if(!t.length)return new n(ao(Bx),e,r);let i=(yield Promise.all(t.map(l=>x(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ao(Bx),o=Yy(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let h;if(typeof u=="string"){let f=yield e_(e,{idToken:u}).catch(()=>{});if(!f)break;h=yield ua._fromGetAccountInfoResponse(e,f,u)}else h=ua._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>x(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function DL(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KL(e))return"Blackberry";if(YL(e))return"Webos";if(zL(e))return"Safari";if((e.includes("chrome/")||WL(e))&&!e.includes("edge/"))return"Chrome";if(GL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HL(n=En()){return/firefox\//i.test(n)}function zL(n=En()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WL(n=En()){return/crios\//i.test(n)}function qL(n=En()){return/iemobile/i.test(n)}function GL(n=En()){return/android/i.test(n)}function KL(n=En()){return/blackberry/i.test(n)}function YL(n=En()){return/webos/i.test(n)}function c1(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fZ(n=En()){var e;return c1(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pZ(){return jO()&&document.documentMode===10}function JL(n=En()){return c1(n)||GL(n)||YL(n)||KL(n)||/windows phone/i.test(n)||qL(n)}function QL(n,e=[]){let t;switch(n){case"Browser":t=DL(En());break;case"Worker":t=`${DL(En())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ps}/${r}`}var jx=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return x(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function gZ(t){return x(this,arguments,function*(n,e={}){return lo(n,"GET","/v2/passwordPolicy",ha(n,e))})}var mZ=6,$x=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:mZ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hx=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r_(this),this.idTokenSubscription=new r_(this),this.beforeStateQueue=new jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ao(t)),this._initializationPromise=this.queue(()=>x(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield n_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return x(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return x(this,null,function*(){try{let t=yield e_(this,{idToken:e}),r=yield ua._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return x(this,null,function*(){var t;if(Gn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return x(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return x(this,null,function*(){try{yield t_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=tZ()}_delete(){return x(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return x(this,null,function*(){if(Gn(this.app))return Promise.reject(co(this));let t=e?We(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return x(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>x(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return x(this,null,function*(){return Gn(this.app)?Promise.reject(co(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Gn(this.app)?Promise.reject(co(this)):this.queue(()=>x(this,null,function*(){yield this.assertedPersistence.setPersistence(ao(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return x(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return x(this,null,function*(){let e=yield gZ(this),t=new $x(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return x(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dZ(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return x(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return x(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ao(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield n_.create(this,[ao(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return x(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>x(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return x(this,null,function*(){if(e===this.currentUser)return this.queue(()=>x(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return x(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return x(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return x(this,null,function*(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&ZQ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Mc(n){return We(n)}var r_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var u_={loadJS(){return x(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yZ(n){u_=n}function ZL(n){return u_.loadJS(n)}function _Z(){return u_.recaptchaEnterpriseScript}function vZ(){return u_.gapiScript}function XL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var zx=class{constructor(){this.enterprise=new Wx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Wx=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var wZ="recaptcha-enterprise",eV="NO_RECAPTCHA",qx=class{constructor(e){this.type=wZ,this.auth=Mc(e)}verify(e="verify",t=!1){return x(this,null,function*(){function r(s){return x(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>x(null,null,function*(){oZ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Lx(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;CL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(eV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zx().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&CL(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=_Z();c.length!==0&&(c+=a),ZL(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Uf(n,e,t,r=!1,i=!1){return x(this,null,function*(){let s=new qx(n),o;if(i)o=eV;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Gx(n,e,t,r,i){return x(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Uf(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>x(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Uf(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield Uf(n,e,t);return r(n,a).catch(c=>x(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield Uf(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)}))}else{let a=yield Uf(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function l1(n,e){let t=xr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ur(s,e??{}))return i;ys(i,"already-initialized")}return t.initialize({options:e})}function bZ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ao);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function u1(n,e,t){let r=Mc(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=tV(e),{host:o,port:a}=CZ(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(ur(l,r.config.emulator)&&ur(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Fi(o)?(bu(`${s}//${o}${c}`),Cu("Auth",!0)):i||EZ()}function tV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CZ(n){let e=tV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:xL(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:xL(o)}}}function xL(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function EZ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Bf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oo("not implemented")}_getIdTokenResponse(e){return oo("not implemented")}_linkToIdToken(e,t){return oo("not implemented")}_getReauthenticationResolver(e){return oo("not implemented")}};function IZ(n,e){return x(this,null,function*(){return lo(n,"POST","/v1/accounts:update",e)})}function DZ(n,e){return x(this,null,function*(){return lo(n,"POST","/v1/accounts:signUp",e)})}function xZ(n,e){return x(this,null,function*(){return Hf(n,"POST","/v1/accounts:signInWithPassword",ha(n,e))})}function TZ(n,e){return x(this,null,function*(){return Hf(n,"POST","/v1/accounts:signInWithEmailLink",ha(n,e))})}function AZ(n,e){return x(this,null,function*(){return Hf(n,"POST","/v1/accounts:signInWithEmailLink",ha(n,e))})}var jf=class n extends Bf{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return x(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,t,"signInWithPassword",xZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return TZ(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}})}_linkToIdToken(e,t){return x(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,r,"signUpPassword",DZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AZ(e,{idToken:t,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Fx(n,e){return x(this,null,function*(){return Hf(n,"POST","/v1/accounts:signInWithIdp",ha(n,e))})}function SZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MZ(n){let e=Eu(Iu(n)).link,t=e?Eu(Iu(e)).deep_link_id:null,r=Eu(Iu(n)).deep_link_id;return(r?Eu(Iu(r)).link:null)||r||t||e||n}var i_=class n{constructor(e){var t,r,i,s,o,a;let c=Eu(Iu(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,h=SZ((i=c.mode)!==null&&i!==void 0?i:null);_e(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=MZ(e);try{return new n(t)}catch{return null}}};var nV=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return jf._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=i_.parseLink(r);return _e(i,"argument-error"),jf._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),s_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Kx=class extends s_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function PZ(n,e){return x(this,null,function*(){return Hf(n,"POST","/v1/accounts:signUp",ha(n,e))})}var Tu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return x(this,null,function*(){let s=yield ua._fromIdTokenResponse(e,r,i),o=TL(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return x(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=TL(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function TL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Yx=class n extends Nn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function rV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yx._fromErrorAndOperation(n,s,e,r):s})}function kZ(n,e,t=!1){return x(this,null,function*(){let r=yield xu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Tu._forOperation(n,"link",r)})}function RZ(n,e,t=!1){return x(this,null,function*(){let{auth:r}=n;if(Gn(r.app))return Promise.reject(co(r));let i="reauthenticate";try{let s=yield xu(n,rV(r,i,e,n),t);_e(s.idToken,r,"internal-error");let o=o1(s.idToken);_e(o,r,"internal-error");let{sub:a}=o;return _e(n.uid===a,r,"user-mismatch"),Tu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),s}})}function iV(n,e,t=!1){return x(this,null,function*(){if(Gn(n.app))return Promise.reject(co(n));let r="signIn",i=yield rV(n,r,e),s=yield Tu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function d1(n,e){return x(this,null,function*(){return iV(Mc(n),e)})}function sV(n){return x(this,null,function*(){let e=Mc(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function h1(n,e,t){return x(this,null,function*(){if(Gn(n.app))return Promise.reject(co(n));let r=Mc(n),o=yield Gx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PZ,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&sV(n),c}),a=yield Tu._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function f1(n,e,t){return Gn(n.app)?Promise.reject(co(n)):d1(We(n),nV.credential(e,t)).catch(r=>x(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&sV(n),r}))}function p1(n,e){return FZ(We(n),null,e)}function FZ(n,e,t){return x(this,null,function*(){let{auth:r}=n,s={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);let o=yield xu(n,IZ(r,s));yield n._updateTokensIfNecessary(o,!0)})}function d_(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function g1(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function h_(n,e,t,r){return We(n).onAuthStateChanged(e,t,r)}function m1(n){return We(n).signOut()}var o_="__sak";var a_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(o_,"1"),this.storage.removeItem(o_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NZ=1e3,UZ=10,OZ=(()=>{class n extends a_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);pZ()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,UZ):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},NZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return x(this,null,function*(){yield Ro(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return x(this,null,function*(){let r=yield Ro(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return x(this,null,function*(){yield Ro(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oV=OZ;var LZ=(()=>{class n extends a_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),y1=LZ;function VZ(n){return Promise.all(n.map(e=>x(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var BZ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return x(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>x(this,null,function*(){return u(r.origin,o)})),l=yield VZ(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function aV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Jx=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return x(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=aV("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ms(){return window}function jZ(n){ms().location.href=n}function cV(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}function $Z(){return x(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function HZ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zZ(){return cV()?self:null}var lV="firebaseLocalStorageDb",WZ=1,c_="firebaseLocalStorage",uV="fbase_key",Sc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function f_(n,e){return n.transaction([c_],e?"readwrite":"readonly").objectStore(c_)}function qZ(){let n=indexedDB.deleteDatabase(lV);return new Sc(n).toPromise()}function Qx(){let n=indexedDB.open(lV,WZ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(c_,{keyPath:uV})}catch(i){t(i)}}),n.addEventListener("success",()=>x(null,null,function*(){let r=n.result;r.objectStoreNames.contains(c_)?e(r):(r.close(),yield qZ(),e(yield Qx()))}))})}function AL(n,e,t){return x(this,null,function*(){let r=f_(n,!0).put({[uV]:e,value:t});return new Sc(r).toPromise()})}function GZ(n,e){return x(this,null,function*(){let t=f_(n,!1).get(e),r=yield new Sc(t).toPromise();return r===void 0?null:r.value})}function SL(n,e){let t=f_(n,!0).delete(e);return new Sc(t).toPromise()}var KZ=800,YZ=3,JZ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return x(this,null,function*(){return this.db?this.db:(this.db=yield Qx(),this.db)})}_withRetries(t){return x(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>YZ)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return x(this,null,function*(){return cV()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return x(this,null,function*(){this.receiver=BZ._getInstance(zZ()),this.receiver._subscribe("keyChanged",(t,r)=>x(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>x(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return x(this,null,function*(){var t,r;if(this.activeServiceWorker=yield $Z(),!this.activeServiceWorker)return;this.sender=new Jx(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return x(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||HZ()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return x(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Qx();return yield AL(t,o_,"1"),yield SL(t,o_),!0}catch{}return!1})}_withPendingWrite(t){return x(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return x(this,null,function*(){return this._withPendingWrite(()=>x(this,null,function*(){return yield this._withRetries(i=>AL(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return x(this,null,function*(){let r=yield this._withRetries(i=>GZ(i,t));return this.localCache[t]=r,r})}_remove(t){return x(this,null,function*(){return this._withPendingWrite(()=>x(this,null,function*(){return yield this._withRetries(r=>SL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return x(this,null,function*(){let t=yield this._withRetries(s=>{let o=f_(s,!1).getAll();return new Sc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>x(this,null,function*(){return this._poll()}),KZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),dV=JZ;var TPe=XL("rcb"),APe=new Ac(3e4,6e4);function QZ(n,e){return e?ao(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var $f=class extends Bf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fx(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fx(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fx(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ZZ(n){return iV(n.auth,new $f(n),n.bypassAuthState)}function XZ(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),RZ(t,new $f(n),n.bypassAuthState)}function eX(n){return x(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),kZ(t,new $f(n),n.bypassAuthState)})}var Zx=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>x(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return x(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZZ;case"linkViaPopup":case"linkViaRedirect":return eX;case"reauthViaPopup":case"reauthViaRedirect":return XZ;default:ys(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var SPe=new Ac(2e3,1e4);var tX="pendingRedirect",Jy=new Map,Xx=class n extends Zx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return x(this,null,function*(){let e=Jy.get(this.auth._key());if(!e){try{let r=(yield nX(this.resolver,this.auth))?yield Ro(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jy.set(this.auth._key(),e)}return this.bypassAuthState||Jy.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return x(this,null,function*(){if(e.type==="signInViaRedirect")return Ro(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ro(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return x(this,null,function*(){})}cleanUp(){}};function nX(n,e){return x(this,null,function*(){let t=sX(e),r=iX(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function rX(n,e){Jy.set(n._key(),e)}function iX(n){return ao(n._redirectPersistence)}function sX(n){return Yy(tX,n.config.apiKey,n.name)}function oX(n,e,t=!1){return x(this,null,function*(){if(Gn(n.app))return Promise.reject(co(n));let r=Mc(n),i=QZ(r,e),o=yield new Xx(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var aX=10*60*1e3,e1=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Tc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aX&&this.cachedEventUids.clear(),this.cachedEventUids.has(ML(e))}saveEventToCache(e){this.cachedEventUids.add(ML(e)),this.lastProcessedEventTime=Date.now()}};function ML(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hV(n);default:return!1}}function lX(t){return x(this,arguments,function*(n,e={}){return lo(n,"GET","/v1/projects",e)})}var uX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dX=/^https?/;function hX(n){return x(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield lX(n);for(let t of e)try{if(fX(t))return}catch{}ys(n,"unauthorized-domain")})}function fX(n){let e=Ux(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!dX.test(t))return!1;if(uX.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var pX=new Ac(3e4,6e4);function PL(){let n=ms().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gX(n){return new Promise((e,t)=>{var r,i,s;function o(){PL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PL(),t(Tc(n,"network-request-failed"))},timeout:pX.get()})}if(!((i=(r=ms().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ms().gapi)===null||s===void 0)&&s.load)o();else{let a=XL("iframefcb");return ms()[a]=()=>{gapi.load?o():t(Tc(n,"network-request-failed"))},ZL(`${vZ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Qy=null,e})}var Qy=null;function mX(n){return Qy=Qy||gX(n),Qy}var yX=new Ac(5e3,15e3),_X="__/auth/iframe",vX="emulator/auth/iframe",wX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CX(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?i1(e,vX):`https://${n.config.authDomain}/${_X}`,r={apiKey:e.apiKey,appName:n.name,v:ps},i=bX.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ic(r).slice(1)}`}function EX(n){return x(this,null,function*(){let e=yield mX(n),t=ms().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:CX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wX,dontclear:!0},r=>new Promise((i,s)=>x(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Tc(n,"network-request-failed"),a=ms().setTimeout(()=>{s(o)},yX.get());function c(){ms().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var IX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DX=500,xX=600,TX="_blank",AX="http://localhost",l_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function SX(n,e,t,r=DX,i=xX){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},IX),{width:r.toString(),height:i.toString(),top:s,left:o}),l=En().toLowerCase();t&&(a=WL(l)?TX:t),HL(l)&&(e=e||AX,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(fZ(l)&&a!=="_self")return MX(e||"",a),new l_(null);let h=window.open(e||"",a,u);_e(h,n,"popup-blocked");try{h.focus()}catch{}return new l_(h)}function MX(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var PX="__/auth/handler",kX="emulator/auth/handler",RX=encodeURIComponent("fac");function kL(n,e,t,r,i,s){return x(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ps,eventId:i};if(e instanceof s_){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Af(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Kx){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${RX}=${encodeURIComponent(c)}`:"";return`${FX(n)}?${Ic(a).slice(1)}${l}`})}function FX({config:n}){return n.emulator?i1(n,kX):`https://${n.authDomain}/${PX}`}var Nx="webStorageSupport",t1=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y1,this._completeRedirectFn=oX,this._overrideRedirectResult=rX}_openPopup(e,t,r,i){return x(this,null,function*(){var s;da((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield kL(e,t,r,Ux(),i);return SX(e,o,aV())})}_openRedirect(e,t,r,i){return x(this,null,function*(){yield this._originValidation(e);let s=yield kL(e,t,r,Ux(),i);return jZ(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(da(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return x(this,null,function*(){let t=yield EX(e),r=new e1(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nx,{type:Nx},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Nx];o!==void 0&&t(!!o),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JL()||zL()||c1()}},fV=t1;var RL="@firebase/auth",FL="1.10.7";var n1=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return x(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function NX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UX(n){mn(new Ft("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QL(n)},l=new Hx(r,i,s,c);return bZ(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),mn(new Ft("auth-internal",e=>{let t=Mc(e.getProvider("auth").getImmediate());return(r=>new n1(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze(RL,FL,NX(n)),ze(RL,FL,"esm2017")}var OX=5*60,LX=ux("authIdTokenMaxAge")||OX,NL=null,VX=n=>e=>x(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>LX)return;let i=t?.token;NL!==i&&(NL=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _1(n=li()){let e=xr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=l1(n,{popupRedirectResolver:fV,persistence:[dV,oV,y1]}),r=ux("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=VX(s.toString());g1(t,o,()=>o(t.currentUser)),d_(t,a=>o(a))}}let i=cx("auth");return i&&u1(t,`http://${i}`),t}function BX(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yZ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Tc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",BX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UX("Browser");function gV(n){return new ye(function(e){var t=h_(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var mV="auth",yn=class{constructor(e){return e}},Pc=class{constructor(){return gs(mV)}};var v1=new ee("angularfire2.auth-instances");function xee(n,e){let t=so(mV,n,e);return t&&new yn(t)}function Tee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new yn(r)}}var Aee={provide:Pc,deps:[[new Wt,v1]]},See={provide:yn,useFactory:xee,deps:[[new Wt,v1],Hr]};function yV(n,...e){return ze("angularfire",Tr.full,"auth"),fn([See,Aee,{provide:v1,useFactory:Tee(n),multi:!0,deps:[Le,vt,ui,Ui,[new Wt,ca],...e]}])}var _V=qe(gV,!0);var fa=qe(h1,!0,2);var vV=qe(_1,!0);var wV=qe(f1,!0,2);var bV=qe(m1,!0,2);var CV=qe(p1,!0,2);var EV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IV={};var uo,w1;(function(){var n;function e(S,D){function T(){}T.prototype=D.prototype,S.D=D.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(k,R,N){for(var M=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)M[kt-2]=arguments[kt];return D.prototype[R].apply(k,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,D,T){T||(T=0);var k=Array(16);if(typeof D=="string")for(var R=0;16>R;++R)k[R]=D.charCodeAt(T++)|D.charCodeAt(T++)<<8|D.charCodeAt(T++)<<16|D.charCodeAt(T++)<<24;else for(R=0;16>R;++R)k[R]=D[T++]|D[T++]<<8|D[T++]<<16|D[T++]<<24;D=S.g[0],T=S.g[1],R=S.g[2];var N=S.g[3],M=D+(N^T&(R^N))+k[0]+3614090360&4294967295;D=T+(M<<7&4294967295|M>>>25),M=N+(R^D&(T^R))+k[1]+3905402710&4294967295,N=D+(M<<12&4294967295|M>>>20),M=R+(T^N&(D^T))+k[2]+606105819&4294967295,R=N+(M<<17&4294967295|M>>>15),M=T+(D^R&(N^D))+k[3]+3250441966&4294967295,T=R+(M<<22&4294967295|M>>>10),M=D+(N^T&(R^N))+k[4]+4118548399&4294967295,D=T+(M<<7&4294967295|M>>>25),M=N+(R^D&(T^R))+k[5]+1200080426&4294967295,N=D+(M<<12&4294967295|M>>>20),M=R+(T^N&(D^T))+k[6]+2821735955&4294967295,R=N+(M<<17&4294967295|M>>>15),M=T+(D^R&(N^D))+k[7]+4249261313&4294967295,T=R+(M<<22&4294967295|M>>>10),M=D+(N^T&(R^N))+k[8]+1770035416&4294967295,D=T+(M<<7&4294967295|M>>>25),M=N+(R^D&(T^R))+k[9]+2336552879&4294967295,N=D+(M<<12&4294967295|M>>>20),M=R+(T^N&(D^T))+k[10]+4294925233&4294967295,R=N+(M<<17&4294967295|M>>>15),M=T+(D^R&(N^D))+k[11]+2304563134&4294967295,T=R+(M<<22&4294967295|M>>>10),M=D+(N^T&(R^N))+k[12]+1804603682&4294967295,D=T+(M<<7&4294967295|M>>>25),M=N+(R^D&(T^R))+k[13]+4254626195&4294967295,N=D+(M<<12&4294967295|M>>>20),M=R+(T^N&(D^T))+k[14]+2792965006&4294967295,R=N+(M<<17&4294967295|M>>>15),M=T+(D^R&(N^D))+k[15]+1236535329&4294967295,T=R+(M<<22&4294967295|M>>>10),M=D+(R^N&(T^R))+k[1]+4129170786&4294967295,D=T+(M<<5&4294967295|M>>>27),M=N+(T^R&(D^T))+k[6]+3225465664&4294967295,N=D+(M<<9&4294967295|M>>>23),M=R+(D^T&(N^D))+k[11]+643717713&4294967295,R=N+(M<<14&4294967295|M>>>18),M=T+(N^D&(R^N))+k[0]+3921069994&4294967295,T=R+(M<<20&4294967295|M>>>12),M=D+(R^N&(T^R))+k[5]+3593408605&4294967295,D=T+(M<<5&4294967295|M>>>27),M=N+(T^R&(D^T))+k[10]+38016083&4294967295,N=D+(M<<9&4294967295|M>>>23),M=R+(D^T&(N^D))+k[15]+3634488961&4294967295,R=N+(M<<14&4294967295|M>>>18),M=T+(N^D&(R^N))+k[4]+3889429448&4294967295,T=R+(M<<20&4294967295|M>>>12),M=D+(R^N&(T^R))+k[9]+568446438&4294967295,D=T+(M<<5&4294967295|M>>>27),M=N+(T^R&(D^T))+k[14]+3275163606&4294967295,N=D+(M<<9&4294967295|M>>>23),M=R+(D^T&(N^D))+k[3]+4107603335&4294967295,R=N+(M<<14&4294967295|M>>>18),M=T+(N^D&(R^N))+k[8]+1163531501&4294967295,T=R+(M<<20&4294967295|M>>>12),M=D+(R^N&(T^R))+k[13]+2850285829&4294967295,D=T+(M<<5&4294967295|M>>>27),M=N+(T^R&(D^T))+k[2]+4243563512&4294967295,N=D+(M<<9&4294967295|M>>>23),M=R+(D^T&(N^D))+k[7]+1735328473&4294967295,R=N+(M<<14&4294967295|M>>>18),M=T+(N^D&(R^N))+k[12]+2368359562&4294967295,T=R+(M<<20&4294967295|M>>>12),M=D+(T^R^N)+k[5]+4294588738&4294967295,D=T+(M<<4&4294967295|M>>>28),M=N+(D^T^R)+k[8]+2272392833&4294967295,N=D+(M<<11&4294967295|M>>>21),M=R+(N^D^T)+k[11]+1839030562&4294967295,R=N+(M<<16&4294967295|M>>>16),M=T+(R^N^D)+k[14]+4259657740&4294967295,T=R+(M<<23&4294967295|M>>>9),M=D+(T^R^N)+k[1]+2763975236&4294967295,D=T+(M<<4&4294967295|M>>>28),M=N+(D^T^R)+k[4]+1272893353&4294967295,N=D+(M<<11&4294967295|M>>>21),M=R+(N^D^T)+k[7]+4139469664&4294967295,R=N+(M<<16&4294967295|M>>>16),M=T+(R^N^D)+k[10]+3200236656&4294967295,T=R+(M<<23&4294967295|M>>>9),M=D+(T^R^N)+k[13]+681279174&4294967295,D=T+(M<<4&4294967295|M>>>28),M=N+(D^T^R)+k[0]+3936430074&4294967295,N=D+(M<<11&4294967295|M>>>21),M=R+(N^D^T)+k[3]+3572445317&4294967295,R=N+(M<<16&4294967295|M>>>16),M=T+(R^N^D)+k[6]+76029189&4294967295,T=R+(M<<23&4294967295|M>>>9),M=D+(T^R^N)+k[9]+3654602809&4294967295,D=T+(M<<4&4294967295|M>>>28),M=N+(D^T^R)+k[12]+3873151461&4294967295,N=D+(M<<11&4294967295|M>>>21),M=R+(N^D^T)+k[15]+530742520&4294967295,R=N+(M<<16&4294967295|M>>>16),M=T+(R^N^D)+k[2]+3299628645&4294967295,T=R+(M<<23&4294967295|M>>>9),M=D+(R^(T|~N))+k[0]+4096336452&4294967295,D=T+(M<<6&4294967295|M>>>26),M=N+(T^(D|~R))+k[7]+1126891415&4294967295,N=D+(M<<10&4294967295|M>>>22),M=R+(D^(N|~T))+k[14]+2878612391&4294967295,R=N+(M<<15&4294967295|M>>>17),M=T+(N^(R|~D))+k[5]+4237533241&4294967295,T=R+(M<<21&4294967295|M>>>11),M=D+(R^(T|~N))+k[12]+1700485571&4294967295,D=T+(M<<6&4294967295|M>>>26),M=N+(T^(D|~R))+k[3]+2399980690&4294967295,N=D+(M<<10&4294967295|M>>>22),M=R+(D^(N|~T))+k[10]+4293915773&4294967295,R=N+(M<<15&4294967295|M>>>17),M=T+(N^(R|~D))+k[1]+2240044497&4294967295,T=R+(M<<21&4294967295|M>>>11),M=D+(R^(T|~N))+k[8]+1873313359&4294967295,D=T+(M<<6&4294967295|M>>>26),M=N+(T^(D|~R))+k[15]+4264355552&4294967295,N=D+(M<<10&4294967295|M>>>22),M=R+(D^(N|~T))+k[6]+2734768916&4294967295,R=N+(M<<15&4294967295|M>>>17),M=T+(N^(R|~D))+k[13]+1309151649&4294967295,T=R+(M<<21&4294967295|M>>>11),M=D+(R^(T|~N))+k[4]+4149444226&4294967295,D=T+(M<<6&4294967295|M>>>26),M=N+(T^(D|~R))+k[11]+3174756917&4294967295,N=D+(M<<10&4294967295|M>>>22),M=R+(D^(N|~T))+k[2]+718787259&4294967295,R=N+(M<<15&4294967295|M>>>17),M=T+(N^(R|~D))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+D&4294967295,S.g[1]=S.g[1]+(R+(M<<21&4294967295|M>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,D){D===void 0&&(D=S.length);for(var T=D-this.blockSize,k=this.B,R=this.h,N=0;N<D;){if(R==0)for(;N<=T;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<D;)if(k[R++]=S.charCodeAt(N++),R==this.blockSize){i(this,k),R=0;break}}else for(;N<D;)if(k[R++]=S[N++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=D},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var D=1;D<S.length-8;++D)S[D]=0;var T=8*this.o;for(D=S.length-8;D<S.length;++D)S[D]=T&255,T/=256;for(this.u(S),S=Array(16),D=T=0;4>D;++D)for(var k=0;32>k;k+=8)S[T++]=this.g[D]>>>k&255;return S};function s(S,D){var T=a;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=D(S)}function o(S,D){this.h=D;for(var T=[],k=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;k&&N==D||(T[R]=N,k=!1)}this.g=T}var a={};function c(S){return-128<=S&&128>S?s(S,function(D){return new o([D|0],0>D?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return b(l(-S));for(var D=[],T=1,k=0;S>=T;k++)D[k]=S/T|0,T*=4294967296;return new o(D,0)}function u(S,D){if(S.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S.charAt(0)=="-")return b(u(S.substring(1),D));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=l(Math.pow(D,8)),k=h,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),M=parseInt(S.substring(R,R+N),D);8>N?(N=l(Math.pow(D,N)),k=k.j(N).add(l(M))):(k=k.j(T),k=k.add(l(M)))}return k}var h=c(0),f=c(1),p=c(16777216);n=o.prototype,n.m=function(){if(w(this))return-b(this).m();for(var S=0,D=1,T=0;T<this.g.length;T++){var k=this.i(T);S+=(0<=k?k:4294967296+k)*D,D*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(w(this))return"-"+b(this).toString(S);for(var D=l(Math.pow(S,6)),T=this,k="";;){var R=V(T,D).g;T=A(T,R.j(D));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=R,y(T))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var D=0;D<S.g.length;D++)if(S.g[D]!=0)return!1;return!0}function w(S){return S.h==-1}n.l=function(S){return S=A(this,S),w(S)?-1:y(S)?0:1};function b(S){for(var D=S.g.length,T=[],k=0;k<D;k++)T[k]=~S.g[k];return new o(T,~S.h).add(f)}n.abs=function(){return w(this)?b(this):this},n.add=function(S){for(var D=Math.max(this.g.length,S.g.length),T=[],k=0,R=0;R<=D;R++){var N=k+(this.i(R)&65535)+(S.i(R)&65535),M=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);k=M>>>16,N&=65535,M&=65535,T[R]=M<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(S,D){return S.add(b(D))}n.j=function(S){if(y(this)||y(S))return h;if(w(this))return w(S)?b(this).j(b(S)):b(b(this).j(S));if(w(S))return b(this.j(b(S)));if(0>this.l(p)&&0>S.l(p))return l(this.m()*S.m());for(var D=this.g.length+S.g.length,T=[],k=0;k<2*D;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<S.g.length;R++){var N=this.i(k)>>>16,M=this.i(k)&65535,kt=S.i(R)>>>16,Ke=S.i(R)&65535;T[2*k+2*R]+=M*Ke,P(T,2*k+2*R),T[2*k+2*R+1]+=N*Ke,P(T,2*k+2*R+1),T[2*k+2*R+1]+=M*kt,P(T,2*k+2*R+1),T[2*k+2*R+2]+=N*kt,P(T,2*k+2*R+2)}for(k=0;k<D;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=D;k<2*D;k++)T[k]=0;return new o(T,0)};function P(S,D){for(;(S[D]&65535)!=S[D];)S[D+1]+=S[D]>>>16,S[D]&=65535,D++}function U(S,D){this.g=S,this.h=D}function V(S,D){if(y(D))throw Error("division by zero");if(y(S))return new U(h,h);if(w(S))return D=V(b(S),D),new U(b(D.g),b(D.h));if(w(D))return D=V(S,b(D)),new U(b(D.g),D.h);if(30<S.g.length){if(w(S)||w(D))throw Error("slowDivide_ only works with positive integers.");for(var T=f,k=D;0>=k.l(S);)T=B(T),k=B(k);var R=$(T,1),N=$(k,1);for(k=$(k,2),T=$(T,2);!y(k);){var M=N.add(k);0>=M.l(S)&&(R=R.add(T),N=M),k=$(k,1),T=$(T,1)}return D=A(S,R.j(D)),new U(R,D)}for(R=h;0<=S.l(D);){for(T=Math.max(1,Math.floor(S.m()/D.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=l(T),M=N.j(D);w(M)||0<M.l(S);)T-=k,N=l(T),M=N.j(D);y(N)&&(N=f),R=R.add(N),S=A(S,M)}return new U(R,S)}n.A=function(S){return V(this,S).h},n.and=function(S){for(var D=Math.max(this.g.length,S.g.length),T=[],k=0;k<D;k++)T[k]=this.i(k)&S.i(k);return new o(T,this.h&S.h)},n.or=function(S){for(var D=Math.max(this.g.length,S.g.length),T=[],k=0;k<D;k++)T[k]=this.i(k)|S.i(k);return new o(T,this.h|S.h)},n.xor=function(S){for(var D=Math.max(this.g.length,S.g.length),T=[],k=0;k<D;k++)T[k]=this.i(k)^S.i(k);return new o(T,this.h^S.h)};function B(S){for(var D=S.g.length+1,T=[],k=0;k<D;k++)T[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(T,S.h)}function $(S,D){var T=D>>5;D%=32;for(var k=S.g.length-T,R=[],N=0;N<k;N++)R[N]=0<D?S.i(N+T)>>>D|S.i(N+T+1)<<32-D:S.i(N+T);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,w1=IV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,uo=IV.Integer=o}).apply(typeof EV<"u"?EV:typeof self<"u"?self:typeof window<"u"?window:{});var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ho={};var b1,Mee,Au,C1,zf,g_,E1,I1,D1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof p_=="object"&&p_];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var L=d[I];if(!(L in v))break e;v=v[L]}d=d[d.length-1],I=v[d],g=g(I),g!=I&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var v=0,I=!1,L={next:function(){if(!I&&v<d.length){var j=v++;return{value:g(j,d[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,v){return v})}});var o=o||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,v){return d.call.apply(d.bind,arguments)}function h(d,g,v){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function f(d,g,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function y(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(I,L,j){for(var te=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)te[ht-2]=arguments[ht];return g.prototype[L].apply(I,te)}}function w(d){let g=d.length;if(0<g){let v=Array(g);for(let I=0;I<g;I++)v[I]=d[I];return v}return[]}function b(d,g){for(let v=1;v<arguments.length;v++){let I=arguments[v];if(c(I)){let L=d.length||0,j=I.length||0;d.length=L+j;for(let te=0;te<j;te++)d[L+te]=I[te]}else d.push(I)}}class A{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(d){return/^[\s\xa0]*$/.test(d)}function U(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var B=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function $(d,g,v){for(let I in d)g.call(v,d[I],I,d)}function S(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function D(d){let g={};for(let v in d)g[v]=d[v];return g}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,g){let v,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(v in I)d[v]=I[v];for(let j=0;j<T.length;j++)v=T[j],Object.prototype.hasOwnProperty.call(I,v)&&(d[v]=I[v])}}function R(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function N(d){a.setTimeout(()=>{throw d},0)}function M(){var d=Xt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class kt{constructor(){this.h=this.g=null}add(g,v){let I=Ke.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Ke=new A(()=>new yt,d=>d.reset());class yt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let dt,Sn=!1,Xt=new kt,Fs=()=>{let d=a.Promise.resolve(void 0);dt=()=>{d.then(ml)}};var ml=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(v){N(v)}var g=Ke;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Sn=!1};function Xn(){this.s=this.s,this.C=this.C}Xn.prototype.s=!1,Xn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Bt(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var Ns=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d}();function bi(d,g){if(Bt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(B){e:{try{V(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Us[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&bi.aa.h.call(this)}}y(bi,Bt);var Us={2:"touch",3:"pen",4:"mouse"};bi.prototype.h=function(){bi.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pd="closure_listenable_"+(1e6*Math.random()|0),Z9=0;function X9(d,g,v,I,L){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=L,this.key=++Z9,this.da=this.fa=!1}function xg(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Tg(d){this.src=d,this.g={},this.h=0}Tg.prototype.add=function(d,g,v,I,L){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var te=Ob(d,g,I,L);return-1<te?(g=d[te],v||(g.fa=!1)):(g=new X9(g,this.src,j,!!I,L),g.fa=v,d.push(g)),g};function Ub(d,g){var v=g.type;if(v in d.g){var I=d.g[v],L=Array.prototype.indexOf.call(I,g,void 0),j;(j=0<=L)&&Array.prototype.splice.call(I,L,1),j&&(xg(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Ob(d,g,v,I){for(var L=0;L<d.length;++L){var j=d[L];if(!j.da&&j.listener==g&&j.capture==!!v&&j.ha==I)return L}return-1}var Lb="closure_lm_"+(1e6*Math.random()|0),Vb={};function lP(d,g,v,I,L){if(I&&I.once)return dP(d,g,v,I,L);if(Array.isArray(g)){for(var j=0;j<g.length;j++)lP(d,g[j],v,I,L);return null}return v=Hb(v),d&&d[Pd]?d.K(g,v,l(I)?!!I.capture:!!I,L):uP(d,g,v,!1,I,L)}function uP(d,g,v,I,L,j){if(!g)throw Error("Invalid event type");var te=l(L)?!!L.capture:!!L,ht=jb(d);if(ht||(d[Lb]=ht=new Tg(d)),v=ht.add(g,v,I,te,j),v.proxy)return v;if(I=e$(),v.proxy=I,I.src=d,I.listener=v,d.addEventListener)Ns||(L=te),L===void 0&&(L=!1),d.addEventListener(g.toString(),I,L);else if(d.attachEvent)d.attachEvent(fP(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function e$(){function d(v){return g.call(d.src,d.listener,v)}let g=t$;return d}function dP(d,g,v,I,L){if(Array.isArray(g)){for(var j=0;j<g.length;j++)dP(d,g[j],v,I,L);return null}return v=Hb(v),d&&d[Pd]?d.L(g,v,l(I)?!!I.capture:!!I,L):uP(d,g,v,!0,I,L)}function hP(d,g,v,I,L){if(Array.isArray(g))for(var j=0;j<g.length;j++)hP(d,g[j],v,I,L);else I=l(I)?!!I.capture:!!I,v=Hb(v),d&&d[Pd]?(d=d.i,g=String(g).toString(),g in d.g&&(j=d.g[g],v=Ob(j,v,I,L),-1<v&&(xg(j[v]),Array.prototype.splice.call(j,v,1),j.length==0&&(delete d.g[g],d.h--)))):d&&(d=jb(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Ob(g,v,I,L)),(v=-1<d?g[d]:null)&&Bb(v))}function Bb(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Pd])Ub(g.i,d);else{var v=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(v,I,d.capture):g.detachEvent?g.detachEvent(fP(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=jb(g))?(Ub(v,d),v.h==0&&(v.src=null,g[Lb]=null)):xg(d)}}}function fP(d){return d in Vb?Vb[d]:Vb[d]="on"+d}function t$(d,g){if(d.da)d=!0;else{g=new bi(g,this);var v=d.listener,I=d.ha||d.src;d.fa&&Bb(d),d=v.call(I,g)}return d}function jb(d){return d=d[Lb],d instanceof Tg?d:null}var $b="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hb(d){return typeof d=="function"?d:(d[$b]||(d[$b]=function(g){return d.handleEvent(g)}),d[$b])}function Ln(){Xn.call(this),this.i=new Tg(this),this.M=this,this.F=null}y(Ln,Xn),Ln.prototype[Pd]=!0,Ln.prototype.removeEventListener=function(d,g,v,I){hP(this,d,g,v,I)};function er(d,g){var v,I=d.F;if(I)for(v=[];I;I=I.F)v.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Bt(g,d);else if(g instanceof Bt)g.target=g.target||d;else{var L=g;g=new Bt(I,d),k(g,L)}if(L=!0,v)for(var j=v.length-1;0<=j;j--){var te=g.g=v[j];L=Ag(te,I,!0,g)&&L}if(te=g.g=d,L=Ag(te,I,!0,g)&&L,L=Ag(te,I,!1,g)&&L,v)for(j=0;j<v.length;j++)te=g.g=v[j],L=Ag(te,I,!1,g)&&L}Ln.prototype.N=function(){if(Ln.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],I=0;I<v.length;I++)xg(v[I]);delete d.g[g],d.h--}}this.F=null},Ln.prototype.K=function(d,g,v,I){return this.i.add(String(d),g,!1,v,I)},Ln.prototype.L=function(d,g,v,I){return this.i.add(String(d),g,!0,v,I)};function Ag(d,g,v,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,j=0;j<g.length;++j){var te=g[j];if(te&&!te.da&&te.capture==v){var ht=te.listener,Mn=te.ha||te.src;te.fa&&Ub(d.i,te),L=ht.call(Mn,I)!==!1&&L}}return L&&!I.defaultPrevented}function pP(d,g,v){if(typeof d=="function")v&&(d=f(d,v));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function gP(d){d.g=pP(()=>{d.g=null,d.i&&(d.i=!1,gP(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class n$ extends Xn{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:gP(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kd(d){Xn.call(this),this.h=d,this.g={}}y(kd,Xn);var mP=[];function yP(d){$(d.g,function(g,v){this.g.hasOwnProperty(v)&&Bb(g)},d),d.g={}}kd.prototype.N=function(){kd.aa.N.call(this),yP(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zb=a.JSON.stringify,r$=a.JSON.parse,i$=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Wb(){}Wb.prototype.h=null;function _P(d){return d.h||(d.h=d.i())}function vP(){}var Rd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qb(){Bt.call(this,"d")}y(qb,Bt);function Gb(){Bt.call(this,"c")}y(Gb,Bt);var Ua={},wP=null;function Sg(){return wP=wP||new Ln}Ua.La="serverreachability";function bP(d){Bt.call(this,Ua.La,d)}y(bP,Bt);function Fd(d){let g=Sg();er(g,new bP(g))}Ua.STAT_EVENT="statevent";function CP(d,g){Bt.call(this,Ua.STAT_EVENT,d),this.stat=g}y(CP,Bt);function tr(d){let g=Sg();er(g,new CP(g,d))}Ua.Ma="timingevent";function EP(d,g){Bt.call(this,Ua.Ma,d),this.size=g}y(EP,Bt);function Nd(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Ud(){this.g=!0}Ud.prototype.xa=function(){this.g=!1};function s$(d,g,v,I,L,j){d.info(function(){if(d.g)if(j)for(var te="",ht=j.split("&"),Mn=0;Mn<ht.length;Mn++){var et=ht[Mn].split("=");if(1<et.length){var Vn=et[0];et=et[1];var Bn=Vn.split("_");te=2<=Bn.length&&Bn[1]=="type"?te+(Vn+"="+et+"&"):te+(Vn+"=redacted&")}}else te=null;else te=j;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+v+`
`+te})}function o$(d,g,v,I,L,j,te){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+v+`
`+j+" "+te})}function yl(d,g,v,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+c$(d,v)+(I?" "+I:"")})}function a$(d,g){d.info(function(){return"TIMEOUT: "+g})}Ud.prototype.info=function(){};function c$(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var I=v[d];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return zb(v)}catch{return g}}var Mg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},IP={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kb;function Pg(){}y(Pg,Wb),Pg.prototype.g=function(){return new XMLHttpRequest},Pg.prototype.i=function(){return{}},Kb=new Pg;function Mo(d,g,v,I){this.j=d,this.i=g,this.l=v,this.R=I||1,this.U=new kd(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new DP}function DP(){this.i=null,this.g="",this.h=!1}var xP={},Yb={};function Jb(d,g,v){d.L=1,d.v=Ng(Os(g)),d.m=v,d.P=!0,TP(d,null)}function TP(d,g){d.F=Date.now(),kg(d),d.A=Os(d.v);var v=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),jP(v.i,"t",I),d.C=0,v=d.j.J,d.h=new DP,d.g=sk(d.j,v?g:null,!d.m),0<d.O&&(d.M=new n$(f(d.Y,d,d.g),d.O)),g=d.U,v=d.g,I=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(mP[0]=L.toString()),L=mP);for(var j=0;j<L.length;j++){var te=lP(v,L[j],I||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=d.H?D(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Fd(),s$(d.i,d.u,d.A,d.l,d.R,d.m)}Mo.prototype.ca=function(d){d=d.target;let g=this.M;g&&Ls(d)==3?g.j():this.Y(d)},Mo.prototype.Y=function(d){try{if(d==this.g)e:{let Bn=Ls(this.g);var g=this.g.Ba();let wl=this.g.Z();if(!(3>Bn)&&(Bn!=3||this.g&&(this.h.h||this.g.oa()||KP(this.g)))){this.J||Bn!=4||g==7||(g==8||0>=wl?Fd(3):Fd(2)),Qb(this);var v=this.g.Z();this.X=v;t:if(AP(this)){var I=KP(this.g);d="";var L=I.length,j=Ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oa(this),Od(this);var te="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(j&&g==L-1)});I.length=0,this.h.g+=d,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,o$(this.i,this.u,this.A,this.l,this.R,Bn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Mn=this.g;if((ht=Mn.g?Mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(ht)){var et=ht;break t}}et=null}if(v=et)yl(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zb(this,v);else{this.o=!1,this.s=3,tr(12),Oa(this),Od(this);break e}}if(this.P){v=!0;let Ci;for(;!this.J&&this.C<te.length;)if(Ci=l$(this,te),Ci==Yb){Bn==4&&(this.s=4,tr(14),v=!1),yl(this.i,this.l,null,"[Incomplete Response]");break}else if(Ci==xP){this.s=4,tr(15),yl(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else yl(this.i,this.l,Ci,null),Zb(this,Ci);if(AP(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bn!=4||te.length!=0||this.h.h||(this.s=1,tr(16),v=!1),this.o=this.o&&v,!v)yl(this.i,this.l,te,"[Invalid Chunked Response]"),Oa(this),Od(this);else if(0<te.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),iC(Vn),Vn.M=!0,tr(11))}}else yl(this.i,this.l,te,null),Zb(this,te);Bn==4&&Oa(this),this.o&&!this.J&&(Bn==4?tk(this.j,this):(this.o=!1,kg(this)))}else x$(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,tr(12)):(this.s=0,tr(13)),Oa(this),Od(this)}}}catch{}finally{}};function AP(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function l$(d,g){var v=d.C,I=g.indexOf(`
`,v);return I==-1?Yb:(v=Number(g.substring(v,I)),isNaN(v)?xP:(I+=1,I+v>g.length?Yb:(g=g.slice(I,I+v),d.C=I+v,g)))}Mo.prototype.cancel=function(){this.J=!0,Oa(this)};function kg(d){d.S=Date.now()+d.I,SP(d,d.I)}function SP(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Nd(f(d.ba,d),g)}function Qb(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Mo.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(a$(this.i,this.A),this.L!=2&&(Fd(),tr(17)),Oa(this),this.s=2,Od(this)):SP(this,this.S-d)};function Od(d){d.j.G==0||d.J||tk(d.j,d)}function Oa(d){Qb(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,yP(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Zb(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||Xb(v.h,d))){if(!d.K&&Xb(v.h,d)&&v.G==3){try{var I=v.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Bg(v),Lg(v);else break e;rC(v),tr(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Nd(f(v.Za,v),6e3));if(1>=kP(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Va(v,11)}else if((d.K||v.g==d)&&Bg(v),!P(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let et=L[g];if(v.T=et[0],et=et[1],v.G==2)if(et[0]=="c"){v.K=et[1],v.ia=et[2];let Vn=et[3];Vn!=null&&(v.la=Vn,v.j.info("VER="+v.la));let Bn=et[4];Bn!=null&&(v.Aa=Bn,v.j.info("SVER="+v.Aa));let wl=et[5];wl!=null&&typeof wl=="number"&&0<wl&&(I=1.5*wl,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;let Ci=d.g;if(Ci){let $g=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($g){var j=I.h;j.g||$g.indexOf("spdy")==-1&&$g.indexOf("quic")==-1&&$g.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(eC(j,j.h),j.h=null))}if(I.D){let sC=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;sC&&(I.ya=sC,Ct(I.I,I.D,sC))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var te=d;if(I.qa=ik(I,I.J?I.ia:null,I.W),te.K){RP(I.h,te);var ht=te,Mn=I.L;Mn&&(ht.I=Mn),ht.B&&(Qb(ht),kg(ht)),I.g=te}else XP(I);0<v.i.length&&Vg(v)}else et[0]!="stop"&&et[0]!="close"||Va(v,7);else v.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Va(v,7):nC(v):et[0]!="noop"&&v.l&&v.l.ta(et),v.v=0)}}Fd(4)}catch{}}var u$=class{constructor(d,g){this.g=d,this.map=g}};function MP(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PP(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function kP(d){return d.h?1:d.g?d.g.size:0}function Xb(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function eC(d,g){d.g?d.g.add(g):d.h=g}function RP(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}MP.prototype.cancel=function(){if(this.i=FP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function FP(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return w(d.i)}function d$(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,I=0;I<v;I++)g.push(d[I]);return g}g=[],v=0;for(I in d)g[v++]=d[I];return g}function h$(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let I in d)g[v++]=I;return g}}}function NP(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=h$(d),I=d$(d),L=I.length,j=0;j<L;j++)g.call(void 0,I[j],v&&v[j],d)}var UP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f$(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var I=d[v].indexOf("="),L=null;if(0<=I){var j=d[v].substring(0,I);L=d[v].substring(I+1)}else j=d[v];g(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function La(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof La){this.h=d.h,Rg(this,d.j),this.o=d.o,this.g=d.g,Fg(this,d.s),this.l=d.l;var g=d.i,v=new Bd;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),OP(this,v),this.m=d.m}else d&&(g=String(d).match(UP))?(this.h=!1,Rg(this,g[1]||"",!0),this.o=Ld(g[2]||""),this.g=Ld(g[3]||"",!0),Fg(this,g[4]),this.l=Ld(g[5]||"",!0),OP(this,g[6]||"",!0),this.m=Ld(g[7]||"")):(this.h=!1,this.i=new Bd(null,this.h))}La.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Vd(g,LP,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Vd(g,LP,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Vd(v,v.charAt(0)=="/"?m$:g$,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Vd(v,_$)),d.join("")};function Os(d){return new La(d)}function Rg(d,g,v){d.j=v?Ld(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Fg(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function OP(d,g,v){g instanceof Bd?(d.i=g,v$(d.i,d.h)):(v||(g=Vd(g,y$)),d.i=new Bd(g,d.h))}function Ct(d,g,v){d.i.set(g,v)}function Ng(d){return Ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ld(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Vd(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,p$),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function p$(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var LP=/[#\/\?@]/g,g$=/[#\?:]/g,m$=/[#\?]/g,y$=/[#\?@]/g,_$=/#/g;function Bd(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Po(d){d.g||(d.g=new Map,d.h=0,d.i&&f$(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Bd.prototype,n.add=function(d,g){Po(this),this.i=null,d=_l(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function VP(d,g){Po(d),g=_l(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function BP(d,g){return Po(d),g=_l(d,g),d.g.has(g)}n.forEach=function(d,g){Po(this),this.g.forEach(function(v,I){v.forEach(function(L){d.call(g,L,I,this)},this)},this)},n.na=function(){Po(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let I=0;I<g.length;I++){let L=d[I];for(let j=0;j<L.length;j++)v.push(g[I])}return v},n.V=function(d){Po(this);let g=[];if(typeof d=="string")BP(this,d)&&(g=g.concat(this.g.get(_l(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return Po(this),this.i=null,d=_l(this,d),BP(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function jP(d,g,v){VP(d,g),0<v.length&&(d.i=null,d.g.set(_l(d,g),w(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var I=g[v];let j=encodeURIComponent(String(I)),te=this.V(I);for(I=0;I<te.length;I++){var L=j;te[I]!==""&&(L+="="+encodeURIComponent(String(te[I]))),d.push(L)}}return this.i=d.join("&")};function _l(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function v$(d,g){g&&!d.j&&(Po(d),d.i=null,d.g.forEach(function(v,I){var L=I.toLowerCase();I!=L&&(VP(this,I),jP(this,L,v))},d)),d.j=g}function w$(d,g){let v=new Ud;if(a.Image){let I=new Image;I.onload=p(ko,v,"TestLoadImage: loaded",!0,g,I),I.onerror=p(ko,v,"TestLoadImage: error",!1,g,I),I.onabort=p(ko,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(ko,v,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function b$(d,g){let v=new Ud,I=new AbortController,L=setTimeout(()=>{I.abort(),ko(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(j=>{clearTimeout(L),j.ok?ko(v,"TestPingServer: ok",!0,g):ko(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ko(v,"TestPingServer: error",!1,g)})}function ko(d,g,v,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(v)}catch{}}function C$(){this.g=new i$}function E$(d,g,v){let I=v||"";try{NP(d,function(L,j){let te=L;l(L)&&(te=zb(L)),g.push(I+j+"="+encodeURIComponent(te))})}catch(L){throw g.push(I+"type="+encodeURIComponent("_badmap")),L}}function jd(d){this.l=d.Ub||null,this.j=d.eb||!1}y(jd,Wb),jd.prototype.g=function(){return new Ug(this.l,this.j)},jd.prototype.i=function(d){return function(){return d}}({});function Ug(d,g){Ln.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ug,Ln),n=Ug.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Hd(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$d(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hd(this)),this.g&&(this.readyState=3,Hd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$P(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function $P(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?$d(this):Hd(this),this.readyState==3&&$P(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,$d(this))},n.Qa=function(d){this.g&&(this.response=d,$d(this))},n.ga=function(){this.g&&$d(this)};function $d(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Hd(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Hd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ug.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function HP(d){let g="";return $(d,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function tC(d,g,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=HP(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Ct(d,g,v))}function jt(d){Ln.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(jt,Ln);var I$=/^https?$/i,D$=["POST","PUT"];n=jt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kb.g(),this.v=this.o?_P(this.o):_P(Kb),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(j){zP(this,j);return}if(d=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)v.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let j of I.keys())v.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(D$,g,void 0))||I||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,te]of v)this.g.setRequestHeader(j,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GP(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){zP(this,j)}};function zP(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,WP(d),Og(d)}function WP(d){d.A||(d.A=!0,er(d,"complete"),er(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,er(this,"complete"),er(this,"abort"),Og(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Og(this,!0)),jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qP(this):this.bb())},n.bb=function(){qP(this)};function qP(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Ls(d)!=4||d.Z()!=2)){if(d.u&&Ls(d)==4)pP(d.Ea,0,d);else if(er(d,"readystatechange"),Ls(d)==4){d.h=!1;try{let te=d.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var I;if(I=te===0){var L=String(d.D).match(UP)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!I$.test(L?L.toLowerCase():"")}v=I}if(v)er(d,"complete"),er(d,"success");else{d.m=6;try{var j=2<Ls(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",WP(d)}}finally{Og(d)}}}}function Og(d,g){if(d.g){GP(d);let v=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||er(d,"ready");try{v.onreadystatechange=I}catch{}}}function GP(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Ls(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Ls(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),r$(g)}};function KP(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function x$(d){let g={};d=(d.g&&2<=Ls(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(P(d[I]))continue;var v=R(d[I]);let L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let j=g[L]||[];g[L]=j,j.push(v)}S(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zd(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function YP(d){this.Aa=0,this.i=[],this.j=new Ud,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zd("baseRetryDelayMs",5e3,d),this.cb=zd("retryDelaySeedMs",1e4,d),this.Wa=zd("forwardChannelMaxRetries",2,d),this.wa=zd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new MP(d&&d.concurrentRequestLimit),this.Da=new C$,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=YP.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,I){tr(0),this.W=d,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=ik(this,null,this.W),Vg(this)};function nC(d){if(JP(d),d.G==3){var g=d.U++,v=Os(d.I);if(Ct(v,"SID",d.K),Ct(v,"RID",g),Ct(v,"TYPE","terminate"),Wd(d,v),g=new Mo(d,d.j,g),g.L=2,g.v=Ng(Os(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=sk(g.j,null),g.g.ea(g.v)),g.F=Date.now(),kg(g)}rk(d)}function Lg(d){d.g&&(iC(d),d.g.cancel(),d.g=null)}function JP(d){Lg(d),d.u&&(a.clearTimeout(d.u),d.u=null),Bg(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Vg(d){if(!PP(d.h)&&!d.s){d.s=!0;var g=d.Ga;dt||Fs(),Sn||(dt(),Sn=!0),Xt.add(g,d),d.B=0}}function T$(d,g){return kP(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Nd(f(d.Ga,d,g),nk(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let L=new Mo(this,this.j,d),j=this.o;if(this.S&&(j?(j=D(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ZP(this,L,g),v=Os(this.I),Ct(v,"RID",d),Ct(v,"CVER",22),this.D&&Ct(v,"X-HTTP-Session-Id",this.D),Wd(this,v),j&&(this.O?g="headers="+encodeURIComponent(String(HP(j)))+"&"+g:this.m&&tC(v,this.m,j)),eC(this.h,L),this.Ua&&Ct(v,"TYPE","init"),this.P?(Ct(v,"$req",g),Ct(v,"SID","null"),L.T=!0,Jb(L,v,null)):Jb(L,v,g),this.G=2}}else this.G==3&&(d?QP(this,d):this.i.length==0||PP(this.h)||QP(this))};function QP(d,g){var v;g?v=g.l:v=d.U++;let I=Os(d.I);Ct(I,"SID",d.K),Ct(I,"RID",v),Ct(I,"AID",d.T),Wd(d,I),d.m&&d.o&&tC(I,d.m,d.o),v=new Mo(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ZP(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),eC(d.h,v),Jb(v,I,g)}function Wd(d,g){d.H&&$(d.H,function(v,I){Ct(g,I,v)}),d.l&&NP({},function(v,I){Ct(g,I,v)})}function ZP(d,g,v){v=Math.min(d.i.length,v);var I=d.l?f(d.l.Na,d.l,d):null;e:{var L=d.i;let j=-1;for(;;){let te=["count="+v];j==-1?0<v?(j=L[0].g,te.push("ofs="+j)):j=0:te.push("ofs="+j);let ht=!0;for(let Mn=0;Mn<v;Mn++){let et=L[Mn].g,Vn=L[Mn].map;if(et-=j,0>et)j=Math.max(0,L[Mn].g-100),ht=!1;else try{E$(Vn,te,"req"+et+"_")}catch{I&&I(Vn)}}if(ht){I=te.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,I}function XP(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;dt||Fs(),Sn||(dt(),Sn=!0),Xt.add(g,d),d.v=0}}function rC(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Nd(f(d.Fa,d),nk(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,ek(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Nd(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tr(10),Lg(this),ek(this))};function iC(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function ek(d){d.g=new Mo(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Os(d.qa);Ct(g,"RID","rpc"),Ct(g,"SID",d.K),Ct(g,"AID",d.T),Ct(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ct(g,"TO",d.ja),Ct(g,"TYPE","xmlhttp"),Wd(d,g),d.m&&d.o&&tC(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Ng(Os(g)),v.m=null,v.P=!0,TP(v,d)}n.Za=function(){this.C!=null&&(this.C=null,Lg(this),rC(this),tr(19))};function Bg(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function tk(d,g){var v=null;if(d.g==g){Bg(d),iC(d),d.g=null;var I=2}else if(Xb(d.h,g))v=g.D,RP(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;I=Sg(),er(I,new EP(I,v)),Vg(d)}else XP(d);else if(L=g.s,L==3||L==0&&0<g.X||!(I==1&&T$(d,g)||I==2&&rC(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),L){case 1:Va(d,5);break;case 4:Va(d,10);break;case 3:Va(d,6);break;default:Va(d,2)}}}function nk(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function Va(d,g){if(d.j.info("Error code "+g),g==2){var v=f(d.fb,d),I=d.Xa;let L=!I;I=new La(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rg(I,"https"),Ng(I),L?w$(I.toString(),v):b$(I.toString(),v)}else tr(2);d.G=0,d.l&&d.l.sa(g),rk(d),JP(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function rk(d){if(d.G=0,d.ka=[],d.l){let g=FP(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ka,g),b(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function ik(d,g,v){var I=v instanceof La?Os(v):new La(v);if(I.g!="")g&&(I.g=g+"."+I.g),Fg(I,I.s);else{var L=a.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var j=new La(null);I&&Rg(j,I),g&&(j.g=g),L&&Fg(j,L),v&&(j.l=v),I=j}return v=d.D,g=d.ya,v&&g&&Ct(I,v,g),Ct(I,"VER",d.la),Wd(d,I),I}function sk(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new jt(new jd({eb:v})):new jt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ok(){}n=ok.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jg(){}jg.prototype.g=function(d,g){return new Fr(d,g)};function Fr(d,g){Ln.call(this),this.g=new YP(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!P(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new vl(this)}y(Fr,Ln),Fr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fr.prototype.close=function(){nC(this.g)},Fr.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=zb(d),d=v);g.i.push(new u$(g.Ya++,d)),g.G==3&&Vg(g)},Fr.prototype.N=function(){this.g.l=null,delete this.j,nC(this.g),delete this.g,Fr.aa.N.call(this)};function ak(d){qb.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(ak,qb);function ck(){Gb.call(this),this.status=1}y(ck,Gb);function vl(d){this.g=d}y(vl,ok),vl.prototype.ua=function(){er(this.g,"a")},vl.prototype.ta=function(d){er(this.g,new ak(d))},vl.prototype.sa=function(d){er(this.g,new ck)},vl.prototype.ra=function(){er(this.g,"b")},jg.prototype.createWebChannel=jg.prototype.g,Fr.prototype.send=Fr.prototype.o,Fr.prototype.open=Fr.prototype.m,Fr.prototype.close=Fr.prototype.close,D1=ho.createWebChannelTransport=function(){return new jg},I1=ho.getStatEventTarget=function(){return Sg()},E1=ho.Event=Ua,g_=ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mg.NO_ERROR=0,Mg.TIMEOUT=8,Mg.HTTP_ERROR=6,zf=ho.ErrorCode=Mg,IP.COMPLETE="complete",C1=ho.EventType=IP,vP.EventType=Rd,Rd.OPEN="a",Rd.CLOSE="b",Rd.ERROR="c",Rd.MESSAGE="d",Ln.prototype.listen=Ln.prototype.K,Au=ho.WebChannel=vP,Mee=ho.FetchXmlHttpFactory=jd,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,b1=ho.XhrIo=jt}).apply(typeof p_<"u"?p_:typeof self<"u"?self:typeof window<"u"?window:{});var DV="@firebase/firestore",xV="4.7.17";var In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");var Qu="11.9.0";var Uc=new Dr("@firebase/firestore");function Su(){return Uc.logLevel}function ie(n,...e){if(Uc.logLevel<=Ue.DEBUG){let t=e.map(pA);Uc.debug(`Firestore (${Qu}): ${n}`,...t)}}function po(n,...e){if(Uc.logLevel<=Ue.ERROR){let t=e.map(pA);Uc.error(`Firestore (${Qu}): ${n}`,...t)}}function Uu(n,...e){if(Uc.logLevel<=Ue.WARN){let t=e.map(pA);Uc.warn(`Firestore (${Qu}): ${n}`,...t)}}function pA(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_3(n,r,t)}function _3(n,e,t){let r=`FIRESTORE (${Qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw po(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||_3(e,i,r)}function Ie(n,e){return n}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends Nn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Li=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var C_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},M1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}},P1=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},k1=class{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new C_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new In(e)}},R1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},F1=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new R1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}},E_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},N1=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new E_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new E_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Pee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function v3(){return new TextEncoder}var I_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Pee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function U1(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Oe(r,i);{let s=v3(),o=kee(s.encode(TV(n,t)),s.encode(TV(e,t)));return o!==0?o:Oe(r,i)}}t+=r>65535?2:1}return Oe(n.length,e.length)}function TV(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function kee(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function Ou(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var AV=-62135596800,SV=1e6,lt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*SV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AV)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SV}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-AV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var xe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new lt(0,0))}static max(){return new n(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var MV="__name__",D_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):U1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uo.fromString(e.substring(4,e.length-2))}},Nt=class n extends D_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new se(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Ree=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wr=class n extends D_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Ree.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MV}static keyField(){return new n([MV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ge=class n{constructor(e){this.path=e}static fromPath(e){return new n(Nt.fromString(e))}static fromName(e){return new n(Nt.fromString(e).popFirst(5))}static empty(){return new n(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Nt(e.slice()))}};var Jf=-1,O1=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};O1.UNKNOWN_ID=-1;function Fee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new Oc(i,ge.empty(),e)}function Nee(n){return new Oc(n.readTime,n.key,Jf)}var Oc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),ge.empty(),Jf)}static max(){return new n(xe.max(),ge.empty(),Jf)}};function Uee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var Oee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",L1=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Zu(n){return x(this,null,function*(){if(n.code!==z.FAILED_PRECONDITION||n.message!==Oee)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Lee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xu(n){return n.name==="IndexedDbTransactionError"}var gA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),mA=-1;function sv(n){return n==null}function Qf(n){return n===0&&1/n==-1/0}function Vee(n){return typeof n=="number"&&Number.isInteger(n)&&!Qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var w3="";function Bee(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PV(e)),e=jee(n.get(t),e);return PV(e)}function jee(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case w3:t+="";break;default:t+=s}}return t}function PV(n){return n+w3+""}var $ee="remoteDocuments",b3="owner";var C3="mutationQueues";var E3="mutations";var I3="documentMutations",Hee="remoteDocumentsV14";var D3="remoteDocumentGlobal";var x3="targets";var T3="targetDocuments";var A3="targetGlobal",S3="collectionParents";var M3="clientMetadata";var P3="bundles";var k3="namedQueries";var zee="indexConfiguration";var Wee="indexState";var qee="indexEntries";var R3="documentOverlays";var Gee="globals";var Kee=[C3,E3,I3,$ee,x3,b3,A3,T3,M3,D3,S3,P3,k3],Fke=[...Kee,R3],Yee=[C3,E3,I3,Hee,x3,b3,A3,T3,M3,D3,S3,P3,k3,R3],Jee=Yee,Qee=[...Jee,zee,Wee,qee];var Nke=[...Qee,Gee];function kV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function F3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Yt=class n{constructor(e,t){this.comparator=e,this.root=t||_s.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_s.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}},Ru=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_s=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};_s.EMPTY=null,_s.RED=!0,_s.BLACK=!1;_s.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new _s(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dn=class n{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x_(this.data.getIterator())}getIteratorFrom(e){return new x_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},x_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hi=class n{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dn(Wr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ou(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var T_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Jn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new T_("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Jn.EMPTY_BYTE_STRING=new Jn("");var Zee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(n){if(it(!!n,39018),typeof n=="string"){let e=0,t=Zee.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mo(n){return typeof n=="string"?Jn.fromBase64String(n):Jn.fromUint8Array(n)}var N3="server_timestamp",U3="__type__",O3="__previous_value__",L3="__local_write_time__";function yA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[U3])===null||t===void 0?void 0:t.stringValue)===N3}function ov(n){let e=n.mapValue.fields[O3];return yA(e)?ov(e):e}function Zf(n){let e=go(n.mapValue.fields[L3].timestampValue);return new lt(e.seconds,e.nanos)}var V1=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},A_="(default)",S_=class n{constructor(e,t){this.projectId=e,this.database=t||A_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===A_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _A="__type__",V3="__max__",m_={mapValue:{fields:{__type__:{stringValue:V3}}}},vA="__vector__",Lu="value";function ga(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yA(n)?4:j3(n)?9007199254740991:B3(n)?10:11:me(28295,{value:n})}function bs(n,e){if(n===e)return!0;let t=ga(n);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zf(n).isEqual(Zf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=go(i.timestampValue),a=go(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return mo(i.bytesValue).isEqual(mo(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Tt(i.doubleValue),a=Tt(s.doubleValue);return o===a?Qf(o)===Qf(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ou(n.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kV(o)!==kV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!bs(o[c],a[c])))return!1;return!0}(n,e);default:return me(52216,{left:n})}}function Xf(n,e){return(n.values||[]).find(t=>bs(t,e))!==void 0}function Vu(n,e){if(n===e)return 0;let t=ga(n),r=ga(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Tt(s.integerValue||s.doubleValue),c=Tt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return RV(n.timestampValue,e.timestampValue);case 4:return RV(Zf(n),Zf(e));case 5:return U1(n.stringValue,e.stringValue);case 6:return function(s,o){let a=mo(s),c=mo(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Oe(a[l],c[l]);if(u!==0)return u}return Oe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Oe(Tt(s.latitude),Tt(o.latitude));return a!==0?a:Oe(Tt(s.longitude),Tt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FV(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,u;let h=s.fields||{},f=o.fields||{},p=(a=h[Lu])===null||a===void 0?void 0:a.arrayValue,y=(c=f[Lu])===null||c===void 0?void 0:c.arrayValue,w=Oe(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=y?.values)===null||u===void 0?void 0:u.length)||0);return w!==0?w:FV(p,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===m_.mapValue&&o===m_.mapValue)return 0;if(s===m_.mapValue)return 1;if(o===m_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let f=U1(c[h],u[h]);if(f!==0)return f;let p=Vu(a[c[h]],l[u[h]]);if(p!==0)return p}return Oe(c.length,u.length)}(n.mapValue,e.mapValue);default:throw me(23264,{Pe:t})}}function RV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=go(n),r=go(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function FV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Vu(t[i],r[i]);if(s)return s}return Oe(t.length,r.length)}function Bu(n){return B1(n)}function B1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=go(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=B1(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${B1(t.fields[o])}`;return i+"}"}(n.mapValue):me(61005,{value:n})}function v_(n){switch(ga(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ov(n);return e?16+v_(e):16;case 5:return 2*n.stringValue.length;case 6:return mo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+v_(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return va(r.fields,(s,o)=>{i+=s.length+v_(o)}),i}(n.mapValue);default:throw me(13486,{value:n})}}function NV(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j1(n){return!!n&&"integerValue"in n}function wA(n){return!!n&&"arrayValue"in n}function UV(n){return!!n&&"nullValue"in n}function OV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function w_(n){return!!n&&"mapValue"in n}function B3(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_A])===null||t===void 0?void 0:t.stringValue)===vA}function qf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function j3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V3}var Oke={mapValue:{fields:{[_A]:{stringValue:vA},[Lu]:{arrayValue:{}}}}};var zr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!w_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qf(t)}setAll(e){let t=Wr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=qf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());w_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];w_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){va(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(qf(this.value))}};function $3(n){let e=[];return va(n.fields,(t,r)=>{let i=new Wr([t]);if(w_(r)){let s=$3(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new hi(e)}var Vi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ju=class{constructor(e,t){this.position=e,this.inclusive=t}};function LV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),t.key):r=Vu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bs(n.position[t],e.position[t]))return!1;return!0}var $u=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Xee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var M_=class{},on=class n extends M_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new H1(e,t,r):t==="array-contains"?new q1(e,r):t==="in"?new G1(e,r):t==="not-in"?new K1(e,r):t==="array-contains-any"?new Y1(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new z1(e,r):new W1(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vu(t,this.value)):t!==null&&ga(this.value)===ga(t)&&this.matchesComparison(Vu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Bi=class n extends M_{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return H3(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function H3(n){return n.op==="and"}function z3(n){return ete(n)&&H3(n)}function ete(n){for(let e of n.filters)if(e instanceof Bi)return!1;return!0}function $1(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+Bu(n.value);if(z3(n))return n.filters.map(e=>$1(e)).join(",");{let e=n.filters.map(t=>$1(t)).join(",");return`${n.op}(${e})`}}function W3(n,e){return n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.field.isEqual(i.field)&&bs(r.value,i.value)}(n,e):n instanceof Bi?function(r,i){return i instanceof Bi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&W3(o,i.filters[a]),!0):!1}(n,e):void me(19439)}function q3(n){return n instanceof on?function(t){return`${t.field.canonicalString()} ${t.op} ${Bu(t.value)}`}(n):n instanceof Bi?function(t){return t.op.toString()+" {"+t.getFilters().map(q3).join(" ,")+"}"}(n):"Filter"}var H1=class extends on{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){let t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}},z1=class extends on{constructor(e,t){super(e,"in",t),this.keys=G3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},W1=class extends on{constructor(e,t){super(e,"not-in",t),this.keys=G3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function G3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ge.fromName(r.referenceValue))}var q1=class extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wA(t)&&Xf(t.arrayValue,this.value)}},G1=class extends on{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xf(this.value.arrayValue,t)}},K1=class extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xf(this.value.arrayValue,t)}},Y1=class extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xf(this.value.arrayValue,r))}};var J1=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}};function BV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new J1(n,e,t,r,i,s,o)}function bA(n){let e=Ie(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bu(r)).join(",")),e.Ie=t}return e.Ie}function CA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VV(n.startAt,e.startAt)&&VV(n.endAt,e.endAt)}function Q1(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Lc=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function tte(n,e,t,r,i,s,o,a){return new Lc(n,e,t,r,i,s,o,a)}function av(n){return new Lc(n)}function jV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function K3(n){return n.collectionGroup!==null}function Gf(n){let e=Ie(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dn(Wr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new $u(s,r))}),t.has(Wr.keyField().canonicalString())||e.Ee.push(new $u(Wr.keyField(),r))}return e.Ee}function vs(n){let e=Ie(n);return e.de||(e.de=nte(e,Gf(n))),e.de}function nte(n,e){if(n.limitType==="F")return BV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new $u(i.field,s)});let t=n.endAt?new ju(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ju(n.startAt.position,n.startAt.inclusive):null;return BV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Z1(n,e){let t=n.filters.concat([e]);return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function X1(n,e,t){return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cv(n,e){return CA(vs(n),vs(e))&&n.limitType===e.limitType}function Y3(n){return`${bA(vs(n))}|lt:${n.limitType}`}function Mu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>q3(i)).join(", ")}]`),sv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bu(i)).join(",")),`Target(${r})`}(vs(n))}; limitType=${n.limitType})`}function lv(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Gf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=LV(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Gf(r),i)||r.endAt&&!function(o,a,c){let l=LV(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Gf(r),i))}(n,e)}function rte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J3(n){return(e,t)=>{let r=!1;for(let i of Gf(n)){let s=ite(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ite(n,e,t){let r=n.field.isKeyField()?ge.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Vu(c,l):me(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var yo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return F3(this.inner)}size(){return this.innerSize}};var ste=new Yt(ge.comparator);function _o(){return ste}var Q3=new Yt(ge.comparator);function Wf(...n){let e=Q3;for(let t of n)e=e.insert(t.key,t);return e}function Z3(n){let e=Q3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rc(){return Kf()}function X3(){return Kf()}function Kf(){return new yo(n=>n.toString(),(n,e)=>n.isEqual(e))}var ote=new Yt(ge.comparator),ate=new Dn(ge.comparator);function Ge(...n){let e=ate;for(let t of n)e=e.add(t);return e}var cte=new Dn(Oe);function lte(){return cte}function EA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qf(e)?"-0":e}}function eB(n){return{integerValue:""+n}}function ute(n,e){return Vee(e)?eB(e):EA(n,e)}var Hu=class{constructor(){this._=void 0}};function dte(n,e,t){return n instanceof zu?function(i,s){let o={fields:{[U3]:{stringValue:N3},[L3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yA(s)&&(s=ov(s)),s&&(o.fields[O3]=s),{mapValue:o}}(t,e):n instanceof ma?nB(n,e):n instanceof Vc?rB(n,e):function(i,s){let o=tB(i,s),a=$V(o)+$V(i.Re);return j1(o)&&j1(i.Re)?eB(a):EA(i.serializer,a)}(n,e)}function hte(n,e,t){return n instanceof ma?nB(n,e):n instanceof Vc?rB(n,e):t}function tB(n,e){return n instanceof Wu?function(r){return j1(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var zu=class extends Hu{},ma=class extends Hu{constructor(e){super(),this.elements=e}};function nB(n,e){let t=iB(e);for(let r of n.elements)t.some(i=>bs(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vc=class extends Hu{constructor(e){super(),this.elements=e}};function rB(n,e){let t=iB(e);for(let r of n.elements)t=t.filter(i=>!bs(i,r));return{arrayValue:{values:t}}}var Wu=class extends Hu{constructor(e,t){super(),this.serializer=e,this.Re=t}};function $V(n){return Tt(n.integerValue||n.doubleValue)}function iB(n){return wA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var eT=class{constructor(e,t){this.field=e,this.transform=t}};function fte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ma&&i instanceof ma||r instanceof Vc&&i instanceof Vc?Ou(r.elements,i.elements,bs):r instanceof Wu&&i instanceof Wu?bs(r.Re,i.Re):r instanceof zu&&i instanceof zu}(n.transform,e.transform)}var tT=class{constructor(e,t){this.version=e,this.transformResults=t}},fo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function b_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qu=class{};function sB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ep(n.key,fo.none()):new Bc(n.key,n.data,fo.none());{let t=n.data,r=zr.empty(),i=new Dn(Wr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cs(n.key,r,new hi(i.toArray()),fo.none())}}function pte(n,e,t){n instanceof Bc?function(i,s,o){let a=i.value.clone(),c=zV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Cs?function(i,s,o){if(!b_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=zV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(oB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Yf(n,e,t,r){return n instanceof Bc?function(s,o,a,c){if(!b_(s.precondition,o))return a;let l=s.value.clone(),u=WV(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cs?function(s,o,a,c){if(!b_(s.precondition,o))return a;let l=WV(s.fieldTransforms,c,o),u=o.data;return u.setAll(oB(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return b_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function gte(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=tB(r.transform,i||null);s!=null&&(t===null&&(t=zr.empty()),t.set(r.field,s))}return t||null}function HV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ou(r,i,(s,o)=>fte(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bc=class extends qu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cs=class extends qu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function oB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zV(n,e,t){let r=new Map;it(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hte(o,a,t[i]))}return r}function WV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,dte(s,o,e))}return r}var ep=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nT=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&pte(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Yf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=X3();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=sB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Ou(this.mutations,e.mutations,(t,r)=>HV(t,r))&&Ou(this.baseMutations,e.baseMutations,(t,r)=>HV(t,r))}},iT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return ote}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var sT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var oT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rn,Je;function mte(n){switch(n){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function aB(n){if(n===void 0)return po("GRPC error has no .code"),z.UNKNOWN;switch(n){case rn.OK:return z.OK;case rn.CANCELLED:return z.CANCELLED;case rn.UNKNOWN:return z.UNKNOWN;case rn.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case rn.INTERNAL:return z.INTERNAL;case rn.UNAVAILABLE:return z.UNAVAILABLE;case rn.UNAUTHENTICATED:return z.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case rn.NOT_FOUND:return z.NOT_FOUND;case rn.ALREADY_EXISTS:return z.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return z.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case rn.ABORTED:return z.ABORTED;case rn.OUT_OF_RANGE:return z.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return z.UNIMPLEMENTED;case rn.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:n})}}(Je=rn||(rn={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";var qV=null;var yte=new uo([4294967295,4294967295],0);function GV(n){let e=v3().encode(n),t=new w1;return t.update(e),new Uint8Array(t.digest())}function KV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new uo([t,r],0),new uo([i,s],0)]}var aT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fc(`Invalid padding: ${t}`);if(r<0)throw new Fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=uo.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(uo.fromNumber(r)));return i.compare(yte)===1&&(i=new uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=GV(e),[r,i]=KV(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;let t=GV(e),[r,i]=KV(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var P_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,tp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new Yt(Oe),_o(),Ge())}},tp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ge(),Ge(),Ge())}};var Fu=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},k_=class{constructor(e,t){this.targetId=e,this.Ce=t}},R_=class{constructor(e,t,r=Jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},F_=class{constructor(){this.Fe=0,this.Me=YV(),this.xe=Jn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ge(),t=Ge(),r=Ge();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new tp(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=YV()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},cT=class{constructor(e){this.ze=e,this.je=new Map,this.He=_o(),this.Je=y_(),this.Ye=y_(),this.Ze=new Yt(Oe)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(Q1(s))if(r===0){let o=new ge(s.path);this.tt(t,o,Vi.newNoDocument(o,xe.min()))}else it(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}qV?.ht(function(u,h,f,p,y){var w,b,A,P,U,V;let B={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},$=h.unchangedNames;return $&&(B.bloomFilter={applied:y===0,hashCount:(w=$?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(P=(A=(b=$?.bits)===null||b===void 0?void 0:b.bitmap)===null||A===void 0?void 0:A.length)!==null&&P!==void 0?P:0,padding:(V=(U=$?.bits)===null||U===void 0?void 0:U.padding)!==null&&V!==void 0?V:0,mightContain:S=>{var D;return(D=p?.mightContain(S))!==null&&D!==void 0&&D}}),B}(o,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=mo(r).toUint8Array()}catch(c){if(c instanceof T_)return Uu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new aT(o,i,s)}catch(c){return Uu(c instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let a=this._t(o);if(a){if(s.current&&Q1(a.target)){let c=new ge(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Vi.newNoDocument(c,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=Ge();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this._t(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new P_(e,t,this.Ze,this.He,r);return this.He=_o(),this.Je=y_(),this.Ye=y_(),this.Ze=new Yt(Oe),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new F_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Dn(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Dn(Oe),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new F_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function y_(){return new Yt(ge.comparator)}function YV(){return new Yt(ge.comparator)}var _te={asc:"ASCENDING",desc:"DESCENDING"},vte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wte={and:"AND",or:"OR"},lT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function uT(n,e){return n.useProto3Json||sv(e)?e:{value:e}}function N_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bte(n,e){return N_(n,e.toTimestamp())}function ws(n){return it(!!n,49232),xe.fromTimestamp(function(t){let r=go(t);return new lt(r.seconds,r.nanos)}(n))}function IA(n,e){return dT(n,e).canonicalString()}function dT(n,e){let t=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lB(n){let e=Nt.fromString(n);return it(pB(e),10190,{key:e.toString()}),e}function hT(n,e){return IA(n.databaseId,e.path)}function x1(n,e){let t=lB(e);if(t.get(1)!==n.databaseId.projectId)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(dB(t))}function uB(n,e){return IA(n.databaseId,e)}function Cte(n){let e=lB(n);return e.length===4?Nt.emptyPath():dB(e)}function fT(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dB(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JV(n,e,t){return{name:hT(n,e),fields:t.value.mapValue.fields}}function Ete(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:me(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(it(u===void 0||typeof u=="string",58123),Jn.fromBase64String(u||"")):(it(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Jn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?z.UNKNOWN:aB(l.code);return new se(u,l.message||"")}(o);t=new R_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=x1(n,r.document.name),s=ws(r.document.updateTime),o=r.document.createTime?ws(r.document.createTime):xe.min(),a=new zr({mapValue:{fields:r.document.fields}}),c=Vi.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Fu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=x1(n,r.document),s=r.readTime?ws(r.readTime):xe.min(),o=Vi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Fu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=x1(n,r.document),s=r.removedTargetIds||[];t=new Fu([],s,i,null)}else{if(!("filter"in e))return me(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new oT(i,s),a=r.targetId;t=new k_(a,o)}}return t}function Ite(n,e){let t;if(e instanceof Bc)t={update:JV(n,e.key,e.value)};else if(e instanceof ep)t={delete:hT(n,e.key)};else if(e instanceof Cs)t={update:JV(n,e.key,e.data),updateMask:Rte(e.fieldMask)};else{if(!(e instanceof nT))return me(16599,{ft:e.type});t={verify:hT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof zu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ma)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw me(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bte(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)}(n,e.precondition)),t}function Dte(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?ws(i.updateTime):ws(s);return o.isEqual(xe.min())&&(o=ws(s)),new tT(o,i.transformResults||[])}(t,e))):[]}function xte(n,e){return{documents:[uB(n,e.path)]}}function Tte(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uB(n,i);let s=function(l){if(l.length!==0)return fB(Bi.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:Pu(f.field),direction:Mte(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=uT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function Ate(n){let e=Cte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){let f=hB(h);return f instanceof Bi&&z3(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(f=>function(y){return new $u(ku(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,sv(f)?null:f}(t.limit));let c=null;t.startAt&&(c=function(h){let f=!!h.before,p=h.values||[];return new ju(p,f)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let f=!h.before,p=h.values||[];return new ju(p,f)}(t.endAt)),tte(e,i,o,s,a,"F",c,l)}function Ste(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hB(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ku(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ku(t.unaryFilter.field);return on.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ku(t.unaryFilter.field);return on.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ku(t.unaryFilter.field);return on.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(n):n.fieldFilter!==void 0?function(t){return on.create(ku(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Bi.create(t.compositeFilter.filters.map(r=>hB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(t.compositeFilter.op))}(n):me(30097,{filter:n})}function Mte(n){return _te[n]}function Pte(n){return vte[n]}function kte(n){return wte[n]}function Pu(n){return{fieldPath:n.canonicalString()}}function ku(n){return Wr.fromServerFormat(n.fieldPath)}function fB(n){return n instanceof on?function(t){if(t.op==="=="){if(OV(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NAN"}};if(UV(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OV(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NAN"}};if(UV(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(t.field),op:Pte(t.op),value:t.value}}}(n):n instanceof Bi?function(t){let r=t.getFilters().map(i=>fB(i));return r.length===1?r[0]:{compositeFilter:{op:kte(t.op),filters:r}}}(n):me(54877,{filter:n})}function Rte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var np=class n{constructor(e,t,r,i,s=xe.min(),o=xe.min(),a=Jn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pT=class{constructor(e){this.wt=e}};function Fte(n){let e=Ate({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?X1(e,e.limit,"L"):e}var U_=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Qf(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=go(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(mo(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?j3(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):B3(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):me(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=Lu,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Tt(a)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),ge.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};U_.Wt=new U_;var gT=class{constructor(){this.Cn=new mT}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Oc.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Oc.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},mT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(Nt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(Nt.comparator)).toArray()}};var Lke=new Uint8Array(0);var QV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gB=41943040,di=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(gB,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);var rp=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var ZV="LruGarbageCollector",Nte=1048576;function XV([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var yT=class{constructor(e){this.Er=e,this.buffer=new Dn(XV),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();XV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},_T=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ie(ZV,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xu(t)?ie(ZV,"Ignoring IndexedDB error during garbage collection: ",t):yield Zu(t)}yield this.mr(3e5)}))}},vT=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(gA.le);let r=new yT(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(QV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QV):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Su()<=Ue.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function Ute(n,e){return new vT(n,e)}var wT=class{constructor(){this.changes=new yo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var CT=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Yf(r.mutation,i,hi.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ge()){let i=Rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Wf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=_o(),o=Kf(),a=function(){return Kf()}();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Cs)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Yf(u.mutation,l,u.mutation.getFieldMask(),lt.now())):o.set(l.key,hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new bT(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Kf(),i=new Yt((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||hi.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||Ge()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=X3();u.forEach(f=>{if(!s.has(f)){let p=sB(t.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):K3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(Rc()),a=Jf,c=s;return o.next(l=>q.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ge())).next(u=>({batchId:a,changes:Z3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(r=>{let i=Wf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Wf();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,c=>{let l=function(h,f){return new Lc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Vi.newInvalidDocument(u)))});let a=Wf();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Yf(u.mutation,l,hi.empty(),lt.now()),lv(t,l)&&(a=a.insert(c,l))}),a})}};var ET=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return q.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ws(i.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:Fte(i.bundledQuery),readTime:ws(i.readTime)}}(t)),q.resolve()}};var IT=class{constructor(){this.overlays=new Yt(ge.comparator),this.Qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Rc();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=Rc(),s=t.length+1,o=new ge(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Yt((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Rc(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Rc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sT(t,r));let s=this.Qr.get(t);s===void 0&&(s=Ge(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}};var DT=class{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var ip=class{constructor(){this.$r=new Dn(sn.Ur),this.Kr=new Dn(sn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new sn(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new sn(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new ge(new Nt([])),r=new sn(t,e),i=new sn(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new ge(new Nt([])),r=new sn(t,e),i=new sn(t,e+1),s=Ge();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new sn(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},sn=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ge.comparator(e.key,t.key)||Oe(e.Zr,t.Zr)}static Wr(e,t){return Oe(e.Zr,t.Zr)||ge.comparator(e.key,t.key)}};var xT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Dn(sn.Ur)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new rT(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Xr=this.Xr.add(new sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?mA:this.nr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new sn(t,0),i=new sn(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{let a=this.ei(o.Zr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Oe);return t.forEach(i=>{let s=new sn(i,0),o=new sn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],a=>{r=r.add(a.Zr)})}),q.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ge.isDocumentKey(s)||(s=s.child(""));let o=new sn(new ge(s),0),a=new Dn(Oe);return this.Xr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Zr)),!0)},o),q.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return q.forEach(t.mutations,i=>{let s=new sn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new sn(t,0),i=this.Xr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var TT=class{constructor(e){this.ii=e,this.docs=function(){return new Yt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Vi.newInvalidDocument(t))}getEntries(e,t){let r=_o();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vi.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=_o(),o=t.path,a=new ge(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Uee(Nee(u),r)<=0||(i.has(u.key)||lv(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me(9500)}si(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AT(this)}getSize(e){return q.resolve(this.size)}},AT=class extends wT{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var ST=class{constructor(e){this.persistence=e,this.oi=new yo(t=>bA(t),CA),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this._i=0,this.ai=new ip,this.targetCount=0,this.ui=rp.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),q.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new rp(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Tr(t),q.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.ai.containsKey(t))}};var O_=class{constructor(e,t){this.ci={},this.overlays={},this.li=new gA(0),this.hi=!1,this.hi=!0,this.Pi=new DT,this.referenceDelegate=e(this),this.Ti=new ST(this),this.indexManager=new gT,this.remoteDocumentCache=function(i){return new TT(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new pT(t),this.Ei=new ET(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new xT(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new MT(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return q.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},MT=class extends L1{constructor(e){super(),this.currentSequenceNumber=e}},PT=class n{constructor(e){this.persistence=e,this.Vi=new ip,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw me(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.gi,r=>{let i=ge.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return q.or([()=>q.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},L_=class n{constructor(e,t){this.persistence=e,this.yi=new yo(r=>Bee(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Ute(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return q.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),q.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=v_(e.data.value)),t}Dr(e,t,r){return q.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var kT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Ge(),i=Ge();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var RT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var FT=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return $O()?8:Lee(En())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new RT;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.fs)return this.Ds(e,t,o,a.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Su()<=Ue.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Mu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),q.resolve()):(Su()<=Ue.DEBUG&&ie("QueryEngine","Query:",Mu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Su()<=Ue.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Mu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(t))):q.resolve())}ws(e,t){if(jV(t))return q.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=X1(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ge(...s);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.vs(t,a);return this.Cs(t,l,o,c.readTime)?this.ws(e,X1(t,null,"F")):this.Fs(e,l,t,c)}))})))}bs(e,t,r,i){return jV(t)||i.isEqual(xe.min())?q.resolve(null):this.ys.getDocuments(e,r).next(s=>{let o=this.vs(t,s);return this.Cs(t,o,r,i)?q.resolve(null):(Su()<=Ue.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(t)),this.Fs(e,o,t,Fee(i,Jf)).next(a=>a))})}vs(e,t){let r=new Dn(J3(e));return t.forEach((i,s)=>{lv(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Su()<=Ue.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Mu(t)),this.ys.getDocumentsMatchingQuery(e,t,Oc.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var DA="LocalStore",Ote=3e8,NT=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Yt(Oe),this.Os=new yo(s=>bA(s),CA),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CT(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function Lte(n,e,t,r){return new NT(n,e,t,r)}function mB(n,e){return x(this,null,function*(){let t=Ie(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ge();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({ks:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Vte(n,e){let t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let h=l.batch,f=h.keys(),p=q.resolve();return f.forEach(y=>{p=p.next(()=>u.getEntry(c,y)).next(w=>{let b=l.docVersions.get(y);it(b!==null,48541),w.version.compareTo(b)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yB(n){let e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Bte(n,e){let t=Ie(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((u,h)=>{let f=i.get(h);if(!f)return;a.push(t.Ti.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Ti.addMatchingKeys(s,u.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Jn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(w,b,A){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Ote?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(f,p,u)&&a.push(t.Ti.updateTargetData(s,p))});let c=_o(),l=Ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(jte(s,o,e.documentUpdates).next(u=>{c=u.qs,l=u.Qs})),!r.isEqual(xe.min())){let u=t.Ti.getLastRemoteSnapshotVersion(s).next(h=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.xs=i,s))}function jte(n,e,t){let r=Ge(),i=Ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=_o();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(DA,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function $te(n,e){let t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hte(n,e){let t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new np(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function UT(n,e,t){return x(this,null,function*(){let r=Ie(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xu(o))throw o;ie(DA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function e3(n,e,t){let r=Ie(n),i=xe.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let h=Ie(c),f=h.Os.get(u);return f!==void 0?q.resolve(h.xs.get(f)):h.Ti.getTargetData(l,u)}(r,o,vs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:xe.min(),t?s:Ge())).next(a=>(zte(r,rte(e),a),{documents:a,$s:s})))}function zte(n,e,t){let r=n.Ns.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}var V_=class{constructor(){this.activeTargetIds=lte()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var OT=class{constructor(){this.xo=new V_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new V_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var LT=class{No(e){}shutdown(){}};var t3="ConnectivityMonitor",B_=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ie(t3,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){ie(t3,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var __=null;function VT(){return __===null?__=function(){return 268435456+Math.round(2147483648*Math.random())}():__++,"0x"+__.toString(16)}var T1="RestConnection",Wte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},BT=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===A_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){let o=VT(),a=this.jo(e,t.toUriEncodedString());ie(T1,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,s);let{host:l}=new URL(a),u=Fi(l);return this.Jo(e,a,c,r,u).then(h=>(ie(T1,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Uu(T1,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){let r=Wte[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var jT=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var Kn="WebChannelConnection",$T=class extends BT{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=VT();return new Promise((a,c)=>{let l=new b1;l.setWithCredentials(!0),l.listenOnce(C1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case zf.NO_ERROR:let h=l.getResponseJson();ie(Kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case zf.TIMEOUT:ie(Kn,`RPC '${e}' ${o} timed out`),c(new se(z.DEADLINE_EXCEEDED,"Request time out"));break;case zf.HTTP_ERROR:let f=l.getStatus();if(ie(Kn,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let y=p?.error;if(y&&y.status&&y.message){let w=function(A){let P=A.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(P)>=0?P:z.UNKNOWN}(y.status);c(new se(w,y.message))}else c(new se(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new se(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{h_:e,streamId:o,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{ie(Kn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ie(Kn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}I_(e,t,r){let i=VT(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=D1(),a=I1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");ie(Kn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=o.createWebChannel(u,c);this.E_(h);let f=!1,p=!1,y=new jT({Zo:b=>{p?ie(Kn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(ie(Kn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ie(Kn,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Xo:()=>h.close()}),w=(b,A,P)=>{b.listen(A,U=>{try{P(U)}catch(V){setTimeout(()=>{throw V},0)}})};return w(h,Au.EventType.OPEN,()=>{p||(ie(Kn,`RPC '${e}' stream ${i} transport opened.`),y.__())}),w(h,Au.EventType.CLOSE,()=>{p||(p=!0,ie(Kn,`RPC '${e}' stream ${i} transport closed`),y.u_(),this.d_(h))}),w(h,Au.EventType.ERROR,b=>{p||(p=!0,Uu(Kn,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),y.u_(new se(z.UNAVAILABLE,"The operation could not be completed")))}),w(h,Au.EventType.MESSAGE,b=>{var A;if(!p){let P=b.data[0];it(!!P,16349);let U=P,V=U?.error||((A=U[0])===null||A===void 0?void 0:A.error);if(V){ie(Kn,`RPC '${e}' stream ${i} received error:`,V);let B=V.status,$=function(T){let k=rn[T];if(k!==void 0)return aB(k)}(B),S=V.message;$===void 0&&($=z.INTERNAL,S="Unknown error status: "+B+" with message "+V.message),p=!0,y.u_(new se($,S)),h.close()}else ie(Kn,`RPC '${e}' stream ${i} received:`,P),y.c_(P)}}),w(a,E1.STAT_EVENT,b=>{b.stat===g_.PROXY?ie(Kn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===g_.NOPROXY&&ie(Kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.a_()},0),y}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function A1(){return typeof document<"u"?document:null}function uv(n){return new lT(n,!0)}var j_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var n3="PersistentStream",$_=class{constructor(e,t,r,i,s,o,a,c){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new j_(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return x(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return x(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return x(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new se(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>x(this,null,function*(){this.state=0,this.start()}))}j_(e){return ie(n3,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(ie(n3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},HT=class extends $_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=Ete(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?ws(o.readTime):xe.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=fT(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Q1(c)?{documents:xte(s,c)}:{query:Tte(s,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cB(s,o.resumeToken);let l=uT(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=N_(s,o.snapshotVersion.toTimestamp());let l=uT(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Ste(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=fT(this.serializer),t.removeTarget=e,this.Q_(t)}},zT=class extends $_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=Dte(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=fT(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ite(this.serializer,r))};this.Q_(t)}};var WT=class{},qT=class extends WT{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,dT(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(z.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,dT(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},GT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(po(t),this.ua=!1):ie("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var jc="RemoteStore",KT=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{r.enqueueAndForget(()=>x(this,null,function*(){Hc(this)&&(ie(jc,"Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let l=Ie(c);l.da.add(4),yield hp(l),l.Va.set("Unknown"),l.da.delete(4),yield dv(l)})}(this))}))}),this.Va=new GT(r,i)}};function dv(n){return x(this,null,function*(){if(Hc(n))for(let e of n.Aa)yield e(!0)})}function hp(n){return x(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function _B(n,e){let t=Ie(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),SA(t)?AA(t):ed(t).N_()&&TA(t,e))}function xA(n,e){let t=Ie(n),r=ed(t);t.Ea.delete(e),r.N_()&&vB(t,e),t.Ea.size===0&&(r.N_()?r.k_():Hc(t)&&t.Va.set("Unknown"))}function TA(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ed(n).Z_(e)}function vB(n,e){n.ma.Ke(e),ed(n).X_(e)}function AA(n){n.ma=new cT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ed(n).start(),n.Va.ca()}function SA(n){return Hc(n)&&!ed(n).O_()&&n.Ea.size>0}function Hc(n){return Ie(n).da.size===0}function wB(n){n.ma=void 0}function qte(n){return x(this,null,function*(){n.Va.set("Online")})}function Gte(n){return x(this,null,function*(){n.Ea.forEach((e,t)=>{TA(n,e)})})}function Kte(n,e){return x(this,null,function*(){wB(n),SA(n)?(n.Va.Pa(e),AA(n)):n.Va.set("Unknown")})}function Yte(n,e,t){return x(this,null,function*(){if(n.Va.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{yield function(i,s){return x(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){ie(jc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield H_(n,r)}else if(e instanceof Fu?n.ma.Xe(e):e instanceof k_?n.ma.ot(e):n.ma.nt(e),!t.isEqual(xe.min()))try{let r=yield yB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.ma.It(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ea.get(l);u&&s.Ea.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ea.get(c);if(!u)return;s.Ea.set(c,u.withResumeToken(Jn.EMPTY_BYTE_STRING,u.snapshotVersion)),vB(s,c);let h=new np(u.target,c,l,u.sequenceNumber);TA(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ie(jc,"Failed to raise snapshot:",r),yield H_(n,r)}})}function H_(n,e,t){return x(this,null,function*(){if(!Xu(e))throw e;n.da.add(1),yield hp(n),n.Va.set("Offline"),t||(t=()=>yB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(null,null,function*(){ie(jc,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield dv(n)}))})}function bB(n,e){return e().catch(t=>H_(n,t,e))}function hv(n){return x(this,null,function*(){let e=Ie(n),t=ya(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:mA;for(;Jte(e);)try{let i=yield $te(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,Qte(e,i)}catch(i){yield H_(e,i)}CB(e)&&EB(e)})}function Jte(n){return Hc(n)&&n.Ia.length<10}function Qte(n,e){n.Ia.push(e);let t=ya(n);t.N_()&&t.ea&&t.ta(e.mutations)}function CB(n){return Hc(n)&&!ya(n).O_()&&n.Ia.length>0}function EB(n){ya(n).start()}function Zte(n){return x(this,null,function*(){ya(n).ia()})}function Xte(n){return x(this,null,function*(){let e=ya(n);for(let t of n.Ia)e.ta(t.mutations)})}function ene(n,e,t){return x(this,null,function*(){let r=n.Ia.shift(),i=iT.from(r,e,t);yield bB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield hv(n)})}function tne(n,e){return x(this,null,function*(){e&&ya(n).ea&&(yield function(r,i){return x(this,null,function*(){if(function(o){return mte(o)&&o!==z.ABORTED}(i.code)){let s=r.Ia.shift();ya(r).L_(),yield bB(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield hv(r)}})}(n,e)),CB(n)&&EB(n)})}function r3(n,e){return x(this,null,function*(){let t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ie(jc,"RemoteStore received new credentials");let r=Hc(t);t.da.add(3),yield hp(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield dv(t)})}function nne(n,e){return x(this,null,function*(){let t=Ie(n);e?(t.da.delete(2),yield dv(t)):e||(t.da.add(2),yield hp(t),t.Va.set("Unknown"))})}function ed(n){return n.fa||(n.fa=function(t,r,i){let s=Ie(t);return s.oa(),new HT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:qte.bind(null,n),n_:Gte.bind(null,n),i_:Kte.bind(null,n),Y_:Yte.bind(null,n)}),n.Aa.push(e=>x(null,null,function*(){e?(n.fa.L_(),SA(n)?AA(n):n.Va.set("Unknown")):(yield n.fa.stop(),wB(n))}))),n.fa}function ya(n){return n.ga||(n.ga=function(t,r,i){let s=Ie(t);return s.oa(),new zT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Zte.bind(null,n),i_:tne.bind(null,n),na:Xte.bind(null,n),ra:ene.bind(null,n)}),n.Aa.push(e=>x(null,null,function*(){e?(n.ga.L_(),yield hv(n)):(yield n.ga.stop(),n.Ia.length>0&&(ie(jc,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var YT=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function MA(n,e){if(po("AsyncQueue",`${e}: ${n}`),Xu(n))return new se(z.UNAVAILABLE,`${e}: ${n}`);throw n}var z_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=Wf(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var W_=class{constructor(){this.pa=new Yt(ge.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},Gu=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,z_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var JT=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},QT=class{constructor(){this.queries=i3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ie(t),s=i.queries;i.queries=i3(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new se(z.ABORTED,"Firestore shutting down"))}};function i3(){return new yo(n=>Y3(n),cv)}function PA(n,e){return x(this,null,function*(){let t=Ie(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new JT,r=e.va()?0:1);try{switch(r){case 0:s.ba=yield t.onListen(i,!0);break;case 1:s.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=MA(o,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&RA(t)})}function kA(n,e){return x(this,null,function*(){let t=Ie(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function rne(n,e){let t=Ie(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Ma(i)&&(r=!0);o.ba=i}}r&&RA(t)}function ine(n,e,t){let r=Ie(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function RA(n){n.Ca.forEach(e=>{e.next()})}var ZT,s3;(s3=ZT||(ZT={})).xa="default",s3.Cache="cache";var sp=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ZT.Cache}};var q_=class{constructor(e){this.key=e}},G_=class{constructor(e){this.key=e}},XT=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.Za=J3(e),this.Xa=new z_(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new W_,i=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),p=lv(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),b=!1;f&&p?f.data.isEqual(p.data)?y!==w&&(r.track({type:3,doc:p}),b=!0):this.ru(f,p)||(r.track({type:2,doc:p}),b=!0,(c&&this.Za(p,c)>0||l&&this.Za(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(c||l)&&(a=!0)),b&&(p?(o=o.add(p),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Xa:o,nu:r,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let o=e.nu.wa();o.sort((u,h)=>function(p,y){let w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Vt:b})}};return w(p)-w(y)}(u.type,h.type)||this.Za(u.doc,h.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,l=c!==this.Ja;return this.Ja=c,o.length!==0||l?{snapshot:new Gu(this.query,e.Xa,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new W_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=Ge(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new G_(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new q_(r))}),t}au(e){this.Ha=e.$s,this.Ya=Ge();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Gu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},FA="SyncEngine",eA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},tA=class{constructor(e){this.key=e,this.cu=!1}},nA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new yo(a=>Y3(a),cv),this.Pu=new Map,this.Tu=new Set,this.Iu=new Yt(ge.comparator),this.Eu=new Map,this.du=new ip,this.Au={},this.Ru=new Map,this.Vu=rp.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function sne(n,e,t=!0){return x(this,null,function*(){let r=SB(n),i,s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=yield IB(r,e,t,!0),i})}function one(n,e){return x(this,null,function*(){let t=SB(n);yield IB(t,e,!0,!1)})}function IB(n,e,t,r){return x(this,null,function*(){let i=yield Hte(n.localStore,vs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield ane(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&_B(n.remoteStore,i),a})}function ane(n,e,t,r,i){return x(this,null,function*(){n.fu=(h,f,p)=>function(w,b,A,P){return x(this,null,function*(){let U=b.view.tu(A);U.Cs&&(U=yield e3(w.localStore,b.query,!1).then(({documents:S})=>b.view.tu(S,U)));let V=P&&P.targetChanges.get(b.targetId),B=P&&P.targetMismatches.get(b.targetId)!=null,$=b.view.applyChanges(U,w.isPrimaryClient,V,B);return a3(w,b.targetId,$.ou),$.snapshot})}(n,h,f,p);let s=yield e3(n.localStore,e,!0),o=new XT(e,s.$s),a=o.tu(s.documents),c=tp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);a3(n,t,l.ou);let u=new eA(e,t,o);return n.hu.set(e,u),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),l.snapshot})}function cne(n,e,t){return x(this,null,function*(){let r=Ie(n),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(o=>!cv(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield UT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xA(r.remoteStore,i.targetId),rA(r,i.targetId)}).catch(Zu))):(rA(r,i.targetId),yield UT(r.localStore,i.targetId,!0))})}function lne(n,e){return x(this,null,function*(){let t=Ie(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xA(t.remoteStore,r.targetId))})}function une(n,e,t){return x(this,null,function*(){let r=yne(n);try{let i=yield function(o,a){let c=Ie(o),l=lt.now(),u=a.reduce((p,y)=>p.add(y.key),Ge()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=_o(),w=Ge();return c.Bs.getEntries(p,u).next(b=>{y=b,y.forEach((A,P)=>{P.isValidDocument()||(w=w.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,y)).next(b=>{h=b;let A=[];for(let P of a){let U=gte(P,h.get(P.key).overlayedDocument);U!=null&&A.push(new Cs(P.key,U,$3(U.value.mapValue),fo.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,A,a)}).next(b=>{f=b;let A=b.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(p,b.batchId,A)})}).then(()=>({batchId:f.batchId,changes:Z3(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Au[o.currentUser.toKey()];l||(l=new Yt(Oe)),l=l.insert(a,c),o.Au[o.currentUser.toKey()]=l}(r,i.batchId,t),yield fp(r,i.changes),yield hv(r.remoteStore)}catch(i){let s=MA(i,"Failed to persist write");t.reject(s)}})}function DB(n,e){return x(this,null,function*(){let t=Ie(n);try{let r=yield Bte(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?it(o.cu,14607):i.removedDocuments.size>0&&(it(o.cu,42227),o.cu=!1))}),yield fp(t,r,e)}catch(r){yield Zu(r)}})}function o3(n,e,t){let r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((s,o)=>{let a=o.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Ie(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let f of h.Sa)f.Fa(a)&&(l=!0)}),l&&RA(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dne(n,e,t){return x(this,null,function*(){let r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Yt(ge.comparator);o=o.insert(s,Vi.newNoDocument(s,xe.min()));let a=Ge().add(s),c=new P_(xe.min(),new Map,new Yt(Oe),o,a);yield DB(r,c),r.Iu=r.Iu.remove(s),r.Eu.delete(e),NA(r)}else yield UT(r.localStore,e,!1).then(()=>rA(r,e,t)).catch(Zu)})}function hne(n,e){return x(this,null,function*(){let t=Ie(n),r=e.batch.batchId;try{let i=yield Vte(t.localStore,e);TB(t,r,null),xB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fp(t,i)}catch(i){yield Zu(i)}})}function fne(n,e,t){return x(this,null,function*(){let r=Ie(n);try{let i=yield function(o,a){let c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(it(h!==null,37113),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);TB(r,e,t),xB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fp(r,i)}catch(i){yield Zu(i)}})}function xB(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function TB(n,e,t){let r=Ie(n),i=r.Au[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function rA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||AB(n,r)})}function AB(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(xA(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),NA(n))}function a3(n,e,t){for(let r of t)r instanceof q_?(n.du.addReference(r.key,e),pne(n,r)):r instanceof G_?(ie(FA,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||AB(n,r.key)):me(19791,{pu:r})}function pne(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(ie(FA,"New document in limbo: "+t),n.Tu.add(r),NA(n))}function NA(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new ge(Nt.fromString(e)),r=n.Vu.next();n.Eu.set(r,new tA(t)),n.Iu=n.Iu.insert(t,r),_B(n.remoteStore,new np(vs(av(t.path)),r,"TargetPurposeLimboResolution",gA.le))}}function fp(n,e,t){return x(this,null,function*(){let r=Ie(n),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach((a,c)=>{o.push(r.fu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=kT.Rs(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.lu.Y_(i),yield function(c,l){return x(this,null,function*(){let u=Ie(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(l,f=>q.forEach(f.ds,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>q.forEach(f.As,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Xu(h))throw h;ie(DA,"Failed to update sequence numbers: "+h)}for(let h of l){let f=h.targetId;if(!h.fromCache){let p=u.xs.get(f),y=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(y);u.xs=u.xs.insert(f,w)}}})}(r.localStore,s))})}function gne(n,e){return x(this,null,function*(){let t=Ie(n);if(!t.currentUser.isEqual(e)){ie(FA,"User change. New user:",e.toKey());let r=yield mB(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(a=>{a.forEach(c=>{c.reject(new se(z.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fp(t,r.ks)}})}function mne(n,e){let t=Ie(n),r=t.Eu.get(e);if(r&&r.cu)return Ge().add(r.key);{let i=Ge(),s=t.Pu.get(e);if(!s)return i;for(let o of s){let a=t.hu.get(o);i=i.unionWith(a.view.eu)}return i}}function SB(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dne.bind(null,e),e.lu.Y_=rne.bind(null,e.eventManager),e.lu.gu=ine.bind(null,e.eventManager),e}function yne(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fne.bind(null,e),e}var MB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=uv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return Lte(this.persistence,new FT,t.initialUser,this.serializer)}Su(t){return new O_(PT.fi,this.serializer)}bu(t){return new OT}terminate(){return x(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),iA=class extends MB{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){it(this.persistence.referenceDelegate instanceof L_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new _T(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new O_(r=>L_.fi(r,t),this.serializer)}};var _ne=(()=>{class n{initialize(t,r){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gne.bind(null,this.syncEngine),yield nne(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new QT}()}createDatastore(t){let r=uv(t.databaseInfo.databaseId),i=function(o){return new $T(o)}(t.databaseInfo);return function(o,a,c,l){return new qT(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new KT(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>o3(this.syncEngine,r,0),function(){return B_.C()?new B_:new LT}())}createSyncEngine(t,r){return function(s,o,a,c,l,u,h){let f=new nA(s,o,a,c,l,u);return h&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return x(this,null,function*(){var t,r;yield function(s){return x(this,null,function*(){let o=Ie(s);ie(jc,"RemoteStore shutting down."),o.da.add(5),yield hp(o),o.Ra.shutdown(),o.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var op=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _a="FirestoreClient",sA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=I_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>x(this,null,function*(){ie(_a,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(ie(_a,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=MA(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function S1(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(_a,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>x(null,null,function*(){r.isEqual(i)||(yield mB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function c3(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield vne(n);ie(_a,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>r3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>r3(e.remoteStore,i)),n._onlineComponents=e})}function vne(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(_a,"Using user provided OfflineComponentProvider");try{yield S1(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Uu("Error using user provided cache. Falling back to memory cache: "+t),yield S1(n,new MB)}}else ie(_a,"Using default OfflineComponentProvider"),yield S1(n,new iA(void 0));return n._offlineComponents})}function PB(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(_a,"Using user provided OnlineComponentProvider"),yield c3(n,n._uninitializedComponentsProvider._online)):(ie(_a,"Using default OnlineComponentProvider"),yield c3(n,new _ne))),n._onlineComponents})}function wne(n){return PB(n).then(e=>e.syncEngine)}function K_(n){return x(this,null,function*(){let e=yield PB(n),t=e.eventManager;return t.onListen=sne.bind(null,e.syncEngine),t.onUnlisten=cne.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=one.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lne.bind(null,e.syncEngine),t})}function bne(n,e,t={}){let r=new Li;return n.asyncQueue.enqueueAndForget(()=>x(null,null,function*(){return function(s,o,a,c,l){let u=new op({next:f=>{u.xu(),o.enqueueAndForget(()=>kA(s,h));let p=f.docs.has(a);!p&&f.fromCache?l.reject(new se(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&c&&c.source==="server"?l.reject(new se(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new sp(av(a.path),u,{includeMetadataChanges:!0,Qa:!0});return PA(s,h)}(yield K_(n),n.asyncQueue,e,t,r)})),r.promise}function Cne(n,e,t={}){let r=new Li;return n.asyncQueue.enqueueAndForget(()=>x(null,null,function*(){return function(s,o,a,c,l){let u=new op({next:f=>{u.xu(),o.enqueueAndForget(()=>kA(s,h)),f.fromCache&&c.source==="server"?l.reject(new se(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new sp(a,u,{includeMetadataChanges:!0,Qa:!0});return PA(s,h)}(yield K_(n),n.asyncQueue,e,t,r)})),r.promise}function kB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var l3=new Map;function RB(n,e,t){if(!t)throw new se(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ene(n,e,t,r){if(e===!0&&r===!0)throw new se(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function u3(n){if(!ge.isDocumentKey(n))throw new se(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d3(n){if(ge.isDocumentKey(n))throw new se(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function qr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=fv(n);throw new se(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var FB="firestore.googleapis.com",h3=!0,Y_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FB,this.ssl=h3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:h3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nte)throw new se(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ene("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ku=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new M1;switch(r.type){case"firstParty":return new F1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return x(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=l3.get(t);r&&(ie("ComponentProvider","Removing Datastore"),l3.delete(t),r.terminate())}(this),Promise.resolve()}};function NB(n,e,t,r={}){var i;n=qr(n,Ku);let s=Fi(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(bu(`https://${c}`),Cu("Firestore",!0)),o.host!==FB&&o.host!==c&&Uu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ur(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=In.MOCK_USER;else{u=Uy(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new se(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new In(f)}n._authCredentials=new P1(new C_(u,h))}}var $c=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Yn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},pa=class n extends $c{constructor(e,t,r){super(e,t,av(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new ge(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function UB(n,e,...t){if(n=We(n),RB("collection","path",e),n instanceof Ku){let r=Nt.fromString(e,...t);return d3(r),new pa(n,null,r)}{if(!(n instanceof Yn||n instanceof pa))throw new se(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Nt.fromString(e,...t));return d3(r),new pa(n.firestore,null,r)}}function OB(n,e,...t){if(n=We(n),arguments.length===1&&(e=I_.newId()),RB("doc","path",e),n instanceof Ku){let r=Nt.fromString(e,...t);return u3(r),new Yn(n,null,new ge(r))}{if(!(n instanceof Yn||n instanceof pa))throw new se(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Nt.fromString(e,...t));return u3(r),new Yn(n.firestore,n instanceof pa?n.converter:null,new ge(r))}}var f3="AsyncQueue",J_=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new j_(this,"async_queue_retry"),this.rc=()=>{let r=A1();r&&ie(f3,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=A1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=A1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new Li;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return x(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Xu(e))throw e;ie(f3,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,po("INTERNAL UNHANDLED ERROR: ",p3(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=YT.createAndSchedule(this,e,t,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&me(47125,{cc:p3(this.Xu)})}verifyOperationInProgress(){}lc(){return x(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function p3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function g3(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Es=class extends Ku{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new J_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return x(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new J_(e),this._firestoreClient=void 0,yield e}})}};function LB(n,e){let t=typeof n=="object"?n:li(),r=typeof n=="string"?n:e||A_,i=xr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ny("firestore");s&&NB(i,...s)}return i}function pv(n){if(n._terminated)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ine(n),n._firestoreClient}function Ine(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,u){return new V1(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kB(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new sA(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var ap=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Jn.fromBase64String(e))}catch(t){throw new se(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ju=class{constructor(e){this._methodName=e}};var cp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}};var lp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Dne=/^__.*__$/,oA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bc(e,this.data,t,this.fieldTransforms)}},Q_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function VB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ic:n})}}var Z_=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ev(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(VB(this.Ic)&&Dne.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},aA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uv(e)}bc(e,t,r,i=!1){return new Z_({Ic:e,methodName:t,wc:r,path:Wr.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function UA(n){let e=n._freezeSettings(),t=uv(n._databaseId);return new aA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xne(n,e,t,r,i,s={}){let o=n.bc(s.merge||s.mergeFields?2:0,e,t,i);OA("Data must be an object, but it was:",o,r);let a=BB(r,o),c,l;if(s.merge)c=new hi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=lA(e,h,t);if(!o.contains(f))throw new se(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$B(u,f)||u.push(f)}c=new hi(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new oA(new zr(a),c,l)}var X_=class n extends Ju{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Tne(n,e,t){return new Z_({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var cA=class n extends Ju{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=Tne(this,e,!0),r=this.Sc.map(s=>td(s,t)),i=new ma(r);return new eT(e.path,i)}isEqual(e){return e instanceof n&&ur(this.Sc,e.Sc)}};function Ane(n,e,t,r){let i=n.bc(1,e,t);OA("Data must be an object, but it was:",i,r);let s=[],o=zr.empty();va(r,(c,l)=>{let u=LA(e,c,t);l=We(l);let h=i.mc(u);if(l instanceof X_)s.push(u);else{let f=td(l,h);f!=null&&(s.push(u),o.set(u,f))}});let a=new hi(s);return new Q_(o,a,i.fieldTransforms)}function Sne(n,e,t,r,i,s){let o=n.bc(1,e,t),a=[lA(e,r,t)],c=[i];if(s.length%2!=0)throw new se(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(lA(e,s[f])),c.push(s[f+1]);let l=[],u=zr.empty();for(let f=a.length-1;f>=0;--f)if(!$B(l,a[f])){let p=a[f],y=c[f];y=We(y);let w=o.mc(p);if(y instanceof X_)l.push(p);else{let b=td(y,w);b!=null&&(l.push(p),u.set(p,b))}}let h=new hi(l);return new Q_(u,h,o.fieldTransforms)}function Mne(n,e,t,r=!1){return td(t,n.bc(r?4:3,e))}function td(n,e){if(jB(n=We(n)))return OA("Unsupported field value:",e,n),BB(n,e);if(n instanceof Ju)return function(r,i){if(!VB(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=td(a,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ute(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=lt.fromDate(r);return{timestampValue:N_(i.serializer,s)}}if(r instanceof lt){let s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:N_(i.serializer,s)}}if(r instanceof cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ap)return{bytesValue:cB(i.serializer,r._byteString)};if(r instanceof Yn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:IA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lp)return function(o,a){return{mapValue:{fields:{[_A]:{stringValue:vA},[Lu]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return EA(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${fv(r)}`)}(n,e)}function BB(n,e){let t={};return F3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,(r,i)=>{let s=td(i,e.Ac(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function jB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof cp||n instanceof ap||n instanceof Yn||n instanceof Ju||n instanceof lp)}function OA(n,e,t){if(!jB(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=fv(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function lA(n,e,t){if((e=We(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return LA(n,e);throw ev("Field path arguments must be of type string or ",n,!1,void 0,t)}var Pne=new RegExp("[~\\*/\\[\\]]");function LA(n,e,t){if(e.search(Pne)>=0)throw ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yu(...e.split("."))._internalPath}catch{throw ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ev(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new se(z.INVALID_ARGUMENT,a+n+c)}function $B(n,e){return n.some(t=>t.isEqual(e))}var tv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new uA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},uA=class extends tv{data(){return super.data()}};function VA(n,e){return typeof e=="string"?LA(n,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}function HB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var up=class{},dA=class extends up{};function zB(n,e,...t){let r=[];e instanceof up&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof hA).length,a=s.filter(c=>c instanceof nv).length;if(o>1||o>0&&a>0)throw new se(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var nv=class n extends dA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return qB(e._query,t),new $c(e.firestore,e.converter,Z1(e._query,t))}_parse(e){let t=UA(e.firestore);return function(s,o,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new se(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){y3(h,u);let y=[];for(let w of h)y.push(m3(c,s,w));f={arrayValue:{values:y}}}else f=m3(c,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||y3(h,u),f=Mne(a,o,h,u==="in"||u==="not-in");return on.create(l,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function WB(n,e,t){let r=e,i=VA("where",n);return nv._create(i,r,t)}var hA=class n extends up{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Bi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)qB(o,c),o=Z1(o,c)}(e._query,t),new $c(e.firestore,e.converter,Z1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function m3(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new se(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K3(e)&&t.indexOf("/")!==-1)throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Nt.fromString(t));if(!ge.isDocumentKey(r))throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NV(n,new ge(r))}if(t instanceof Yn)return NV(n,t._key);throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fv(t)}.`)}function y3(n,e){if(!Array.isArray(n)||n.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qB(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var fA=class{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return va(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Lu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Tt(o.doubleValue));return new lp(s)}convertGeoPoint(e){return new cp(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ov(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zf(e));default:return null}}convertTimestamp(e){let t=go(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Nt.fromString(e);it(pB(r),9688,{name:e});let i=new S_(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(t)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function kne(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Nc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rv=class extends tv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Nu=class extends rv{data(e={}){return super.data(e)}},iv=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Nc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nu(this._firestore,this._userDataWriter,r.key,r,new Nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Rne(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Rne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}function GB(n){n=qr(n,Yn);let e=qr(n.firestore,Es);return bne(pv(e),n._key).then(t=>XB(e,n,t))}var dp=class extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ap(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}};function KB(n){n=qr(n,$c);let e=qr(n.firestore,Es),t=pv(e),r=new dp(e);return HB(n._query),Cne(t,n._query).then(i=>new iv(e,r,n,i))}function YB(n,e,t){n=qr(n,Yn);let r=qr(n.firestore,Es),i=kne(n.converter,e,t);return BA(r,[xne(UA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fo.none())])}function JB(n,e,t,...r){n=qr(n,Yn);let i=qr(n.firestore,Es),s=UA(i),o;return o=typeof(e=We(e))=="string"||e instanceof Yu?Sne(s,"updateDoc",n._key,e,t,r):Ane(s,"updateDoc",n._key,e),BA(i,[o.toMutation(n._key,fo.exists(!0))])}function QB(n){return BA(qr(n.firestore,Es),[new ep(n._key,fo.none())])}function ZB(n,...e){var t,r,i;n=We(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||g3(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(g3(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof Yn)l=qr(n.firestore,Es),u=av(n._key.path),c={next:h=>{e[o]&&e[o](XB(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=qr(n,$c);l=qr(h.firestore,Es),u=h._query;let f=new dp(l);c={next:p=>{e[o]&&e[o](new iv(l,f,h,p))},error:e[o+1],complete:e[o+2]},HB(n._query)}return function(f,p,y,w){let b=new op(w),A=new sp(p,b,y);return f.asyncQueue.enqueueAndForget(()=>x(null,null,function*(){return PA(yield K_(f),A)})),()=>{b.xu(),f.asyncQueue.enqueueAndForget(()=>x(null,null,function*(){return kA(yield K_(f),A)}))}}(pv(l),u,a,c)}function BA(n,e){return function(r,i){let s=new Li;return r.asyncQueue.enqueueAndForget(()=>x(null,null,function*(){return une(yield wne(r),i,s)})),s.promise}(pv(n),e)}function XB(n,e,t){let r=t.docs.get(e._key),i=new dp(n);return new rv(n,i,e._key,r,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}function ej(...n){return new cA("arrayUnion",n)}(function(e,t=!0){(function(i){Qu=i})(ps),mn(new Ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Es(new k1(r.getProvider("auth-internal")),new N1(o,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new se(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new S_(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ze(DV,xV,e),ze(DV,xV,"esm2017")})();var at=class{constructor(e){return e}},tj="firestore",jA=class{constructor(){return gs(tj)}};var $A=new ee("angularfire2.firestore-instances");function Fne(n,e){let t=so(tj,n,e);return t&&new at(t)}function Nne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new at(r)}}var Une={provide:jA,deps:[[new Wt,$A]]},One={provide:at,useFactory:Fne,deps:[[new Wt,$A],Hr]};function nj(n,...e){return ze("angularfire",Tr.full,"fst"),fn([One,Une,{provide:$A,useFactory:Nne(n),multi:!0,deps:[Le,vt,ui,Ui,[new Wt,Pc],[new Wt,ca],...e]}])}var It=qe(UB,!0,2);var rj=qe(QB,!0,2);var Fe=qe(OB,!0,2);var At=qe(GB,!0);var an=qe(KB,!0);var ij=qe(LB,!0);var sj=qe(ZB,!0);var fi=qe(zB,!0,2);var Gr=qe(YB,!0,2);var ji=qe(JB,!0,2);var gv=qe(WB,!0,2);var gj=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(X(Zo),X(Or))};static \u0275dir=Et({type:n})}return n})(),Iv=(()=>{class n extends gj{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275dir=Et({type:n,features:[br]})}return n})(),sd=new ee(""),Lne={provide:sd,useExisting:_r(()=>vo),multi:!0},vo=(()=>{class n extends Iv{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&K("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ar([Lne]),br]})}return n})(),Vne={provide:sd,useExisting:_r(()=>St),multi:!0};function Bne(){let n=oi()?oi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var jne=new ee(""),St=(()=>{class n extends gj{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Bne())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(X(Zo),X(Or),X(jne,8))};static \u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&K("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ar([Vne]),br]})}return n})();function $ne(n){return n==null||Hne(n)===0}function Hne(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Dv=new ee(""),qA=new ee("");function zne(n){return $ne(n.value)?{required:!0}:null}function oj(n){return null}function mj(n){return n!=null}function yj(n){return Xo(n)?_t(n):n}function _j(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function vj(n,e){return e.map(t=>t(n))}function Wne(n){return!n.validate}function wj(n){return n.map(e=>Wne(e)?e:t=>e.validate(t))}function qne(n){if(!n)return null;let e=n.filter(mj);return e.length==0?null:function(t){return _j(vj(t,e))}}function GA(n){return n!=null?qne(wj(n)):null}function Gne(n){if(!n)return null;let e=n.filter(mj);return e.length==0?null:function(t){let r=vj(t,e).map(yj);return xC(r).pipe(Ce(_j))}}function KA(n){return n!=null?Gne(wj(n)):null}function aj(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bj(n){return n._rawValidators}function Cj(n){return n._rawAsyncValidators}function HA(n){return n?Array.isArray(n)?n:[n]:[]}function yv(n,e){return Array.isArray(n)?n.includes(e):n===e}function cj(n,e){let t=HA(e);return HA(n).forEach(i=>{yv(t,i)||t.push(i)}),t}function lj(n,e){return HA(e).filter(t=>!yv(n,t))}var _v=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},id=class extends _v{name;get formDirective(){return null}get path(){return null}},zc=class extends _v{_parent=null;name=null;valueAccessor=null},vv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Kne={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sFe=ue(H({},Kne),{"[class.ng-submitted]":"isSubmitted"}),Mt=(()=>{class n extends vv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(zc,2))};static \u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Gt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[br]})}return n})(),gi=(()=>{class n extends vv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(id,10))};static \u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Gt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[br]})}return n})();var pp="VALID",mv="INVALID",nd="PENDING",gp="DISABLED",wa=class{},wv=class extends wa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},yp=class extends wa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},_p=class extends wa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},rd=class extends wa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},zA=class extends wa{source;constructor(e){super(),this.source=e}},WA=class extends wa{source;constructor(e){super(),this.source=e}};function Ej(n){return(xv(n)?n.validators:n)||null}function Yne(n){return Array.isArray(n)?GA(n):n||null}function Ij(n,e){return(xv(e)?e.asyncValidators:n)||null}function Jne(n){return Array.isArray(n)?KA(n):n||null}function xv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Qne(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[t])throw new ne(1001,"")}function Zne(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ne(1002,"")})}var bv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Si(this.statusReactive)}set status(e){Si(()=>this.statusReactive.set(e))}_status=eu(()=>this.statusReactive());statusReactive=Ks(void 0);get valid(){return this.status===pp}get invalid(){return this.status===mv}get pending(){return this.status==nd}get disabled(){return this.status===gp}get enabled(){return this.status!==gp}errors;get pristine(){return Si(this.pristineReactive)}set pristine(e){Si(()=>this.pristineReactive.set(e))}_pristine=eu(()=>this.pristineReactive());pristineReactive=Ks(!0);get dirty(){return!this.pristine}get touched(){return Si(this.touchedReactive)}set touched(e){Si(()=>this.touchedReactive.set(e))}_touched=eu(()=>this.touchedReactive());touchedReactive=Ks(!1);get untouched(){return!this.touched}_events=new Rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lj(e,this._rawAsyncValidators))}hasValidator(e){return yv(this._rawValidators,e)}hasAsyncValidator(e){return yv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _p(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new _p(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new yp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new yp(!0,r))}markAsPending(e={}){this.status=nd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gp,this.errors=null,this._forEachChild(i=>{i.disable(ue(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wv(this.value,r)),this._events.next(new rd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pp,this._forEachChild(r=>{r.enable(ue(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pp||this.status===nd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wv(this.value,t)),this._events.next(new rd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gp:pp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=nd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=yj(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new rd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new xt,this.statusChanges=new xt}_calculateStatus(){return this._allControlsDisabled()?gp:this.errors?mv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nd)?nd:this._anyControlsHaveStatus(mv)?mv:pp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new yp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new _p(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Yne(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Jne(this._rawAsyncValidators)}},Cv=class extends bv{constructor(e,t,r){super(Ej(t),Ij(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Zne(this,!0,e),Object.keys(e).forEach(r=>{Qne(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var vp=new ee("",{providedIn:"root",factory:()=>Tv}),Tv="always";function Xne(n,e){return[...e.path,n]}function YA(n,e,t=Tv){Dj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),nre(n,e),ire(n,e),rre(n,e),ere(n,e)}function uj(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tre(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ev(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ere(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Dj(n,e){let t=bj(n);e.validator!==null?n.setValidators(aj(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Cj(n);e.asyncValidator!==null?n.setAsyncValidators(aj(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ev(e._rawValidators,i),Ev(e._rawAsyncValidators,i)}function tre(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=bj(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Cj(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Ev(e._rawValidators,r),Ev(e._rawAsyncValidators,r),t}function nre(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&xj(n,e)})}function rre(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&xj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function xj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ire(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function sre(n,e){n==null,Dj(n,e)}function Tj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ore(n){return Object.getPrototypeOf(n.constructor)===Iv}function are(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Aj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===St?t=s:ore(s)?r=s:i=s}),i||r||t||null}var cre={provide:id,useExisting:_r(()=>Kr)},mp=Promise.resolve(),Kr=(()=>{class n extends id{callSetDisabledState;get submitted(){return Si(this.submittedReactive)}_submitted=eu(()=>this.submittedReactive());submittedReactive=Ks(!1);_directives=new Set;form;ngSubmit=new xt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Cv({},GA(t),KA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){mp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),YA(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){mp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){mp.then(()=>{let r=this._findContainer(t.path),i=new Cv({});sre(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){mp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){mp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),are(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new zA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new WA(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(X(Dv,10),X(qA,10),X(vp,8))};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&K("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ar([cre]),br]})}return n})();function dj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hj(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var JA=class extends bv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Ej(t),Ij(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(hj(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lre={provide:zc,useExisting:_r(()=>Ut)},fj=Promise.resolve(),Ut=(()=>{class n extends zc{_changeDetectorRef;callSetDisabledState;control=new JA;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new xt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Aj(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Tj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){fj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&V0(r);fj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Xne(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(X(id,9),X(Dv,10),X(qA,10),X(sd,10),X(gc,8),X(vp,8))};static \u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ar([lre]),br,is]})}return n})();var mi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Sj=new ee(""),ure={provide:zc,useExisting:_r(()=>QA)},QA=(()=>{class n extends zc{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new xt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=Aj(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&uj(r,this,!1),YA(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Tj(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&uj(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(X(Dv,10),X(qA,10),X(sd,10),X(Sj,8),X(vp,8))};static \u0275dir=Et({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[ar([ure]),br,is]})}return n})();var dre={provide:sd,useExisting:_r(()=>od),multi:!0};function Mj(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function hre(n){return n.split(":")[0]}var od=(()=>{class n extends Iv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Mj(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=hre(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&K("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ar([dre]),br]})}return n})(),Av=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Mj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(X(Or),X(Zo),X(od,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),fre={provide:sd,useExisting:_r(()=>Pj),multi:!0};function pj(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function pre(n){return n.split(":")[0]}var Pj=(()=>{class n extends Iv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=pre(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&K("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ar([fre]),br]})}return n})(),Sv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(pj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(pj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(X(Or),X(Zo),X(Pj,9))};static \u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var gre=(()=>{class n{_validator=oj;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):oj,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Et({type:n,features:[is]})}return n})();var mre={provide:Dv,useExisting:_r(()=>dr),multi:!0};var dr=(()=>{class n extends gre{required;inputName="required";normalizeInput=V0;createValidator=t=>zne;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ss(n)))(i||n)}})();static \u0275dir=Et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&kh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ar([mre]),br]})}return n})();var kj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=wr({type:n});static \u0275inj=ir({})}return n})();var Jt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vp,useValue:t.callSetDisabledState??Tv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wr({type:n});static \u0275inj=ir({imports:[kj]})}return n})(),Rj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sj,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:vp,useValue:t.callSetDisabledState??Tv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wr({type:n});static \u0275inj=ir({imports:[kj]})}return n})();function yre(n,e){n&1&&(m(0,"span"),C(1,"Login"),_())}function _re(n,e){n&1&&(m(0,"span",14),re(1,"div",15),m(2,"span"),C(3,"Logging in..."),_()())}function vre(n,e){if(n&1&&(m(0,"div",16),C(1),_()),n&2){let t=O();E(),le(" ",t.errorMessage," ")}}var Mv=class n{constructor(e,t,r){this.auth=e;this.firestore=t;this.router=r}email="";password="";errorMessage=null;loading=!1;login(){return x(this,null,function*(){this.loading=!0;let e="",t=null,r="",i=!1,s="",o="",a=null;this.errorMessage=null;try{let c=yield wV(this.auth,this.email,this.password);console.log("Firebase Auth User:",c.user);let l=c.user.uid;o=this.email;let u=yield an(It(this.firestore,"organizations"));for(let h of u.docs){let f=Fe(this.firestore,`organizations/${h.id}/root/${l}`),p=yield At(f);if(p.exists()&&p.data()?.role==="root"){e="root",t=p.data()?.customization||{},r=h.id,i=!0,a="Root Admin";break}}if(!i){let h=this.email.split("@"),f=h[0],p=h[1],y="";if(["gmail.com","outlook.com","yahoo.com","hotmail.com","aol.com","protonmail.com"].includes(p)){let b=f.split(".");b.length>=2?y=b[b.length-1]:y=""}else y=p;if(y)for(let b of u.docs){if(i)break;r=b.id;let U=(b.data()?.domains||{})[y];if(U){s=U;let V=Fe(this.firestore,`organizations/${r}/domain/${U}/admins/${l}`),B=yield At(V);if(B.exists()&&B.data()?.role==="admin"){e="admin",t=B.data()?.customization||{},i=!0,a=y;break}if(!i){let $=Fe(this.firestore,`organizations/${r}/domain/${U}/users/${l}`),S=yield At($);if(S.exists()&&S.data()?.role==="user"){e="user",t=S.data()?.customization||{},i=!0,a=y;break}}}}}if(!i)throw new Error("User profile not found or not authorized for any organization/domain.");localStorage.setItem("userRole",e),localStorage.setItem("customization",JSON.stringify(t)),localStorage.setItem("orgId",r),localStorage.setItem("uid",l),localStorage.setItem("domainUid",s),localStorage.setItem("useremail",o||""),a?localStorage.setItem("userDepartment",a):localStorage.removeItem("userDepartment"),this.router.navigate(["/dashboard"])}catch(c){console.error("Login failed:",c),c.code==="auth/user-not-found"||c.code==="auth/wrong-password"||c.code==="auth/invalid-credential"?this.errorMessage="Invalid email or password.":c.message?this.errorMessage=c.message:this.errorMessage="Login failed. Please try again."}finally{this.loading=!1}})}goToSignup(){this.router.navigate(["/root-signup"])}static \u0275fac=function(t){return new(t||n)(X(yn),X(at),X(ci))};static \u0275cmp=Ve({type:n,selectors:[["app-login"]],decls:20,vars:6,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","bg-gray-50","p-6","text-gray-800","font-poppins"],[1,"pt-4","pb-8","px-8","rounded-lg","shadow-xl","w-full","max-w-md","border-2","border-gray-300","space-y-5","animate-slide-in-fade",3,"ngSubmit"],[1,"text-3xl","font-bold","text-center","text-custom-gradient","py-4"],[1,"space-y-5"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","email","id","email","placeholder","Enter your email","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","password","id","password","type","password","placeholder","Enter your password","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-6","text-white","font-semibold","rounded-md","bg-custom-gradient","border-2","border-gray-300","hover:bg-custom-gradient","active:bg-custom-gradient","transition","duration-100","ease-in-out","transform","hover:-translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","space-x-2",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","text-red-800 text-sm text-center p-3 bg-red-100 border border-red-300 rounded-md",4,"ngIf"],["type","button",1,"mt-4","w-full","text-gray-300","py-3","rounded-md","font-medium","transition","duration-200","ease-in-out","transform","hover:scale-105","flex","items-center","justify-center","space-x-2",3,"click"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],[1,"loader-spinner"],[1,"text-red-800","text-sm","text-center","p-3","bg-red-100","border","border-red-300","rounded-md"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"form",1),K("ngSubmit",function(){return r.login()}),m(2,"h2",2),C(3,"Login"),_(),m(4,"div",3)(5,"div")(6,"label",4),C(7,"Email"),_(),m(8,"input",5),he("ngModelChange",function(s){return pe(r.email,s)||(r.email=s),s}),_()(),m(9,"div")(10,"label",6),C(11,"Password"),_(),m(12,"input",7),he("ngModelChange",function(s){return pe(r.password,s)||(r.password=s),s}),_()()(),m(13,"button",8),G(14,yre,2,0,"span",9)(15,_re,4,0,"span",10),_(),G(16,vre,2,1,"div",11),m(17,"button",12),K("click",function(){return r.goToSignup()}),m(18,"span",13),C(19,"Create New Organization"),_()()()()),t&2&&(E(8),de("ngModel",r.email),E(4),de("ngModel",r.password),E(),F("disabled",r.loading),E(),F("ngIf",!r.loading),E(),F("ngIf",r.loading),E(),F("ngIf",r.errorMessage))},dependencies:[Jt,mi,St,Mt,gi,dr,Ut,Kr,Ye,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-top:2px solid #2563eb;border-radius:50%;width:20px;height:20px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}}.animate-pulse-dot[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-dot 1s infinite}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};var Un=[];for(let n=0;n<256;++n)Un.push((n+256).toString(16).slice(1));function Fj(n,e=0){return(Un[n[e+0]]+Un[n[e+1]]+Un[n[e+2]]+Un[n[e+3]]+"-"+Un[n[e+4]]+Un[n[e+5]]+"-"+Un[n[e+6]]+Un[n[e+7]]+"-"+Un[n[e+8]]+Un[n[e+9]]+"-"+Un[n[e+10]]+Un[n[e+11]]+Un[n[e+12]]+Un[n[e+13]]+Un[n[e+14]]+Un[n[e+15]]).toLowerCase()}var ZA,wre=new Uint8Array(16);function XA(){if(!ZA){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ZA=crypto.getRandomValues.bind(crypto)}return ZA(wre)}var bre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eS={randomUUID:bre};function Cre(n,e,t){if(eS.randomUUID&&!e&&!n)return eS.randomUUID();n=n||{};let r=n.random??n.rng?.()??XA();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return Fj(r)}var wp=Cre;function Ere(n,e){n&1&&(m(0,"span"),C(1,"Create Organization & Root User"),_())}function Ire(n,e){n&1&&(m(0,"span",22),re(1,"div",23),m(2,"span"),C(3,"Creating..."),_()())}function Dre(n,e){if(n&1&&(m(0,"div",24),C(1),_()),n&2){let t=O();E(),le(" ",t.errorMessage," ")}}function xre(n,e){if(n&1&&(m(0,"div",25),C(1),_()),n&2){let t=O();E(),le(" ",t.successMessage," ")}}var Pv=class n{constructor(e,t,r){this.firestore=e;this.router=t;this.auth=r}orgName="";rootName="";email="";password="";customization={userAnalytics:!1,orgAnalytics:!1,auditLog:!1};loading=!1;errorMessage=null;successMessage=null;addRootUser(){return x(this,null,function*(){this.loading=!0,this.errorMessage=null,this.successMessage=null;try{let e=wp(),r=(yield fa(this.auth,this.email,this.password)).user.uid,i=Fe(this.firestore,`organizations/${e}`);yield Gr(i,{orgId:e,name:this.orgName,createdAt:new Date,createdBy:r,active:!0});let s=Fe(this.firestore,`organizations/${e}/root/${r}`);yield Gr(s,{uid:r,orgId:e,name:this.rootName,email:this.email,role:"root",createdAt:new Date,isActive:!0,customization:this.customization}),this.successMessage="Organization and root user created successfully!",setTimeout(()=>{this.router.navigate([""])},2e3)}catch(e){console.error("Error creating organization/root user:",e),e.code==="auth/email-already-in-use"?this.errorMessage="The email address is already in use by another account.":e.code==="auth/weak-password"?this.errorMessage="Password is too weak. Please choose a stronger password.":e.message?this.errorMessage=e.message:this.errorMessage="Failed to create organization/root user. Please try again."}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(X(at),X(ci),X(yn))};static \u0275cmp=Ve({type:n,selectors:[["app-add-root-user"]],decls:39,vars:12,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","p-6","text-gray-800","font-poppins"],[1,"bg-white","p-8","rounded-lg","shadow-xl","w-full","max-w-md","border-2","border-gray-300","space-y-8","animate-slide-in-fade",3,"ngSubmit"],[1,"text-3xl","font-bold","text-center","text-custom-gradient"],[1,"space-y-5"],["for","orgName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","orgName","id","orgName","placeholder","Enter organization name","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","rootName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","rootName","id","rootName","placeholder","Enter root user name","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","email","id","email","placeholder","Enter user email","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","password","id","password","type","password","placeholder","Enter password","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"flex","flex-col","space-y-3","text-gray-700"],[1,"flex","items-center","space-x-2","cursor-pointer"],["type","checkbox","name","userAnalytics",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","checkbox","name","orgAnalytics",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","checkbox","name","auditLog",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-6","text-white","font-semibold","rounded-md","bg-custom-gradient","border-2","border-gray-300","hover:bg-custom-gradient","active:bg-custom-gradient","transition","duration-1000","ease-in-out","transform","hover:-translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","space-x-2",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","text-red-800 text-sm text-center p-3 bg-red-100 border border-red-300 rounded-md",4,"ngIf"],["class","text-green-800 text-sm text-center p-3 bg-green-100 border border-green-300 rounded-md",4,"ngIf"],[1,"flex","items-center","space-x-2"],[1,"loader-spinner"],[1,"text-red-800","text-sm","text-center","p-3","bg-red-100","border","border-red-300","rounded-md"],[1,"text-green-800","text-sm","text-center","p-3","bg-green-100","border","border-green-300","rounded-md"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"form",1),K("ngSubmit",function(){return r.addRootUser()}),m(2,"h2",2),C(3,"Create Organization & Root User"),_(),m(4,"div",3)(5,"div")(6,"label",4),C(7,"Organization Name"),_(),m(8,"input",5),he("ngModelChange",function(s){return pe(r.orgName,s)||(r.orgName=s),s}),_()(),m(9,"div")(10,"label",6),C(11,"Root User Name"),_(),m(12,"input",7),he("ngModelChange",function(s){return pe(r.rootName,s)||(r.rootName=s),s}),_()(),m(13,"div")(14,"label",8),C(15,"User Email"),_(),m(16,"input",9),he("ngModelChange",function(s){return pe(r.email,s)||(r.email=s),s}),_()(),m(17,"div")(18,"label",10),C(19,"Password"),_(),m(20,"input",11),he("ngModelChange",function(s){return pe(r.password,s)||(r.password=s),s}),_()()(),m(21,"div",12)(22,"label",13)(23,"input",14),he("ngModelChange",function(s){return pe(r.customization.userAnalytics,s)||(r.customization.userAnalytics=s),s}),_(),m(24,"span"),C(25,"Enable User Analytics"),_()(),m(26,"label",13)(27,"input",15),he("ngModelChange",function(s){return pe(r.customization.orgAnalytics,s)||(r.customization.orgAnalytics=s),s}),_(),m(28,"span"),C(29,"Enable Org Analytics"),_()(),m(30,"label",13)(31,"input",16),he("ngModelChange",function(s){return pe(r.customization.auditLog,s)||(r.customization.auditLog=s),s}),_(),m(32,"span"),C(33,"Enable Audit Log"),_()()(),m(34,"button",17),G(35,Ere,2,0,"span",18)(36,Ire,4,0,"span",19),_(),G(37,Dre,2,1,"div",20)(38,xre,2,1,"div",21),_()()),t&2&&(E(8),de("ngModel",r.orgName),E(4),de("ngModel",r.rootName),E(4),de("ngModel",r.email),E(4),de("ngModel",r.password),E(3),de("ngModel",r.customization.userAnalytics),E(4),de("ngModel",r.customization.orgAnalytics),E(4),de("ngModel",r.customization.auditLog),E(3),F("disabled",r.loading),E(),F("ngIf",!r.loading),E(),F("ngIf",r.loading),E(),F("ngIf",r.errorMessage),E(),F("ngIf",r.successMessage))},dependencies:[Jt,mi,St,vo,Mt,gi,dr,Ut,Kr,Ye,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-top:2px solid #2563eb;border-radius:50%;width:20px;height:20px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}}.animate-pulse-dot[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-dot 1s infinite}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function On(n,e,t,r,i){try{let s=new Date;console.log("entered audit fn");let o=s.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),a=`log_${Date.now()}`,c={actorUid:e,action:t,resource:r,status:i,timestampIST:o},l=localStorage.getItem("orgId");console.log(c);let u=It(n,`organizations/${l}/auditlogs`),h=Fe(u,a);Gr(h,c).then(()=>{console.log(`[Audit Log] Action "${t}" by "${e}" on "${r}" logged as "${i}" with ID: ${a}.`)}).catch(f=>{console.error(`[Audit Log Error] Failed to log action "${t}" for "${e}" with ID ${a}:`,f)})}catch(s){console.error(`[Audit Log Error] Synchronous error preparing log for "${t}" for "${e}":`,s)}}var Tre=(n,e)=>({"bg-green-100 border-green-300 text-green-800":n,"bg-red-100 border-red-300 text-red-800":e});function Are(n,e){if(n&1){let t=ae();m(0,"div",22)(1,"span",23),C(2),_(),m(3,"button",24),K("click",function(){Y(t);let i=O();return i.message="",J(i.isSuccessMessage=!1)}),Me(),m(4,"svg",25)(5,"title"),C(6,"Close"),_(),re(7,"path",26),_()()()}if(n&2){let t=O();F("ngClass",zn(2,Tre,t.isSuccessMessage,!t.isSuccessMessage)),E(2),Q(t.message)}}function Sre(n,e){n&1&&(m(0,"div",27),C(1," No domains found for this organization. "),_())}function Mre(n,e){if(n&1){let t=ae();m(0,"div",28)(1,"input",29,0),K("change",function(){let i=Y(t).$implicit,s=os(2),o=O();return J(o.onDomainSelectionChange(i.uid,s.checked))}),_(),m(3,"span",30),C(4),_()()}if(n&2){let t=e.$implicit;E(),F("checked",t.selected),E(3),Q(t.name)}}function Pre(n,e){n&1&&(m(0,"span"),C(1,"Create Admin"),_())}function kre(n,e){n&1&&(m(0,"span",31),re(1,"div",32),m(2,"span"),C(3,"Creating..."),_()())}var kv=class n{constructor(e,t){this.firestore=e;this.auth=t}orgId;name="";email="";password="";userAnalytics=!1;orgAnalytics=!1;auditLog=!1;message="";isSuccessMessage=!1;loading=!1;domains=[];selectedDomainUids=[];ngOnInit(){this.fetchDomains()}fetchDomains(){return x(this,null,function*(){if(!this.orgId){console.warn("orgId is not provided for fetching domains."),this.showTemporaryMessage("Organization ID is missing. Cannot fetch domains.",!1);return}try{let e=Fe(this.firestore,`organizations/${this.orgId}`),t=yield At(e);if(t.exists()){let i=t.data()?.domains||{};this.domains=Object.entries(i).map(([s,o])=>({name:s,uid:o,selected:!1}))}else this.showTemporaryMessage("Organization not found to fetch domains.",!1),this.domains=[]}catch(e){console.error("Error fetching domains:",e),this.showTemporaryMessage(`Failed to fetch domains: ${e.message}`,!1)}})}onDomainSelectionChange(e,t){t?this.selectedDomainUids.includes(e)||this.selectedDomainUids.push(e):this.selectedDomainUids=this.selectedDomainUids.filter(r=>r!==e),console.log("Selected Domain UIDs:",this.selectedDomainUids)}createAdmin(){return x(this,null,function*(){if(!this.orgId){this.showTemporaryMessage("Organization ID is missing. Cannot create admin.",!1);return}if(this.selectedDomainUids.length===0){this.showTemporaryMessage("Please select at least one domain for the admin.",!1);return}this.loading=!0,this.message="",this.isSuccessMessage=!1;try{let t=(yield fa(this.auth,this.email,this.password)).user.uid;for(let i of this.selectedDomainUids){let s=Fe(this.firestore,`organizations/${this.orgId}/domain/${i}/admins/${t}`);yield Gr(s,{uid:t,orgId:this.orgId,name:this.name,email:this.email,role:"admin",createdAt:new Date,isActive:!0,customization:{userAnalytics:this.userAnalytics,orgAnalytics:this.orgAnalytics,auditLog:this.auditLog},associatedDomains:this.selectedDomainUids});let o=Fe(this.firestore,`organizations/${this.orgId}/domain/${i}`);yield ji(o,{adminUids:ej(t)}).catch(a=>{console.error(`Error updating domain ${i} with admin UID:`,a)})}let r=localStorage.getItem("uid");On(this.firestore,r||"unknown","admin_creation",t,"success"),this.showTemporaryMessage("Admin created successfully!",!0),this.name="",this.email="",this.password="",this.userAnalytics=!1,this.orgAnalytics=!1,this.auditLog=!1,this.selectedDomainUids=[],this.domains.forEach(i=>i.selected=!1)}catch(e){console.error("Error creating admin:",e);let t="Failed to create admin. Please try again.";e.code==="auth/email-already-in-use"?t="The email address is already in use by another account.":e.code==="auth/weak-password"?t="Password is too weak. Please choose a stronger password.":e.message&&(t=e.message),this.showTemporaryMessage(t,!1)}finally{this.loading=!1}})}showTemporaryMessage(e,t){this.message=e,this.isSuccessMessage=t,setTimeout(()=>{this.message="",this.isSuccessMessage=!1},5e3)}static \u0275fac=function(t){return new(t||n)(X(at),X(yn))};static \u0275cmp=Ve({type:n,selectors:[["app-create-admin"]],inputs:{orgId:"orgId"},decls:33,vars:11,consts:[["domainCheckbox",""],[1,"min-h-screen","flex","flex-col","items-center","justify-center","bg-gray-50","p-6","text-gray-800","font-poppins","bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","border-2","border-gray-300","space-y-8","animate-slide-in-fade",3,"ngSubmit"],[1,"text-3xl","font-bold","text-center","text-custom-gradient","mb-6"],["class","p-3 rounded-md relative mb-4 flex items-center justify-between w-full","role","alert",3,"ngClass",4,"ngIf"],[1,"w-full"],["for","adminName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","name","id","adminName","placeholder","Enter admin name","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","email","id","email","placeholder","Enter admin email","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","password","id","password","type","password","placeholder","Enter password","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"space-y-3","text-gray-700","w-full"],[1,"flex","items-center","space-x-2","cursor-pointer"],["type","checkbox","name","userAnalytics",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","checkbox","name","auditLog",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"space-y-3","w-full"],[1,"block","text-gray-700","font-medium","mb-1"],["class","text-sm text-gray-500 p-2 border border-gray-200 rounded-md bg-gray-50",4,"ngIf"],["class","flex items-center space-x-2 p-2 bg-gray-50 rounded-md border border-gray-200",4,"ngFor","ngForOf"],["type","submit",1,"w-full","py-3","px-6","text-white","font-semibold","rounded-md","bg-custom-gradient","border-2","border-gray-300","hover:bg-custom-gradient","active:bg-custom-gradient","transition","duration-1000","ease-in-out","transform","hover:-translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","space-x-2",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["role","alert",1,"p-3","rounded-md","relative","mb-4","flex","items-center","justify-between","w-full",3,"ngClass"],[1,"block","sm:inline"],["type","button",1,"ml-4","text-gray-500","hover:text-gray-700","focus:outline-none",3,"click"],["role","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-5","w-5"],["d","M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 2.65a1.2 1.2 0 1 1-1.697-1.697L8.303 10l-2.651-2.651a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-2.651a1.2 1.2 0 1 1 1.697 1.697L11.697 10l2.651 2.651a1.2 1.2 0 0 1 0 1.697z"],[1,"text-sm","text-gray-500","p-2","border","border-gray-200","rounded-md","bg-gray-50"],[1,"flex","items-center","space-x-2","p-2","bg-gray-50","rounded-md","border","border-gray-200"],["type","checkbox",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"change","checked"],[1,"text-gray-700"],[1,"flex","items-center","space-x-2"],[1,"loader-spinner"]],template:function(t,r){t&1&&(m(0,"form",1),K("ngSubmit",function(){return r.createAdmin()}),m(1,"h3",2),C(2," Create Admin "),_(),G(3,Are,8,5,"div",3),m(4,"div",4)(5,"label",5),C(6,"Admin Name"),_(),m(7,"input",6),he("ngModelChange",function(s){return pe(r.name,s)||(r.name=s),s}),_()(),m(8,"div",4)(9,"label",7),C(10,"Email"),_(),m(11,"input",8),he("ngModelChange",function(s){return pe(r.email,s)||(r.email=s),s}),_()(),m(12,"div",4)(13,"label",9),C(14,"Password"),_(),m(15,"input",10),he("ngModelChange",function(s){return pe(r.password,s)||(r.password=s),s}),_()(),m(16,"div",11)(17,"label",12)(18,"input",13),he("ngModelChange",function(s){return pe(r.userAnalytics,s)||(r.userAnalytics=s),s}),_(),m(19,"span"),C(20,"Enable User Analytics"),_()(),m(21,"label",12)(22,"input",14),he("ngModelChange",function(s){return pe(r.auditLog,s)||(r.auditLog=s),s}),_(),m(23,"span"),C(24,"Enable Audit Log"),_()()(),m(25,"div",15)(26,"label",16),C(27,"Assign to Domains:"),_(),G(28,Sre,2,0,"div",17)(29,Mre,5,2,"div",18),_(),m(30,"button",19),G(31,Pre,2,0,"span",20)(32,kre,4,0,"span",21),_()()),t&2&&(E(3),F("ngIf",r.message),E(4),de("ngModel",r.name),E(4),de("ngModel",r.email),E(4),de("ngModel",r.password),E(3),de("ngModel",r.userAnalytics),E(4),de("ngModel",r.auditLog),E(6),F("ngIf",r.domains.length===0),E(),F("ngForOf",r.domains),E(),F("disabled",r.loading),E(),F("ngIf",!r.loading),E(),F("ngIf",r.loading))},dependencies:[Jt,mi,St,vo,Mt,gi,dr,Ut,Kr,Ye,Br,Kt,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-top:2px solid #2563eb;border-radius:50%;width:20px;height:20px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};var Rre=(n,e)=>({"bg-green-100 border-green-300 text-green-800":n,"bg-red-100 border-red-300 text-red-800":e});function Fre(n,e){if(n&1){let t=ae();m(0,"div",17)(1,"span",18),C(2),_(),m(3,"button",19),K("click",function(){Y(t);let i=O();return i.message="",J(i.isSuccessMessage=!1)}),Me(),m(4,"svg",20)(5,"title"),C(6,"Close"),_(),re(7,"path",21),_()()()}if(n&2){let t=O();F("ngClass",zn(2,Rre,t.isSuccessMessage,!t.isSuccessMessage)),E(2),Q(t.message)}}function Nre(n,e){n&1&&(m(0,"span"),C(1,"Create Domain"),_())}function Ure(n,e){n&1&&(m(0,"span",22),re(1,"div",23),m(2,"span"),C(3,"Creating..."),_()())}var Rv=class n{constructor(e,t){this.firestore=e;this.auth=t}orgId;name="";email="";password="";userAnalytics=!1;orgAnalytics=!1;auditLog=!1;message="";isSuccessMessage=!1;loading=!1;createDomain(){return x(this,null,function*(){if(!this.orgId){this.showTemporaryMessage("Organization ID is missing. Cannot create domain.",!1);return}this.loading=!0,this.message="",this.isSuccessMessage=!1;try{let t=(yield fa(this.auth,this.email,this.password)).user.uid,r=Fe(this.firestore,`organizations/${this.orgId}/domain/${t}`);yield Gr(r,{uid:t,orgId:this.orgId,name:this.name,email:this.email,role:"domain_root",createdAt:new Date,isActive:!0,customization:{userAnalytics:this.userAnalytics,orgAnalytics:this.orgAnalytics,auditLog:this.auditLog}});let i=localStorage.getItem("orgId"),s=Fe(this.firestore,`organizations/${i}`);yield ji(s,{[`domains.${this.name}`]:t});let o=localStorage.getItem("uid");On(this.firestore,o||"unknown","domain_creation",t,"success"),this.showTemporaryMessage("Domain created successfully!",!0),this.name="",this.email="",this.password="",this.userAnalytics=!1,this.orgAnalytics=!1,this.auditLog=!1}catch(e){console.error("Error creating domain:",e);let t="Failed to create domain. Please try again.";e.code==="auth/email-already-in-use"?t="The email address is already in use by another account.":e.code==="auth/weak-password"?t="Password is too weak. Please choose a stronger password.":e.message&&(t=e.message),this.showTemporaryMessage(t,!1)}finally{this.loading=!1}})}showTemporaryMessage(e,t){this.message=e,this.isSuccessMessage=t,setTimeout(()=>{this.message="",this.isSuccessMessage=!1},5e3)}static \u0275fac=function(t){return new(t||n)(X(at),X(yn))};static \u0275cmp=Ve({type:n,selectors:[["app-create-domain"]],inputs:{orgId:"orgId"},decls:28,vars:9,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","bg-gray-50","p-6","text-gray-800","font-poppins","bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","border-2","border-gray-300","space-y-8","animate-slide-in-fade",3,"ngSubmit"],[1,"text-3xl","font-bold","text-center","text-custom-gradient","mb-6"],["class","p-3 rounded-md relative mb-4 flex items-center justify-between w-full","role","alert",3,"ngClass",4,"ngIf"],[1,"w-full"],["for","domainName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","name","id","domainName","placeholder","Enter domain name","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","email","id","email","placeholder","Enter email for domain admin","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","password","id","password","type","password","placeholder","Enter password for domain admin","required","",1,"w-full","p-3","bg-gray-100","border-2","border-gray-300","rounded-lg","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"space-y-3","text-gray-700","w-full"],[1,"flex","items-center","space-x-2","cursor-pointer"],["type","checkbox","name","userAnalytics",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","checkbox","name","auditLog",1,"form-checkbox","h-4","w-4","text-blue-600","rounded","border-gray-300","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-6","text-white","font-semibold","rounded-md","bg-custom-gradient","border-2","border-gray-300","hover:bg-custom-gradient","active:bg-custom-gradient","transition","duration-1000","ease-in-out","transform","hover:-translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","space-x-2",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["role","alert",1,"p-3","rounded-md","relative","mb-4","flex","items-center","justify-between","w-full",3,"ngClass"],[1,"block","sm:inline"],["type","button",1,"ml-4","text-gray-500","hover:text-gray-700","focus:outline-none",3,"click"],["role","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-5","w-5"],["d","M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 2.65a1.2 1.2 0 1 1-1.697-1.697L8.303 10l-2.651-2.651a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-2.651a1.2 1.2 0 1 1 1.697 1.697L11.697 10l2.651 2.651a1.2 1.2 0 0 1 0 1.697z"],[1,"flex","items-center","space-x-2"],[1,"loader-spinner"]],template:function(t,r){t&1&&(m(0,"form",0),K("ngSubmit",function(){return r.createDomain()}),m(1,"h3",1),C(2," Create Domain "),_(),G(3,Fre,8,5,"div",2),m(4,"div",3)(5,"label",4),C(6,"Domain Name"),_(),m(7,"input",5),he("ngModelChange",function(s){return pe(r.name,s)||(r.name=s),s}),_()(),m(8,"div",3)(9,"label",6),C(10,"Email"),_(),m(11,"input",7),he("ngModelChange",function(s){return pe(r.email,s)||(r.email=s),s}),_()(),m(12,"div",3)(13,"label",8),C(14,"Password"),_(),m(15,"input",9),he("ngModelChange",function(s){return pe(r.password,s)||(r.password=s),s}),_()(),m(16,"div",10)(17,"label",11)(18,"input",12),he("ngModelChange",function(s){return pe(r.userAnalytics,s)||(r.userAnalytics=s),s}),_(),m(19,"span"),C(20,"Enable User Analytics"),_()(),m(21,"label",11)(22,"input",13),he("ngModelChange",function(s){return pe(r.auditLog,s)||(r.auditLog=s),s}),_(),m(23,"span"),C(24,"Enable Audit Log"),_()()(),m(25,"button",14),G(26,Nre,2,0,"span",15)(27,Ure,4,0,"span",16),_()()),t&2&&(E(3),F("ngIf",r.message),E(4),de("ngModel",r.name),E(4),de("ngModel",r.email),E(4),de("ngModel",r.password),E(3),de("ngModel",r.userAnalytics),E(4),de("ngModel",r.auditLog),E(3),F("disabled",r.loading),E(),F("ngIf",!r.loading),E(),F("ngIf",r.loading))},dependencies:[Jt,mi,St,vo,Mt,gi,dr,Ut,Kr,Ye,Br,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-top:2px solid #2563eb;border-radius:50%;width:20px;height:20px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};var Ore=(n,e)=>({"bg-blue-600 hover:bg-blue-700":n,"bg-gray-400 cursor-not-allowed":e}),Lre=(n,e)=>({"message-success":n,"message-error":e}),Vre=(n,e,t)=>({"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-opacity-50":n,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 border border-opacity-50":e,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 border border-opacity-50":t});function Bre(n,e){if(n&1){let t=ae();m(0,"div",44)(1,"span",45),C(2),_(),m(3,"button",46),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",47),re(5,"circle",48)(6,"path",49)(7,"path",50),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function jre(n,e){if(n&1){let t=ae();m(0,"div",51)(1,"span",45),C(2),_(),m(3,"button",52),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",47),re(5,"circle",48)(6,"path",49)(7,"path",50),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function $re(n,e){if(n&1&&(ri(0),m(1,"div",53),re(2,"div",54),_(),ii()),n&2){let t=O();E(2),Ql("width",t.cloudinaryUploadProgress,"%")}}function Hre(n,e){if(n&1&&(m(0,"div",55),C(1),_()),n&2){let t=O();F("ngClass",zn(2,Lre,t.cloudinaryMessage&&!t.cloudinaryError,t.cloudinaryError)),E(),le(" ",t.cloudinaryMessage||t.cloudinaryError," ")}}function zre(n,e){if(n&1){let t=ae();m(0,"li",58)(1,"span",59),C(2),m(3,"a",60),C(4),_()(),m(5,"button",61),K("click",function(){let i=Y(t).index,s=O(2);return J(s.removeAsset(i))}),C(6," Remove "),_()()}if(n&2){let t=e.$implicit;E(2),le("",t.key,": "),E(),F("href",t.url,dc),E(),Q(t.url)}}function Wre(n,e){if(n&1&&(m(0,"ul",56),G(1,zre,7,3,"li",57),_()),n&2){let t=O();E(),F("ngForOf",t.projectAssets)}}function qre(n,e){n&1&&(m(0,"p",62),C(1," No assets added yet. "),_())}function Gre(n,e){if(n&1){let t=ae();m(0,"tr",63)(1,"td",64),C(2),_(),m(3,"td",39)(4,"button",65),K("click",function(){let i=Y(t).$implicit,s=O();return J(s.selectProject(i))}),C(5," Select "),_()()()}if(n&2){let t=e.$implicit;E(2),le(" ",t.name," ")}}function Kre(n,e){n&1&&(m(0,"tr")(1,"td",66),C(2," No projects found. "),_()())}function Yre(n,e){if(n&1){let t=ae();m(0,"div",101),K("click",function(){let i=Y(t).$implicit,s=O(3);return J(s.addAssigneeToInput(i.email))}),C(1),_()}if(n&2){let t=e.$implicit;E(),le(" ",t.email," ")}}function Jre(n,e){if(n&1&&(m(0,"div",99),G(1,Yre,2,1,"div",100),_()),n&2){let t=O(2);E(),F("ngForOf",t.filteredDomainUsers)}}function Qre(n,e){if(n&1){let t=ae();m(0,"button",102),K("click",function(){Y(t);let i=O(2);return J(i.resetTaskForm())}),C(1," Cancel Edit "),_()}}function Zre(n,e){if(n&1){let t=ae();m(0,"tr",63)(1,"td",38),C(2),_(),m(3,"td",39)(4,"span",103),C(5),bn(6,"titlecase"),_()(),m(7,"td",39),C(8),_(),m(9,"td",39),C(10),_(),m(11,"td",39)(12,"div",104)(13,"button",105),K("click",function(){let i=Y(t).$implicit,s=O(2);return J(s.editTask(i))}),Me(),m(14,"svg",106),re(15,"path",107),_()(),Rn(),m(16,"button",108),K("click",function(){let i=Y(t).$implicit,s=O(2);return J(s.confirmDeleteTask(i))}),Me(),m(17,"svg",106),re(18,"path",109)(19,"path",110)(20,"path",72),_()()()()()}if(n&2){let t=e.$implicit,r=O(2);E(2),Q(t.description),E(2),F("ngClass",Oh(7,Vre,t.status==="in progress",t.status==="completed",t.status==="not yet started")),E(),le(" ",si(6,5,t.status)," "),E(3),le(" ",r.getFormattedDate(t.dueDate)," "),E(2),le(" ",r.getAssignedEmails(t.assignedTo)," ")}}function Xre(n,e){n&1&&(m(0,"tr")(1,"td",111),C(2," No tasks found for this project. "),_()())}function eie(n,e){if(n&1){let t=ae();m(0,"section",67)(1,"h3",32),C(2," Tasks for: "),m(3,"span",68),C(4),_(),m(5,"button",69),K("click",function(){Y(t);let i=O();return i.selectedProject=null,J(i.resetTaskForm())}),C(6," (Clear Selection) "),_()(),m(7,"form",70),K("ngSubmit",function(){Y(t);let i=O();return J(i.editingTask?i.updateTask():i.addTask())}),m(8,"h4",71),Me(),m(9,"svg",19),re(10,"path",72)(11,"path",73)(12,"path",74)(13,"path",75),_(),C(14),_(),Rn(),m(15,"div")(16,"label",76),C(17,"Task Description:"),_(),m(18,"input",77),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.currentTaskDescription,i)||(s.currentTaskDescription=i),J(i)}),_()(),m(19,"div")(20,"label",78),C(21,"Due Date:"),_(),m(22,"input",79),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.currentTaskDueDate,i)||(s.currentTaskDueDate=i),J(i)}),_()(),m(23,"div")(24,"label",80),C(25,"Reminder Date (Optional):"),_(),m(26,"input",81),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.currentTaskReminderDate,i)||(s.currentTaskReminderDate=i),J(i)}),_()(),m(27,"div")(28,"label",82),C(29,"Status:"),_(),m(30,"select",83),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.currentTaskStatus,i)||(s.currentTaskStatus=i),J(i)}),m(31,"option",84),C(32," Not Yet Started "),_(),m(33,"option",85),C(34," In Progress "),_(),m(35,"option",86),C(36," Completed "),_()()(),m(37,"div")(38,"label",87),C(39,"Assignee Email(s) (comma-separated):"),_(),m(40,"input",88),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.currentTaskAssignedUserEmailInput,i)||(s.currentTaskAssignedUserEmailInput=i),J(i)}),_(),G(41,Jre,2,1,"div",89),_(),m(42,"div",90)(43,"button",91),C(44),_(),G(45,Qre,2,0,"button",92),_()(),m(46,"section",93)(47,"h4",94),Me(),m(48,"svg",19),re(49,"circle",95)(50,"path",96),_(),C(51," Project Tasks "),_(),Rn(),m(52,"div",33)(53,"input",97),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.taskSearchTerm,i)||(s.taskSearchTerm=i),J(i)}),_()(),m(54,"div",98)(55,"table",36)(56,"thead")(57,"tr",37)(58,"th",38),C(59,"Description"),_(),m(60,"th",39),C(61,"Status"),_(),m(62,"th",39),C(63,"Due Date"),_(),m(64,"th",39),C(65,"Assigned To"),_(),m(66,"th",39),C(67,"Actions"),_()()(),m(68,"tbody",40),G(69,Zre,21,11,"tr",41)(70,Xre,3,0,"tr",26),_()()()()()}if(n&2){let t=O();E(4),Q(t.selectedProject.name),E(10),le(" ",t.editingTask?"Edit Task":"Add New Task"," "),E(4),de("ngModel",t.currentTaskDescription),E(4),de("ngModel",t.currentTaskDueDate),E(4),de("ngModel",t.currentTaskReminderDate),E(4),de("ngModel",t.currentTaskStatus),E(10),de("ngModel",t.currentTaskAssignedUserEmailInput),E(),F("ngIf",t.currentTaskAssignedUserEmailInput&&t.filteredDomainUsers.length>0),E(3),le(" ",t.editingTask?"Update Task":"Add Task"," "),E(),F("ngIf",t.editingTask),E(8),de("ngModel",t.taskSearchTerm),E(16),F("ngForOf",t.filteredTasks),E(),F("ngIf",t.filteredTasks.length===0)}}function tie(n,e){if(n&1){let t=ae();m(0,"div",112)(1,"div",113)(2,"p",114),C(3),_(),m(4,"div",115)(5,"button",116),K("click",function(){Y(t);let i=O();return J(i.confirmModalAction&&i.confirmModalAction())}),C(6," Confirm "),_(),m(7,"button",117),K("click",function(){Y(t);let i=O();return J(i.showConfirmModal=!1)}),C(8," Cancel "),_()()()()}if(n&2){let t=O();E(3),le(" ",t.confirmModalMessage," ")}}var Nj="ddljq4uyx",Uj="images_preset",Fv=class n{constructor(e,t,r){this.firestore=e;this.datePipe=t;this.http=r}orgId;domainUid;projectName="";projectDescription="";projectAssets=[];currentAssetKey="";selectedFile=null;uploadingCloudinary=!1;cloudinaryUploadProgress=0;cloudinaryMessage=null;cloudinaryError=null;message="";errorMessage="";currentAdminUid="";currentAdminEmail="";projectsList=[];searchTermProjects="";selectedProject=null;projectTasks=[];currentTaskDescription="";currentTaskDueDate="";currentTaskReminderDate="";currentTaskStatus="not yet started";currentTaskAssignedUserEmailInput="";taskSearchTerm="";editingTask=null;allDomainUsers=[];showConfirmModal=!1;confirmModalMessage="";confirmModalAction=null;ngOnInit(){this.currentAdminUid=localStorage.getItem("uid")||"",this.currentAdminEmail=localStorage.getItem("useremail")||"admin@example.com",(!this.orgId||!this.domainUid)&&this.showTemporaryMessage("Error: Organization ID or Domain ID missing. Cannot manage projects.",!0),(!this.currentAdminUid||!this.currentAdminEmail)&&this.showTemporaryMessage("Error: Admin creator information missing. Please log in again.",!0),this.orgId&&this.domainUid&&(this.fetchProjects(),this.fetchDomainUsers())}showTemporaryMessage(e,t=!1){t?(this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},5e3)):(this.message=e,setTimeout(()=>{this.message=""},5e3))}addAsset(){return x(this,null,function*(){if(!this.currentAssetKey){this.cloudinaryError="Please enter an Asset Name.",this.cloudinaryMessage=null;return}if(!this.selectedFile){this.cloudinaryError="Please select a file to upload.",this.cloudinaryMessage=null;return}if(this.uploadingCloudinary){this.cloudinaryError="An upload is already in progress.",this.cloudinaryMessage=null;return}if(!Nj||!Uj){this.cloudinaryError="Cloudinary configuration missing. Please update CLOUDINARY_CLOUD_NAME and UPLOAD_PRESET.",this.cloudinaryMessage=null;return}this.cloudinaryMessage="Uploading file...",this.cloudinaryError=null,this.uploadingCloudinary=!0,this.cloudinaryUploadProgress=0;let e=new FormData;e.append("file",this.selectedFile),e.append("upload_preset",Uj);try{let r=(yield new Promise((i,s)=>{this.http.post(`https://api.cloudinary.com/v1_1/${Nj}/upload`,e,{reportProgress:!0,observe:"events"}).subscribe({next:o=>{o.type===cs.UploadProgress?(this.cloudinaryUploadProgress=Math.round(100*(o.loaded/(o.total||1))),this.cloudinaryMessage=`Uploading file... (${this.cloudinaryUploadProgress}%)`):o.type===cs.Response&&i(o.body)},error:o=>{s(o)}})})).secure_url;this.projectAssets.push({key:this.currentAssetKey,url:r}),this.cloudinaryMessage="Asset uploaded and added successfully!",this.cloudinaryError=null,this.resetAssetForm()}catch(t){console.error("Error uploading file to Cloudinary:",t),this.cloudinaryError=`Upload failed: ${t.error?.error?.message||t.message||"An unknown error occurred."}`,this.cloudinaryMessage=null}finally{this.uploadingCloudinary=!1,this.cloudinaryUploadProgress=0}})}removeAsset(e){this.projectAssets.splice(e,1),this.showTemporaryMessage("Asset removed.")}onFileSelected(e){let t=e.target;t.files&&t.files.length>0?(this.selectedFile=t.files[0],this.cloudinaryMessage=`File selected: ${this.selectedFile.name}`,this.cloudinaryError=null):(this.selectedFile=null,this.cloudinaryMessage=null,this.cloudinaryError=null)}resetAssetForm(){this.currentAssetKey="",this.selectedFile=null,this.cloudinaryMessage=null,this.cloudinaryError=null,this.uploadingCloudinary=!1,this.cloudinaryUploadProgress=0;let e=document.querySelector('input[type="file"]');e&&(e.value="")}createProject(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.showTemporaryMessage("Error: Organization ID or Domain ID is missing. Cannot create project.",!0);return}if(!this.projectName){this.showTemporaryMessage("Project name is required.",!0);return}if(!this.currentAdminUid||!this.currentAdminEmail){this.showTemporaryMessage("Admin creator information (UID/Email) is missing. Please log in again.",!0);return}try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects`),t=Fe(e),r={uid:t.id,name:this.projectName,description:this.projectDescription,orgId:this.orgId,domainUid:this.domainUid,createdBy:{uid:this.currentAdminUid,email:this.currentAdminEmail},assets:this.projectAssets,usersWorkingOnProject:[],tasks:[],createdAt:lt.now(),isActive:!0};yield Gr(t,r),On(this.firestore,this.currentAdminUid,"project_creation",t.id,"success"),this.showTemporaryMessage("Project created successfully!"),this.resetCreateProjectForm(),this.fetchProjects()}catch(e){console.error("Error creating project:",e),this.showTemporaryMessage(`Failed to create project: ${e.message||"An unknown error occurred."}`,!0)}})}resetCreateProjectForm(){this.projectName="",this.projectDescription="",this.projectAssets=[],this.resetAssetForm()}fetchProjects(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.projectsList=[];return}try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects`),t=fi(e),r=yield an(t);this.projectsList=r.docs.map(i=>H({uid:i.id},i.data()))}catch(e){console.error("Error fetching projects:",e),this.showTemporaryMessage("Failed to load projects.",!0)}})}get filteredProjects(){if(!this.searchTermProjects)return this.projectsList;let e=this.searchTermProjects.toLowerCase();return this.projectsList.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}selectProject(e){this.selectedProject=e,this.projectTasks=e.tasks||[],this.resetTaskForm()}fetchDomainUsers(){return x(this,null,function*(){if(!(!this.orgId||!this.domainUid))try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/users`),r=(yield an(e)).docs.map(a=>({uid:a.id,email:a.data().email})),i=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/admins`),o=(yield an(i)).docs.map(a=>({uid:a.id,email:a.data().email}));this.allDomainUsers=[...r,...o]}catch(e){console.error("Error fetching domain users/admins:",e),this.showTemporaryMessage("Failed to load domain users for task assignment.",!0)}})}get filteredDomainUsers(){let e=this.currentTaskAssignedUserEmailInput.split(",").map(r=>r.trim().toLowerCase()),t=e[e.length-1];return t?this.allDomainUsers.filter(r=>r.email.toLowerCase().includes(t)&&!e.includes(r.email.toLowerCase())):[]}addAssigneeToInput(e){let t=this.currentTaskAssignedUserEmailInput.split(",").map(i=>i.trim()).filter(i=>i),r=t[t.length-1];t.length>0&&r?t[t.length-1]=e:t.push(e),this.currentTaskAssignedUserEmailInput=t.join(", ")+(t.length>0?", ":"")}addTask(){return x(this,null,function*(){if(!this.selectedProject){this.showTemporaryMessage("Please select a project first.",!0);return}if(!this.currentTaskDescription||!this.currentTaskDueDate||!this.currentTaskStatus){this.showTemporaryMessage("Task description, due date, and status are required.",!0);return}let e=yield this.resolveAssigneeEmails(this.currentTaskAssignedUserEmailInput),t=wp(),r={id:t,description:this.currentTaskDescription,dueDate:lt.fromDate(new Date(this.currentTaskDueDate)),reminderDate:this.currentTaskReminderDate?lt.fromDate(new Date(this.currentTaskReminderDate)):void 0,createdAt:lt.now(),status:this.currentTaskStatus,assignedTo:e,uid:t};this.projectTasks.push(r),yield this.updateProjectTasksInFirestore(),On(this.firestore,this.currentAdminUid,"task_creation",`${this.selectedProject.uid}_${r.description}`,"success"),this.showTemporaryMessage("Task added successfully!"),this.resetTaskForm()})}updateTask(){return x(this,null,function*(){if(!this.selectedProject||!this.editingTask){this.showTemporaryMessage("No project selected or task being edited.",!0);return}if(!this.currentTaskDescription||!this.currentTaskDueDate||!this.currentTaskStatus){this.showTemporaryMessage("Task description, due date, and status are required.",!0);return}let e=yield this.resolveAssigneeEmails(this.currentTaskAssignedUserEmailInput),t=this.projectTasks.findIndex(r=>r===this.editingTask);t>-1?(this.projectTasks[t]=ue(H({},this.projectTasks[t]),{description:this.currentTaskDescription,dueDate:lt.fromDate(new Date(this.currentTaskDueDate)),reminderDate:this.currentTaskReminderDate?lt.fromDate(new Date(this.currentTaskReminderDate)):void 0,status:this.currentTaskStatus,assignedTo:e}),yield this.updateProjectTasksInFirestore(),On(this.firestore,this.currentAdminUid,"task_update",`${this.selectedProject.uid}_${this.editingTask.description}`,"success"),this.showTemporaryMessage("Task updated successfully!"),this.resetTaskForm()):this.showTemporaryMessage("Error: Task not found for update.",!0)})}confirmDeleteTask(e){this.confirmModalMessage=`Are you sure you want to delete task "${e.description}"? This action cannot be undone.`,this.confirmModalAction=()=>this.deleteTaskConfirmed(e),this.showConfirmModal=!0}deleteTaskConfirmed(e){return x(this,null,function*(){if(!this.selectedProject){this.showTemporaryMessage("No project selected.",!0),this.showConfirmModal=!1;return}let t=this.projectTasks.length;this.projectTasks=this.projectTasks.filter(r=>r!==e),this.projectTasks.length<t?(yield this.updateProjectTasksInFirestore(),On(this.firestore,this.currentAdminUid,"task_deletion",`${this.selectedProject.uid}_${e.description}`,"success"),this.showTemporaryMessage(`Task "${e.description}" deleted successfully!`)):this.showTemporaryMessage("Error: Task not found for deletion.",!0),this.showConfirmModal=!1,this.resetTaskForm()})}editTask(e){this.editingTask=e,this.currentTaskDescription=e.description,this.currentTaskDueDate=e.dueDate.toDate().toISOString().split("T")[0],this.currentTaskReminderDate=e.reminderDate?e.reminderDate.toDate().toISOString().split("T")[0]:"",this.currentTaskStatus=e.status,this.currentTaskAssignedUserEmailInput=this.getAssignedEmails(e.assignedTo)}resetTaskForm(){this.currentTaskDescription="",this.currentTaskDueDate="",this.currentTaskReminderDate="",this.currentTaskStatus="not yet started",this.currentTaskAssignedUserEmailInput="",this.editingTask=null}get filteredTasks(){if(!this.selectedProject)return[];if(!this.taskSearchTerm)return this.projectTasks;let e=this.taskSearchTerm.toLowerCase();return this.projectTasks.filter(t=>t.description.toLowerCase().includes(e)||t.assignedTo.some(r=>r.email.toLowerCase().includes(e))||t.status.toLowerCase().includes(e))}resolveAssigneeEmails(e){return x(this,null,function*(){let t=e.split(",").map(i=>i.trim()).filter(i=>i),r=[];for(let i of t){let s="",o=this.allDomainUsers.find(a=>a.email.toLowerCase()===i.toLowerCase());o?s=o.uid:console.warn(`Assignee ${i} not found in domain users/admins. Adding with empty UID.`),r.push({uid:s,email:i})}return r})}updateProjectTasksInFirestore(){return x(this,null,function*(){if(!this.selectedProject||!this.orgId||!this.domainUid){this.showTemporaryMessage("Cannot save tasks: No project selected or domain info missing.",!0);return}try{let e=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects/${this.selectedProject.uid}`);yield ji(e,{tasks:this.projectTasks}),this.selectedProject.tasks=this.projectTasks;let t=this.projectsList.findIndex(r=>r.uid===this.selectedProject?.uid);t>-1&&(this.projectsList[t].tasks=this.projectTasks)}catch(e){console.error("Error updating project tasks in Firestore:",e),this.showTemporaryMessage("Failed to save project tasks.",!0)}})}getAssignedEmails(e){return!e||e.length===0?"N/A":e.map(t=>t.email).join(", ")}getFormattedDate(e){if(e){let t=e.toDate();if(!isNaN(t.getTime()))return this.datePipe.transform(t,"mediumDate")||"N/A"}return"N/S"}static \u0275fac=function(t){return new(t||n)(X(at),X(Pi),X(sy))};static \u0275cmp=Ve({type:n,selectors:[["app-create-project"]],inputs:{orgId:"orgId",domainUid:"domainUid"},features:[ar([Pi])],decls:62,vars:22,consts:[[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-6","text-center","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-4xl","font-extrabold","text-custom-gradient","flex","items-center","justify-center"],[1,"text-lg","text-gray-600","mt-3"],[1,"font-semibold","text-blue-600"],[1,"font-semibold","text-pink-600"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","gap-6"],[1,"lg:w-1/2","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade"],[1,"space-y-6","mb-8","pb-8","border-b-2","border-gray-300",3,"ngSubmit"],[1,"text-2xl","font-bold","text-center","text-custom-gradient"],["for","projectName",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","projectName","name","projectName","placeholder","Enter project name","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","projectDescription",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["id","projectDescription","name","projectDescription","rows","3","placeholder","Describe the project",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"border-2","border-gray-300","p-4","rounded-lg","space-y-2","bg-white","shadow-sm"],[1,"text-lg","font-semibold","text-blue-600","mb-3","flex","justify-between"],[1,"flex"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2","text-yellow-500"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["type","button",1,"font-bold","py-1","px-3","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105","whitespace-nowrap",3,"click","disabled","ngClass"],[1,"flex","flex-col","md:flex-row","md:space-x-2","space-y-2","md:space-y-0","mb-4"],["type","text","name","currentAssetKey","placeholder","Asset Name",1,"w-full","md:w-1/2","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["type","file",1,"w-full","md:w-1/2","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"change"],[4,"ngIf"],["class","mt-4 text-center text-sm font-medium",3,"ngClass",4,"ngIf"],["class","list-disc pl-5 space-y-2 overflow-y-auto max-h-48 custom-scrollbar",4,"ngIf"],["class","text-gray-500 text-sm mt-2",4,"ngIf"],["type","submit",1,"w-full","bg-custom-gradient","text-white","py-3","px-6","rounded-lg","hover:opacity-90","active:opacity-100","transition","font-bold","text-lg","transform","hover:-translate-y-0.5"],[1,"mt-8"],[1,"text-2xl","font-bold","text-center","text-custom-gradient","mb-4"],[1,"mb-4"],["type","text","placeholder","Search projects by name or description...","name","searchTermProjects",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","max-h-96","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md"],[1,"min-w-full","bg-white","rounded-lg","overflow-hidden"],[1,"bg-gray-200","text-gray-700","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"py-3","px-6","text-center"],[1,"text-gray-800","text-sm","font-light"],["class","border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],["class","lg:w-1/2 bg-gray-100 p-6 rounded-xl shadow-lg border-2 border-gray-300 animate-slide-in-fade",4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 animate-slide-in-fade",4,"ngIf"],["role","alert",1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["role","alert",1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"mt-4","text-center","text-sm","font-medium",3,"ngClass"],[1,"list-disc","pl-5","space-y-2","overflow-y-auto","max-h-48","custom-scrollbar"],["class","p-2 border border-gray-200 rounded-md bg-white flex items-center justify-between shadow-sm",4,"ngFor","ngForOf"],[1,"p-2","border","border-gray-200","rounded-md","bg-white","flex","items-center","justify-between","shadow-sm"],[1,"break-all","text-gray-800"],["target","_blank",1,"text-blue-600","hover:underline",3,"href"],["type","button",1,"ml-4","text-red-600","hover:text-red-800","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-sm","mt-2"],[1,"border-b","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"py-3","px-6","text-left","whitespace-nowrap"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],["colspan","2",1,"py-4","text-center","text-gray-500"],[1,"lg:w-1/2","bg-gray-100","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-blue-600"],[1,"ml-4","text-gray-600","hover:text-gray-800","text-sm","font-medium","transition",3,"click"],[1,"space-y-4","mb-8","pb-8","border-b-2","border-gray-300",3,"ngSubmit"],[1,"text-xl","font-semibold","text-blue-600","mb-3","flex","items-center"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["d","M10 12h4"],["d","M8 18h8"],["d","M16 6H8c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"],["for","taskDescription",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","taskDescription","name","currentTaskDescription","placeholder","Describe the task","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","taskDueDate",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","date","id","taskDueDate","name","currentTaskDueDate","title","Due Date","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","taskReminderDate",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","date","id","taskReminderDate","name","currentTaskReminderDate","title","Reminder Date",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","taskStatus",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["name","currentTaskStatus","required","","id","taskStatus",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","leading-tight","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["value","not yet started",1,"bg-white","text-gray-900"],["value","in progress",1,"bg-white","text-gray-900"],["value","completed",1,"bg-white","text-gray-900"],["for","taskAssignedUserEmailInput",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","taskAssignedUserEmailInput","name","currentTaskAssignedUserEmailInput","placeholder","Enter emails to assign",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["class","bg-white rounded-lg mt-1 max-h-40 overflow-y-auto custom-scrollbar border border-gray-200 shadow-md",4,"ngIf"],[1,"flex","gap-4","pt-2"],["type","submit",1,"flex-grow","bg-custom-gradient","text-white","font-bold","py-3","px-6","rounded-lg","border-2","border-gray-300","hover:opacity-90","active:opacity-100","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],["type","button","class","bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg border-2 border-gray-300 transition duration-200 ease-in-out transform hover:scale-105",3,"click",4,"ngIf"],[1,"mt-8","flex-grow","flex","flex-col"],[1,"text-xl","font-semibold","text-blue-600","mb-4","flex","items-center"],["cx","11","cy","11","r","8"],["d","m21 21-4.3-4.3"],["type","text","placeholder","Search tasks by description...","name","taskSearchTerm",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","flex-grow","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md"],[1,"bg-white","rounded-lg","mt-1","max-h-40","overflow-y-auto","custom-scrollbar","border","border-gray-200","shadow-md"],["class","p-2 cursor-pointer hover:bg-gray-100 border-b border-gray-200 last:border-b-0 text-gray-800",3,"click",4,"ngFor","ngForOf"],[1,"p-2","cursor-pointer","hover:bg-gray-100","border-b","border-gray-200","last:border-b-0","text-gray-800",3,"click"],["type","button",1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-3","px-6","rounded-lg","border-2","border-gray-300","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],[3,"ngClass"],[1,"flex","item-center","justify-center","space-x-2"],[1,"w-8","h-8","rounded-full","bg-blue-600","hover:bg-blue-700","text-white","flex","items-center","justify-center","transition","duration-200","ease-in-out","transform","hover:scale-110",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-4","w-4"],["d","M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"],[1,"w-8","h-8","rounded-full","bg-red-600","hover:bg-red-700","text-white","flex","items-center","justify-center","transition","duration-200","ease-in-out","transform","hover:scale-110",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["colspan","5",1,"py-4","text-center","text-gray-500"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-75","flex","items-center","justify-center","z-50","animate-slide-in-fade"],[1,"bg-white","p-6","rounded-lg","shadow-xl","max-w-sm","w-full","text-center","space-y-4","border-2","border-gray-300"],[1,"text-lg","text-gray-800","font-medium"],[1,"flex","justify-center","space-x-4"],[1,"bg-red-600","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],[1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"header",1)(2,"h1",2),C(3," Project & Task Management "),_(),m(4,"p",3),C(5," Organization: "),m(6,"strong",4),C(7),_(),C(8," | Domain: "),m(9,"strong",5),C(10),_()()(),G(11,Bre,8,1,"div",6)(12,jre,8,1,"div",7),m(13,"main",8)(14,"section",9)(15,"form",10),K("ngSubmit",function(){return r.createProject()}),m(16,"h3",11),C(17," Create New Project "),_(),m(18,"div")(19,"label",12),C(20,"Project Name:"),_(),m(21,"input",13),he("ngModelChange",function(s){return pe(r.projectName,s)||(r.projectName=s),s}),_()(),m(22,"div")(23,"label",14),C(24,"Project Description:"),_(),m(25,"textarea",15),he("ngModelChange",function(s){return pe(r.projectDescription,s)||(r.projectDescription=s),s}),_()(),m(26,"div",16)(27,"h4",17)(28,"div",18),Me(),m(29,"svg",19),re(30,"path",20)(31,"polyline",21),_(),C(32," Project Assets (Documents/Images) "),_(),Rn(),m(33,"button",22),K("click",function(){return r.addAsset()}),C(34),_()(),m(35,"div",23)(36,"input",24),he("ngModelChange",function(s){return pe(r.currentAssetKey,s)||(r.currentAssetKey=s),s}),_(),m(37,"input",25),K("change",function(s){return r.onFileSelected(s)}),_()(),G(38,$re,3,2,"ng-container",26)(39,Hre,2,5,"div",27)(40,Wre,2,1,"ul",28)(41,qre,2,0,"p",29),_(),m(42,"button",30),C(43," Create Project "),_()(),m(44,"section",31)(45,"h3",32),C(46," Search Existing Projects "),_(),m(47,"div",33)(48,"input",34),he("ngModelChange",function(s){return pe(r.searchTermProjects,s)||(r.searchTermProjects=s),s}),_()(),m(49,"div",35)(50,"table",36)(51,"thead")(52,"tr",37)(53,"th",38),C(54,"Project Name"),_(),m(55,"th",39),C(56,"Actions"),_()()(),m(57,"tbody",40),G(58,Gre,6,1,"tr",41)(59,Kre,3,0,"tr",26),_()()()()(),G(60,eie,71,13,"section",42),_(),G(61,tie,9,1,"div",43),_()),t&2&&(E(7),Q(r.orgId||"N/A"),E(3),Q(r.domainUid||"N/A"),E(),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(9),de("ngModel",r.projectName),E(4),de("ngModel",r.projectDescription),E(8),F("disabled",!r.currentAssetKey||!r.selectedFile||r.uploadingCloudinary)("ngClass",zn(19,Ore,r.currentAssetKey&&r.selectedFile&&!r.uploadingCloudinary,!r.currentAssetKey||!r.selectedFile||r.uploadingCloudinary)),E(),le(" ",r.uploadingCloudinary?"Uploading...":"+"," "),E(2),de("ngModel",r.currentAssetKey),E(2),F("ngIf",r.uploadingCloudinary),E(),F("ngIf",r.cloudinaryMessage||r.cloudinaryError),E(),F("ngIf",r.projectAssets.length>0),E(),F("ngIf",r.projectAssets.length===0),E(7),de("ngModel",r.searchTermProjects),E(10),F("ngForOf",r.filteredProjects),E(),F("ngIf",r.filteredProjects.length===0),E(),F("ngIf",r.selectedProject),E(),F("ngIf",r.showConfirmModal))},dependencies:[Jt,mi,Av,Sv,St,od,Mt,gi,dr,Ut,Kr,Ye,Br,Kt,Ze,Xs],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}.progress-bar-container[_ngcontent-%COMP%]{background-color:#e5e7eb;border-radius:9999px;height:.5rem;margin-top:.75rem}.progress-bar[_ngcontent-%COMP%]{background-color:#8b5cf6;height:100%;border-radius:9999px;transition:width .3s ease-in-out}.message-success[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46;padding:.75rem;border-radius:.5rem;border:1px solid #34d399}.message-error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b;padding:.75rem;border-radius:.5rem;border:1px solid #ef4444}']})};function nie(n,e){if(n&1){let t=ae();m(0,"div",39)(1,"span",40),C(2),_(),m(3,"button",41),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",42),re(5,"circle",43)(6,"path",44)(7,"path",45),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function rie(n,e){if(n&1){let t=ae();m(0,"div",46)(1,"span",40),C(2),_(),m(3,"button",47),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",42),re(5,"circle",43)(6,"path",44)(7,"path",45),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function iie(n,e){n&1&&(ri(0),m(1,"p",48),C(2,"No domain assets found to grant access."),_(),ii())}function sie(n,e){if(n&1){let t=ae();m(0,"label",19)(1,"input",50),K("change",function(i){let s=Y(t).$implicit,o=O(2);return J(o.handleFileAccessChange(s.key,i))}),_(),m(2,"span"),C(3),m(4,"a",51),C(5),_(),C(6,")"),_()()}if(n&2){let t=e.$implicit,r=O(2);E(),F("checked",r.isFileAccessChecked(t.key)),E(2),le("",t.key," ("),E(),F("href",t.url,dc),E(),Q(t.url)}}function oie(n,e){if(n&1&&G(0,sie,7,4,"label",49),n&2){let t=O();F("ngForOf",t.domainAssets)}}function aie(n,e){if(n&1){let t=ae();m(0,"button",52),K("click",function(){Y(t);let i=O();return J(i.resetForm())}),C(1," Cancel Edit "),_()}}function cie(n,e){if(n&1){let t=ae();m(0,"tr",53)(1,"td",54),C(2),_(),m(3,"td",33),C(4),_(),m(5,"td",34),C(6),bn(7,"titlecase"),_(),m(8,"td",34)(9,"div",55)(10,"button",56),K("click",function(){let i=Y(t).$implicit,s=O();return J(s.handleEditUser(i))}),Me(),m(11,"svg",57),re(12,"path",58),_()(),Rn(),m(13,"button",59),K("click",function(){let i=Y(t).$implicit,s=O();return J(s.confirmDeleteUser(i))}),Me(),m(14,"svg",57),re(15,"path",60)(16,"path",61)(17,"path",62),_()()()()()}if(n&2){let t=e.$implicit;E(2),Q(t.name),E(2),Q(t.email),E(2),Q(si(7,3,t.role))}}function lie(n,e){n&1&&(m(0,"tr")(1,"td",63),C(2,"No users found."),_()())}function uie(n,e){if(n&1){let t=ae();m(0,"div",64)(1,"div",65)(2,"p",66),C(3),_(),m(4,"div",67)(5,"button",68),K("click",function(){Y(t);let i=O();return J(i.confirmModalAction&&i.confirmModalAction())}),C(6," Confirm "),_(),m(7,"button",69),K("click",function(){Y(t);let i=O();return J(i.showConfirmModal=!1)}),C(8," Cancel "),_()()()()}if(n&2){let t=O();E(3),Q(t.confirmModalMessage)}}var Oj=(n,e,t,r,i)=>{console.log(`AUDIT LOG: User ${e} performed ${t} on ${r} with status ${i}`)},Nv=class n{constructor(e,t){this.firestore=e;this.angularAuth=t}db=null;auth=null;isAuthReady=!1;orgId="";domainUid="";userName="";userEmail="";userPassword="";userConfirmPassword="";userAuditLog=!1;userOrgAnalytics=!1;userUserAnalytics=!1;domainAssets=[];userFileAccesses=[];userProjectAssignments=[];message="";errorMessage="";users=[];searchTerm="";editingUser=null;adminCustomization={auditLog:!1,orgAnalytics:!1,userAnalytics:!1};currentAdminUid="";currentAdminEmail="";showConfirmModal=!1;confirmModalMessage="";confirmModalAction=null;ngOnInit(){this.orgId=localStorage.getItem("orgId")||"",this.domainUid=localStorage.getItem("domainUid")||"",this.initializeFirebaseAndAdminInfo()}ngOnDestroy(){}initializeFirebaseAndAdminInfo(){try{let e=typeof window.__app_id<"u"?window.__app_id:"default-app-id",t=typeof window.__firebase_config<"u"?JSON.parse(window.__firebase_config):{};try{Wy(t,e)}catch(r){if(r.code!=="app/duplicate-app")throw console.error("Error initializing Firebase app:",r),r}this.db=this.firestore,this.auth=this.angularAuth,this.currentAdminUid=localStorage.getItem("uid")||"",this.currentAdminEmail=localStorage.getItem("useremail")||"admin@example.com",this.currentAdminUid||this.showTemporaryMessage("Admin UID not found in localStorage. Please ensure admin is logged in.",!0),this.currentAdminEmail||this.showTemporaryMessage("Admin email not found in localStorage.",!0),this.isAuthReady=!0,this.orgId&&this.domainUid&&this.db&&this.auth&&this.currentAdminUid?(this.fetchAdminDataAndDomainAssets(),this.fetchUsers()):!this.orgId||!this.domainUid?this.showTemporaryMessage("Organization ID or Domain ID not found in localStorage. Cannot load data.",!0):!this.db||!this.auth?this.showTemporaryMessage("Firebase services not initialized. Cannot load data.",!0):this.currentAdminUid||this.showTemporaryMessage("Admin UID not available. Cannot load data.",!0)}catch(e){console.error("Error initializing Firebase in component:",e),this.showTemporaryMessage("Failed to initialize Firebase. Please check console.",!0)}}showTemporaryMessage(e,t=!1){t?(this.errorMessage=e,setTimeout(()=>this.errorMessage="",5e3)):(this.message=e,setTimeout(()=>this.message="",5e3))}resetForm(){this.userName="",this.userEmail="",this.userPassword="",this.userConfirmPassword="",this.userAuditLog=!1,this.userOrgAnalytics=!1,this.userUserAnalytics=!1,this.userFileAccesses=this.domainAssets.map(e=>({assetKey:e.key,hasAccess:!1})),this.editingUser=null}fetchAdminDataAndDomainAssets(){return x(this,null,function*(){if(!this.db||!this.isAuthReady||!this.currentAdminUid||!this.orgId||!this.domainUid){console.warn("Firebase not ready or required IDs missing for fetching admin data and domain assets.");return}let e=localStorage.getItem("customization");if(e)try{this.adminCustomization=JSON.parse(e)}catch(t){console.error("Failed to parse admin customization from localStorage",t),this.showTemporaryMessage("Error parsing admin permissions from local storage.",!0)}else if(this.db&&this.currentAdminUid&&this.orgId)try{let t=Fe(this.db,`organizations/${this.orgId}/root/${this.currentAdminUid}`),r=yield At(t);r.exists()&&r.data()?.customization?(this.adminCustomization=r.data()?.customization,localStorage.setItem("customization",JSON.stringify(this.adminCustomization))):(console.warn("Admin customization not found in Firestore for current admin. Defaulting to no permissions."),this.adminCustomization={auditLog:!1,orgAnalytics:!1,userAnalytics:!1})}catch(t){console.error("Error fetching admin customization from Firestore:",t),this.showTemporaryMessage("Failed to fetch admin permissions from Firestore.",!0)}try{let t=Fe(this.db,`organizations/${this.orgId}/domain/${this.domainUid}`),r=yield At(t);if(r.exists()){let s=r.data()?.assets||[];this.domainAssets=s,this.userFileAccesses=s.map(o=>({assetKey:o.key,hasAccess:!1}))}else this.showTemporaryMessage("Domain not found. Cannot fetch assets.",!0)}catch(t){console.error("Error fetching domain assets:",t),this.showTemporaryMessage("Failed to load domain assets.",!0)}})}isFileAccessChecked(e){let t=this.userFileAccesses.find(r=>r.assetKey===e);return t?t.hasAccess:!1}handleFileAccessChange(e,t){let r=t.target.checked;this.userFileAccesses=this.userFileAccesses.map(i=>i.assetKey===e?ue(H({},i),{hasAccess:r}):i)}fetchUsers(){return x(this,null,function*(){if(!this.db||!this.isAuthReady||!this.orgId||!this.domainUid){this.users=[];return}try{let e=It(this.db,`organizations/${this.orgId}/domain/${this.domainUid}/users`),t=fi(e),r=yield an(t);this.users=r.docs.map(i=>H({uid:i.id},i.data()))}catch(e){console.error("Error fetching users:",e),this.showTemporaryMessage("Failed to load users.",!0)}})}handleCreateOrUpdateUser(){return x(this,null,function*(){if(!this.db||!this.auth||!this.orgId||!this.domainUid||!this.currentAdminUid){this.showTemporaryMessage("Firebase services not ready or required IDs are missing.",!0);return}if(!this.userName||!this.userEmail){this.showTemporaryMessage("Name and Email are required.",!0);return}if(!this.editingUser&&(!this.userPassword||this.userPassword!==this.userConfirmPassword)){this.showTemporaryMessage("Password and Confirm Password must match and not be empty for new users.",!0);return}try{let e=this.editingUser?this.editingUser.uid:"";this.editingUser?this.userPassword&&this.userPassword===this.userConfirmPassword&&(this.auth.currentUser&&this.auth.currentUser.uid===e?yield CV(this.auth.currentUser,this.userPassword).catch(i=>{console.warn("Could not update user's password directly (might need re-auth):",i),this.showTemporaryMessage("Password update might require re-authentication. User data updated.",!1)}):this.showTemporaryMessage("Cannot update another user's password directly from client-side. Please use backend functionality (e.g., Cloud Functions).",!0)):e=(yield fa(this.auth,this.userEmail,this.userPassword)).user.uid;let t=Fe(this.db,`organizations/${this.orgId}/domain/${this.domainUid}/users/${e}`),r={uid:e,name:this.userName,email:this.userEmail,role:"user",orgId:this.orgId,domainUid:this.domainUid,projectAssignments:[],fileAccesses:this.userFileAccesses,customization:{auditLog:this.userAuditLog,orgAnalytics:this.userOrgAnalytics,userAnalytics:this.userUserAnalytics},createdAt:this.editingUser?this.editingUser.createdAt:lt.now(),createdByUid:this.editingUser?this.editingUser.createdByUid:this.currentAdminUid};yield Gr(t,r,{merge:!0}),Oj(this.db,this.currentAdminUid,this.editingUser?"user_update":"user_creation",e,"success"),this.showTemporaryMessage(`User ${this.editingUser?"updated":"created"} successfully!`),this.resetForm(),this.fetchUsers()}catch(e){console.error("Error creating/updating user:",e),this.showTemporaryMessage(`Failed to ${this.editingUser?"update":"create"} user: ${e.message}`,!0)}})}confirmDeleteUser(e){this.confirmModalMessage=`Are you sure you want to delete user ${e.email}? This action cannot be undone.`,this.confirmModalAction=()=>this.handleDeleteUserConfirmed(e),this.showConfirmModal=!0}handleDeleteUserConfirmed(e){return x(this,null,function*(){if(!this.db||!this.currentAdminUid){this.showTemporaryMessage("Firebase not initialized or admin UID missing.",!0),this.showConfirmModal=!1;return}try{let t=Fe(this.db,`organizations/${this.orgId}/domain/${this.domainUid}/users/${e.uid}`);yield rj(t),Oj(this.db,this.currentAdminUid,"user_deletion",e.uid,"success"),this.showTemporaryMessage(`User ${e.email} deleted successfully!`),this.fetchUsers()}catch(t){console.error("Error deleting user:",t),this.showTemporaryMessage(`Failed to delete user: ${t.message}`,!0)}finally{this.showConfirmModal=!1}})}handleEditUser(e){this.editingUser=e,this.userName=e.name,this.userEmail=e.email,this.userPassword="",this.userConfirmPassword="",this.userAuditLog=e.customization.auditLog,this.userOrgAnalytics=e.customization.orgAnalytics,this.userUserAnalytics=e.customization.userAnalytics;let t=this.domainAssets.map(r=>{let i=e.fileAccesses.find(s=>s.assetKey===r.key);return{assetKey:r.key,hasAccess:i?i.hasAccess:!1}});this.userFileAccesses=t}get filteredUsers(){return this.users.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())||e.email.toLowerCase().includes(this.searchTerm.toLowerCase()))}static \u0275fac=function(t){return new(t||n)(X(at),X(yn))};static \u0275cmp=Ve({type:n,selectors:[["app-user-management"]],decls:68,vars:27,consts:[["assetsList",""],[1,"min-h-screen","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-6","text-center","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-3xl","font-extrabold","text-custom-gradient","flex","items-center","justify-center"],[1,"text-lg","text-gray-600","mt-3"],[1,"font-semibold","text-blue-600"],[1,"font-semibold","text-pink-600"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","gap-6"],[1,"lg:w-1/2","animate-slide-in-fade"],[1,"text-2xl","font-bold","text-custom-gradient","mb-4","flex","items-center"],[1,"space-y-4",3,"ngSubmit"],["type","text","placeholder","User Name","name","userName","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["type","email","placeholder","User Email","name","userEmail","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["type","password","name","userPassword",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","placeholder","ngModel","required"],["type","password","name","userConfirmPassword",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","placeholder","ngModel","required"],[1,"border-2","border-gray-300","p-4","rounded-lg","space-y-2","bg-white","shadow-sm"],[1,"text-lg","font-semibold","text-blue-600"],[1,"flex","items-center","space-x-2","text-gray-700"],["type","checkbox","name","userAuditLog",1,"form-checkbox","h-5","w-5","text-blue-600","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel","disabled"],["type","checkbox","name","userOrgAnalytics",1,"form-checkbox","h-5","w-5","text-blue-600","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel","disabled"],["type","checkbox","name","userUserAnalytics",1,"form-checkbox","h-5","w-5","text-blue-600","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel","disabled"],[4,"ngIf","ngIfElse"],[1,"flex","gap-4","pt-2"],["type","submit",1,"flex-grow","bg-custom-gradient","text-white","font-bold","py-3","px-6","rounded-lg","border-2","border-gray-300","hover:opacity-90","active:opacity-100","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],["type","button","class","bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg border-2 border-gray-300 transition duration-200 ease-in-out transform hover:scale-105",3,"click",4,"ngIf"],[1,"lg:w-1/2","p-6","animate-slide-in-fade"],[1,"mb-4"],["type","text","placeholder","Search by name or email...","name","searchTerm",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-x-auto","rounded-lg","border-2","border-gray-300","shadow-md","custom-scrollbar"],[1,"min-w-full","bg-white","rounded-lg","overflow-hidden"],[1,"bg-gray-200","text-gray-700","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"py-3","px-6","text-center"],[1,"text-gray-800","text-sm","font-light"],["class","border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 animate-slide-in-fade",4,"ngIf"],[1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],[1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"text-gray-500","text-sm"],["class","flex items-center space-x-2 text-gray-700",4,"ngFor","ngForOf"],["type","checkbox",1,"form-checkbox","h-5","w-5","text-blue-600","rounded","focus:ring-blue-500",3,"change","checked"],["target","_blank",1,"text-blue-600","hover:underline","text-sm","break-all",3,"href"],["type","button",1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-3","px-6","rounded-lg","border-2","border-gray-300","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],[1,"border-b","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"py-3","px-6","text-left","whitespace-nowrap"],[1,"flex","item-center","justify-center","space-x-2"],[1,"w-8","h-8","rounded-full","bg-blue-600","hover:bg-blue-700","text-white","flex","items-center","justify-center","transition","duration-200","ease-in-out","transform","hover:scale-110",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-4","w-4"],["d","M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"],[1,"w-8","h-8","rounded-full","bg-red-600","hover:bg-red-700","text-white","flex","items-center","justify-center","transition","duration-200","ease-in-out","transform","hover:scale-110",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["colspan","4",1,"py-4","text-center","text-gray-500"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-75","flex","items-center","justify-center","z-50","animate-slide-in-fade"],[1,"bg-white","p-6","rounded-lg","shadow-xl","max-w-sm","w-full","text-center","space-y-4","border-2","border-gray-300"],[1,"text-lg","text-gray-800","font-medium"],[1,"flex","justify-center","space-x-4"],[1,"bg-red-600","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],[1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"]],template:function(t,r){if(t&1){let i=ae();m(0,"div",1)(1,"header",2)(2,"h1",3),C(3," Domain User Management "),_(),m(4,"p",4),C(5," Organization: "),m(6,"strong",5),C(7),_(),C(8," | Domain: "),m(9,"strong",6),C(10),_()()(),G(11,nie,8,1,"div",7)(12,rie,8,1,"div",8),m(13,"main",9)(14,"section",10)(15,"h2",11),C(16),_(),m(17,"form",12),K("ngSubmit",function(){return Y(i),J(r.handleCreateOrUpdateUser())}),m(18,"input",13),he("ngModelChange",function(o){return Y(i),pe(r.userName,o)||(r.userName=o),J(o)}),_(),m(19,"input",14),he("ngModelChange",function(o){return Y(i),pe(r.userEmail,o)||(r.userEmail=o),J(o)}),_(),m(20,"input",15),he("ngModelChange",function(o){return Y(i),pe(r.userPassword,o)||(r.userPassword=o),J(o)}),_(),m(21,"input",16),he("ngModelChange",function(o){return Y(i),pe(r.userConfirmPassword,o)||(r.userConfirmPassword=o),J(o)}),_(),m(22,"div",17)(23,"h3",18),C(24,"User Permissions (Subset of Admin's)"),_(),m(25,"label",19)(26,"input",20),he("ngModelChange",function(o){return Y(i),pe(r.userAuditLog,o)||(r.userAuditLog=o),J(o)}),_(),m(27,"span"),C(28,"Access Audit Log"),_()(),m(29,"label",19)(30,"input",21),he("ngModelChange",function(o){return Y(i),pe(r.userOrgAnalytics,o)||(r.userOrgAnalytics=o),J(o)}),_(),m(31,"span"),C(32,"Access Org Analytics"),_()(),m(33,"label",19)(34,"input",22),he("ngModelChange",function(o){return Y(i),pe(r.userUserAnalytics,o)||(r.userUserAnalytics=o),J(o)}),_(),m(35,"span"),C(36,"Access User Analytics"),_()()(),m(37,"div",17)(38,"h3",18),C(39,"File Accesses"),_(),G(40,iie,3,0,"ng-container",23)(41,oie,1,1,"ng-template",null,0,ea),_(),m(43,"div",24)(44,"button",25),C(45),_(),G(46,aie,2,0,"button",26),_()()(),m(47,"section",27)(48,"h2",11),C(49," Search Users "),_(),m(50,"div",28)(51,"input",29),he("ngModelChange",function(o){return Y(i),pe(r.searchTerm,o)||(r.searchTerm=o),J(o)}),_()(),m(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),C(57,"Name"),_(),m(58,"th",33),C(59,"Email"),_(),m(60,"th",34),C(61,"Role"),_(),m(62,"th",34),C(63,"Actions"),_()()(),m(64,"tbody",35),G(65,cie,18,5,"tr",36)(66,lie,3,0,"tr",37),_()()()()(),G(67,uie,9,1,"div",38),_()}if(t&2){let i=os(42);E(7),Q(r.orgId||"N/A"),E(3),Q(r.domainUid||"N/A"),E(),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(4),le(" ",r.editingUser?"Edit User":"Create New User"," "),E(2),de("ngModel",r.userName),E(),de("ngModel",r.userEmail),E(),F("placeholder",r.editingUser?"New Password (optional)":"Password"),de("ngModel",r.userPassword),F("required",!r.editingUser),E(),F("placeholder",r.editingUser?"Confirm New Password":"Confirm Password"),de("ngModel",r.userConfirmPassword),F("required",!r.editingUser),E(5),de("ngModel",r.userAuditLog),F("disabled",!r.adminCustomization.auditLog),E(4),de("ngModel",r.userOrgAnalytics),F("disabled",!r.adminCustomization.orgAnalytics),E(4),de("ngModel",r.userUserAnalytics),F("disabled",!r.adminCustomization.userAnalytics),E(6),F("ngIf",r.domainAssets.length===0)("ngIfElse",i),E(5),le(" ",r.editingUser?"Update User":"Create User"," "),E(),F("ngIf",r.editingUser),E(5),de("ngModel",r.searchTerm),E(14),F("ngForOf",r.filteredUsers),E(),F("ngIf",r.filteredUsers.length===0),E(),F("ngIf",r.showConfirmModal)}},dependencies:[Ye,Kt,Ze,Xs,Jt,mi,St,vo,Mt,gi,dr,Ut,Kr],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function die(n,e){if(n&1){let t=ae();m(0,"div",23)(1,"span",24),C(2),_(),m(3,"button",25),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",26),re(5,"circle",27)(6,"path",28)(7,"path",29),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function hie(n,e){if(n&1){let t=ae();m(0,"div",30)(1,"span",24),C(2),_(),m(3,"button",31),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",26),re(5,"circle",27)(6,"path",28)(7,"path",29),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function fie(n,e){if(n&1){let t=ae();m(0,"tr",32)(1,"td",33),C(2),_(),m(3,"td",17)(4,"button",34),K("click",function(){let i=Y(t).$implicit,s=O();return J(s.selectProject(i))}),C(5),_()()()}if(n&2){let t=e.$implicit,r=O();E(2),le(" ",t.name," "),E(2),F("disabled",(r.selectedProject==null?null:r.selectedProject.uid)===t.uid),E(),le(" ",(r.selectedProject==null?null:r.selectedProject.uid)===t.uid?"Selected":"Select"," ")}}function pie(n,e){n&1&&(m(0,"tr")(1,"td",35),C(2," No projects found. "),_()())}function gie(n,e){if(n&1){let t=ae();m(0,"label",59)(1,"input",60),K("change",function(i){let s=Y(t).$implicit,o=O(2).$implicit,a=O(2);return J(a.onAssetAccessChange(o.uid,s.key,i))}),_(),m(2,"span"),C(3),_()()}if(n&2){let t=e.$implicit,r=O(2).$implicit,i=O(2);E(),F("checked",i.getAssetAccessForUser(r.uid,t.key)),E(2),Q(t.key)}}function mie(n,e){n&1&&(m(0,"p",61),C(1," No assets defined for this project. "),_())}function yie(n,e){if(n&1&&(m(0,"tr",54)(1,"td",55)(2,"div",56),G(3,gie,4,2,"label",57),_(),G(4,mie,2,0,"p",58),_()()),n&2){let t=O(3);E(3),F("ngForOf",t.selectedProject.assets),E(),F("ngIf",t.selectedProject.assets.length===0)}}function _ie(n,e){if(n&1){let t=ae();ri(0),m(1,"tr",32)(2,"td",16),C(3),_(),m(4,"td",17)(5,"input",51),K("change",function(i){let s=Y(t).$implicit,o=O(2);return J(o.toggleUserAssignmentToProject(s,i))}),_()(),m(6,"td",17)(7,"button",52),K("click",function(){let i=Y(t).$implicit,s=O(2);return J(s.toggleUserAssetAccessDisplay(i.uid))}),C(8),_()()(),G(9,yie,5,2,"tr",53),ii()}if(n&2){let t=e.$implicit,r=O(2);E(3),Q(t.email),E(2),F("checked",r.isUserAssignedToProject(t)),E(3),le(" ",r.isUserAssetAccessVisible(t.uid)?"Hide Assets":"Show Assets"," "),E(),F("ngIf",r.isUserAssetAccessVisible(t.uid)&&r.selectedProject.assets.length>0)}}function vie(n,e){n&1&&(m(0,"tr")(1,"td",62),C(2," No users found. "),_()())}function wie(n,e){if(n&1){let t=ae();m(0,"section",9)(1,"h3",36),Me(),m(2,"svg",37),re(3,"path",38)(4,"circle",39)(5,"path",40)(6,"path",41),_(),C(7," Assign Users to: "),Rn(),m(8,"span",42),C(9),_(),m(10,"button",43),K("click",function(){Y(t);let i=O();return J(i.selectedProject=null)}),C(11," (Clear Project) "),_()(),m(12,"div",11)(13,"label",44),C(14,"Search Users by Email:"),_(),m(15,"input",45),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.userSearchTerm,i)||(s.userSearchTerm=i),J(i)}),_()(),m(16,"div",46)(17,"table",47)(18,"thead")(19,"tr",15)(20,"th",16),C(21,"User Email"),_(),m(22,"th",17),C(23,"Assign to Project"),_(),m(24,"th",17),C(25,"Manage Assets"),_()()(),m(26,"tbody",18),G(27,_ie,10,4,"ng-container",48)(28,vie,3,0,"tr",20),_()()(),m(29,"div",49)(30,"button",50),K("click",function(){Y(t);let i=O();return J(i.saveProjectAssignments())}),C(31," Save Project Assignments "),_()()()}if(n&2){let t=O();E(9),Q(t.selectedProject.name),E(6),de("ngModel",t.userSearchTerm),E(12),F("ngForOf",t.filteredAllDomainUsers),E(),F("ngIf",t.filteredAllDomainUsers.length===0),E(2),F("disabled",!t.selectedProject)}}function bie(n,e){if(n&1){let t=ae();m(0,"div",63)(1,"div",64)(2,"p",65),C(3),_(),m(4,"div",66)(5,"button",67),K("click",function(){Y(t);let i=O();return J(i.confirmModalAction&&i.confirmModalAction())}),C(6," Confirm "),_(),m(7,"button",68),K("click",function(){Y(t);let i=O();return J(i.showConfirmModal=!1)}),C(8," Cancel "),_()()()()}if(n&2){let t=O();E(3),Q(t.confirmModalMessage)}}var Uv=class n{constructor(e){this.firestore=e}orgId=null;domainUid=null;adminUid=null;projectsList=[];searchTermProjects="";selectedProject=null;allDomainUsers=[];allDomainUsersWithAccess=[];userSearchTerm="";tempSelectedProjectUsers=[];userAssetAccessState=new Map;expandedUserAssetAccess=new Set;message="";errorMessage="";confirmModalAction;showConfirmModal;confirmModalMessage;ngOnInit(){this.orgId=localStorage.getItem("orgId"),this.domainUid=localStorage.getItem("domainUid"),this.adminUid=localStorage.getItem("uid"),(!this.orgId||!this.domainUid)&&(this.showTemporaryMessage("Error: Organization ID or Domain ID missing from local storage. Cannot load data.",!0),console.error("OrgId or DomainUid missing from localStorage.")),this.adminUid||(this.showTemporaryMessage("Error: Admin UID missing from local storage. Audit logging may be affected.",!0),console.error("Admin UID missing from localStorage.")),this.orgId&&this.domainUid&&(this.fetchProjects(),this.fetchAllDomainUsers())}showTemporaryMessage(e,t=!1){t?(this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},5e3)):(this.message=e,setTimeout(()=>{this.message=""},5e3))}onAssetAccessChange(e,t,r){let i=r.target,s=i?i.checked:!1;this.updateAssetAccessForUser(e,t,s)}fetchProjects(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.projectsList=[];return}try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects`),t=yield an(e);this.projectsList=t.docs.map(r=>H({uid:r.id},r.data()))}catch(e){console.error("Error fetching projects:",e),this.showTemporaryMessage("Failed to load projects.",!0)}})}get filteredProjects(){if(!this.searchTermProjects)return this.projectsList;let e=this.searchTermProjects.toLowerCase();return this.projectsList.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}selectProject(e){return x(this,null,function*(){this.selectedProject=e,this.tempSelectedProjectUsers=[...e.usersWorkingOnProject||[]],this.showTemporaryMessage(`Project "${e.name}" selected for user assignment.`),yield this.loadUserAssetAccessForSelectedProject(),this.expandedUserAssetAccess.clear()})}fetchAllDomainUsers(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.allDomainUsers=[],this.allDomainUsersWithAccess=[];return}try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/users`),r=(yield an(e)).docs.map(c=>H({uid:c.id},c.data())),i=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/admins`),o=(yield an(i)).docs.map(c=>H({uid:c.id},c.data())),a=new Map;[...r,...o].forEach(c=>{a.set(c.uid,c)}),this.allDomainUsersWithAccess=Array.from(a.values()),this.allDomainUsers=this.allDomainUsersWithAccess.map(c=>({uid:c.uid,email:c.email}))}catch(e){console.error("Error fetching domain users/admins:",e),this.showTemporaryMessage("Failed to load domain users for assignment.",!0)}})}get filteredAllDomainUsers(){if(!this.userSearchTerm)return this.allDomainUsersWithAccess;let e=this.userSearchTerm.toLowerCase();return this.allDomainUsersWithAccess.filter(t=>t.email.toLowerCase().includes(e))}isUserAssignedToProject(e){return this.tempSelectedProjectUsers.some(t=>t.uid===e.uid)}toggleUserAssignmentToProject(e,t){t.target.checked?this.tempSelectedProjectUsers.some(i=>i.uid===e.uid)||this.tempSelectedProjectUsers.push(e):this.tempSelectedProjectUsers=this.tempSelectedProjectUsers.filter(i=>i.uid!==e.uid)}loadUserAssetAccessForSelectedProject(){return x(this,null,function*(){if(!this.selectedProject||!this.orgId||!this.domainUid){this.userAssetAccessState.clear();return}this.userAssetAccessState.clear();for(let e of this.allDomainUsersWithAccess){let t=new Map;this.selectedProject.assets.forEach(i=>{t.set(i.key,!1)}),(Array.isArray(e.fileAccesses)?e.fileAccesses:[]).filter(i=>i.projectId===this.selectedProject?.uid&&i.hasAccess).forEach(i=>{t.set(i.assetKey,!0)}),this.userAssetAccessState.set(e.uid,t)}})}getAssetAccessForUser(e,t){return this.userAssetAccessState.get(e)?.get(t)||!1}updateAssetAccessForUser(e,t,r){let i=this.userAssetAccessState.get(e);i?i.set(t,r):console.warn(`User map not found for UID: ${e}`)}toggleUserAssetAccessDisplay(e){this.expandedUserAssetAccess.has(e)?this.expandedUserAssetAccess.delete(e):this.expandedUserAssetAccess.add(e)}isUserAssetAccessVisible(e){return this.expandedUserAssetAccess.has(e)}saveProjectAssignments(){return x(this,null,function*(){if(!this.selectedProject||!this.orgId||!this.domainUid){this.showTemporaryMessage("Please select a project first and ensure organization/domain IDs are available.",!0);return}try{let e=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects`,this.selectedProject.uid);yield ji(e,{usersWorkingOnProject:this.tempSelectedProjectUsers}),console.log(`Project ${this.selectedProject.name} usersWorkingOnProject updated.`),this.selectedProject.usersWorkingOnProject=[...this.tempSelectedProjectUsers];for(let t of this.allDomainUsersWithAccess){let r=this.userAssetAccessState.get(t.uid),i;i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/users/${t.uid}`);let s=yield At(i);if(s.exists()||(i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/admins/${t.uid}`),s=yield At(i)),s.exists()){let o=s.data(),c=(Array.isArray(o.fileAccesses)?o.fileAccesses:[]).filter(b=>b.projectId!==this.selectedProject?.uid),l=[];r&&this.selectedProject.assets.forEach(b=>{let A=r.get(b.key)||!1;l.push({projectId:this.selectedProject.uid,assetKey:b.key,hasAccess:A})});let u=[...c,...l].filter(b=>b.hasAccess);console.log(`User ${t.email} - Combined File Accesses to save:`,u);let p=[...(Array.isArray(o.projectAssignments)?o.projectAssignments:[]).filter(b=>b.projectId!==this.selectedProject?.uid)];this.tempSelectedProjectUsers.some(b=>b.uid===t.uid)&&p.push({projectId:this.selectedProject.uid,taskIds:[]}),console.log(`User ${t.email} - Updated Project Assignments to save:`,p),yield ji(i,{fileAccesses:u,projectAssignments:p}),console.log(`Updated asset access and project assignments for user ${t.email} in project ${this.selectedProject.name}`);let w=this.allDomainUsersWithAccess.findIndex(b=>b.uid===t.uid);w>-1&&(this.allDomainUsersWithAccess[w].fileAccesses=u,this.allDomainUsersWithAccess[w].projectAssignments=p),this.adminUid&&On(this.firestore,this.adminUid,"user_asset_access_update",`${t.uid}_${this.selectedProject.uid}`,"success")}else console.warn(`User document not found for UID: ${t.uid}. Cannot update asset access or project assignments.`),this.showTemporaryMessage(`User ${t.email} not found. Asset access/project assignments not saved.`,!0)}if(yield this.fetchProjects(),this.selectedProject){let t=this.projectsList.find(r=>r.uid===this.selectedProject?.uid);t?this.selectProject(t):(this.selectedProject=null,this.userAssetAccessState.clear(),this.tempSelectedProjectUsers=[],this.expandedUserAssetAccess.clear())}this.adminUid&&this.selectedProject?.uid?On(this.firestore,this.adminUid,"project_users_assignment_complete",this.selectedProject.uid,"success"):console.warn("Admin UID or Project ID not found for audit logging."),this.showTemporaryMessage("Project and user asset assignments updated successfully!")}catch(e){console.error("Error saving project and user asset assignments:",e),this.showTemporaryMessage(`Failed to save assignments: ${e.message||"An unknown error occurred."}`,!0),this.adminUid&&this.selectedProject?.uid&&On(this.firestore,this.adminUid,"project_users_assignment_complete",this.selectedProject.uid,"failed")}})}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=Ve({type:n,selectors:[["app-project-user-assigner"]],decls:32,vars:9,consts:[[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-6","text-center","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-4xl","font-extrabold","text-custom-gradient","flex","items-center","justify-center"],[1,"text-lg","text-gray-600","mt-3"],[1,"font-semibold","text-blue-600"],[1,"font-semibold","text-pink-600"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","gap-6"],[1,"lg:w-1/2","bg-gray-100","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-2xl","font-bold","text-center","text-custom-gradient","mb-4"],[1,"mb-4"],["type","text","placeholder","Search projects by name or description...","name","searchTermProjects",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","max-h-96","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md","flex-grow"],[1,"min-w-full","bg-white","rounded-lg","overflow-hidden"],[1,"bg-gray-200","text-gray-700","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"py-3","px-6","text-center"],[1,"text-gray-800","text-sm","font-light"],["class","border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],[4,"ngIf"],["class","lg:w-1/2 bg-gray-100 p-6 rounded-xl shadow-lg border-2 border-gray-300 animate-slide-in-fade",4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 animate-slide-in-fade",4,"ngIf"],["role","alert",1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["role","alert",1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"border-b","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"py-3","px-6","text-left","whitespace-nowrap"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click","disabled"],["colspan","2",1,"py-4","text-center","text-gray-500"],[1,"text-2xl","font-bold","text-center","text-custom-gradient","mb-4","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-3","h-6","w-6","text-yellow-500"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"text-blue-600","ml-2"],[1,"ml-4","text-gray-600","hover:text-gray-800","text-sm","font-medium","transition",3,"click"],["for","userSearch",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","userSearch","placeholder","Search users by email...","name","userSearchTerm",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","max-h-96","custom-scrollbar","mb-4","border-2","border-gray-300","rounded-lg","shadow-md","flex-grow"],[1,"min-w-full","bg-white"],[4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-4"],[1,"bg-custom-gradient","text-white","font-bold","py-3","px-6","rounded-lg","border-2","border-gray-300","hover:opacity-90","active:opacity-100","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5",3,"click","disabled"],["type","checkbox",1,"form-checkbox","h-5","w-5","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500",3,"change","checked"],[1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-1","px-3","rounded-lg","text-xs","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],["class","bg-gray-50 border-b border-gray-200 animate-slide-in-fade",4,"ngIf"],[1,"bg-gray-50","border-b","border-gray-200","animate-slide-in-fade"],["colspan","3",1,"p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","border","border-gray-200","p-3","rounded-lg","bg-white","shadow-sm"],["class","flex items-center space-x-2 text-gray-700 text-sm",4,"ngFor","ngForOf"],["class","text-gray-500 text-sm mt-2",4,"ngIf"],[1,"flex","items-center","space-x-2","text-gray-700","text-sm"],["type","checkbox",1,"form-checkbox","h-4","w-4","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500",3,"change","checked"],[1,"text-gray-500","text-sm","mt-2"],["colspan","3",1,"py-4","text-center","text-gray-500"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-75","flex","items-center","justify-center","z-50","animate-slide-in-fade"],[1,"bg-white","p-6","rounded-lg","shadow-xl","max-w-sm","w-full","text-center","space-y-4","border-2","border-gray-300"],[1,"text-lg","text-gray-800","font-medium"],[1,"flex","justify-center","space-x-4"],[1,"bg-red-600","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],[1,"bg-gray-200","hover:bg-gray-300","text-gray-800","font-bold","py-2","px-4","rounded-md","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"header",1)(2,"h1",2),C(3," Project User Assignment "),_(),m(4,"p",3),C(5," Organization: "),m(6,"strong",4),C(7),_(),C(8," | Domain: "),m(9,"strong",5),C(10),_()()(),G(11,die,8,1,"div",6)(12,hie,8,1,"div",7),m(13,"main",8)(14,"section",9)(15,"h3",10),C(16," Select Project "),_(),m(17,"div",11)(18,"input",12),he("ngModelChange",function(s){return pe(r.searchTermProjects,s)||(r.searchTermProjects=s),s}),_()(),m(19,"div",13)(20,"table",14)(21,"thead")(22,"tr",15)(23,"th",16),C(24,"Project Name"),_(),m(25,"th",17),C(26,"Actions"),_()()(),m(27,"tbody",18),G(28,fie,6,3,"tr",19)(29,pie,3,0,"tr",20),_()()()(),G(30,wie,32,5,"section",21),_(),G(31,bie,9,1,"div",22),_()),t&2&&(E(7),Q(r.orgId||"N/A"),E(3),Q(r.domainUid||"N/A"),E(),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(6),de("ngModel",r.searchTermProjects),E(10),F("ngForOf",r.filteredProjects),E(),F("ngIf",r.filteredProjects.length===0),E(),F("ngIf",r.selectedProject),E(),F("ngIf",r.showConfirmModal))},dependencies:[Ye,Kt,Ze,Jt,St,Mt,Ut],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function Cie(n,e){if(n&1){let t=ae();m(0,"div",15)(1,"span",16),C(2),_(),m(3,"button",17),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",18),re(5,"circle",19)(6,"path",20)(7,"path",21),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function Eie(n,e){if(n&1){let t=ae();m(0,"div",22)(1,"span",16),C(2),_(),m(3,"button",23),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",18),re(5,"circle",19)(6,"path",20)(7,"path",21),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function Iie(n,e){n&1&&(m(0,"div",24),re(1,"div",25),m(2,"span",26),C(3,"Loading user data..."),_()())}function Die(n,e){n&1&&(m(0,"div",27),C(1," User data not found or not logged in. Please ensure you are logged in. "),_())}function xie(n,e){if(n&1&&(m(0,"li",47)(1,"span",48),C(2),_(),m(3,"a",49),C(4," Access File "),Me(),m(5,"svg",50),re(6,"path",51)(7,"polyline",52)(8,"line",53),_()()()),n&2){let t=e.$implicit;E(2),Q(t.assetKey),E(),F("href",t.url,dc)}}function Tie(n,e){if(n&1&&(m(0,"div",44)(1,"ul",45),G(2,xie,9,2,"li",46),_()()),n&2){let t=O(2);E(2),F("ngForOf",t.filteredAccessibleFiles)}}function Aie(n,e){n&1&&(m(0,"p",54),C(1," No files currently accessible to you for the selected project. "),_())}function Sie(n,e){if(n&1){let t=ae();m(0,"button",58),K("click",function(){let i=Y(t).$implicit,s=O(3);return J(s.selectProject(i.uid))}),C(1),_()}if(n&2){let t=e.$implicit,r=O(3);Gt("active",(r.selectedProjectForTasks==null?null:r.selectedProjectForTasks.uid)===t.uid),E(),le(" ",t.name," ")}}function Mie(n,e){if(n&1){let t=ae();m(0,"button",75),K("click",function(){Y(t);let i=O().$implicit,s=O(5);return J(s.updateTaskStatus(s.selectedProjectForTasks.uid,i.id,s.getTempTaskStatus(i.id)))}),C(1," Update "),_()}if(n&2){let t=O().$implicit,r=O(5);F("disabled",!r.hasPendingStatusChange(t.id,t.status))}}function Pie(n,e){if(n&1&&(m(0,"p",76),C(1),_()),n&2){let t=O().$implicit,r=O(5);E(),le(" Assigned To: ",r.getAssignedToEmails(t.assignedTo)," ")}}function kie(n,e){n&1&&(m(0,"p",77),C(1," No one assigned. "),_())}function Rie(n,e){if(n&1){let t=ae();m(0,"li",63)(1,"div",64)(2,"span",65),C(3),_(),m(4,"div",66)(5,"select",67),K("ngModelChange",function(i){let s=Y(t).$implicit,o=O(5);return J(o.onTaskStatusChange(s.id,i))}),m(6,"option",68),C(7,"Not Yet Started"),_(),m(8,"option",69),C(9,"In Progress"),_(),m(10,"option",70),C(11,"Completed"),_()(),G(12,Mie,2,1,"button",71),_()(),m(13,"p",72),C(14),bn(15,"date"),_(),G(16,Pie,2,1,"p",73)(17,kie,2,0,"p",74),_()}if(n&2){let t=e.$implicit,r=O(5);E(3),Q(t.description),E(2),F("ngModel",r.getTempTaskStatus(t.id)),E(7),F("ngIf",r.hasPendingStatusChange(t.id,t.status)),E(2),le("Due: ",pc(15,6,t.dueDate.toDate(),"mediumDate")),E(2),F("ngIf",t.assignedTo&&t.assignedTo.length>0),E(),F("ngIf",!t.assignedTo||t.assignedTo.length===0)}}function Fie(n,e){if(n&1&&(m(0,"div")(1,"ul",61),G(2,Rie,18,9,"li",62),_()()),n&2){let t=O(4);E(2),F("ngForOf",t.selectedProjectForTasks.tasks)}}function Nie(n,e){n&1&&(m(0,"p",78),C(1,"No tasks found for this project."),_())}function Uie(n,e){if(n&1&&(m(0,"div",59)(1,"h3",60),C(2),_(),G(3,Fie,3,1,"div",43)(4,Nie,2,0,"ng-template",null,1,ea),_()),n&2){let t=os(5),r=O(3);E(2),le(" Tasks for ",r.selectedProjectForTasks.name," "),E(),F("ngIf",r.selectedProjectForTasks.tasks.length>0)("ngIfElse",t)}}function Oie(n,e){if(n&1&&(m(0,"div")(1,"div",55),G(2,Sie,2,3,"button",56),_(),G(3,Uie,6,3,"div",57),_()),n&2){let t=O(2);E(2),F("ngForOf",t.userProjects),E(),F("ngIf",t.selectedProjectForTasks)}}function Lie(n,e){n&1&&(m(0,"p",78),C(1,"You are not assigned to any projects yet."),_())}function Vie(n,e){if(n&1&&(m(0,"main",28)(1,"section",29)(2,"h2",30),Me(),m(3,"svg",31),re(4,"path",32)(5,"polyline",33)(6,"line",34)(7,"line",35)(8,"line",36),_(),C(9," My Accessible Files (for selected project) "),_(),G(10,Tie,3,1,"div",37)(11,Aie,2,0,"p",38),_(),Rn(),m(12,"section",39)(13,"h2",30),Me(),m(14,"svg",31),re(15,"path",40)(16,"path",41)(17,"path",42),_(),C(18," My Projects & Tasks "),_(),G(19,Oie,4,2,"div",43)(20,Lie,2,0,"ng-template",null,0,ea),_()()),n&2){let t=os(21),r=O();E(10),F("ngIf",r.filteredAccessibleFiles.length>0),E(),F("ngIf",r.filteredAccessibleFiles.length===0),E(8),F("ngIf",r.userProjects.length>0)("ngIfElse",t)}}var Ov=class n{constructor(e){this.firestore=e}orgId=null;domainUid=null;uid=null;currentUser=null;loading=!0;message="";errorMessage="";allAccessibleFiles=[];filteredAccessibleFiles=[];userProjects=[];selectedProjectForTasks=null;projectsMap=new Map;pendingTaskStatusChanges=new Map;ngOnInit(){if(this.orgId=localStorage.getItem("orgId"),this.domainUid=localStorage.getItem("domainUid"),this.uid=localStorage.getItem("uid"),!this.orgId||!this.domainUid||!this.uid){this.showTemporaryMessage("Error: Organization ID, Domain ID, or User UID missing from local storage. Please log in.",!0),this.loading=!1;return}this.fetchUserDataAndProjects()}showTemporaryMessage(e,t=!1){t?(this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},5e3)):(this.message=e,setTimeout(()=>{this.message=""},5e3))}getAssignedToEmails(e){return!e||e.length===0?"N/A":e.map(t=>t.email).join(", ")}fetchUserDataAndProjects(){return x(this,null,function*(){this.loading=!0;try{let e=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/users/${this.uid}`),t=yield At(e);t.exists()||(e=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/admins/${this.uid}`),t=yield At(e)),t.exists()?(this.currentUser=H({uid:t.id},t.data()),console.log("Fetched Current User:",this.currentUser),yield this.fetchUserAssignedProjects(),yield this.processAllAccessibleFiles(),this.userProjects.length>0&&this.selectProject(this.userProjects[0].uid)):(this.showTemporaryMessage("User document not found. Please ensure your account exists or you are logged in correctly.",!0),this.currentUser=null)}catch(e){console.error("Error fetching user data or projects:",e),this.showTemporaryMessage("Failed to load dashboard data. Please try again or contact support.",!0)}finally{this.loading=!1}})}fetchUserAssignedProjects(){return x(this,null,function*(){if(!this.currentUser||!this.orgId||!this.domainUid){this.userProjects=[];return}let e=new Set(this.currentUser.projectAssignments?.map(r=>r.projectId)||[]),t=[];for(let r of Array.from(e)){if(this.projectsMap.has(r)){t.push(this.projectsMap.get(r));continue}try{let i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects/${r}`),s=yield At(i);if(s.exists()){let o=H({uid:s.id},s.data());t.push(o),this.projectsMap.set(r,o)}else console.warn(`Project document not found for ID: ${r}. It might have been deleted.`)}catch(i){console.error(`Error fetching project ${r}:`,i)}}this.userProjects=t,console.log("User Assigned Projects:",this.userProjects)})}processAllAccessibleFiles(){return x(this,null,function*(){if(this.allAccessibleFiles=[],!this.currentUser||!this.orgId||!this.domainUid)return;let e=Array.isArray(this.currentUser.fileAccesses)?this.currentUser.fileAccesses:[];for(let t of e)if(t.hasAccess){let r;if(this.projectsMap.has(t.projectId))r=this.projectsMap.get(t.projectId);else try{let i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects/${t.projectId}`),s=yield At(i);s.exists()&&(r=H({uid:s.id},s.data()),this.projectsMap.set(t.projectId,r))}catch(i){console.error(`Error fetching project ${t.projectId} for file access:`,i)}if(r){let i=r.assets.find(s=>s.key===t.assetKey);i?this.allAccessibleFiles.push({projectId:t.projectId,assetKey:i.key,url:i.url}):console.warn(`Asset '${t.assetKey}' not found in project '${r.name}' (${r.uid}). It might have been removed.`)}}console.log("All Accessible Files:",this.allAccessibleFiles),this.selectedProjectForTasks&&this.filterAccessibleFilesForSelectedProject(this.selectedProjectForTasks.uid)})}filterAccessibleFilesForSelectedProject(e){this.filteredAccessibleFiles=this.allAccessibleFiles.filter(t=>t.projectId===e),console.log(`Filtered Accessible Files for project ${e}:`,this.filteredAccessibleFiles)}selectProject(e){this.selectedProjectForTasks=this.userProjects.find(t=>t.uid===e)||null,this.selectedProjectForTasks?(this.showTemporaryMessage(`Viewing tasks for project: ${this.selectedProjectForTasks.name}`),this.filterAccessibleFilesForSelectedProject(e),this.pendingTaskStatusChanges.clear()):(this.showTemporaryMessage("Project not found or no tasks to display.",!0),this.filteredAccessibleFiles=[],this.pendingTaskStatusChanges.clear())}onTaskStatusChange(e,t){this.pendingTaskStatusChanges.set(e,t),console.log(`Pending status for task ${e}: ${t}`)}getTempTaskStatus(e){return this.pendingTaskStatusChanges.get(e)||this.selectedProjectForTasks?.tasks.find(t=>t.id===e)?.status||"not yet started"}hasPendingStatusChange(e,t){let r=this.pendingTaskStatusChanges.get(e);return r!==void 0&&r!==t}updateTaskStatus(e,t,r){return x(this,null,function*(){if(!this.orgId||!this.domainUid||!this.uid){this.showTemporaryMessage("Missing organization, domain, or user ID for task update.",!0);return}try{let i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects/${e}`),s=yield At(i);if(s.exists()){let a=s.data().tasks.map(c=>c.id===t?ue(H({},c),{status:r}):c);yield ji(i,{tasks:a}),yield this.refreshProjectData(e),this.pendingTaskStatusChanges.delete(t),this.showTemporaryMessage(`Task status updated to '${r}' successfully!`),On(this.firestore,this.uid,"task_status_update",`${e}_${t}`,"success")}else this.showTemporaryMessage("Project not found for task update.",!0),On(this.firestore,this.uid,"task_status_update",`${e}_${t}`,"failed")}catch(i){console.error("Error updating task status:",i),this.showTemporaryMessage(`Failed to update task status: ${i.message||"An unknown error occurred."}`,!0),On(this.firestore,this.uid,"task_status_update",`${e}_${t}`,"failed")}})}refreshProjectData(e){return x(this,null,function*(){if(!this.orgId||!this.domainUid){console.warn("Cannot refresh project data: Missing organization or domain ID.");return}try{let t=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects/${e}`),r=yield At(t);if(r.exists()){let i=H({uid:r.id},r.data());this.userProjects=this.userProjects.map(s=>s.uid===e?i:s),this.selectedProjectForTasks?.uid===e&&(this.selectedProjectForTasks=H({},i)),this.projectsMap.set(e,i),console.log(`Project ${e} data refreshed from database.`)}else console.warn(`Project ${e} not found during refresh. It might have been deleted.`),this.userProjects=this.userProjects.filter(i=>i.uid!==e),this.selectedProjectForTasks?.uid===e&&(this.selectedProjectForTasks=null,this.filteredAccessibleFiles=[]),this.projectsMap.delete(e)}catch(t){console.error(`Error refreshing project ${e} data:`,t),this.showTemporaryMessage(`Failed to refresh project data for ${e}.`,!0)}})}getTaskStatusClass(e){switch(e){case"not yet started":return"bg-gray-500 text-white";case"in progress":return"bg-blue-500 text-white";case"completed":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=Ve({type:n,selectors:[["app-user-dashboard"]],decls:24,vars:9,consts:[["noProjects",""],["noTasks",""],[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-6","text-center","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-4xl","font-extrabold","text-custom-gradient","flex","items-center","justify-center"],[1,"text-lg","text-gray-600","mt-3"],[1,"font-semibold","text-blue-600"],[1,"text-sm","text-gray-500","mt-1"],[1,"font-semibold","text-pink-600"],[1,"font-semibold","text-gray-700"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md","role","alert",4,"ngIf"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","text-yellow-700 text-center text-lg mb-4 p-4 bg-yellow-50 border border-yellow-300 rounded-md shadow-md",4,"ngIf"],["class","grid grid-cols-1 lg:grid-cols-2 gap-6",4,"ngIf"],["role","alert",1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["role","alert",1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"flex","justify-center","items-center","py-8"],[1,"loader-spinner","mr-3"],[1,"text-gray-600","font-medium"],[1,"text-yellow-700","text-center","text-lg","mb-4","p-4","bg-yellow-50","border","border-yellow-300","rounded-md","shadow-md"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-gray-100","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-2xl","font-bold","text-blue-600","mb-4","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2","h-6","w-6","text-yellow-500"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","10","y2","9"],["class","overflow-y-auto max-h-60 custom-scrollbar rounded-lg border-2 border-gray-300 shadow-md",4,"ngIf"],["class","text-gray-600 text-center py-4 bg-gray-50 border border-gray-200 rounded-md shadow-sm mt-4",4,"ngIf"],[1,"bg-gray-100","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade","flex","flex-col"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 19V3"],["d","M6 8h12"],[4,"ngIf","ngIfElse"],[1,"overflow-y-auto","max-h-60","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md"],[1,"space-y-3","p-3"],["class","bg-white p-3 rounded-md flex items-center justify-between border border-gray-200 shadow-sm hover:bg-gray-50 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],[1,"bg-white","p-3","rounded-md","flex","items-center","justify-between","border","border-gray-200","shadow-sm","hover:bg-gray-50","transition","duration-150","ease-in-out"],[1,"font-medium","text-gray-800"],["target","_blank",1,"text-blue-600","hover:underline","flex","items-center","text-sm","transition","duration-150","ease-in-out","transform","hover:scale-105",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"ml-1","h-4","w-4"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],[1,"text-gray-600","text-center","py-4","bg-gray-50","border","border-gray-200","rounded-md","shadow-sm","mt-4"],[1,"flex","flex-wrap","border-b-2","border-gray-300","mb-4","-mx-2"],["class","tab-button mx-2 mb-2",3,"active","click",4,"ngFor","ngForOf"],["class","tab-content custom-scrollbar overflow-y-auto max-h-80",4,"ngIf"],[1,"tab-button","mx-2","mb-2",3,"click"],[1,"tab-content","custom-scrollbar","overflow-y-auto","max-h-80"],[1,"text-xl","font-semibold","text-custom-gradient","mb-4"],[1,"space-y-4"],["class","bg-gray-50 p-4 rounded-md shadow-md border border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],[1,"bg-gray-50","p-4","rounded-md","shadow-md","border","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","items-center","space-x-2"],[1,"bg-white","text-gray-900","p-1","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","border-2","border-gray-300","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["value","not yet started",1,"bg-white","text-gray-900"],["value","in progress",1,"bg-white","text-gray-900"],["value","completed",1,"bg-white","text-gray-900"],["class","bg-custom-gradient hover:opacity-90 active:opacity-100 text-white font-bold py-1 px-3 rounded-md text-sm transition duration-300 ease-in-out transform hover:-translate-y-0.5",3,"disabled","click",4,"ngIf"],[1,"text-gray-600","text-sm","mb-2"],["class","text-gray-600 text-xs",4,"ngIf"],["class","text-gray-500 text-xs",4,"ngIf"],[1,"bg-custom-gradient","hover:opacity-90","active:opacity-100","text-white","font-bold","py-1","px-3","rounded-md","text-sm","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5",3,"click","disabled"],[1,"text-gray-600","text-xs"],[1,"text-gray-500","text-xs"],[1,"text-gray-600","text-center","py-4","bg-gray-50","border","border-gray-200","rounded-md","shadow-sm"]],template:function(t,r){t&1&&(m(0,"div",2)(1,"header",3)(2,"h1",4),C(3," User Dashboard "),_(),m(4,"p",5),C(5," Welcome, "),m(6,"strong",6),C(7),_(),C(8,"! "),_(),m(9,"p",7),C(10," Org: "),m(11,"span",6),C(12),_(),C(13," | Domain: "),m(14,"span",8),C(15),_(),C(16," | UID: "),m(17,"span",9),C(18),_()()(),G(19,Cie,8,1,"div",10)(20,Eie,8,1,"div",11)(21,Iie,4,0,"div",12)(22,Die,2,0,"div",13)(23,Vie,22,4,"main",14),_()),t&2&&(E(7),Q((r.currentUser==null?null:r.currentUser.email)||"User"),E(5),Q(r.orgId||"N/A"),E(3),Q(r.domainUid||"N/A"),E(3),Q(r.uid||"N/A"),E(),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(),F("ngIf",r.loading),E(),F("ngIf",!r.loading&&!r.currentUser&&!r.errorMessage),E(),F("ngIf",r.currentUser&&!r.loading))},dependencies:[Ye,Kt,Ze,Pi,Jt,Av,Sv,od,Mt,Ut],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:3px solid rgba(0,0,0,.1);border-top:3px solid #FF1493;border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}.tab-button[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:.5rem .5rem 0 0;background-color:#e5e7eb;color:#6b7280;font-weight:600;transition:all .2s ease-in-out;border-bottom:2px solid transparent;cursor:pointer;border-top:1px solid #d1d5db;border-left:1px solid #d1d5db;border-right:1px solid #d1d5db}.tab-button.active[_ngcontent-%COMP%]{background-color:#fff;color:#1f2937;border-color:#ff1493;border-bottom-color:transparent}.tab-button[_ngcontent-%COMP%]:hover:not(.active){background-color:#d1d5db;color:#374151}.tab-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 .5rem .5rem;padding:1.5rem;min-height:200px;border:2px solid #d1d5db;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}']})};function Bie(n,e){if(n&1){let t=ae();m(0,"div",9)(1,"span",10),C(2),_(),m(3,"button",11),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",12),re(5,"circle",13)(6,"path",14)(7,"path",15),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function jie(n,e){if(n&1){let t=ae();m(0,"div",16)(1,"span",10),C(2),_(),m(3,"button",17),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",12),re(5,"circle",13)(6,"path",14)(7,"path",15),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function $ie(n,e){n&1&&(m(0,"div",18),re(1,"div",19),m(2,"span",20),C(3,"Loading data..."),_()())}function Hie(n,e){n&1&&(m(0,"span"),C(1,"Search User"),_())}function zie(n,e){n&1&&(m(0,"span",32),re(1,"div",33),m(2,"span"),C(3,"Searching..."),_()())}function Wie(n,e){if(n&1){let t=ae();m(0,"div",34)(1,"h4",35),C(2,"User Details:"),_(),m(3,"p",36)(4,"strong"),C(5,"UID:"),_(),m(6,"span",37),C(7),_()(),m(8,"p",38)(9,"strong"),C(10,"Email:"),_(),m(11,"span",37),C(12),_()(),m(13,"button",39),K("click",function(){Y(t);let i=O(2);return J(i.selectUserForAnalytics(i.foundUser,!0))}),C(14," Show User Analytics "),_()()}if(n&2){let t=O(2);E(7),Q(t.foundUser.uid),E(5),Q(t.foundUser.email)}}function qie(n,e){n&1&&(m(0,"p",40),C(1,"User not found in the specified domain."),_())}function Gie(n,e){if(n&1){let t=ae();m(0,"section",21)(1,"h3",22),C(2,"Search User by UID in any Domain"),_(),m(3,"div")(4,"label",23),C(5,"Domain ID:"),_(),m(6,"input",24),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.searchDomainUid,i)||(s.searchDomainUid=i),J(i)}),_()(),m(7,"div")(8,"label",25),C(9,"User UID:"),_(),m(10,"input",26),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.searchUserUid,i)||(s.searchUserUid=i),J(i)}),_()(),m(11,"button",27),K("click",function(){Y(t);let i=O();return J(i.searchUserByUid())}),G(12,Hie,2,0,"span",28)(13,zie,4,0,"span",29),_(),G(14,Wie,15,2,"div",30)(15,qie,2,0,"p",31),_()}if(n&2){let t=O();E(6),de("ngModel",t.searchDomainUid),E(4),de("ngModel",t.searchUserUid),E(),F("disabled",t.loading),E(),F("ngIf",!t.loading),E(),F("ngIf",t.loading),E(),F("ngIf",t.foundUser),E(),F("ngIf",t.searchAttempted&&!t.foundUser&&!t.loading)}}function Kie(n,e){if(n&1){let t=ae();m(0,"tr",50)(1,"td",51),C(2),_(),m(3,"td",52),C(4),_(),m(5,"td",47)(6,"button",53),K("click",function(i){let s=Y(t).$implicit;return O(2).selectUserForAnalytics(s),J(i.stopPropagation())}),C(7," View Analytics "),_()()()}if(n&2){let t=e.$implicit,r=O(2);Gt("cursor-pointer",!0)("bg-blue-50",(r.selectedUserForAnalytics==null?null:r.selectedUserForAnalytics.uid)===t.uid),E(2),Q(t.email),E(2),Q(t.uid)}}function Yie(n,e){n&1&&(m(0,"tr")(1,"td",54),C(2,"No users found in this domain."),_()())}function Jie(n,e){if(n&1){let t=ae();m(0,"section",41)(1,"h3",22),C(2,"All Users in Your Domain"),_(),m(3,"div")(4,"input",42),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.filterTermUsers,i)||(s.filterTermUsers=i),J(i)}),_()(),m(5,"div",43)(6,"table",44)(7,"thead")(8,"tr",45)(9,"th",46),C(10,"User Email"),_(),m(11,"th",46),C(12,"UID"),_(),m(13,"th",47),C(14,"Actions"),_()()(),m(15,"tbody",48),G(16,Kie,8,6,"tr",49)(17,Yie,3,0,"tr",28),_()()()()}if(n&2){let t=O();E(4),de("ngModel",t.filterTermUsers),E(12),F("ngForOf",t.filteredDomainUsers),E(),F("ngIf",t.filteredDomainUsers.length===0)}}function Qie(n,e){if(n&1&&(m(0,"li",82)(1,"span",83),C(2),_(),m(3,"span",84),C(4),_()()),n&2){let t=e.$implicit;E(2),le("",t.monthYearLabel,":"),E(2),le("",t.count," tasks")}}function Zie(n,e){if(n&1&&(m(0,"div",79)(1,"ul",80),G(2,Qie,5,2,"li",81),_()()),n&2){let t=O(3);E(2),F("ngForOf",t.monthlyCompletionData)}}function Xie(n,e){n&1&&(m(0,"p",85),C(1,"No completed tasks in the last 12 months."),_())}function ese(n,e){if(n&1&&(m(0,"div",62)(1,"div",63)(2,"h4",64),C(3,"Projects & Tasks Assigned"),_(),m(4,"p",65),C(5),_(),m(6,"p",66),C(7,"Projects Assigned"),_(),m(8,"p",67),C(9),_(),m(10,"p",66),C(11,"Tasks Assigned"),_()(),m(12,"div",68)(13,"h4",69),C(14,"Task Status Breakdown"),_(),m(15,"div",70)(16,"div",71)(17,"span"),C(18,"Completed:"),_(),m(19,"span",72),C(20),bn(21,"number"),_()(),m(22,"div",73)(23,"span"),C(24,"In Progress:"),_(),m(25,"span",72),C(26),_()(),m(27,"div",74)(28,"span"),C(29,"Not Yet Started:"),_(),m(30,"span",72),C(31),_()()(),m(32,"div",75),re(33,"div",76),_()(),m(34,"div",77)(35,"h4",69),C(36,"Monthly Task Completion (Last 12 Months)"),_(),G(37,Zie,3,1,"div",78)(38,Xie,2,0,"ng-template",null,0,ea),_()()),n&2){let t=os(39),r=O(2);E(5),Q(r.projectsAssignedCount),E(4),Q(r.tasksAssignedCount),E(11),Zl("",r.completedTasksCount," (",pc(21,10,r.taskCompletionPercentage,"1.0-0"),"%)"),E(6),Q(r.inProgressTasksCount),E(5),Q(r.notYetStartedTasksCount),E(2),Ql("width",r.taskCompletionPercentage+"%"),E(4),F("ngIf",r.monthlyCompletionData.length>0)("ngIfElse",t)}}function tse(n,e){n&1&&(m(0,"div",86),C(1," No analytics data available for this user. "),_())}function nse(n,e){n&1&&(m(0,"div",87),re(1,"div",19),m(2,"span",88),C(3,"Loading analytics..."),_()())}function rse(n,e){if(n&1){let t=ae();m(0,"section",55)(1,"h3",56),C(2),_(),m(3,"button",57),K("click",function(){Y(t);let i=O();return i.selectedUserForAnalytics=null,J(i.resetAnalyticsData())}),C(4," Hide Analytics "),_(),re(5,"div",58),G(6,ese,40,13,"div",59)(7,tse,2,0,"div",60)(8,nse,4,0,"div",61),_()}if(n&2){let t=O();E(2),le("Analytics for ",t.selectedUserForAnalytics.email),E(4),F("ngIf",t.analyticsDataAvailable),E(),F("ngIf",!t.analyticsDataAvailable&&!t.loading),E(),F("ngIf",t.loading)}}var ad=class n{constructor(e){this.firestore=e}orgId=null;userRole=null;domainUid=null;searchDomainUid="";searchUserUid="";foundUser=null;searchAttempted=!1;allDomainUsers=[];filterTermUsers="";selectedUserForAnalytics=null;analyticsDataAvailable=!1;loading=!1;projectsAssignedCount=0;tasksAssignedCount=0;completedTasksCount=0;inProgressTasksCount=0;notYetStartedTasksCount=0;taskCompletionPercentage=0;monthlyCompletionData=[];message="";errorMessage="";ngOnInit(){this.orgId=localStorage.getItem("orgId"),this.userRole=localStorage.getItem("userRole"),this.domainUid=localStorage.getItem("domainUid"),this.orgId||this.showTemporaryMessage("Error: Organization ID missing from local storage. Cannot fetch user data.",!0),this.userRole||this.showTemporaryMessage("Error: User role missing from local storage. Functionality may be limited.",!0),(this.userRole==="admin"||this.userRole==="user")&&this.fetchAllUsersInDomain()}showTemporaryMessage(e,t=!1){t?(this.errorMessage=e,this.message="",setTimeout(()=>{this.errorMessage=""},5e3)):(this.message=e,this.errorMessage="",setTimeout(()=>{this.message=""},5e3))}resetAnalyticsData(){this.projectsAssignedCount=0,this.tasksAssignedCount=0,this.completedTasksCount=0,this.inProgressTasksCount=0,this.notYetStartedTasksCount=0,this.taskCompletionPercentage=0,this.monthlyCompletionData=[],this.analyticsDataAvailable=!1}searchUserByUid(){return x(this,null,function*(){if(this.foundUser=null,this.searchAttempted=!0,this.errorMessage="",this.message="",this.selectedUserForAnalytics=null,this.resetAnalyticsData(),!this.orgId){this.showTemporaryMessage("Organization ID is missing. Cannot perform search.",!0);return}if(!this.searchDomainUid){this.showTemporaryMessage("Please enter a Domain ID to search.",!0);return}if(!this.searchUserUid){this.showTemporaryMessage("Please enter a User UID to search.",!0);return}this.loading=!0;try{let e=null,t=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.searchDomainUid}/users`,this.searchUserUid),r=yield At(t);if(r.exists())e={uid:r.id,email:r.data().email};else{let i=Fe(this.firestore,`organizations/${this.orgId}/domain/${this.searchDomainUid}/admins`,this.searchUserUid),s=yield At(i);s.exists()&&(e={uid:s.id,email:s.data().email})}this.foundUser=e,this.foundUser?this.showTemporaryMessage("User found successfully!"):this.showTemporaryMessage("User not found in the specified domain.",!0)}catch(e){console.error("Error searching user by UID:",e),this.showTemporaryMessage(`Failed to search user: ${e.message||"An unknown error occurred."}`,!0)}finally{this.loading=!1}})}fetchAllUsersInDomain(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.allDomainUsers=[],this.showTemporaryMessage("Organization ID or Domain ID missing. Cannot list users.",!0);return}this.loading=!0;try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/users`),r=(yield an(e)).docs.map(c=>({uid:c.id,email:c.data().email})),i=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/admins`),o=(yield an(i)).docs.map(c=>({uid:c.id,email:c.data().email})),a=new Map;[...r,...o].forEach(c=>{a.set(c.uid,c)}),this.allDomainUsers=Array.from(a.values())}catch(e){console.error("Error fetching all users in domain:",e),this.showTemporaryMessage(`Failed to load domain users: ${e.message||"An unknown error occurred."}`,!0)}finally{this.loading=!1}})}get filteredDomainUsers(){if(!this.filterTermUsers)return this.allDomainUsers;let e=this.filterTermUsers.toLowerCase();return this.allDomainUsers.filter(t=>t.email.toLowerCase().includes(e))}selectUserForAnalytics(e,t=!1){return x(this,null,function*(){this.selectedUserForAnalytics=e,this.resetAnalyticsData(),this.errorMessage="",this.message="";let r=this.orgId,i=t?this.searchDomainUid:this.domainUid;if(!r||!i||!e.uid){this.showTemporaryMessage("Missing organization, domain, or user ID to fetch analytics data.",!0);return}this.loading=!0,this.showTemporaryMessage(`Fetching analytics for ${e.email}...`);try{let s=0,o=0,a=0,c=0,l=0,u={},h=It(this.firestore,`organizations/${r}/domain/${i}/projects`),f=fi(h,gv("usersWorkingOnProject","array-contains",{uid:e.uid,email:e.email}));(yield an(f)).forEach(b=>{let A=b.data();s++,A.tasks.forEach(P=>{if(P.assignedTo.some(V=>V.uid===e.uid)&&(o++,P.status==="completed"?a++:P.status==="in progress"?c++:P.status==="not yet started"&&l++,P.status==="completed"&&P.createdAt instanceof lt)){let V=P.createdAt.toDate(),B=V.getFullYear(),$=V.getMonth(),S=`${B}-${($+1).toString().padStart(2,"0")}`;u[S]=(u[S]||0)+1}})}),this.projectsAssignedCount=s,this.tasksAssignedCount=o,this.completedTasksCount=a,this.inProgressTasksCount=c,this.notYetStartedTasksCount=l,this.taskCompletionPercentage=o>0?a/o*100:0;let y=new Date,w=[];for(let b=11;b>=0;b--){let A=new Date(y.getFullYear(),y.getMonth()-b,1),P=`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}`,U=A.toLocaleString("default",{month:"short",year:"numeric"});w.push({monthYear:P,monthYearLabel:U,count:u[P]||0})}this.monthlyCompletionData=w.filter(b=>b.count>0),this.monthlyCompletionData.length===0&&o>0&&(this.monthlyCompletionData=w),this.analyticsDataAvailable=!0,s===0&&o===0?this.showTemporaryMessage(`No project or task data found for ${e.email}.`,!1):this.showTemporaryMessage(`Analytics loaded for ${e.email}.`)}catch(s){console.error("Error fetching user analytics data:",s),this.showTemporaryMessage(`Failed to load analytics for user: ${s.message||"An unknown error occurred."}`,!0),this.analyticsDataAvailable=!1}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=Ve({type:n,selectors:[["app-user-lookup"]],decls:8,vars:6,consts:[["noMonthlyData",""],[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],[1,"rounded-xl","space-y-10"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","animate-slide-in-fade p-6 space-y-6",4,"ngIf"],["class","animate-slide-in-fade p-6 bg-gray-100 rounded-lg border-2 border-gray-300 shadow-inner space-y-6",4,"ngIf"],["class","mt-8 bg-gray-100 p-8 rounded-xl shadow-lg border-2 border-gray-300 animate-slide-in-fade",4,"ngIf"],[1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],[1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"flex","justify-center","items-center","py-8"],[1,"loader-spinner","mr-3"],[1,"text-gray-600","font-medium"],[1,"animate-slide-in-fade","p-6","space-y-6"],[1,"text-2xl","font-bold","text-custom-gradient","text-center"],["for","searchDomainUid",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","searchDomainUid","name","searchDomainUid","placeholder","Enter Domain UID (e.g., domain123)","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],["for","searchUserUid",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["type","text","id","searchUserUid","name","searchUserUid","placeholder","Enter User UID (e.g., user456)","required","",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"w-full","bg-custom-gradient","text-white","font-semibold","py-3","px-6","rounded-lg","border-2","border-gray-300","hover:opacity-90","active:opacity-100","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","space-x-2",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","mt-6 p-6 bg-white rounded-lg border-2 border-gray-300 shadow-md animate-slide-in-fade",4,"ngIf"],["class","mt-4 text-red-600 text-center font-medium",4,"ngIf"],[1,"flex","items-center","space-x-2"],[1,"loader-spinner"],[1,"mt-6","p-6","bg-white","rounded-lg","border-2","border-gray-300","shadow-md","animate-slide-in-fade"],[1,"text-xl","font-bold","text-green-600","mb-3","text-custom-gradient"],[1,"text-gray-700","mb-1"],[1,"break-all","font-mono","text-gray-800"],[1,"text-gray-700"],[1,"mt-6","bg-custom-gradient","text-white","font-bold","py-2.5","px-5","rounded-lg","transition","duration-300","ease-in-out","transform","hover:scale-105",3,"click"],[1,"mt-4","text-red-600","text-center","font-medium"],[1,"animate-slide-in-fade","p-6","bg-gray-100","rounded-lg","border-2","border-gray-300","shadow-inner","space-y-6"],["type","text","placeholder","Filter users by email...","name","filterTermUsers",1,"w-full","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","max-h-96","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md"],[1,"min-w-full","bg-white","rounded-lg","overflow-hidden"],[1,"bg-gray-200","text-gray-700","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"py-3","px-6","text-center"],[1,"text-gray-800","text-sm","font-light"],["class","border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",3,"cursor-pointer","bg-blue-50",4,"ngFor","ngForOf"],[1,"border-b","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"py-3","px-6","text-left","break-all"],[1,"py-3","px-6","text-left","break-all","font-mono"],[1,"bg-purple-600","hover:bg-purple-700","text-white","font-bold","py-1.5","px-3","rounded-lg","text-sm","transition","duration-300","ease-in-out","transform","hover:scale-105",3,"click"],["colspan","3",1,"py-4","text-center","text-gray-500"],[1,"mt-8","bg-gray-100","p-8","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-3xl","font-bold","text-custom-gradient","mb-6","text-center"],[1,"bg-red-600","hover:bg-red-700","text-white","font-bold","py-2.5","px-5","rounded-lg","mb-6","float-right","transition","duration-300","ease-in-out","transform","hover:scale-105",3,"click"],[1,"clear-both"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",4,"ngIf"],["class","text-center text-gray-600 mt-6 font-medium",4,"ngIf"],["class","flex justify-center items-center mt-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mt-4"],[1,"bg-white","p-6","rounded-lg","shadow-md","text-center","border-2","border-gray-200","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"text-xl","font-semibold","text-blue-600","mb-3"],[1,"text-5xl","font-extrabold","text-custom-gradient"],[1,"text-gray-600","mt-1"],[1,"text-5xl","font-extrabold","text-custom-gradient","mt-4"],[1,"bg-white","p-6","rounded-lg","shadow-md","border-2","border-gray-200","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"text-xl","font-semibold","text-blue-600","mb-3","text-center"],[1,"space-y-3","mt-4","text-lg"],[1,"flex","justify-between","items-center","text-green-700","font-medium"],[1,"font-bold"],[1,"flex","justify-between","items-center","text-yellow-700","font-medium"],[1,"flex","justify-between","items-center","text-gray-700","font-medium"],[1,"h-5","w-full","bg-gray-300","rounded-full","mt-6","overflow-hidden","shadow-inner"],[1,"h-full","bg-green-500","rounded-full","transition-all","duration-500","ease-in-out"],[1,"bg-white","p-6","rounded-lg","shadow-md","border-2","border-gray-200","lg:col-span-1","md:col-span-2","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],["class","overflow-y-auto max-h-48 custom-scrollbar mt-4",4,"ngIf","ngIfElse"],[1,"overflow-y-auto","max-h-48","custom-scrollbar","mt-4"],[1,"list-none","p-0","m-0"],["class","flex justify-between items-center border-b border-gray-200 py-2 text-gray-700",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","border-b","border-gray-200","py-2","text-gray-700"],[1,"font-medium"],[1,"font-bold","text-gray-800"],[1,"text-center","text-gray-500","mt-4"],[1,"text-center","text-gray-600","mt-6","font-medium"],[1,"flex","justify-center","items-center","mt-6"],[1,"text-gray-600"]],template:function(t,r){t&1&&(m(0,"div",1),G(1,Bie,8,1,"div",2)(2,jie,8,1,"div",3),m(3,"main",4),G(4,$ie,4,0,"div",5)(5,Gie,16,7,"section",6)(6,Jie,18,3,"section",7)(7,rse,9,4,"section",8),_()()),t&2&&(E(),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(2),F("ngIf",r.loading&&!r.selectedUserForAnalytics),E(),F("ngIf",r.userRole==="root"&&!r.loading),E(),F("ngIf",(r.userRole==="admin"||r.userRole==="user")&&!r.loading),E(),F("ngIf",r.selectedUserForAnalytics))},dependencies:[Ye,Kt,Ze,wD,Jt,St,Mt,dr,Ut],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function ise(n,e){if(n&1&&(m(0,"p",6),C(1," Domain Name: "),m(2,"span",7),C(3),_()()),n&2){let t=O();E(3),Q(t.domainNameInput)}}function sse(n,e){if(n&1&&(m(0,"p",8),C(1," Organization ID: "),m(2,"span",9),C(3),_()()),n&2){let t=O();E(3),Q(t.orgIdInput)}}function ose(n,e){if(n&1&&(m(0,"p",8),C(1," Domain UID: "),m(2,"span",10),C(3),_()()),n&2){let t=O();E(3),Q(t.domainUidInput)}}var Lv=class n{role="";domainNameInput="";userDepartment="";userEmail="";domainUidInput="";orgIdInput="";ngOnInit(){this.orgIdInput=localStorage.getItem("orgId"),this.domainUidInput=localStorage.getItem("domainUid"),this.userEmail=localStorage.getItem("useremail"),this.domainNameInput=localStorage.getItem("userDepartment"),console.log(`ItDashboardComponent loaded for ${this.domainNameInput} (Org: ${this.orgIdInput}, DomainUID: ${this.domainUidInput})`)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-it-dashboard"]],decls:9,vars:3,consts:[[1,"text-gray-800","font-poppins","p-4","sm:p-6","verflow-hidden"],[1,"p-6","text-gray-800","mt-4","border-gray-300","animate-slide-in-fade"],[1,"text-3xl","font-extrabold","text-custom-gradient","mb-4","flex","items-center"],[1,"text-lg","text-gray-700"],["class","text-md mt-3 text-gray-600",4,"ngIf"],["class","text-md text-gray-600",4,"ngIf"],[1,"text-md","mt-3","text-gray-600"],[1,"font-semibold","text-blue-600"],[1,"text-md","text-gray-600"],[1,"font-semibold","text-pink-600"],[1,"font-semibold","text-gray-700"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h2",2),C(3," Welcome to the IT Department Dashboard! "),_(),m(4,"p",3),C(5,"This content is specific to the IT domain."),_(),G(6,ise,4,1,"p",4)(7,sse,4,1,"p",5)(8,ose,4,1,"p",5),_()()),t&2&&(E(6),F("ngIf",r.domainNameInput),E(),F("ngIf",r.orgIdInput),E(),F("ngIf",r.domainUidInput))},dependencies:[Ye,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function ase(n,e){if(n&1){let t=ae();m(0,"div",20)(1,"span",21),C(2),_(),m(3,"button",22),K("click",function(){Y(t);let i=O();return J(i.message="")}),Me(),m(4,"svg",23),re(5,"circle",24)(6,"path",25)(7,"path",26),_()()()}if(n&2){let t=O();E(2),Q(t.message)}}function cse(n,e){if(n&1){let t=ae();m(0,"div",27)(1,"span",21),C(2),_(),m(3,"button",28),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(4,"svg",23),re(5,"circle",24)(6,"path",25)(7,"path",26),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}function lse(n,e){n&1&&(m(0,"li",29),C(1,"Expense Approval Queue (Admin/Manager Access)"),_())}function use(n,e){n&1&&(m(0,"li",30),C(1,"Full Financial Control (Root Access)"),_())}function dse(n,e){if(n&1&&(m(0,"p",17),C(1,"Department: "),m(2,"span",31),C(3),bn(4,"titlecase"),_()()),n&2){let t=O();E(3),Q(si(4,1,t.userDepartment))}}function hse(n,e){if(n&1&&(m(0,"p",32),C(1,"Specific Permissions: "),m(2,"span",33),C(3),_()()),n&2){let t=O();E(3),Q(t.financePermissions.join(", "))}}function fse(n,e){n&1&&(m(0,"p",32),C(1,"No specific finance permissions assigned beyond standard department access."),_())}var Vv=class n{userName="";userRole="";userDepartment="";financePermissions=[];message=null;errorMessage=null;closed=new xt;ngOnInit(){this.userName=localStorage.getItem("useremail")||"Guest",this.userRole=localStorage.getItem("userRole")||"",this.userDepartment=localStorage.getItem("userDepartment")||"";let e=localStorage.getItem("customization");if(e)try{let t=JSON.parse(e);t&&t.financePermissions&&Array.isArray(t.financePermissions)?this.financePermissions=t.financePermissions:t&&t.permissions&&Array.isArray(t.permissions)&&(this.financePermissions=t.permissions.filter(r=>r.startsWith("finance_")))}catch(t){console.error("Error parsing customization from localStorage",t),this.errorMessage="Failed to load user permissions."}console.log(`FinanceDashboardComponent loaded for ${this.userName} (Role: ${this.userRole}, Dept: ${this.userDepartment}, Permissions: ${this.financePermissions.join(", ")})`)}closeComponent(){this.closed.emit()}hasPermission(e){return this.financePermissions.includes(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-finance-dashboard"]],outputs:{closed:"closed"},decls:35,vars:11,consts:[[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-xl","border-2","border-gray-300","text-gray-800","font-poppins","animate-slide-in-fade"],[1,"text-3xl","font-extrabold","text-custom-gradient","mb-4","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-3","h-8","w-8","text-yellow-500"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z"],["d","m15 9-3 3-3-3"],["d","M12 12V3"],[1,"text-gray-700","mb-4"],[1,"font-semibold","text-blue-600"],["class","bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],[1,"text-xl","font-semibold","text-blue-600","mt-6","mb-3"],[1,"list-disc","list-inside","space-y-2","text-gray-700","p-4","bg-gray-50","rounded-md","border","border-gray-200","shadow-sm"],[1,"hover:text-gray-900","transition","duration-150","ease-in-out"],["class","text-yellow-700 font-medium hover:text-yellow-900 transition duration-150 ease-in-out",4,"ngIf"],["class","text-red-700 font-medium hover:text-red-900 transition duration-150 ease-in-out",4,"ngIf"],[1,"mt-6","p-4","bg-gray-50","rounded-md","border-2","border-gray-200","shadow-sm"],[1,"text-gray-600","text-sm","mb-1"],["class","text-gray-600 text-sm mb-1",4,"ngIf"],["class","text-gray-600 text-sm",4,"ngIf"],[1,"bg-green-100","border","border-green-300","text-green-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"block","sm:inline","font-medium"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-green-600","hover:text-green-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],[1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],[1,"text-yellow-700","font-medium","hover:text-yellow-900","transition","duration-150","ease-in-out"],[1,"text-red-700","font-medium","hover:text-red-900","transition","duration-150","ease-in-out"],[1,"font-semibold","text-pink-600"],[1,"text-gray-600","text-sm"],[1,"font-semibold","text-gray-700"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"h3",2),Me(),m(3,"svg",3),re(4,"path",4)(5,"path",5)(6,"path",6),_(),C(7," Finance Department Dashboard "),_(),Rn(),m(8,"p",7),C(9," Welcome, "),m(10,"span",8),C(11),_(),C(12,"! Here's your personalized finance overview. "),_(),G(13,ase,8,1,"div",9)(14,cse,8,1,"div",10),m(15,"h4",11),C(16,"Your Access:"),_(),m(17,"ul",12)(18,"li",13),C(19,"Budget Reports Access"),_(),m(20,"li",13),C(21,"Financial Projections"),_(),G(22,lse,2,0,"li",14)(23,use,2,0,"li",15),m(24,"li",13),C(25,"Submit Reimbursement Request"),_()(),m(26,"div",16)(27,"p",17),C(28,"Your detected role: "),m(29,"span",8),C(30),bn(31,"titlecase"),_()(),G(32,dse,5,3,"p",18)(33,hse,4,1,"p",19)(34,fse,2,0,"p",19),_()()()),t&2&&(E(11),Q(r.userName||"Guest"),E(2),F("ngIf",r.message),E(),F("ngIf",r.errorMessage),E(8),F("ngIf",r.userRole==="admin"||r.hasPermission("approve_expenses")),E(),F("ngIf",r.userRole==="root"||r.hasPermission("full_financial_control")),E(7),Q(si(31,9,r.userRole)),E(2),F("ngIf",r.userDepartment),E(),F("ngIf",r.financePermissions.length>0),E(),F("ngIf",r.financePermissions.length===0&&r.userDepartment==="Finance"))},dependencies:[Ye,Ze,Xs],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}','@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};var pse=(n,e,t)=>({"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":n,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800":e,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800":t});function gse(n,e){n&1&&(m(0,"div",6),re(1,"div",7),m(2,"p",8),C(3,"Loading audit log entries..."),_()())}function mse(n,e){if(n&1){let t=ae();m(0,"div",9)(1,"strong",10),C(2,"Error!"),_(),m(3,"span",11),C(4),_(),m(5,"button",12),K("click",function(){Y(t);let i=O();return J(i.errorMessage="")}),Me(),m(6,"svg",13),re(7,"circle",14)(8,"path",15)(9,"path",16),_()()()}if(n&2){let t=O();E(4),Q(t.errorMessage)}}function yse(n,e){if(n&1&&(m(0,"tr",23)(1,"td",24),C(2),_(),m(3,"td",25),C(4),_(),m(5,"td",24),C(6),_(),m(7,"td",26),C(8),_(),m(9,"td",27)(10,"span",28),C(11),_()()()),n&2){let t=e.$implicit;E(2),Q(t.timestampIST),E(2),Q(t.action),E(2),Q(t.actorUid),E(2),Q(t.resource),E(2),F("ngClass",Oh(6,pse,t.status==="success",t.status==="failed",t.status==="no_data")),E(),le(" ",t.status," ")}}function _se(n,e){if(n&1&&(m(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr")(4,"th",20),C(5,"Timestamp (IST)"),_(),m(6,"th",20),C(7,"Action"),_(),m(8,"th",20),C(9,"Actor UID"),_(),m(10,"th",20),C(11,"Resource"),_(),m(12,"th",20),C(13,"Status"),_()()(),m(14,"tbody",21),G(15,yse,12,10,"tr",22),_()()()),n&2){let t=O();E(15),F("ngForOf",t.auditLogs)}}function vse(n,e){n&1&&(m(0,"div",29)(1,"p",30),C(2,"No audit logs found for this organization."),_(),m(3,"p",31),C(4,"Ensure your `orgId` is correctly set in `localStorage` and audit actions are being logged."),_()())}var cd=class n{constructor(e){this.firestore=e}auditLogs=[];isLoading=!1;errorMessage=null;orgId=null;unsubscribeFromFirestore;ngOnInit(){if(this.isLoading=!0,this.orgId=localStorage.getItem("orgId"),!this.orgId){this.errorMessage="Organization ID not found in local storage. Cannot fetch audit logs.",this.isLoading=!1,console.error("[AuditLogViewerComponent] Organization ID is missing. Cannot fetch audit logs.");return}console.log(`[AuditLogViewerComponent] Setting up real-time audit log listener for organization ID: ${this.orgId}`),this.setupAuditLogListener()}ngOnDestroy(){console.log("[AuditLogViewerComponent] Component destroyed. Unsubscribing from audit log listener."),this.unsubscribeFromFirestore&&this.unsubscribeFromFirestore()}setupAuditLogListener(){if(!this.orgId){this.errorMessage="Organization ID is unavailable. Cannot set up audit log listener.",this.isLoading=!1;return}let e=It(this.firestore,`organizations/${this.orgId}/auditlogs`),t=fi(e);this.unsubscribeFromFirestore=sj(t,r=>{r.empty?(console.log("[AuditLogViewerComponent] No audit logs found for this organization."),this.errorMessage="No audit logs found for your organization.",this.auditLogs=[]):(this.auditLogs=r.docs.map(i=>({logId:i.id,action:i.data().action||"N/A",actorUid:i.data().actorUid||"N/A",resource:i.data().resource||"N/A",status:i.data().status||"N/A",timestampIST:i.data().timestampIST||"N/A"})),console.log(`[AuditLogViewerComponent] Fetched ${this.auditLogs.length} audit logs via real-time listener.`),this.auditLogs.sort((i,s)=>{let o=l=>{let[u,h]=l.split(", "),[f,p,y]=u.split("/");return new Date(parseInt(y),parseInt(p)-1,parseInt(f),parseInt(h.substring(0,2)),parseInt(h.substring(3,5)),parseInt(h.substring(6,8)))},a=o(i.timestampIST);return o(s.timestampIST).getTime()-a.getTime()}),this.errorMessage=null),this.isLoading=!1},r=>{this.errorMessage=`Error setting up audit log listener: ${r.message||"An unknown error occurred."}`,this.isLoading=!1,console.error("[AuditLogViewerComponent] Error in real-time listener:",r)})}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=Ve({type:n,selectors:[["app-audit-log-viewer"]],decls:6,vars:4,consts:[[1,"min-h-screen","bg-gray-50","text-gray-800","font-poppins","p-4","sm:p-6","rounded-xl","overflow-hidden"],[1,"container","mx-auto","animate-slide-in-fade"],["class","flex flex-col items-center justify-center p-8 bg-gray-100 rounded-lg border-2 border-gray-200 shadow-inner",4,"ngIf"],["class","bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded relative mb-4 shadow-md",4,"ngIf"],["class","overflow-x-auto rounded-lg border-2 border-gray-300 shadow-md custom-scrollbar",4,"ngIf"],["class","text-center text-gray-600 p-6 bg-gray-100 rounded-lg border-2 border-gray-200 shadow-inner",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","p-8","bg-gray-100","rounded-lg","border-2","border-gray-200","shadow-inner"],[1,"loader-spinner"],[1,"mt-4","text-gray-600","font-medium"],[1,"bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded","relative","mb-4","shadow-md"],[1,"font-bold"],[1,"block","sm:inline","ml-2"],["type","button",1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer","text-red-600","hover:text-red-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-6","w-6"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],[1,"overflow-x-auto","rounded-lg","border-2","border-gray-300","shadow-md","custom-scrollbar"],[1,"min-w-full","rounded-lg","overflow-hidden"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-semibold","text-gray-700","uppercase","tracking-wider"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],[1,"hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-800","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-800","font-medium"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold"],[1,"border","border-opacity-50",3,"ngClass"],[1,"text-center","text-gray-600","p-6","bg-gray-100","rounded-lg","border-2","border-gray-200","shadow-inner"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2","text-gray-500"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1),G(2,gse,4,0,"div",2)(3,mse,10,1,"div",3)(4,_se,16,1,"div",4)(5,vse,5,0,"div",5),_()()),t&2&&(E(2),F("ngIf",r.isLoading),E(),F("ngIf",r.errorMessage),E(),F("ngIf",!r.isLoading&&r.auditLogs.length>0),E(),F("ngIf",!r.isLoading&&r.auditLogs.length===0&&!r.errorMessage))},dependencies:[Ye,Br,Kt,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:3px solid rgba(0,0,0,.1);border-top:3px solid #FF1493;border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};function wse(n,e){if(n&1){let t=ae();m(0,"div",3)(1,"span",4),C(2),_(),m(3,"button",5),K("click",function(){Y(t);let i=O();return J(i.errorMessage=null)}),Me(),m(4,"svg",6),re(5,"circle",7)(6,"path",8)(7,"path",9),_()()()}if(n&2){let t=O();E(2),Q(t.errorMessage)}}var Bv=class n{constructor(e,t){this.auth=e;this.router=t}errorMessage=null;signOut(){return x(this,null,function*(){this.errorMessage=null;try{yield bV(this.auth),console.log("User signed out successfully."),localStorage.clear(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e),this.errorMessage=`Sign out failed: ${e.message||"An unknown error occurred."}`}})}static \u0275fac=function(t){return new(t||n)(X(yn),X(ci))};static \u0275cmp=Ve({type:n,selectors:[["app-sign-out-button"]],decls:4,vars:1,consts:[[1,"flex","justify-center","items-center","p-4"],[1,"bg-red-600","hover:bg-red-700","text-white","font-bold","py-3","px-6","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105","shadow-md","border-2","border-gray-300","animate-slide-in-fade",3,"click"],["class","fixed bottom-4 right-4 bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded-lg shadow-lg z-50",4,"ngIf"],[1,"fixed","bottom-4","right-4","bg-red-100","border","border-red-300","text-red-800","px-4","py-3","rounded-lg","shadow-lg","z-50"],[1,"block","sm:inline","font-medium"],["type","button",1,"ml-4","text-red-600","hover:text-red-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-5","w-5"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"button",1),K("click",function(){return r.signOut()}),C(2," Sign Out "),_()(),G(3,wse,8,1,"div",2)),t&2&&(E(3),F("ngIf",r.errorMessage))},dependencies:[Ye,Ze],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}']})};var Lj="@firebase/database",Vj="1.0.19";var t2="";function bse(n){t2=n}var cS=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nn(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:vu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var lS=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ni(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var v4=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cS(e)}}catch{}return new lS},qc=v4("localStorage"),uS=v4("sessionStorage");var dd=new Dr("@firebase/database"),Cse=function(){let n=1;return function(){return n++}}(),w4=function(n){let e=GO(n),t=new Ry;t.update(e);let r=t.digest();return wu.encodeByteArray(r)},Bp=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bp.apply(null,r):typeof r=="object"?e+=nn(r):e+=r,e+=" "}return e},Kc=null,Bj=!0,Ese=function(n,e){Z(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(dd.logLevel=Ue.VERBOSE,Kc=dd.log.bind(dd),e&&uS.set("logging_enabled",!0)):typeof n=="function"?Kc=n:(Kc=null,uS.remove("logging_enabled"))},Qn=function(...n){if(Bj===!0&&(Bj=!1,Kc===null&&uS.get("logging_enabled")===!0&&Ese(!0)),Kc){let e=Bp.apply(null,n);Kc(e)}},jp=function(n){return function(...e){Qn(n,...e)}},dS=function(...n){let e="FIREBASE INTERNAL ERROR: "+Bp(...n);dd.error(e)},wo=function(...n){let e=`FIREBASE FATAL ERROR: ${Bp(...n)}`;throw dd.error(e),new Error(e)},Ar=function(...n){let e="FIREBASE WARNING: "+Bp(...n);dd.warn(e)},Ise=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ar("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},n2=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Dse=function(n){if(hs()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Jc="[MIN_NAME]",Ea="[MAX_NAME]",_d=function(n,e){if(n===e)return 0;if(n===Jc||e===Ea)return-1;if(e===Jc||n===Ea)return 1;{let t=jj(n),r=jj(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},xse=function(n,e){return n===e?0:n<e?-1:1},bp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+nn(e))},r2=function(n){if(typeof n!="object"||n===null)return nn(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=nn(e[r]),t+=":",t+=r2(n[e[r]]);return t+="}",t},b4=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Sr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var C4=function(n){Z(!n2(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),h="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Tse=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ase=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sse(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var Mse=new RegExp("^-?(0*)\\d{1,10}$"),Pse=-2147483648,kse=2147483647,jj=function(n){if(Mse.test(n)){let e=Number(n);if(e>=Pse&&e<=kse)return e}return null},vd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ar("Exception was thrown by user callback.",t),e},Math.floor(0))}},Rse=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xp=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var hS=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Gn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ar(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var fS=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Qn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ar(e)}},Tp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),$v="5",E4="v",I4="s",D4="r",x4="f",T4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A4="ls",S4="p",pS="ac",M4="websocket",P4="long_polling";var Hv=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Fse(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function k4(n,e,t){Z(typeof e=="string","typeof type must == string"),Z(typeof t=="object","typeof params must == object");let r;if(e===M4)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===P4)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Fse(n)&&(t.ns=n.namespace);let i=[];return Sr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var gS=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ni(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return LO(this.counters_)}};var tS={},nS={};function i2(n){let e=n.toString();return tS[e]||(tS[e]=new gS),tS[e]}function Nse(n,e){let t=n.toString();return nS[t]||(nS[t]=e()),nS[t]}var mS=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var $j="start",Use="close",Ose="pLPCommand",Lse="pRTLPCB",R4="id",F4="pw",N4="ser",Vse="cb",Bse="seg",jse="ts",$se="d",Hse="dframe",U4=1870,O4=30,zse=U4-O4,Wse=25e3,qse=3e4,yS=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jp(e),this.stats_=i2(t),this.urlFn=c=>(this.appCheckToken&&(c[pS]=this.appCheckToken),k4(t,P4,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new mS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qse)),Dse(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _S((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$j)this.id=a,this.password=c;else if(o===Use)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[$j]="t",r[N4]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Vse]=this.scriptTagHolder.uniqueCallbackIdentifier),r[E4]=$v,this.transportSessionId&&(r[I4]=this.transportSessionId),this.lastSessionId&&(r[A4]=this.lastSessionId),this.applicationId&&(r[S4]=this.applicationId),this.appCheckToken&&(r[pS]=this.appCheckToken),typeof location<"u"&&location.hostname&&T4.test(location.hostname)&&(r[D4]=x4);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return hs()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Tse()&&!Ase()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=ox(t),i=b4(r,zse);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(hs())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Hse]="t",r[R4]=e,r[F4]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=nn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},_S=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,hs())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Cse(),window[Ose+this.uniqueCallbackIdentifier]=e,window[Lse+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qn("frame writing exception"),a.stack&&Qn(a.stack),Qn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[R4]=this.myID,e[F4]=this.myPW,e[N4]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+O4+r.length<=U4;){let o=this.pendingSegs.shift();r=r+"&"+Bse+i+"="+o.seg+"&"+jse+i+"="+o.ts+"&"+$se+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Wse)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){hs()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Gse=16384,Kse=45e3,zv=null;typeof MozWebSocket<"u"?zv=MozWebSocket:typeof WebSocket<"u"&&(zv=WebSocket);var Cp=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jp(this.connId),this.stats_=i2(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[E4]=$v,!hs()&&typeof location<"u"&&location.hostname&&T4.test(location.hostname)&&(a[D4]=x4),r&&(a[I4]=r),i&&(a[A4]=i),s&&(a[pS]=s),o&&(a[S4]=o),k4(t,M4,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qc.set("previous_websocket_failure",!0);try{let i;if(hs()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${$v}/${t2}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new zv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&zv!==null&&!n.forceDisallow_}static previouslyFailed(){return qc.isInMemoryStorage||qc.get("previous_websocket_failure")===!0}markConnectionHealthy(){qc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=vu(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Z(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=nn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=b4(r,Gse);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Kse))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),Yse=(()=>{class n{static get ALL_TRANSPORTS(){return[yS,Cp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Cp&&Cp.isAvailable(),i=r&&!Cp.previouslyFailed();if(t.webSocketOnly&&(r||Ar("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cp];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),Jse=6e4,Qse=5e3,Zse=10*1024,Xse=100*1024,rS="t",Hj="d",eoe="s",zj="r",toe="e",Wj="o",qj="a",Gj="n",Kj="p",noe="h",vS=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jp("c:"+this.id+":"),this.transportManager_=new Yse(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Xse?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(rS in e){let t=e[rS];t===qj?this.upgradeIfSecondaryHealthy_():t===zj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Wj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=bp("t",e),r=bp("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Kj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=bp("t",e),r=bp("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=bp(rS,e);if(Hj in e){let r=e[Hj];if(t===noe){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===Gj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===eoe?this.onConnectionShutdown_(r):t===zj?this.onReset_(r):t===toe?dS("Server Error: "+r):t===Wj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dS("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$v!==r&&Ar("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Qse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Kj,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Wv=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var qv=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Z(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Gv=class n extends qv{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Df()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Yj=32,Jj=768,st=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function tt(){return new st("")}function Be(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ia(n){return n.pieces_.length-n.pieceNum_}function bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new st(n.pieces_,e)}function L4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function roe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function V4(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function B4(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new st(e,0)}function _n(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof st)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new st(t,0)}function je(n){return n.pieceNum_>=n.pieces_.length}function hr(n,e){let t=Be(n),r=Be(e);if(t===null)return e;if(t===r)return hr(bt(n),bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function s2(n,e){if(Ia(n)!==Ia(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Hi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ia(n)>Ia(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var wS=class{constructor(e,t){this.errorPrefix_=t,this.parts_=V4(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Mf(this.parts_[r]);j4(this)}};function ioe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Mf(e),j4(n)}function soe(n){let e=n.parts_.pop();n.byteLength_-=Mf(e),n.parts_.length>0&&(n.byteLength_-=1)}function j4(n){if(n.byteLength_>Jj)throw new Error(n.errorPrefix_+"has a key path longer than "+Jj+" bytes ("+n.byteLength_+").");if(n.parts_.length>Yj)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yj+") or object contains a cycle "+Wc(n))}function Wc(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var bS=class n extends qv{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Z(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ep=1e3,ooe=60*5*1e3,Qj=30*1e3,aoe=1.3,coe=3e4,loe="server_kill",Zj=3,o2=(()=>{class n extends Wv{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=jp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ep,this.maxReconnectDelay_=ooe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!hs())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bS.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Gv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(nn(o)),Z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Ri,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Z(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Ni(t,"w")){let i=Ec(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ar(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||WO(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qj)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=zO(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+nn(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):dS("Unrecognized action received from server: "+nn(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ep,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ep,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>coe&&(this.reconnectDelay_=Ep),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aoe)}this.onConnectStatus_(!1)}establishConnection_(){return x(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){Z(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,p]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Qn("getToken() completed but was canceled"):(Qn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new vS(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,y=>{Ar(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(loe)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Ar(f),l())}}})}interrupt(t){Qn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Af(this.interruptReasons_)&&(this.reconnectDelay_=Ep,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>r2(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new st(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Qn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zj&&(this.reconnectDelay_=Qj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";hs()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+t2.replace(/\./g,"-")]=1,Df()?t["framework.cordova"]=1:Oy()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Gv.getInstance().currentlyOnline();return Af(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),$e=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var hd=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new $e(Jc,e),i=new $e(Jc,t);return this.compare(r,i)!==0}minPost(){return $e.MIN}};var jv,Kv=class extends hd{static get __EMPTY_NODE(){return jv}static set __EMPTY_NODE(e){jv=e}compare(e,t){return _d(e.name,t.name)}isDefinedOn(e){throw Cc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $e.MIN}maxPost(){return new $e(Ea,jv)}makePost(e,t){return Z(typeof e=="string","KeyIndex indexValue must always be a string."),new $e(e,jv)}toString(){return".key"}},Yc=new Kv;var ud=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},$i=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??_i.EMPTY_NODE,this.right=o??_i.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _i.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return _i.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),CS=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new $i(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_i=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$i.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$i.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ud(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ud(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ud(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ud(this.root_,null,this.comparator_,!0,e)}};_i.EMPTY_NODE=new CS;function uoe(n,e){return _d(n.name,e.name)}function a2(n,e){return _d(n,e)}var ES;function doe(n){ES=n}var $4=function(n){return typeof n=="number"?"number:"+C4(n):"string:"+n},H4=function(n){if(n.isLeafNode()){let e=n.val();Z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ni(e,".sv"),"Priority must be a string or number.")}else Z(n===ES||n.isEmpty(),"priority of unexpected type.");Z(n===ES||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Xj,fd=(()=>{class n{static set __childrenNodeConstructor(t){Xj=t}static get __childrenNodeConstructor(){return Xj}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),H4(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return je(t)?this:Be(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Be(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Z(i!==".priority"||Ia(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$4(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=C4(this.value_):t+=this.value_,this.lazyHash_=w4(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return Z(s>=0,"Unknown leaf type: "+r),Z(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),z4,W4;function hoe(n){z4=n}function foe(n){W4=n}var IS=class extends hd{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?_d(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $e.MIN}maxPost(){return new $e(Ea,new fd("[PRIORITY-POST]",W4))}makePost(e,t){let r=z4(e);return new $e(t,new fd("[PRIORITY-POST]",r))}toString(){return".priority"}},Ot=new IS;var poe=Math.log(2),DS=class{constructor(e){let t=s=>parseInt(Math.log(s)/poe,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Yv=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,h,f;if(u===0)return null;if(u===1)return h=n[c],f=t?t(h):h,new $i(f,h.node,$i.BLACK,null,null);{let p=parseInt(u/2,10)+c,y=i(c,p),w=i(p+1,l);return h=n[p],f=t?t(h):h,new $i(f,h.node,$i.BLACK,y,w)}},s=function(c){let l=null,u=null,h=n.length,f=function(y,w){let b=h-y,A=h;h-=y;let P=i(b+1,A),U=n[b],V=t?t(U):U;p(new $i(V,U.node,w,null,P))},p=function(y){l?(l.left=y,l=y):(u=y,l=y)};for(let y=0;y<c.count;++y){let w=c.nextBitIsOne(),b=Math.pow(2,c.count-(y+1));w?f(b,$i.BLACK):(f(b,$i.BLACK),f(b,$i.RED))}return u},o=new DS(n.length),a=s(o);return new _i(r||e,a)};var iS,ld={},pd=class n{static get Default(){return Z(ld&&Ot,"ChildrenNode.ts has not been loaded"),iS=iS||new n({".priority":ld},{".priority":Ot}),iS}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Ec(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _i?t:null}hasIndex(e){return Ni(this.indexSet_,e.toString())}addIndex(e,t){Z(e!==Yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator($e.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Yv(r,e.getCompare()):a=ld;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=Sf(this.indexes_,(i,s)=>{let o=Ec(this.indexSet_,s);if(Z(o,"Missing index implementation for "+s),i===ld)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator($e.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Yv(a,o.getCompare())}else return ld;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new $e(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Sf(this.indexes_,i=>{if(i===ld)return i;{let s=t.get(e.name);return s?i.remove(new $e(e.name,s)):i}});return new n(r,this.indexSet_)}};var Ip,ke=(()=>{class n{static get EMPTY_NODE(){return Ip||(Ip=new n(new _i(a2),null,pd.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&H4(this.priorityNode_),this.children_.isEmpty()&&Z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ip}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Ip:r}}getChild(t){let r=Be(t);return r===null?this:this.getImmediateChild(r).getChild(bt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Z(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new $e(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ip:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Be(t);if(i===null)return r;{Z(Be(t)!==".priority"||Ia(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(bt(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ot,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+$4(this.getPriority().val())+":"),this.forEachChild(Ot,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":w4(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new $e(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new $e(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new $e(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,$e.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,$e.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$p?-1:0}withIndex(t){if(t===Yc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Yc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ot),s=r.getIterator(Ot),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Yc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),xS=class extends ke{constructor(){super(new _i(a2),ke.EMPTY_NODE,pd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ke.EMPTY_NODE}isEmpty(){return!1}},$p=new xS;Object.defineProperties($e,{MIN:{value:new $e(Jc,ke.EMPTY_NODE)},MAX:{value:new $e(Ea,$p)}});Kv.__EMPTY_NODE=ke.EMPTY_NODE;fd.__childrenNodeConstructor=ke;doe($p);foe($p);var goe=!0;function xn(n,e=null){if(n===null)return ke.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new fd(t,xn(e))}if(!(n instanceof Array)&&goe){let t=[],r=!1;if(Sr(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=xn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new $e(o,c)))}}),t.length===0)return ke.EMPTY_NODE;let s=Yv(t,uoe,o=>o.name,a2);if(r){let o=Yv(t,Ot.getCompare());return new ke(s,xn(e),new pd({".priority":o},{".priority":Ot}))}else return new ke(s,xn(e),pd.Default)}else{let t=ke.EMPTY_NODE;return Sr(n,(r,i)=>{if(Ni(n,r)&&r.substring(0,1)!=="."){let s=xn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(xn(e))}}hoe(xn);var Pp=class extends hd{constructor(e){super(),this.indexPath_=e,Z(!je(e)&&Be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?_d(e.name,t.name):s}makePost(e,t){let r=xn(e),i=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new $e(t,i)}maxPost(){let e=ke.EMPTY_NODE.updateChild(this.indexPath_,$p);return new $e(Ea,e)}toString(){return V4(this.indexPath_,0).join("/")}};var TS=class extends hd{compare(e,t){let r=e.node.compareTo(t.node);return r===0?_d(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $e.MIN}maxPost(){return $e.MAX}makePost(e,t){let r=xn(e);return new $e(t,r)}toString(){return".value"}},q4=new TS;function G4(n){return{type:"value",snapshotNode:n}}function gd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function kp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Rp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function moe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Fp=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){Z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(kp(t,a)):Z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(gd(t,r)):o.trackChildChange(Rp(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ot,(i,s)=>{t.hasChild(i)||r.trackChildChange(kp(i,s))}),t.isLeafNode()||t.forEachChild(Ot,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Rp(i,s,o))}else r.trackChildChange(gd(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ke.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Jv=class n{constructor(e){this.indexedFilter_=new Fp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new $e(t,r))||(r=ke.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ke.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ke.EMPTY_NODE);let s=this;return t.forEachChild(Ot,(o,a)=>{s.matches(new $e(o,a))||(i=i.updateImmediateChild(o,ke.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var AS=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Jv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new $e(t,r))||(r=ke.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ke.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=ke.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(ke.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ke.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();let a=e;Z(a.numChildren()===this.limit_,"");let c=new $e(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let h=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let p=f==null?1:o(f,c);if(u&&!r.isEmpty()&&p>=0)return s?.trackChildChange(Rp(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(kp(t,h));let w=a.updateImmediateChild(t,ke.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(gd(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(kp(l.name,l.node)),s.trackChildChange(gd(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,ke.EMPTY_NODE)):e}};var SS=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jc}hasEnd(){return this.endSet_}getIndexEndValue(){return Z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ea}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ot}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function yoe(n){return n.loadsAllData()?new Fp(n.getIndex()):n.hasLimit()?new AS(n):new Jv(n)}function _oe(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function voe(n,e){let t=n.copy();return t.index_=e,t}function e4(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Ot?t="$priority":n.index_===q4?t="$value":n.index_===Yc?t="$key":(Z(n.index_ instanceof Pp,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=nn(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=nn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+nn(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=nn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+nn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function t4(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ot&&(e.i=n.index_.toString()),e}var MS=class n extends Wv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jp("p:rest:"),this.listens_={}}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=e4(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(s,h,!1,r),Ec(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=e4(e._queryParams),r=e._path.toString(),i=new Ri;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ic(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vu(a.responseText)}catch{Ar("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ar("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var PS=class{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Qv(){return{value:null,children:new Map}}function K4(n,e,t){if(je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Be(e);n.children.has(r)||n.children.set(r,Qv());let i=n.children.get(r);e=bt(e),K4(i,e,t)}}function kS(n,e,t){n.value!==null?t(e,n.value):woe(n,(r,i)=>{let s=new st(e.toString()+"/"+r);kS(i,s,t)})}function woe(n,e){n.children.forEach((t,r)=>{e(r,t)})}var RS=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Sr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var n4=10*1e3,boe=30*1e3,Coe=5*60*1e3,FS=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new RS(e);let r=n4+(boe-n4)*Math.random();xp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Sr(e,(i,s)=>{s>0&&Ni(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),xp(this.reportStats_.bind(this),Math.floor(Math.random()*2*Coe))}};var Is=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Is||{});function Y4(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function c2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function l2(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var NS=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Is.ACK_USER_WRITE,this.source=Y4()}operationForChild(e){if(je(this.path)){if(this.affectedTree.value!=null)return Z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new st(e));return new n(tt(),t,this.revert)}}else return Z(Be(this.path)===e,"operationForChild called for unrelated child."),new n(bt(this.path),this.affectedTree,this.revert)}};var Zv=class n{constructor(e,t){this.source=e,this.path=t,this.type=Is.LISTEN_COMPLETE}operationForChild(e){return je(this.path)?new n(this.source,tt()):new n(this.source,bt(this.path))}};var md=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Is.OVERWRITE}operationForChild(e){return je(this.path)?new n(this.source,tt(),this.snap.getImmediateChild(e)):new n(this.source,bt(this.path),this.snap)}};var Xv=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Is.MERGE}operationForChild(e){if(je(this.path)){let t=this.children.subtree(new st(e));return t.isEmpty()?null:t.value?new md(this.source,tt(),t.value):new n(this.source,tt(),t)}else return Z(Be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ds=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(je(e))return this.isFullyInitialized()&&!this.filtered_;let t=Be(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var US=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Eoe(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(moe(o.childName,o.snapshotNode))}),Dp(n,i,"child_removed",e,r,t),Dp(n,i,"child_added",e,r,t),Dp(n,i,"child_moved",s,r,t),Dp(n,i,"child_changed",e,r,t),Dp(n,i,"value",e,r,t),i}function Dp(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>Doe(n,a,c)),o.forEach(a=>{let c=Ioe(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Ioe(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Doe(n,e,t){if(e.childName==null||t.childName==null)throw Cc("Should only compare child_ events.");let r=new $e(e.childName,e.snapshotNode),i=new $e(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function pw(n,e){return{eventCache:n,serverCache:e}}function Ap(n,e,t,r){return pw(new Ds(e,t,r),n.serverCache)}function J4(n,e,t,r){return pw(n.eventCache,new Ds(e,t,r))}function ew(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Qc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var sS,xoe=()=>(sS||(sS=new _i(xse)),sS),Mr=class n{static fromObject(e){let t=new n(null);return Sr(e,(r,i)=>{t=t.set(new st(r),i)}),t}constructor(e,t=xoe()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:tt(),value:this.value};if(je(e))return null;{let r=Be(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(bt(e),t);return s!=null?{path:_n(new st(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(je(e))return this;{let t=Be(e),r=this.children.get(t);return r!==null?r.subtree(bt(e)):new n(null)}}set(e,t){if(je(e))return new n(t,this.children);{let r=Be(e),s=(this.children.get(r)||new n(null)).set(bt(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(je(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Be(e),r=this.children.get(t);if(r){let i=r.remove(bt(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(je(e))return this.value;{let t=Be(e),r=this.children.get(t);return r?r.get(bt(e)):null}}setTree(e,t){if(je(e))return t;{let r=Be(e),s=(this.children.get(r)||new n(null)).setTree(bt(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(tt(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(_n(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,tt(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(je(e))return null;{let s=Be(e),o=this.children.get(s);return o?o.findOnPath_(bt(e),_n(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,tt(),t)}foreachOnPath_(e,t,r){if(je(e))return this;{this.value&&r(t,this.value);let i=Be(e),s=this.children.get(i);return s?s.foreachOnPath_(bt(e),_n(t,i),r):new n(null)}}foreach(e){this.foreach_(tt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_n(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var zi=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Mr(null))}};function Sp(n,e,t){if(je(e))return new zi(new Mr(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=hr(i,e);return s=s.updateChild(o,t),new zi(n.writeTree_.set(i,s))}else{let i=new Mr(t),s=n.writeTree_.setTree(e,i);return new zi(s)}}}function r4(n,e,t){let r=n;return Sr(t,(i,s)=>{r=Sp(r,_n(e,i),s)}),r}function i4(n,e){if(je(e))return zi.empty();{let t=n.writeTree_.setTree(e,new Mr(null));return new zi(t)}}function OS(n,e){return Xc(n,e)!=null}function Xc(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(hr(t.path,e)):null}function s4(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ot,(r,i)=>{e.push(new $e(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new $e(r,i.value))}),e}function ba(n,e){if(je(e))return n;{let t=Xc(n,e);return t!=null?new zi(new Mr(t)):new zi(n.writeTree_.subtree(e))}}function LS(n){return n.writeTree_.isEmpty()}function yd(n,e){return Q4(tt(),n.writeTree_,e)}function Q4(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Z(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=Q4(_n(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(_n(n,".priority"),r)),t}}function gw(n,e){return t8(e,n)}function Toe(n,e,t,r,i){Z(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sp(n.visibleWrites,e,t)),n.lastWriteId=r}function Aoe(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function Soe(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);Z(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&Moe(a,r.path)?i=!1:Hi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Poe(n),!0;if(r.snap)n.visibleWrites=i4(n.visibleWrites,r.path);else{let a=r.children;Sr(a,c=>{n.visibleWrites=i4(n.visibleWrites,_n(r.path,c))})}return!0}else return!1}function Moe(n,e){if(n.snap)return Hi(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Hi(_n(n.path,t),e))return!0;return!1}function Poe(n){n.visibleWrites=Z4(n.allWrites,koe,tt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function koe(n){return n.visible}function Z4(n,e,t){let r=zi.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Hi(t,o)?(a=hr(t,o),r=Sp(r,a,s.snap)):Hi(o,t)&&(a=hr(o,t),r=Sp(r,tt(),s.snap.getChild(a)));else if(s.children){if(Hi(t,o))a=hr(t,o),r=r4(r,a,s.children);else if(Hi(o,t))if(a=hr(o,t),je(a))r=r4(r,tt(),s.children);else{let c=Ec(s.children,Be(a));if(c){let l=c.getChild(bt(a));r=Sp(r,tt(),l)}}}else throw Cc("WriteRecord should have .snap or .children")}}return r}function X4(n,e,t,r,i){if(!r&&!i){let s=Xc(n.visibleWrites,e);if(s!=null)return s;{let o=ba(n.visibleWrites,e);if(LS(o))return t;if(t==null&&!OS(o,tt()))return null;{let a=t||ke.EMPTY_NODE;return yd(o,a)}}}else{let s=ba(n.visibleWrites,e);if(!i&&LS(s))return t;if(!i&&t==null&&!OS(s,tt()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Hi(l.path,e)||Hi(e,l.path))},a=Z4(n.allWrites,o,e),c=t||ke.EMPTY_NODE;return yd(a,c)}}}function Roe(n,e,t){let r=ke.EMPTY_NODE,i=Xc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ot,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=ba(n.visibleWrites,e);return t.forEachChild(Ot,(o,a)=>{let c=yd(ba(s,new st(o)),a);r=r.updateImmediateChild(o,c)}),s4(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ba(n.visibleWrites,e);return s4(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Foe(n,e,t,r,i){Z(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=_n(e,t);if(OS(n.visibleWrites,s))return null;{let o=ba(n.visibleWrites,s);return LS(o)?i.getChild(t):yd(o,i.getChild(t))}}function Noe(n,e,t,r){let i=_n(e,t),s=Xc(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=ba(n.visibleWrites,i);return yd(o,r.getNode().getImmediateChild(t))}else return null}function Uoe(n,e){return Xc(n.visibleWrites,e)}function Ooe(n,e,t,r,i,s,o){let a,c=ba(n.visibleWrites,e),l=Xc(c,tt());if(l!=null)a=l;else if(t!=null)a=yd(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),p=f.getNext();for(;p&&u.length<i;)h(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function Loe(){return{visibleWrites:zi.empty(),allWrites:[],lastWriteId:-1}}function tw(n,e,t,r){return X4(n.writeTree,n.treePath,e,t,r)}function u2(n,e){return Roe(n.writeTree,n.treePath,e)}function o4(n,e,t,r){return Foe(n.writeTree,n.treePath,e,t,r)}function nw(n,e){return Uoe(n.writeTree,_n(n.treePath,e))}function Voe(n,e,t,r,i,s){return Ooe(n.writeTree,n.treePath,e,t,r,i,s)}function d2(n,e,t){return Noe(n.writeTree,n.treePath,e,t)}function e8(n,e){return t8(_n(n.treePath,e),n.writeTree)}function t8(n,e){return{treePath:n,writeTree:e}}var VS=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;Z(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Z(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Rp(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,kp(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,gd(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Rp(r,e.snapshotNode,i.oldSnap));else throw Cc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var BS=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},n8=new BS,Np=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ds(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return d2(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qc(this.viewCache_),s=Voe(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function Boe(n){return{filter:n}}function joe(n,e){Z(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Z(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function $oe(n,e,t,r,i){let s=new VS,o,a;if(t.type===Is.OVERWRITE){let l=t;l.source.fromUser?o=jS(n,e,l.path,l.snap,r,i,s):(Z(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!je(l.path),o=rw(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Is.MERGE){let l=t;l.source.fromUser?o=zoe(n,e,l.path,l.children,r,i,s):(Z(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=$S(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Is.ACK_USER_WRITE){let l=t;l.revert?o=Goe(n,e,l.path,r,i,s):o=Woe(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Is.LISTEN_COMPLETE)o=qoe(n,e,t.path,r,s);else throw Cc("Unknown operation type: "+t.type);let c=s.getChanges();return Hoe(e,o,c),{viewCache:o,changes:c}}function Hoe(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ew(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(G4(ew(e)))}}function r8(n,e,t,r,i,s){let o=e.eventCache;if(nw(r,t)!=null)return e;{let a,c;if(je(t))if(Z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Qc(e),u=l instanceof ke?l:ke.EMPTY_NODE,h=u2(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let l=tw(r,Qc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Be(t);if(l===".priority"){Z(Ia(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let h=o4(r,t,u,c);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{let u=bt(t),h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=o4(r,t,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(l).updateChild(u,f):h=o.getNode().getImmediateChild(l)}else h=d2(r,l,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),l,h,u,i,s):a=o.getNode()}}return Ap(e,a,o.isFullyInitialized()||je(t),n.filter.filtersNodes())}}function rw(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(je(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=Be(t);if(!c.isCompleteForPath(t)&&Ia(t)>1)return e;let y=bt(t),b=c.getNode().getImmediateChild(p).updateChild(y,r);p===".priority"?l=u.updatePriority(c.getNode(),b):l=u.updateChild(c.getNode(),p,b,y,n8,null)}let h=J4(e,l,c.isFullyInitialized()||je(t),u.filtersNodes()),f=new Np(i,h,s);return r8(n,h,t,i,f,a)}function jS(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Np(i,e,s);if(je(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ap(e,l,!0,n.filter.filtersNodes());else{let h=Be(t);if(h===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Ap(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=bt(t),p=a.getNode().getImmediateChild(h),y;if(je(f))y=r;else{let w=u.getCompleteChild(h);w!=null?L4(f)===".priority"&&w.getChild(B4(f)).isEmpty()?y=w:y=w.updateChild(f,r):y=ke.EMPTY_NODE}if(p.equals(y))c=e;else{let w=n.filter.updateChild(a.getNode(),h,y,f,u,o);c=Ap(e,w,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function a4(n,e){return n.eventCache.isCompleteForChild(e)}function zoe(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=_n(t,c);a4(e,Be(u))&&(a=jS(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=_n(t,c);a4(e,Be(u))||(a=jS(n,a,u,l,i,s,o))}),a}function c4(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $S(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;je(t)?l=r:l=new Mr(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){let p=e.serverCache.getNode().getImmediateChild(h),y=c4(n,p,f);c=rw(n,c,new st(h),y,i,s,o,a)}}),l.children.inorderTraversal((h,f)=>{let p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){let y=e.serverCache.getNode().getImmediateChild(h),w=c4(n,y,f);c=rw(n,c,new st(h),w,i,s,o,a)}}),c}function Woe(n,e,t,r,i,s,o){if(nw(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(je(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return rw(n,e,t,c.getNode().getChild(t),i,s,a,o);if(je(t)){let l=new Mr(null);return c.getNode().forEachChild(Yc,(u,h)=>{l=l.set(new st(u),h)}),$S(n,e,t,l,i,s,a,o)}else return e}else{let l=new Mr(null);return r.foreach((u,h)=>{let f=_n(t,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),$S(n,e,t,l,i,s,a,o)}}function qoe(n,e,t,r,i){let s=e.serverCache,o=J4(e,s.getNode(),s.isFullyInitialized()||je(t),s.isFiltered());return r8(n,o,t,r,n8,i)}function Goe(n,e,t,r,i,s){let o;if(nw(r,t)!=null)return e;{let a=new Np(r,e,i),c=e.eventCache.getNode(),l;if(je(t)||Be(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=tw(r,Qc(e));else{let h=e.serverCache.getNode();Z(h instanceof ke,"serverChildren would be complete if leaf node"),u=u2(r,h)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=Be(t),h=d2(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=n.filter.updateChild(c,u,h,bt(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,ke.EMPTY_NODE,bt(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=tw(r,Qc(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||nw(r,tt())!=null,Ap(e,l,o,n.filter.filtersNodes())}}var HS=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Fp(r.getIndex()),s=yoe(r);this.processor_=Boe(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(ke.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(ke.EMPTY_NODE,a.getNode(),null),u=new Ds(c,o.isFullyInitialized(),i.filtersNodes()),h=new Ds(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=pw(h,u),this.eventGenerator_=new US(this.query_)}get query(){return this.query_}};function Koe(n){return n.viewCache_.serverCache.getNode()}function Yoe(n){return ew(n.viewCache_)}function Joe(n,e){let t=Qc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!je(e)&&!t.getImmediateChild(Be(e)).isEmpty())?t.getChild(e):null}function l4(n){return n.eventRegistrations_.length===0}function Qoe(n,e){n.eventRegistrations_.push(e)}function u4(n,e,t){let r=[];if(t){Z(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function d4(n,e,t,r){e.type===Is.MERGE&&e.source.queryId!==null&&(Z(Qc(n.viewCache_),"We should always have a full cache before handling merges"),Z(ew(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=$oe(n.processor_,i,e,t,r);return joe(n.processor_,s.viewCache),Z(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,i8(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Zoe(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ot,(s,o)=>{r.push(gd(s,o))}),t.isFullyInitialized()&&r.push(G4(t.getNode())),i8(n,r,t.getNode(),e)}function i8(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return Eoe(n.eventGenerator_,e,t,i)}var iw,sw=class{constructor(){this.views=new Map}};function Xoe(n){Z(!iw,"__referenceConstructor has already been defined"),iw=n}function eae(){return Z(iw,"Reference.ts has not been loaded"),iw}function tae(n){return n.views.size===0}function h2(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return Z(s!=null,"SyncTree gave us an op for an invalid query."),d4(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(d4(o,e,t,r));return s}}function s8(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=tw(t,i?r:null),c=!1;a?c=!0:r instanceof ke?(a=u2(t,r),c=!1):(a=ke.EMPTY_NODE,c=!1);let l=pw(new Ds(a,c,!1),new Ds(r,i,!1));return new HS(e,l)}return o}function nae(n,e,t,r,i,s){let o=s8(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),Qoe(o,t),Zoe(o,t)}function rae(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=Da(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(u4(l,t,r)),l4(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(u4(c,t,r)),l4(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Da(n)&&s.push(new(eae())(e._repo,e._path)),{removed:s,events:o}}function o8(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ca(n,e){let t=null;for(let r of n.views.values())t=t||Joe(r,e);return t}function a8(n,e){if(e._queryParams.loadsAllData())return mw(n);{let r=e._queryIdentifier;return n.views.get(r)}}function c8(n,e){return a8(n,e)!=null}function Da(n){return mw(n)!=null}function mw(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ow;function iae(n){Z(!ow,"__referenceConstructor has already been defined"),ow=n}function sae(){return Z(ow,"Reference.ts has not been loaded"),ow}var oae=1,aw=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mr(null),this.pendingWriteTree_=Loe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function l8(n,e,t,r,i){return Toe(n.pendingWriteTree_,e,t,r,i),i?zp(n,new md(Y4(),e,t)):[]}function Gc(n,e,t=!1){let r=Aoe(n.pendingWriteTree_,e);if(Soe(n.pendingWriteTree_,e)){let s=new Mr(null);return r.snap!=null?s=s.set(tt(),!0):Sr(r.children,o=>{s=s.set(new st(o),!0)}),zp(n,new NS(r.path,s,t))}else return[]}function Hp(n,e,t){return zp(n,new md(c2(),e,t))}function aae(n,e,t){let r=Mr.fromObject(t);return zp(n,new Xv(c2(),e,r))}function cae(n,e){return zp(n,new Zv(c2(),e))}function lae(n,e,t){let r=p2(n,t);if(r){let i=g2(r),s=i.path,o=i.queryId,a=hr(s,e),c=new Zv(l2(o),a);return m2(n,s,c)}else return[]}function cw(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||c8(o,e))){let c=rae(o,e,t,r);tae(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(s,(f,p)=>Da(p));if(u&&!h){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let p=hae(f);for(let y=0;y<p.length;++y){let w=p[y],b=w.query,A=f8(n,w);n.listenProvider_.startListening(Mp(b),Up(n,b),A.hashFn,A.onComplete)}}}!h&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(Mp(e),null):l.forEach(f=>{let p=n.queryToTagMap.get(yw(f));n.listenProvider_.stopListening(Mp(f),p)}))}fae(n,l)}return a}function u8(n,e,t,r){let i=p2(n,r);if(i!=null){let s=g2(i),o=s.path,a=s.queryId,c=hr(o,e),l=new md(l2(a),c,t);return m2(n,o,l)}else return[]}function uae(n,e,t,r){let i=p2(n,r);if(i){let s=g2(i),o=s.path,a=s.queryId,c=hr(o,e),l=Mr.fromObject(t),u=new Xv(l2(a),c,l);return m2(n,o,u)}else return[]}function zS(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,p)=>{let y=hr(f,i);s=s||Ca(p,y),o=o||Da(p)});let a=n.syncPointTree_.get(i);a?(o=o||Da(a),s=s||Ca(a,tt())):(a=new sw,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=ke.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((p,y)=>{let w=Ca(y,tt());w&&(s=s.updateImmediateChild(p,w))}));let l=c8(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=yw(e);Z(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let p=pae();n.queryToTagMap.set(f,p),n.tagToQueryMap.set(p,f)}let u=gw(n.pendingWriteTree_,i),h=nae(a,e,t,u,s,c);if(!l&&!o&&!r){let f=a8(a,e);h=h.concat(gae(n,e,f))}return h}function f2(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=hr(o,e),l=Ca(a,c);if(l)return l});return X4(i,e,s,t,!0)}function dae(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let h=hr(l,t);r=r||Ca(u,h)});let i=n.syncPointTree_.get(t);i?r=r||Ca(i,tt()):(i=new sw,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new Ds(r,!0,!1):null,a=gw(n.pendingWriteTree_,e._path),c=s8(i,e,a,s?o.getNode():ke.EMPTY_NODE,s);return Yoe(c)}function zp(n,e){return d8(e,n.syncPointTree_,null,gw(n.pendingWriteTree_,tt()))}function d8(n,e,t,r){if(je(n.path))return h8(n,e,t,r);{let i=e.get(tt());t==null&&i!=null&&(t=Ca(i,tt()));let s=[],o=Be(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=e8(r,o);s=s.concat(d8(a,c,l,u))}return i&&(s=s.concat(h2(i,n,r,t))),s}}function h8(n,e,t,r){let i=e.get(tt());t==null&&i!=null&&(t=Ca(i,tt()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=e8(r,o),u=n.operationForChild(o);u&&(s=s.concat(h8(u,a,c,l)))}),i&&(s=s.concat(h2(i,n,r,t))),s}function f8(n,e){let t=e.query,r=Up(n,t);return{hashFn:()=>(Koe(e)||ke.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?lae(n,t._path,r):cae(n,t._path);{let s=Sse(i,t);return cw(n,t,null,s)}}}}function Up(n,e){let t=yw(e);return n.queryToTagMap.get(t)}function yw(n){return n._path.toString()+"$"+n._queryIdentifier}function p2(n,e){return n.tagToQueryMap.get(e)}function g2(n){let e=n.indexOf("$");return Z(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new st(n.substr(0,e))}}function m2(n,e,t){let r=n.syncPointTree_.get(e);Z(r,"Missing sync point for query tag that we're tracking");let i=gw(n.pendingWriteTree_,e);return h2(r,t,i,null)}function hae(n){return n.fold((e,t,r)=>{if(t&&Da(t))return[mw(t)];{let i=[];return t&&(i=o8(t)),Sr(r,(s,o)=>{i=i.concat(o)}),i}})}function Mp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(sae())(n._repo,n._path):n}function fae(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=yw(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function pae(){return oae++}function gae(n,e,t){let r=e._path,i=Up(n,e),s=f8(n,t),o=n.listenProvider_.startListening(Mp(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)Z(!Da(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,h)=>{if(!je(l)&&u&&Da(u))return[mw(u).query];{let f=[];return u&&(f=f.concat(o8(u).map(p=>p.query))),Sr(h,(p,y)=>{f=f.concat(y)}),f}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(Mp(u),Up(n,u))}}return o}var WS=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},qS=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=_n(this.path_,e);return new n(this.syncTree_,t)}node(){return f2(this.syncTree_,this.path_)}},mae=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},h4=function(n,e,t){if(!n||typeof n!="object")return n;if(Z(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return yae(n[".sv"],e,t);if(typeof n[".sv"]=="object")return _ae(n[".sv"],e);Z(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},yae=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Z(!1,"Unexpected server value: "+n)}},_ae=function(n,e,t){n.hasOwnProperty("increment")||Z(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&Z(!1,"Unexpected increment value: "+r);let i=e.node();if(Z(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},vae=function(n,e,t,r){return y2(e,new qS(t,n),r)},p8=function(n,e,t){return y2(n,new WS(e),t)};function y2(n,e,t){let r=n.getPriority().val(),i=h4(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=h4(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new fd(a,xn(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new fd(i))),o.forEachChild(Ot,(a,c)=>{let l=y2(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Op=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function _2(n,e){let t=e instanceof st?e:new st(e),r=n,i=Be(t);for(;i!==null;){let s=Ec(r.node.children,i)||{children:{},childCount:0};r=new Op(i,r,s),t=bt(t),i=Be(t)}return r}function wd(n){return n.node.value}function g8(n,e){n.node.value=e,GS(n)}function m8(n){return n.node.childCount>0}function wae(n){return wd(n)===void 0&&!m8(n)}function _w(n,e){Sr(n.node.children,(t,r)=>{e(new Op(t,n,r))})}function y8(n,e,t,r){t&&!r&&e(n),_w(n,i=>{y8(i,e,!0,r)}),t&&r&&e(n)}function bae(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wp(n){return new st(n.parent===null?n.name:Wp(n.parent)+"/"+n.name)}function GS(n){n.parent!==null&&Cae(n.parent,n.name,n)}function Cae(n,e,t){let r=wae(t),i=Ni(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GS(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GS(n))}var Eae=/[\[\].#$\/\u0000-\u001F\u007F]/,Iae=/[\[\].#$\u0000-\u001F\u007F]/,oS=10*1024*1024,_8=function(n){return typeof n=="string"&&n.length!==0&&!Eae.test(n)},v8=function(n){return typeof n=="string"&&n.length!==0&&!Iae.test(n)},Dae=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),v8(n)},f4=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!n2(n)||n&&typeof n=="object"&&Ni(n,".sv")},w8=function(n,e,t,r){r&&e===void 0||v2(Ly(n,"value"),e,t)},v2=function(n,e,t){let r=t instanceof st?new wS(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Wc(r));if(typeof e=="function")throw new Error(n+"contains a function "+Wc(r)+" with contents = "+e.toString());if(n2(e))throw new Error(n+"contains "+e.toString()+" "+Wc(r));if(typeof e=="string"&&e.length>oS/3&&Mf(e)>oS)throw new Error(n+"contains a string greater than "+oS+" utf8 bytes "+Wc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Sr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!_8(o)))throw new Error(n+" contains an invalid key ("+o+") "+Wc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ioe(r,o),v2(n,a,r),soe(r)}),i&&s)throw new Error(n+' contains ".value" child '+Wc(r)+" in addition to actual children.")}};var w2=function(n,e,t,r){if(!(r&&t===void 0)&&!v8(t))throw new Error(Ly(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xae=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),w2(n,e,t,r)},b8=function(n,e){if(Be(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Tae=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_8(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Dae(t))throw new Error(Ly(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var KS=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function b2(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!s2(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function C8(n,e,t){b2(n,t),E8(n,r=>s2(r,e))}function xs(n,e,t){b2(n,t),E8(n,r=>Hi(r,e)||Hi(e,r))}function E8(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(Aae(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Aae(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Kc&&Qn("event: "+t.toString()),vd(r)}}}var Sae="repo_interrupt",Mae=25,YS=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qv(),this.transactionQueueTree_=new Op,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Pae(n,e,t){if(n.stats_=i2(n.repoInfo_),n.forceRestClient_||Rse())n.server_=new MS(n.repoInfo_,(r,i,s,o)=>{p4(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>g4(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new o2(n.repoInfo_,e,(r,i,s,o)=>{p4(n,r,i,s,o)},r=>{g4(n,r)},r=>{kae(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Nse(n.repoInfo_,()=>new FS(n.stats_,n.server_)),n.infoData_=new PS,n.infoSyncTree_=new aw({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Hp(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),E2(n,"connected",!1),n.serverSyncTree_=new aw({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);xs(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function I8(n){let t=n.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function C2(n){return mae({timestamp:I8(n)})}function p4(n,e,t,r,i){n.dataUpdateCount++;let s=new st(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Sf(t,l=>xn(l));o=uae(n.serverSyncTree_,s,c,i)}else{let c=xn(t);o=u8(n.serverSyncTree_,s,c,i)}else if(r){let c=Sf(t,l=>xn(l));o=aae(n.serverSyncTree_,s,c)}else{let c=xn(t);o=Hp(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=ww(n,s)),xs(n.eventQueue_,a,o)}function g4(n,e){E2(n,"connected",e),e===!1&&Nae(n)}function kae(n,e){Sr(e,(t,r)=>{E2(n,t,r)})}function E2(n,e,t){let r=new st("/.info/"+e),i=xn(t);n.infoData_.updateSnapshot(r,i);let s=Hp(n.infoSyncTree_,r,i);xs(n.eventQueue_,r,s)}function D8(n){return n.nextWriteId_++}function Rae(n,e,t){let r=dae(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=xn(i).withIndex(e._queryParams.getIndex());zS(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=Hp(n.serverSyncTree_,e._path,s);else{let a=Up(n.serverSyncTree_,e);o=u8(n.serverSyncTree_,e._path,s,a)}return xs(n.eventQueue_,e._path,o),cw(n.serverSyncTree_,e,t,null,!0),s},i=>(vw(n,"get for query "+nn(e)+" failed: "+i),Promise.reject(new Error(i))))}function Fae(n,e,t,r,i){vw(n,"set",{path:e.toString(),value:t,priority:r});let s=C2(n),o=xn(t,r),a=f2(n.serverSyncTree_,e),c=p8(o,a,s),l=D8(n),u=l8(n.serverSyncTree_,e,c,l,!0);b2(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,p)=>{let y=f==="ok";y||Ar("set at "+e+" failed: "+f);let w=Gc(n.serverSyncTree_,l,!y);xs(n.eventQueue_,e,w),Lae(n,i,f,p)});let h=M8(n,e);ww(n,h),xs(n.eventQueue_,h,[])}function Nae(n){vw(n,"onDisconnectEvents");let e=C2(n),t=Qv();kS(n.onDisconnect_,tt(),(i,s)=>{let o=vae(i,s,n.serverSyncTree_,e);K4(t,i,o)});let r=[];kS(t,tt(),(i,s)=>{r=r.concat(Hp(n.serverSyncTree_,i,s));let o=M8(n,i);ww(n,o)}),n.onDisconnect_=Qv(),xs(n.eventQueue_,tt(),r)}function Uae(n,e,t){let r;Be(e._path)===".info"?r=zS(n.infoSyncTree_,e,t):r=zS(n.serverSyncTree_,e,t),C8(n.eventQueue_,e._path,r)}function m4(n,e,t){let r;Be(e._path)===".info"?r=cw(n.infoSyncTree_,e,t):r=cw(n.serverSyncTree_,e,t),C8(n.eventQueue_,e._path,r)}function Oae(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Sae)}function vw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qn(t,...e)}function Lae(n,e,t,r){e&&vd(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function x8(n,e,t){return f2(n.serverSyncTree_,e,t)||ke.EMPTY_NODE}function I2(n,e=n.transactionQueueTree_){if(e||bw(n,e),wd(e)){let t=A8(n,e);Z(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&Vae(n,Wp(e),t)}else m8(e)&&_w(e,t=>{I2(n,t)})}function Vae(n,e,t){let r=t.map(l=>l.currentWriteId),i=x8(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];Z(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=hr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{vw(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Gc(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();bw(n,_2(n.transactionQueueTree_,e)),I2(n,n.transactionQueueTree_),xs(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)vd(h[f])}else{if(l==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Ar("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=l}ww(n,e)}},o)}function ww(n,e){let t=T8(n,e),r=Wp(t),i=A8(n,t);return Bae(n,i,r),r}function Bae(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=hr(t,c.path),u=!1,h;if(Z(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Mae)u=!0,h="maxretry",i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0));else{let f=x8(n,c.path,o);c.currentInputSnapshot=f;let p=e[a].update(f.val());if(p!==void 0){v2("transaction failed: Data returned ",p,c.path);let y=xn(p);typeof p=="object"&&p!=null&&Ni(p,".priority")||(y=y.updatePriority(f.getPriority()));let b=c.currentWriteId,A=C2(n),P=p8(y,f,A);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=P,c.currentWriteId=D8(n),o.splice(o.indexOf(b),1),i=i.concat(l8(n.serverSyncTree_,c.path,P,c.currentWriteId,c.applyLocally)),i=i.concat(Gc(n.serverSyncTree_,b,!0))}else u=!0,h="nodata",i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0))}xs(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}bw(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)vd(r[a]);I2(n,n.transactionQueueTree_)}function T8(n,e){let t,r=n.transactionQueueTree_;for(t=Be(e);t!==null&&wd(r)===void 0;)r=_2(r,t),e=bt(e),t=Be(e);return r}function A8(n,e){let t=[];return S8(n,e,t),t.sort((r,i)=>r.order-i.order),t}function S8(n,e,t){let r=wd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);_w(e,i=>{S8(n,i,t)})}function bw(n,e){let t=wd(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,g8(e,t.length>0?t:void 0)}_w(e,r=>{bw(n,r)})}function M8(n,e){let t=Wp(T8(n,e)),r=_2(n.transactionQueueTree_,e);return bae(r,i=>{aS(n,i)}),aS(n,r),y8(r,i=>{aS(n,i)}),t}function aS(n,e){let t=wd(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(Z(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(Z(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Gc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?g8(e,void 0):t.length=s+1,xs(n.eventQueue_,Wp(e),i);for(let o=0;o<r.length;o++)vd(r[o])}}function jae(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $ae(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ar(`Invalid query segment '${t}' in query '${n}'`)}return e}var y4=function(n,e){let t=Hae(n),r=t.namespace;t.domain==="firebase.com"&&wo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&wo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Ise();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Hv(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new st(t.pathString)}},Hae=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=jae(n.substring(u,h)));let f=$ae(n.substring(Math.min(n.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let p=e.slice(0,l);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{let y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var _4="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zae=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=_4.charAt(t%64),t=Math.floor(t/64);Z(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=_4.charAt(e[i]);return Z(o.length===20,"nextPushId: Length should be 20."),o}}();var lw=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nn(this.snapshot.exportVal())}},uw=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var dw=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Lp=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return je(this._path)?null:L4(this._path)}get ref(){return new Ts(this._repo,this._path)}get _queryIdentifier(){let e=t4(this._queryParams),t=r2(e);return t==="{}"?"default":t}get _queryObject(){return t4(this._queryParams)}isEqual(e){if(e=We(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=s2(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+roe(this._path)}};function Wae(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function qae(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Yc){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Jc)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ea)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===Ot){if(e!=null&&!f4(e)||t!=null&&!f4(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Z(n.getIndex()instanceof Pp||n.getIndex()===q4,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}var Ts=class n extends Lp{constructor(e,t){super(e,t,new SS,!1)}get parent(){let e=B4(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Vp=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new st(e),r=Zc(this.ref,e);return new n(this._node.getChild(t),r,Ot)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,Zc(this.ref,r),Ot)))}hasChild(e){let t=new st(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function P8(n,e){return n=We(n),n._checkNotDeleted("ref"),e!==void 0?Zc(n._root,e):n._root}function Zc(n,e){return n=We(n),Be(n._path)===null?xae("child","path",e,!1):w2("child","path",e,!1),new Ts(n._repo,_n(n._path,e))}function k8(n,e){n=We(n),b8("push",n._path),w8("push",e,n._path,!0);let t=I8(n._repo),r=zae(t),i=Zc(n,r),s=Zc(n,r),o;return e!=null?o=R8(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function R8(n,e){n=We(n),b8("set",n._path),w8("set",e,n._path,!1);let t=new Ri;return Fae(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function F8(n){n=We(n);let e=new dw(()=>{}),t=new hw(e);return Rae(n._repo,n,t).then(r=>new Vp(r,new Ts(n._repo,n._path),n._queryParams.getIndex()))}var hw=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new lw("value",this,new Vp(e.snapshotNode,new Ts(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uw(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},JS=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uw(this,e,t):null}createEvent(e,t){Z(e.childName!=null,"Child events should have a childName.");let r=Zc(new Ts(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new lw(e.type,this,new Vp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Gae(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=t,l=(u,h)=>{m4(n._repo,n,a),c(u,h)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new dw(t,s||void 0),a=e==="value"?new hw(o):new JS(e,o);return Uae(n._repo,n,a),()=>m4(n._repo,n,a)}function N8(n,e,t,r){return Gae(n,"value",e,t,r)}var fw=class{};var QS=class extends fw{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lp(e._repo,e._path,_oe(e._queryParams,this._limit),e._orderByCalled)}};function U8(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QS(n)}var ZS=class extends fw{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Wae(e,"orderByChild");let t=new st(this._path);if(je(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Pp(t),i=voe(e._queryParams,r);return qae(i),new Lp(e._repo,e._path,i,!0)}};function O8(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return w2("orderByChild","path",n,!1),new ZS(n)}function L8(n,...e){let t=We(n);for(let r of e)t=r._apply(t);return t}Xoe(Ts);iae(Ts);var Kae="FIREBASE_DATABASE_EMULATOR_HOST",XS={},Yae=!1;function Jae(n,e,t,r){let i=e.lastIndexOf(":"),s=e.substring(0,i),o=Fi(s);n.repoInfo_=new Hv(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function Qae(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||wo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=y4(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Kae]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=y4(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Tp(Tp.OWNER):new fS(n.name,n.options,e);Tae("Invalid Firebase Database URL",o),je(o.path)||wo("Database URL must point to the root of a Firebase Database (not including a child path).");let h=Xae(a,n,u,new hS(n,t));return new e2(h,n)}function Zae(n,e){let t=XS[e];(!t||t[n.key]!==n)&&wo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Oae(n),delete t[n.key]}function Xae(n,e,t,r){let i=XS[e.name];i||(i={},XS[e.name]=i);let s=i[n.toURLString()];return s&&wo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YS(n,Yae,t,r),i[n.toURLString()]=s,s}var e2=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Pae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ts(this._repo,tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Zae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&wo("Cannot call "+e+" on a deleted database.")}};function V8(n=li(),e){let t=xr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Ny("database");r&&B8(t,...r)}return t}function B8(n,e,t,r={}){n=We(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,s=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&ur(r,s.repoInfo_.emulatorOptions))return;wo("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&wo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Tp(Tp.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:Uy(r.mockUserToken,n.app.options.projectId);o=new Tp(a)}Fi(e)&&(bu(e),Cu("Database",!0)),Jae(s,i,r,o)}function ece(n){bse(ps),mn(new Ft("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Qae(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),ze(Lj,Vj,n),ze(Lj,Vj,"esm2017")}o2.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};o2.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};ece();var el=class{constructor(e){return e}},j8="database",D2=class{constructor(){return gs(j8)}};var x2=new ee("angularfire2.database-instances");function tce(n,e){let t=so(j8,n,e);return t&&new el(t)}function nce(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new el(r)}}var rce={provide:D2,deps:[[new Wt,x2]]},ice={provide:el,useFactory:tce,deps:[[new Wt,x2],Hr]};function $8(n,...e){return ze("angularfire",Tr.full,"rtdb"),fn([ice,rce,{provide:x2,useFactory:nce(n),multi:!0,deps:[Le,vt,ui,Ui,[new Wt,Pc],[new Wt,ca],...e]}])}var H8=qe(F8,!0),z8=qe(V8,!0);var W8=qe(U8,!0,2);var q8=qe(N8,!0),T2=qe(O8,!0,2);var G8=qe(k8,!0,2),A2=qe(L8,!0,2),Cw=qe(P8,!0,2);var Ew=class n{constructor(e){this.db=e}getProjectPath(e,t,r){return`organizations/${e}/domains/${t}/projects/${r}/messages`}sendMessage(e,t,r,i,s,o){return x(this,null,function*(){if(!e||!t||!r||!i||!s||!o.trim())throw console.error("ChatService: Cannot send message: Missing required fields."),new Error("Missing required message fields.");let a=this.getProjectPath(e,t,r),c=Cw(this.db,a),l={senderId:i,senderEmail:s,messageText:o.trim(),timestamp:Date.now()};try{yield G8(c,l),console.log("ChatService: Message sent successfully to:",a)}catch(u){throw console.error("ChatService: Error sending message:",u),u}})}getProjectMessages(e,t,r,i){if(!e||!t||!r)return console.error("ChatService: Cannot get messages: Missing organizationId, domainUid, or projectId."),new ye(c=>c.next([]));let s=this.getProjectPath(e,t,r),o=Cw(this.db,s),a=A2(o,T2("timestamp"));return i&&(a=A2(o,T2("timestamp"),W8(i))),new ye(c=>{let l=q8(a,u=>{let h=[];u.forEach(f=>{let p=f.val();h.push(ue(H({},p),{id:f.key||void 0}))}),c.next(h)},u=>{console.error("ChatService: Error getting real-time messages:",u),c.error(u)});return()=>l()})}getMessageById(e,t,r,i){return x(this,null,function*(){if(!e||!t||!r||!i)return console.error("ChatService: Cannot fetch message by ID: Missing required path segments."),null;let s=`${this.getProjectPath(e,t,r)}/${i}`,o=Cw(this.db,s);try{let a=yield H8(o);return a.exists()?ue(H({},a.val()),{id:a.key||void 0}):null}catch(a){throw console.error("ChatService: Error fetching message by ID:",a),a}})}static \u0275fac=function(t){return new(t||n)(oe(el))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var ace=["chatMessages"],cce=(n,e)=>({"text-right":n,"text-left":e}),lce=(n,e)=>({"bg-blue-500 text-white":n,"bg-gray-200 text-gray-800":e});function uce(n,e){if(n&1&&(m(0,"span",11),C(1),_()),n&2){let t=O();E(),le(" (Project ID: ",t.projectId,")")}}function dce(n,e){n&1&&(m(0,"div",12),C(1," No messages yet. Start the conversation! "),_())}function hce(n,e){if(n&1&&(m(0,"div",13)(1,"div",14)(2,"span",15)(3,"strong",16),C(4),_(),m(5,"span",17),C(6),_(),m(7,"span",18),C(8),bn(9,"date"),_()()()()),n&2){let t=e.$implicit,r=O();E(),F("ngClass",zn(8,cce,t.senderId===r.currentUserId,t.senderId!==r.currentUserId)),E(),F("ngClass",zn(11,lce,t.senderId===r.currentUserId,t.senderId!==r.currentUserId)),E(2),Q(t.senderEmail),E(2),Q(t.messageText),E(2),Q(pc(9,5,t.timestamp,"shortTime"))}}function fce(n,e){if(n&1&&(m(0,"div",19),C(1),_()),n&2){let t=O();E(),Q(t.chatErrorMessage)}}var Iw=class n{constructor(e){this.chatService=e}organizationId=null;domainUid=null;projectId=null;currentUserId=null;currentUserEmail=null;messages=[];newMessageText="";chatErrorMessage=null;isSending=!1;chatMessagesContainer;ngOnInit(){this.organizationId&&this.domainUid&&this.projectId&&this.subscribeToMessages(this.organizationId,this.domainUid,this.projectId)}ngOnChanges(e){(e.organizationId&&e.organizationId.currentValue!==e.organizationId.previousValue||e.domainUid&&e.domainUid.currentValue!==e.domainUid.previousValue||e.projectId&&e.projectId.currentValue!==e.projectId.previousValue)&&(this.organizationId&&this.domainUid&&this.projectId?(this.messages=[],this.subscribeToMessages(this.organizationId,this.domainUid,this.projectId)):this.messages=[])}ngAfterViewChecked(){this.scrollToBottom()}subscribeToMessages(e,t,r){this.chatService.getProjectMessages(e,t,r,50).subscribe({next:i=>{this.messages=i,this.chatErrorMessage=null},error:i=>{console.error("ProjectChatComponent: Error fetching chat messages:",i),this.chatErrorMessage="Failed to load chat messages."}})}sendMessage(){return x(this,null,function*(){if(!this.organizationId||!this.domainUid||!this.projectId||!this.currentUserId||!this.currentUserEmail||!this.newMessageText.trim()){this.chatErrorMessage="Please ensure all project and user info is available and enter a message.";return}this.isSending=!0,this.chatErrorMessage=null;try{yield this.chatService.sendMessage(this.organizationId,this.domainUid,this.projectId,this.currentUserId,this.currentUserEmail,this.newMessageText),this.newMessageText=""}catch(e){this.chatErrorMessage="Failed to send message. Please try again.",console.error("ProjectChatComponent: Error sending message from component:",e)}finally{this.isSending=!1}})}scrollToBottom(){try{this.chatMessagesContainer.nativeElement.scrollTop=this.chatMessagesContainer.nativeElement.scrollHeight}catch(e){console.warn("ProjectChatComponent: Could not scroll chat to bottom:",e)}}static \u0275fac=function(t){return new(t||n)(X(Ew))};static \u0275cmp=Ve({type:n,selectors:[["app-project-chat"]],viewQuery:function(t,r){if(t&1&&Fh(ace,5),t&2){let i;Nh(i=Uh())&&(r.chatMessagesContainer=i.first)}},inputs:{organizationId:"organizationId",domainUid:"domainUid",projectId:"projectId",currentUserId:"currentUserId",currentUserEmail:"currentUserEmail"},features:[ar([Pi]),is],decls:13,vars:8,consts:[["chatMessages",""],[1,"chat-container","bg-white","rounded-xl","shadow-lg","border-2","border-gray-300","p-4","flex","flex-col","h-full"],[1,"text-xl","font-bold","text-center","text-custom-gradient","mb-4"],["class","text-blue-600",4,"ngIf"],[1,"messages-display","flex-grow","overflow-y-auto","custom-scrollbar","p-2","border","border-gray-200","rounded-lg","bg-gray-50","mb-4"],["class","text-center text-gray-500 py-4",4,"ngIf"],["class","mb-2",4,"ngFor","ngForOf"],[1,"message-input","flex","items-center","gap-2"],["type","text","placeholder","Type your message...",1,"flex-grow","p-3","border-2","border-gray-300","rounded-lg","bg-white","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-3","px-6","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105","whitespace-nowrap",3,"click","disabled"],["class","text-red-600 text-sm mt-2 text-center",4,"ngIf"],[1,"text-blue-600"],[1,"text-center","text-gray-500","py-4"],[1,"mb-2"],[3,"ngClass"],[1,"inline-block","p-2","rounded-lg","max-w-[80%]","break-words","shadow-sm",3,"ngClass"],[1,"block","text-sm","font-semibold"],[1,"text-sm"],[1,"block","text-xs","opacity-75","mt-1"],[1,"text-red-600","text-sm","mt-2","text-center"]],template:function(t,r){if(t&1){let i=ae();m(0,"div",1)(1,"h3",2),C(2," Project Chat "),G(3,uce,2,1,"span",3),_(),m(4,"div",4,0),G(6,dce,2,0,"div",5)(7,hce,10,14,"div",6),_(),m(8,"div",7)(9,"input",8),he("ngModelChange",function(o){return Y(i),pe(r.newMessageText,o)||(r.newMessageText=o),J(o)}),K("keyup.enter",function(){return Y(i),J(r.sendMessage())}),_(),m(10,"button",9),K("click",function(){return Y(i),J(r.sendMessage())}),C(11),_()(),G(12,fce,2,1,"div",10),_()}t&2&&(E(3),F("ngIf",r.projectId),E(3),F("ngIf",r.messages.length===0),E(),F("ngForOf",r.messages),E(2),de("ngModel",r.newMessageText),F("disabled",!r.organizationId||!r.domainUid||!r.projectId||r.isSending),E(),F("disabled",!r.organizationId||!r.domainUid||!r.projectId||!r.newMessageText.trim()||r.isSending),E(),le(" ",r.isSending?"Sending...":"Send"," "),E(),F("ngIf",r.chatErrorMessage))},dependencies:[Ye,Br,Kt,Ze,Pi,Jt,St,Mt,Ut],styles:[".chat-container[_ngcontent-%COMP%]{max-height:600px;min-height:400px}.messages-display[_ngcontent-%COMP%]{height:100%}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}"]})};var pce=["departmentComponentHost"],S2=(n,e)=>({"text-green-600 font-semibold":n,"text-red-600 font-semibold":e}),gce=(n,e)=>({"bg-blue-600 hover:bg-blue-700":n,"bg-gray-400 cursor-not-allowed":e});function mce(n,e){if(n&1&&(m(0,"span"),C(1," | Department: "),m(2,"strong",20),C(3),bn(4,"titlecase"),_()()),n&2){let t=O();E(3),Q(si(4,1,t.userDepartment))}}function yce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("root"))}),C(1," Root Features "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="root")("text-custom-gradient",t.activeSection==="root")("border-b-2",t.activeSection==="root")("border-pink-500",t.activeSection==="root")}}function _ce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("admin"))}),C(1," Admin Features "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="admin")("text-custom-gradient",t.activeSection==="admin")("border-b-2",t.activeSection==="admin")("border-pink-500",t.activeSection==="admin")}}function vce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("user"))}),C(1," My Tasks "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="user")("text-custom-gradient",t.activeSection==="user")("border-b-2",t.activeSection==="user")("border-pink-500",t.activeSection==="user")}}function wce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("userAnalytics"))}),C(1," User Analytics "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="userAnalytics")("text-custom-gradient",t.activeSection==="userAnalytics")("border-b-2",t.activeSection==="userAnalytics")("border-pink-500",t.activeSection==="userAnalytics")}}function bce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("orgAnalytics"))}),C(1," Org Analytics "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="orgAnalytics")("text-custom-gradient",t.activeSection==="orgAnalytics")("border-b-2",t.activeSection==="orgAnalytics")("border-pink-500",t.activeSection==="orgAnalytics")}}function Cce(n,e){if(n&1){let t=ae();m(0,"button",11),K("click",function(){Y(t);let i=O();return J(i.onNavigateToSection("auditLog"))}),C(1," Audit Log "),_()}if(n&2){let t=O();Gt("bg-gray-200",t.activeSection==="auditLog")("text-custom-gradient",t.activeSection==="auditLog")("border-b-2",t.activeSection==="auditLog")("border-pink-500",t.activeSection==="auditLog")}}function Ece(n,e){if(n&1&&(m(0,"p",24),C(1),bn(2,"titlecase"),_()),n&2){let t=O(2);E(),le(' No specific dashboard available for the "',si(2,1,t.userDepartment),'" department. ')}}function Ice(n,e){n&1&&(m(0,"p",24),C(1," Department information not available. No specific dashboard loaded. "),_())}function Dce(n,e){if(n&1&&(m(0,"div",21)(1,"h2",22),C(2," Department Specific Content "),_(),N0(3,null,0),G(5,Ece,3,3,"p",23)(6,Ice,2,0,"p",23),_()),n&2){let t=O();E(5),F("ngIf",t.userDepartment&&t.userDepartment.toLowerCase()!=="it"&&t.userDepartment.toLowerCase()!=="finance"),E(),F("ngIf",!t.userDepartment)}}function xce(n,e){if(n&1&&(m(0,"div",25)(1,"div",26)(2,"h3",27),C(3," Your Customization "),_(),m(4,"p",28)(5,"strong",29),C(6,"User Analytics:"),_(),m(7,"span",30),C(8),_()(),m(9,"p",28)(10,"strong",29),C(11,"Org Analytics:"),_(),m(12,"span",30),C(13),_()(),m(14,"p",31)(15,"strong",29),C(16,"Audit Log:"),_(),m(17,"span",30),C(18),_()()(),m(19,"div",26)(20,"h3",27),C(21," Account Details "),_(),m(22,"p",28)(23,"strong",29),C(24,"Organization ID:"),_(),m(25,"span",32),C(26),_()(),m(27,"p",28)(28,"strong",29),C(29,"User ID:"),_(),m(30,"span",32),C(31),_()(),m(32,"p",28)(33,"strong",29),C(34,"Domain ID:"),_(),m(35,"span",32),C(36),_()(),m(37,"p",31)(38,"strong",29),C(39,"Email:"),_(),m(40,"span",32),C(41),_()()()()),n&2){let t=O();E(7),F("ngClass",zn(10,S2,t.customization.userAnalytics,!t.customization.userAnalytics)),E(),Q(t.customization.userAnalytics?"Enabled":"Disabled"),E(4),F("ngClass",zn(13,S2,t.customization.orgAnalytics,!t.customization.orgAnalytics)),E(),Q(t.customization.orgAnalytics?"Enabled":"Disabled"),E(4),F("ngClass",zn(16,S2,t.customization.auditLog,!t.customization.auditLog)),E(),Q(t.customization.auditLog?"Enabled":"Disabled"),E(8),Q(t.orgId||"N/A"),E(5),Q(t.uid||"N/A"),E(5),Q(t.domainUid||"N/A"),E(5),Q(t.userEmail||"N/A")}}function Tce(n,e){if(n&1&&(m(0,"div",33)(1,"h2",34),C(2," Root Administrator Features "),_(),m(3,"div",35),re(4,"app-create-admin",36)(5,"app-create-domain",36),_(),m(6,"div",37)(7,"h3",38),C(8," View All Tasks (Root Scope) "),_(),m(9,"p",39),C(10," Root-level task overview would go here. "),_()()()),n&2){let t=O();E(4),F("orgId",t.orgId),E(),F("orgId",t.orgId)}}function Ace(n,e){if(n&1&&(m(0,"div",40)(1,"div",41)(2,"div",37),re(3,"app-user-management"),_(),m(4,"div",37),re(5,"app-create-project",42),_(),m(6,"div",43),re(7,"h3",38)(8,"app-project-user-assigner"),_()()()),n&2){let t=O();E(5),F("orgId",t.orgId)("domainUid",t.domainUid)}}function Sce(n,e){n&1&&(m(0,"div",44)(1,"div",37),re(2,"app-user-dashboard"),_()())}function Mce(n,e){n&1&&(m(0,"span",63),C(1,"(Active Chat)"),_())}function Pce(n,e){if(n&1){let t=ae();m(0,"tr",59)(1,"td",60),C(2),G(3,Mce,2,0,"span",61),_(),m(4,"td",54)(5,"button",62),K("click",function(){let i=Y(t).$implicit,s=O(2);return J(s.selectProjectForChat(i))}),C(6),_()()()}if(n&2){let t=e.$implicit,r=O(2);E(2),le(" ",t.name," "),E(),F("ngIf",(r.selectedProjectForChat==null?null:r.selectedProjectForChat.uid)===t.uid),E(2),F("disabled",(r.selectedProjectForChat==null?null:r.selectedProjectForChat.uid)===t.uid)("ngClass",zn(5,gce,(r.selectedProjectForChat==null?null:r.selectedProjectForChat.uid)!==t.uid,(r.selectedProjectForChat==null?null:r.selectedProjectForChat.uid)===t.uid)),E(),le(" ",(r.selectedProjectForChat==null?null:r.selectedProjectForChat.uid)===t.uid?"Selected":"View Chat"," ")}}function kce(n,e){n&1&&(m(0,"tr")(1,"td",64),C(2," No projects found for your organization/domain. "),_()())}function Rce(n,e){if(n&1){let t=ae();m(0,"section",65)(1,"h3",47),C(2," Chat for: "),m(3,"span",6),C(4),_(),m(5,"button",66),K("click",function(){Y(t);let i=O(2);return J(i.selectedProjectForChat=null)}),C(6," (Clear Chat) "),_()(),m(7,"div",67),re(8,"app-project-chat",68),_()()}if(n&2){let t=O(2);E(4),Q(t.selectedProjectForChat.name),E(4),F("organizationId",t.selectedProjectForChat.orgId)("domainUid",t.selectedProjectForChat.domainUid)("projectId",t.selectedProjectForChat.uid)("currentUserId",t.uid)("currentUserEmail",t.userEmail)}}function Fce(n,e){n&1&&(m(0,"section",69)(1,"p",70),C(2,"Select a project from the left to view its chat."),_()())}function Nce(n,e){n&1&&(m(0,"section",69)(1,"p",70),C(2,"No projects found for your current context. Please create one or ensure your organization/domain is set."),_()())}function Uce(n,e){if(n&1){let t=ae();m(0,"div",45)(1,"section",46)(2,"h3",47),C(3," Select Project for Chat "),_(),m(4,"div",48)(5,"input",49),he("ngModelChange",function(i){Y(t);let s=O();return pe(s.searchTermProjects,i)||(s.searchTermProjects=i),J(i)}),_()(),m(6,"div",50)(7,"table",51)(8,"thead")(9,"tr",52)(10,"th",53),C(11,"Project Name"),_(),m(12,"th",54),C(13,"Actions"),_()()(),m(14,"tbody",55),G(15,Pce,7,8,"tr",56)(16,kce,3,0,"tr",7),_()()()(),G(17,Rce,9,6,"section",57)(18,Fce,3,0,"section",58)(19,Nce,3,0,"section",58),_()}if(n&2){let t=O();E(5),de("ngModel",t.searchTermProjects),E(10),F("ngForOf",t.filteredProjects),E(),F("ngIf",t.filteredProjects.length===0),E(),F("ngIf",t.selectedProjectForChat),E(),F("ngIf",!t.selectedProjectForChat&&t.projectsList.length>0),E(),F("ngIf",!t.selectedProjectForChat&&t.projectsList.length===0)}}function Oce(n,e){n&1&&(m(0,"div",71)(1,"div",72),Me(),m(2,"svg",73),re(3,"path",74)(4,"circle",75)(5,"path",76)(6,"path",77),_(),Rn(),m(7,"h2",34),C(8," User Analytics Dashboard "),_()(),re(9,"app-user-lookup"),_())}function Lce(n,e){n&1&&(m(0,"div",71)(1,"h2",34),C(2," Audit Log "),_(),re(3,"app-audit-log-viewer"),_())}function Vce(n,e){n&1&&(m(0,"div",71)(1,"h2",34),C(2," Sign Out "),_(),re(3,"app-sign-out-button"),_())}var Dw=class n{constructor(e){this.firestore=e}role="";domainUid="";userDepartment="";userEmail="";uid="";orgId="";activeSection="overview";customization={userAnalytics:!1,orgAnalytics:!1,auditLog:!1};projectsList=[];searchTermProjects="";selectedProjectForChat=null;departmentComponentHost;currentDynamicComponentRef=null;ngOnInit(){return x(this,null,function*(){this.role=localStorage.getItem("userRole");let e=localStorage.getItem("customization");if(e)try{this.customization=JSON.parse(e)}catch(t){console.error("Error parsing customization from localStorage:",t),this.customization={userAnalytics:!1,orgAnalytics:!1,auditLog:!1}}this.orgId=localStorage.getItem("orgId"),this.uid=localStorage.getItem("uid"),this.domainUid=localStorage.getItem("domainUid"),this.userEmail=localStorage.getItem("useremail"),this.userDepartment=localStorage.getItem("userDepartment"),this.activeSection="overview",this.orgId&&this.domainUid?(yield this.fetchProjects(),this.projectsList.length>0?(this.selectProjectForChat(this.projectsList[0]),this.activeSection="projectChat"):this.activeSection="overview"):console.warn("DashboardComponent: Missing organization or domain ID. Cannot fetch projects or load chat.")})}ngAfterViewInit(){console.log("ngAfterViewInit triggered."),console.log("Value of this.departmentComponentHost at ngAfterViewInit:",this.departmentComponentHost),this.departmentComponentHost&&this.activeSection==="overview"?(console.log("departmentComponentHost IS defined. Proceeding to load component."),this.loadDepartmentSpecificComponent()):this.departmentComponentHost||console.error("ERROR: departmentComponentHost is UNDEFINED in ngAfterViewInit. Please double-check the #departmentComponentHost in the template and the @ViewChild selector.")}loadComponent(e){if(!this.departmentComponentHost){console.error("loadComponent called but departmentComponentHost is undefined!");return}this.currentDynamicComponentRef&&(this.currentDynamicComponentRef.destroy(),this.currentDynamicComponentRef=null),this.departmentComponentHost.clear(),this.currentDynamicComponentRef=this.departmentComponentHost.createComponent(e),this.currentDynamicComponentRef.instance.userName!==void 0&&(this.currentDynamicComponentRef.instance.userName=this.userEmail||""),this.currentDynamicComponentRef.instance.userRole!==void 0&&(this.currentDynamicComponentRef.instance.userRole=this.role||""),this.currentDynamicComponentRef.instance.userDepartment!==void 0&&(this.currentDynamicComponentRef.instance.userDepartment=this.userDepartment||""),this.currentDynamicComponentRef.instance.orgId!==void 0&&(this.currentDynamicComponentRef.instance.orgId=this.orgId||""),this.currentDynamicComponentRef.instance.domainUid!==void 0&&(this.currentDynamicComponentRef.instance.domainUid=this.domainUid||""),this.currentDynamicComponentRef.instance.uid!==void 0&&(this.currentDynamicComponentRef.instance.uid=this.uid||""),console.log(`${e.name} loaded dynamically.`)}unloadDynamicComponent(){this.currentDynamicComponentRef&&(this.currentDynamicComponentRef.destroy(),this.currentDynamicComponentRef=null,this.departmentComponentHost&&this.departmentComponentHost.clear(),console.log("Dynamic component unloaded."))}loadDepartmentSpecificComponent(){console.log("loadDepartmentSpecificComponent called. Raw userDepartment:",this.userDepartment);let e=this.userDepartment?.toLowerCase();e==="it"?(console.log("Loading IT Dashboard Component."),this.loadComponent(Lv)):e==="finance"?(console.log("Loading Finance Dashboard Component."),this.loadComponent(Vv)):(console.log("No specific component to load for department:",this.userDepartment),this.unloadDynamicComponent())}onNavigateToSection(e){this.activeSection=e,console.log("Navigated to section:",this.activeSection),this.unloadDynamicComponent(),this.activeSection==="overview"&&setTimeout(()=>{this.departmentComponentHost&&this.loadDepartmentSpecificComponent()},0)}fetchProjects(){return x(this,null,function*(){if(!this.orgId||!this.domainUid){this.projectsList=[],console.warn("DashboardComponent: Cannot fetch projects, organization ID or domain ID is missing.");return}try{let e=It(this.firestore,`organizations/${this.orgId}/domain/${this.domainUid}/projects`),t=fi(e),r=yield an(t);this.projectsList=r.docs.map(i=>H({uid:i.id},i.data()))}catch(e){console.error("DashboardComponent: Error fetching projects:",e)}})}get filteredProjects(){if(!this.searchTermProjects)return this.projectsList;let e=this.searchTermProjects.toLowerCase();return this.projectsList.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}selectProjectForChat(e){this.selectedProjectForChat=e}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=Ve({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,r){if(t&1&&Fh(pce,5,Ai),t&2){let i;Nh(i=Uh())&&(r.departmentComponentHost=i.first)}},decls:35,vars:43,consts:[["departmentComponentHost",""],[1,"min-h-screen","bg-gray-50","py-10","px-4","sm:px-6","lg:px-8","font-poppins","text-gray-800"],[1,"max-w-8xl","mx-auto","bg-white","p-8","rounded-lg","shadow-xl","space-y-8","border-2","border-gray-300","animate-slide-in-fade"],[1,"text-center","pb-4","border-b","border-gray-200"],[1,"text-4xl","font-extrabold","text-custom-gradient"],[1,"mt-3","text-lg","text-gray-600"],[1,"text-blue-600"],[4,"ngIf"],[1,"mt-8","mb-8","p-4","rounded-lg"],[1,"flex","flex-wrap","justify-start","gap-4"],["class",`py-2 px-5 rounded-md font-semibold text-gray-700 hover:bg-gray-200 hover:text-blue-600
                     transition duration-200 ease-in-out transform hover:scale-105`,3,"bg-gray-200","text-custom-gradient","border-b-2","border-pink-500","click",4,"ngIf"],[1,"py-2","px-5","rounded-md","font-semibold","text-gray-700","hover:bg-gray-200","hover:text-blue-600","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click"],["class","mt-8 p-4 bg-gray-100 rounded-lg shadow-inner border-2 border-gray-300 transition duration-300 ease-in-out transform hover:-translate-y-0.5",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6 text-base text-gray-600",4,"ngIf"],[1,"space-y-10","pt-6"],["class","p-8 bg-gray-100 rounded-lg border-2 border-gray-300 shadow-md space-y-8 transition duration-300 ease-in-out transform hover:-translate-y-0.5",4,"ngIf"],["class","p-8 shadow-md space-y-8 transition duration-300 ease-in-out transform hover:-translate-y-0.5",4,"ngIf"],["class","p-8 space-y-8 transition duration-300 ease-in-out transform hover:-translate-y-0.5",4,"ngIf"],["class","flex flex-col lg:flex-row gap-6 mt-8 p-4 bg-gray-100 rounded-lg shadow-md border-2 border-gray-300 animate-slide-in-fade",4,"ngIf"],["class","p-8 bg-gray-100 rounded-lg border-2 border-gray-300 shadow-md space-y-4 transition duration-300 ease-in-out transform hover:-translate-y-0.5",4,"ngIf"],[1,"text-pink-600"],[1,"mt-8","p-4","bg-gray-100","rounded-lg","shadow-inner","border-2","border-gray-300","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"text-2xl","font-bold","text-custom-gradient","mb-4"],["class","text-gray-500 mt-4",4,"ngIf"],[1,"text-gray-500","mt-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","text-base","text-gray-600"],[1,"p-6","bg-gray-100","rounded-lg","border-2","border-gray-300","shadow-sm","transition","duration-300","ease-in-out","transform","hover:-translate-y-1","hover:shadow-md"],[1,"font-semibold","text-xl","text-custom-gradient","mb-3"],[1,"text-gray-700","mb-2"],[1,"font-bold"],[1,"ml-2",3,"ngClass"],[1,"text-gray-700"],[1,"font-normal","text-gray-800","break-words","ml-2"],[1,"p-8","bg-gray-100","rounded-lg","border-2","border-gray-300","shadow-md","space-y-8","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"text-2xl","font-bold","text-custom-gradient","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[3,"orgId"],[1,"bg-white","p-6","rounded-lg","shadow-inner","border-2","border-gray-300","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"text-gray-600"],[1,"p-8","shadow-md","space-y-8","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"space-y-6"],[3,"orgId","domainUid"],[1,"bg-white","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"p-8","space-y-8","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"flex","flex-col","lg:flex-row","gap-6","mt-8","p-4","bg-gray-100","rounded-lg","shadow-md","border-2","border-gray-300","animate-slide-in-fade"],[1,"lg:w-1/2","p-4"],[1,"text-xl","font-bold","text-center","text-custom-gradient","mb-4"],[1,"mb-4"],["type","text","placeholder","Search projects by name...","name","searchTermProjects",1,"w-full","p-3","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","input-focus-glow","transition","duration-250","ease-in-out",3,"ngModelChange","ngModel"],[1,"overflow-y-auto","max-h-96","custom-scrollbar","rounded-lg","border-2","border-gray-300","shadow-md"],[1,"min-w-full","bg-white","rounded-lg","overflow-hidden"],[1,"bg-gray-200","text-gray-700","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"py-3","px-6","text-center"],[1,"text-gray-800","text-sm","font-light"],["class","border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out",4,"ngFor","ngForOf"],["class","lg:w-1/2 flex flex-col",4,"ngIf"],["class","lg:w-1/2 p-6 rounded-xl shadow-lg border-2 border-gray-300 animate-slide-in-fade flex items-center justify-center",4,"ngIf"],[1,"border-b","border-gray-200","hover:bg-gray-100","transition","duration-150","ease-in-out"],[1,"py-3","px-6","text-left","whitespace-nowrap"],["class","ml-2 text-blue-500 text-xs",4,"ngIf"],[1,"text-white","font-bold","py-2","px-4","rounded-lg","transition","duration-200","ease-in-out","transform","hover:scale-105",3,"click","disabled","ngClass"],[1,"ml-2","text-blue-500","text-xs"],["colspan","2",1,"py-4","text-center","text-gray-500"],[1,"lg:w-1/2","flex","flex-col"],[1,"ml-4","text-gray-600","hover:text-gray-800","text-sm","font-medium","transition",3,"click"],[1,"flex-grow"],[3,"organizationId","domainUid","projectId","currentUserId","currentUserEmail"],[1,"lg:w-1/2","p-6","rounded-xl","shadow-lg","border-2","border-gray-300","animate-slide-in-fade","flex","items-center","justify-center"],[1,"text-gray-500","text-lg","text-center"],[1,"p-8","bg-gray-100","rounded-lg","border-2","border-gray-300","shadow-md","space-y-4","transition","duration-300","ease-in-out","transform","hover:-translate-y-0.5"],[1,"flex"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-4","h-8","w-8","text-yellow-500"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"]],template:function(t,r){t&1&&(m(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),C(4," Welcome to the Dashboard "),_(),m(5,"p",5),C(6," Your role: "),m(7,"strong",6),C(8),bn(9,"titlecase"),_(),G(10,mce,5,3,"span",7),_()(),m(11,"div",8)(12,"nav",9),G(13,yce,2,8,"button",10)(14,_ce,2,8,"button",10)(15,vce,2,8,"button",10),m(16,"button",11),K("click",function(){return r.onNavigateToSection("overview")}),C(17," Overview "),_(),m(18,"button",11),K("click",function(){return r.onNavigateToSection("projectChat")}),C(19," Project Chat "),_(),G(20,wce,2,8,"button",10)(21,bce,2,8,"button",10)(22,Cce,2,8,"button",10),m(23,"button",11),K("click",function(){return r.onNavigateToSection("signOut")}),C(24," Sign Out "),_()()(),G(25,Dce,7,2,"div",12)(26,xce,42,19,"div",13),m(27,"div",14),G(28,Tce,11,2,"div",15)(29,Ace,9,2,"div",16)(30,Sce,3,0,"div",17),_(),G(31,Uce,20,6,"div",18)(32,Oce,10,0,"div",19)(33,Lce,4,0,"div",19)(34,Vce,4,0,"div",19),_()()),t&2&&(E(8),Q(si(9,41,r.role)),E(2),F("ngIf",r.userDepartment),E(3),F("ngIf",r.role==="root"),E(),F("ngIf",r.role==="admin"),E(),F("ngIf",r.role==="user"),E(),Gt("bg-gray-200",r.activeSection==="overview")("text-custom-gradient",r.activeSection==="overview")("border-b-2",r.activeSection==="overview")("border-pink-500",r.activeSection==="overview"),E(2),Gt("bg-gray-200",r.activeSection==="projectChat")("text-custom-gradient",r.activeSection==="projectChat")("border-b-2",r.activeSection==="projectChat")("border-pink-500",r.activeSection==="projectChat"),E(2),F("ngIf",r.customization.userAnalytics),E(),F("ngIf",r.customization.orgAnalytics),E(),F("ngIf",r.customization.auditLog),E(),Gt("bg-gray-200",r.activeSection==="signOut")("text-custom-gradient",r.activeSection==="signOut")("border-b-2",r.activeSection==="signOut")("border-pink-500",r.activeSection==="signOut"),E(2),F("ngIf",r.activeSection==="overview"),E(),F("ngIf",r.activeSection==="overview"),E(2),F("ngIf",r.role==="root"&&r.activeSection==="root"),E(),F("ngIf",r.role==="admin"&&r.activeSection==="admin"),E(),F("ngIf",r.role==="user"&&r.activeSection==="user"),E(),F("ngIf",r.activeSection==="projectChat"),E(),F("ngIf",r.activeSection==="userAnalytics"),E(),F("ngIf",r.activeSection==="auditLog"),E(),F("ngIf",r.activeSection==="signOut"))},dependencies:[Ze,Rv,kv,Fv,Nv,Ye,Br,Kt,Xs,Jt,St,Mt,Ut,Uv,Ov,ad,cd,Bv,Iw],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_spin-loader{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spinner[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-top:2px solid #2563eb;border-radius:50%;width:20px;height:20px;animation:_ngcontent-%COMP%_spin-loader 1s linear infinite}@keyframes _ngcontent-%COMP%_slide-in-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-in-fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-fade .6s ease-out forwards}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}}.animate-pulse-dot[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-dot 1s infinite}.text-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;display:inline-block}.bg-custom-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffea00,#ff1493)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af;border-radius:4px;border:2px solid #e5e7eb}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.input-focus-glow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #2563eb80;outline:none}']})};function Kp(n){return n+.5|0}var xa=(n,e,t)=>Math.max(Math.min(n,t),e);function qp(n){return xa(Kp(n*2.55),0,255)}function Ta(n){return xa(Kp(n*255),0,255)}function bo(n){return xa(Kp(n/2.55)/100,0,1)}function K8(n){return xa(Kp(n*100),0,100)}var vi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},P2=[..."0123456789ABCDEF"],Bce=n=>P2[n&15],jce=n=>P2[(n&240)>>4]+P2[n&15],xw=n=>(n&240)>>4===(n&15),$ce=n=>xw(n.r)&&xw(n.g)&&xw(n.b)&&xw(n.a);function Hce(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&vi[n[1]]*17,g:255&vi[n[2]]*17,b:255&vi[n[3]]*17,a:e===5?vi[n[4]]*17:255}:(e===7||e===9)&&(t={r:vi[n[1]]<<4|vi[n[2]],g:vi[n[3]]<<4|vi[n[4]],b:vi[n[5]]<<4|vi[n[6]],a:e===9?vi[n[7]]<<4|vi[n[8]]:255})),t}var zce=(n,e)=>n<255?e(n):"";function Wce(n){var e=$ce(n)?Bce:jce;return n?"#"+e(n.r)+e(n.g)+e(n.b)+zce(n.a,e):void 0}var qce=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Z8(n,e,t){let r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Gce(n,e,t){let r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Kce(n,e,t){let r=Z8(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Yce(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function k2(n){let t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=Yce(t,r,i,u,s),c=c*60+.5),[c|0,l||0,a]}function R2(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Ta)}function F2(n,e,t){return R2(Z8,n,e,t)}function Jce(n,e,t){return R2(Kce,n,e,t)}function Qce(n,e,t){return R2(Gce,n,e,t)}function X8(n){return(n%360+360)%360}function Zce(n){let e=qce.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?qp(+e[5]):Ta(+e[5]));let i=X8(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Jce(i,s,o):e[1]==="hsv"?r=Qce(i,s,o):r=F2(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function Xce(n,e){var t=k2(n);t[0]=X8(t[0]+e),t=F2(t),n.r=t[0],n.g=t[1],n.b=t[2]}function ele(n){if(!n)return;let e=k2(n),t=e[0],r=K8(e[1]),i=K8(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${bo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var Y8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},J8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tle(){let n={},e=Object.keys(J8),t=Object.keys(Y8),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,Y8[s]);s=parseInt(J8[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Tw;function nle(n){Tw||(Tw=tle(),Tw.transparent=[0,0,0,0]);let e=Tw[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var rle=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ile(n){let e=rle.exec(n),t=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];t=e[8]?qp(o):xa(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?qp(r):xa(r,0,255)),i=255&(e[4]?qp(i):xa(i,0,255)),s=255&(e[6]?qp(s):xa(s,0,255)),{r,g:i,b:s,a:t}}}function sle(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${bo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var M2=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bd=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function ole(n,e,t){let r=bd(bo(n.r)),i=bd(bo(n.g)),s=bd(bo(n.b));return{r:Ta(M2(r+t*(bd(bo(e.r))-r))),g:Ta(M2(i+t*(bd(bo(e.g))-i))),b:Ta(M2(s+t*(bd(bo(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Aw(n,e,t){if(n){let r=k2(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=F2(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function e5(n,e){return n&&Object.assign(e||{},n)}function Q8(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ta(n[3]))):(e=e5(n,{r:0,g:0,b:0,a:1}),e.a=Ta(e.a)),e}function ale(n){return n.charAt(0)==="r"?ile(n):Zce(n)}var Gp=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=Q8(e):t==="string"&&(r=Hce(e)||nle(e)||ale(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=e5(this._rgb);return e&&(e.a=bo(e.a)),e}set rgb(e){this._rgb=Q8(e)}rgbString(){return this._valid?sle(this._rgb):void 0}hexString(){return this._valid?Wce(this._rgb):void 0}hslString(){return this._valid?ele(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=ole(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Ta(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Kp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Aw(this._rgb,2,e),this}darken(e){return Aw(this._rgb,2,-e),this}saturate(e){return Aw(this._rgb,1,e),this}desaturate(e){return Aw(this._rgb,1,-e),this}rotate(e){return Xce(this._rgb,e),this}};function Gi(){}var L2=(()=>{let n=0;return()=>n++})();function we(n){return n==null}function pt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ne(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Pt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function fr(n,e){return Pt(n)?n:e}function ve(n,e){return typeof n>"u"?e:n}var V2=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,Nw=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function rt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Xe(n,e,t,r){let i,s,o;if(pt(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(Ne(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function Id(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Jp(n){if(pt(n))return n.map(Jp);if(Ne(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=Jp(n[t[i]]);return e}return n}function u5(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function d5(n,e,t,r){if(!u5(n))return;let i=e[n],s=t[n];Ne(i)&&Ne(s)?Yr(i,s,r):e[n]=Jp(s)}function Yr(n,e,t){let r=pt(e)?e:[e],i=r.length;if(!Ne(n))return n;t=t||{};let s=t.merger||d5,o;for(let a=0;a<i;++a){if(o=r[a],!Ne(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function rl(n,e){return Yr(n,e,{merger:h5})}function h5(n,e,t){if(!u5(n))return;let r=e[n],i=t[n];Ne(r)&&Ne(i)?rl(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Jp(i))}var t5={"":n=>n,x:n=>n.x,y:n=>n.y};function f5(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function cle(n){let e=f5(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function Ms(n,e){return(t5[e]||(t5[e]=cle(e)))(n)}function Xp(n){return n.charAt(0).toUpperCase()+n.slice(1)}var il=n=>typeof n<"u",As=n=>typeof n=="function",Uw=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function B2(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Qe=Math.PI,gt=2*Qe,p5=gt+Qe,Qp=Number.POSITIVE_INFINITY,g5=Qe/180,Lt=Qe/2,Aa=Qe/4,U2=Qe*2/3,Ss=Math.log10,wi=Math.sign;function sl(n,e,t){return Math.abs(n-e)<t}function Ow(n){let e=Math.round(n);n=sl(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ss(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function j2(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function lle(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Ma(n){return!lle(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $2(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function Lw(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Jr(n){return n*(Qe/180)}function eg(n){return n*(180/Qe)}function Vw(n){if(!Pt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Bw(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t);return s<-.5*Qe&&(s+=gt),{angle:s,distance:i}}function Zp(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function m5(n,e){return(n-e+p5)%gt-Qe}function Tn(n){return(n%gt+gt)%gt}function ol(n,e,t,r){let i=Tn(n),s=Tn(e),o=Tn(t),a=Tn(s-i),c=Tn(o-i),l=Tn(i-s),u=Tn(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function cn(n,e,t){return Math.max(e,Math.min(t,n))}function H2(n){return cn(n,-32768,32767)}function Ki(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function tg(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}var Wi=(n,e,t,r)=>tg(n,t,r?i=>{let s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),z2=(n,e,t)=>tg(n,t,r=>n[r][e]>=t);function W2(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var y5=["push","pop","shift","splice","unshift"];function q2(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),y5.forEach(t=>{let r="_onData"+Xp(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function jw(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(y5.forEach(s=>{delete n[s]}),delete n._chartjs)}function $w(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var Hw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function zw(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,Hw.call(window,()=>{r=!1,n.apply(e,t)}))}}function G2(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var ng=n=>n==="start"?"left":n==="end"?"right":"center",An=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,K2=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function Ww(n,e,t){let r=e.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(i=Math.min(Wi(c,u,h).lo,t?r:Wi(e,u,o.getPixelForValue(h)).lo),l){let w=c.slice(0,i+1).reverse().findIndex(b=>!we(b[a.axis]));i-=Math.max(0,w)}i=cn(i,0,r-1)}if(y){let w=Math.max(Wi(c,o.axis,f,!0).hi+1,t?0:Wi(e,u,o.getPixelForValue(f),!0).hi+1);if(l){let b=c.slice(w-1).findIndex(A=>!we(A[a.axis]));w+=Math.max(0,b)}s=cn(w,i,r)-i}else s=r-i}return{start:i,count:s}}function qw(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}var Sw=n=>n===0||n===1,n5=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*gt/t)),r5=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*gt/t)+1,tl={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Lt)+1,easeOutSine:n=>Math.sin(n*Lt),easeInOutSine:n=>-.5*(Math.cos(Qe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Sw(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Sw(n)?n:n5(n,.075,.3),easeOutElastic:n=>Sw(n)?n:r5(n,.075,.3),easeInOutElastic(n){return Sw(n)?n:n<.5?.5*n5(n*2,.1125,.45):.5+.5*r5(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-tl.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?tl.easeInBounce(n*2)*.5:tl.easeOutBounce(n*2-1)*.5+.5};function Gw(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Kw(n){return Gw(n)?n:new Gp(n)}function Rw(n){return Gw(n)?n:new Gp(n).saturate(.5).darken(.1).hexString()}var ule=["x","y","borderWidth","radius","tension"],dle=["color","borderColor","backgroundColor"];function hle(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:dle},numbers:{type:"number",properties:ule}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fle(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var i5=new Map;function ple(n,e){e=e||{};let t=n+JSON.stringify(e),r=i5.get(t);return r||(r=new Intl.NumberFormat(n,e),i5.set(t,r)),r}function al(n,e,t){return ple(e,t).format(n)}var _5={values(n){return pt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=gle(n,t)}let o=Ss(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),al(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(Ss(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?_5.numeric.call(this,n,e,t):""}};function gle(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var rg={formatters:_5};function mle(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Pa=Object.create(null),Yw=Object.create(null);function Yp(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function N2(n,e,t){return typeof e=="string"?Yr(Yp(n,e),t):Yr(Yp(n,""),e)}var O2=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Rw(i.backgroundColor),this.hoverBorderColor=(r,i)=>Rw(i.borderColor),this.hoverColor=(r,i)=>Rw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return N2(this,e,t)}get(e){return Yp(this,e)}describe(e,t){return N2(Yw,e,t)}override(e,t){return N2(Pa,e,t)}route(e,t,r,i){let s=Yp(this,e),o=Yp(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[i];return Ne(c)?Object.assign({},l,c):ve(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},mt=new O2({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hle,fle,mle]);function v5(n){return!n||we(n.size)||we(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Cd(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function Y2(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,h,f;for(c=0;c<a;c++)if(h=t[c],h!=null&&!pt(h))o=Cd(n,i,s,o,h);else if(pt(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!pt(f)&&(o=Cd(n,i,s,o,f));n.restore();let p=s.length/2;if(p>t.length){for(c=0;c<p;c++)delete i[s[c]];s.splice(0,p)}return o}function Eo(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function Jw(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ig(n,e,t,r){Qw(n,e,t,r,null)}function Qw(n,e,t,r,i){let s,o,a,c,l,u,h,f,p=e.pointStyle,y=e.rotation,w=e.radius,b=(y||0)*g5;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(b),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),p){default:i?n.ellipse(t,r,i/2,w,0,0,gt):n.arc(t,r,w,0,gt),n.closePath();break;case"triangle":u=i?i/2:w,n.moveTo(t+Math.sin(b)*u,r-Math.cos(b)*w),b+=U2,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*w),b+=U2,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*w),n.closePath();break;case"rectRounded":l=w*.516,c=w-l,o=Math.cos(b+Aa)*c,h=Math.cos(b+Aa)*(i?i/2-l:c),a=Math.sin(b+Aa)*c,f=Math.sin(b+Aa)*(i?i/2-l:c),n.arc(t-h,r-a,l,b-Qe,b-Lt),n.arc(t+f,r-o,l,b-Lt,b),n.arc(t+h,r+a,l,b,b+Lt),n.arc(t-f,r+o,l,b+Lt,b+Qe),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*w,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}b+=Aa;case"rectRot":h=Math.cos(b)*(i?i/2:w),o=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+f,r-o),n.lineTo(t+h,r+a),n.lineTo(t-f,r+o),n.closePath();break;case"crossRot":b+=Aa;case"cross":h=Math.cos(b)*(i?i/2:w),o=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"star":h=Math.cos(b)*(i?i/2:w),o=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o),b+=Aa,h=Math.cos(b)*(i?i/2:w),o=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"line":o=i?i/2:Math.cos(b)*w,a=Math.sin(b)*w,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(b)*(i?i/2:w),r+Math.sin(b)*w);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function qi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Dd(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function xd(n){n.restore()}function J2(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Q2(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function yle(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),we(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function _le(n,e,t,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function vle(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Io(n,e,t,r,i,s={}){let o=pt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=i.string,yle(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&vle(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),we(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,r,s.maxWidth)),n.fillText(l,t,r,s.maxWidth),_le(n,t,r,l,s),r+=Number(i.lineHeight);n.restore()}function cl(n,e){let{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Qe,Lt,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Lt,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Lt,!0),n.lineTo(t+o.topLeft,r)}var wle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ble=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function w5(n,e){let t=(""+n).match(wle);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Cle=n=>+n||0;function sg(n,e){let t={},r=Ne(e),i=r?Object.keys(e):e,s=Ne(n)?r?o=>ve(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of i)t[o]=Cle(s(o));return t}function Zw(n){return sg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Do(n){return sg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ln(n){let e=Zw(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vt(n,e){n=n||{},e=e||mt.font;let t=ve(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=ve(n.style,e.style);r&&!(""+r).match(ble)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:ve(n.family,e.family),lineHeight:w5(ve(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:ve(n.weight,e.weight),string:""};return i.string=v5(i),i}function ut(n,e,t,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&pt(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Z2(n,e,t){let{min:r,max:i}=n,s=Nw(e,(i-r)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ps(n,e){return Object.assign(Object.create(n),e)}function og(n,e=[""],t,r,i=()=>n[0]){let s=t||n;typeof r>"u"&&(r=E5("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>og([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return b5(a,c,()=>Mle(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return o5(a).includes(c)},ownKeys(a){return o5(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Sa(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Xw(n,r),setContext:s=>Sa(n,s,t,r),override:s=>Sa(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return b5(s,o,()=>Ile(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function Xw(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:As(t)?t:()=>t,isIndexable:As(r)?r:()=>r}}var Ele=(n,e)=>n?n+Xp(e):e,X2=(n,e)=>Ne(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function b5(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function Ile(n,e,t){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[e];return As(a)&&o.isScriptable(e)&&(a=Dle(e,a,n,t)),pt(a)&&a.length&&(a=xle(e,a,n,o.isIndexable)),X2(e,a)&&(a=Sa(a,i,s&&s[e],o)),a}function Dle(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||r);return a.delete(n),X2(n,c)&&(c=eM(i._scopes,i,n,c)),c}function xle(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Ne(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let h=eM(l,i,n,u);e.push(Sa(h,s,o&&o[n],a))}}return e}function C5(n,e,t){return As(n)?n(e,t):n}var Tle=(n,e)=>n===!0?e:typeof n=="string"?Ms(e,n):void 0;function Ale(n,e,t,r,i){for(let s of e){let o=Tle(t,s);if(o){n.add(o);let a=C5(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function eM(n,e,t,r){let i=e._rootScopes,s=C5(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let c=s5(a,o,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=s5(a,o,s,c,r),c===null)?!1:og(Array.from(a),[""],i,s,()=>Sle(e,t,r))}function s5(n,e,t,r,i){for(;t;)t=Ale(n,e,t,r,i);return t}function Sle(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return pt(i)&&Ne(t)?t:i||{}}function Mle(n,e,t,r){let i;for(let s of e)if(i=E5(Ele(s,n),t),typeof i<"u")return X2(n,i)?eM(t,r,n,i):i}function E5(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function o5(n){let e=n._keys;return e||(e=n._keys=Ple(n._scopes)),e}function Ple(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function eb(n,e,t,r){let{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=e[l],o[a]={r:i.parse(Ms(u,s),l)};return o}var kle=Number.EPSILON||1e-14,Ed=(n,e)=>e<n.length&&!n[e].skip&&n[e],I5=n=>n==="x"?"y":"x";function D5(n,e,t,r){let i=n.skip?e:n,s=e,o=t.skip?e:t,a=Zp(s,i),c=Zp(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let h=r*l,f=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function Rle(n,e,t){let r=n.length,i,s,o,a,c,l=Ed(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Ed(n,u+1),!(!c||!l)){if(sl(e[u],0,kle)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function Fle(n,e,t="x"){let r=I5(t),i=n.length,s,o,a,c=Ed(n,0);for(let l=0;l<i;++l){if(o=a,a=c,c=Ed(n,l+1),!a)continue;let u=a[t],h=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=h-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=h+s*e[l])}}function x5(n,e="x"){let t=I5(e),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,c,l=Ed(n,0);for(o=0;o<r;++o)if(a=c,c=l,l=Ed(n,o+1),!!c){if(l){let u=l[e]-c[e];i[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?wi(i[o-1])!==wi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Rle(n,i,s),Fle(n,s,e)}function Mw(n,e,t){return Math.max(Math.min(n,t),e)}function Nle(n,e){let t,r,i,s,o,a=qi(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&qi(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=Mw(i.cp1x,e.left,e.right),i.cp1y=Mw(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Mw(i.cp2x,e.left,e.right),i.cp2y=Mw(i.cp2y,e.top,e.bottom)))}function tM(n,e,t,r,i){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")x5(n,i);else{let l=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=D5(l,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&Nle(n,t)}function ag(){return typeof window<"u"&&typeof document<"u"}function cg(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Fw(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var tb=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function T5(n,e){return tb(n).getPropertyValue(e)}var Ule=["top","right","bottom","left"];function nl(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let s=Ule[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var Ole=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Lle(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,c;if(Ole(i,s,n.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function xo(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=tb(t),s=i.boxSizing==="border-box",o=nl(i,"padding"),a=nl(i,"border","width"),{x:c,y:l,box:u}=Lle(n,t),h=o.left+(u&&a.left),f=o.top+(u&&a.top),{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((l-f)/y*t.height/r)}}function Vle(n,e,t){let r,i;if(e===void 0||t===void 0){let s=n&&cg(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=tb(s),c=nl(a,"border","width"),l=nl(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,r=Fw(a.maxWidth,s,"clientWidth"),i=Fw(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||Qp,maxHeight:i||Qp}}var Pw=n=>Math.round(n*10)/10;function nM(n,e,t,r){let i=tb(n),s=nl(i,"margin"),o=Fw(i.maxWidth,n,"clientWidth")||Qp,a=Fw(i.maxHeight,n,"clientHeight")||Qp,c=Vle(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let f=nl(i,"border","width"),p=nl(i,"padding");l-=p.width+f.width,u-=p.height+f.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=Pw(Math.min(l,o,c.maxWidth)),u=Pw(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Pw(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=Pw(Math.floor(u*r))),{width:l,height:u}}function nb(n,e,t){let r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var rM=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};ag()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function rb(n,e){let t=T5(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Co(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function iM(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function sM(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Co(n,i,t),a=Co(i,s,t),c=Co(s,e,t),l=Co(o,a,t),u=Co(a,c,t);return Co(l,u,t)}var Ble=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},jle=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function ka(n,e,t){return n?Ble(e,t):jle()}function ib(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function sb(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function A5(n){return n==="angle"?{between:ol,compare:m5,normalize:Tn}:{between:Ki,compare:(e,t)=>e-t,normalize:e=>e}}function a5({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function $le(n,e,t){let{property:r,start:i,end:s}=t,{between:o,normalize:a}=A5(r),c=e.length,{start:l,end:u,loop:h}=n,f,p;if(h){for(l+=c,u+=c,f=0,p=c;f<p&&o(a(e[l%c][r]),i,s);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}function ob(n,e,t){if(!t)return[n];let{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=A5(r),{start:u,end:h,loop:f,style:p}=$le(n,e,t),y=[],w=!1,b=null,A,P,U,V=()=>c(i,U,A)&&a(i,U)!==0,B=()=>a(s,A)===0||c(s,U,A),$=()=>w||V(),S=()=>!w||B();for(let D=u,T=u;D<=h;++D)P=e[D%o],!P.skip&&(A=l(P[r]),A!==U&&(w=c(A,i,s),b===null&&$()&&(b=a(A,i)===0?D:T),b!==null&&S()&&(y.push(a5({start:b,end:D,loop:f,count:o,style:p})),b=null),T=D,U=A));return b!==null&&y.push(a5({start:b,end:h,loop:f,count:o,style:p})),y}function ab(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let s=ob(r[i],n.points,e);s.length&&t.push(...s)}return t}function Hle(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function zle(n,e,t,r){let i=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function oM(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=Hle(t,i,s,r);if(r===!0)return c5(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+i:a,l=!!n._fullLoop&&o===0&&a===i-1;return c5(n,zle(t,o,c,l),t,e)}function c5(n,e,t,r){return!r||!r.setContext||!t?e:Wle(n,e,t,r)}function Wle(n,e,t,r){let i=n._chart.getContext(),s=l5(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,h=e[0].start,f=h;function p(y,w,b,A){let P=a?-1:1;if(y!==w){for(y+=c;t[y%c].skip;)y-=P;for(;t[w%c].skip;)w+=P;y%c!==w%c&&(l.push({start:y%c,end:w%c,loop:b,style:A}),u=A,h=w%c)}}for(let y of e){h=a?h:y.start;let w=t[h%c],b;for(f=h+1;f<=y.end;f++){let A=t[f%c];b=l5(r.setContext(Ps(i,{type:"segment",p0:w,p1:A,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),qle(b,u)&&p(h,f-1,y.loop,u),w=A,u=b}h<f-1&&p(h,f-1,y.loop,u)}return l}function l5(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function qle(n,e){if(!e)return!1;let t=[],r=function(i,s){return Gw(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function kw(n,e,t){return n.options.clip?n[t]:e[t]}function Gle(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:kw(t,e,"left"),right:kw(t,e,"right"),top:kw(r,e,"top"),bottom:kw(r,e,"bottom")}:e}function cb(n,e){let t=e._clip;if(t.disabled)return!1;let r=Gle(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var _M=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Hw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},To=new _M,S5="transparent",Kle={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=Kw(n||S5),i=r.valid&&Kw(e||S5);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},vM=class{constructor(e,t,r,i){let s=t[r];i=ut([e.to,i,s,e.from]);let o=ut([e.from,s,i]);this._active=!0,this._fn=e.fn||Kle[e.type||typeof o],this._easing=tl[e.easing]||tl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ut([e.to,t,i,e.from]),this._from=ut([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},yb=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ne(e))return;let t=Object.keys(mt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Ne(s))return;let o={};for(let a of t)o[a]=s[a];(pt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){let r=t.options,i=Jle(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&Yle(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],h=s[l],f=r.get(l);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[l]=u;continue}s[l]=h=new vM(f,e,l,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return To.add(this._chart,r),!0}};function Yle(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Jle(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function M5(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Qle(n,e,t){if(t===!1)return!1;let r=M5(n,t),i=M5(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Zle(n){let e,t,r,i;return Ne(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function S6(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function P5(n,e,t,r={}){let i=n.keys,s=r.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===t){if(u=!0,r.all)continue;break}l=n.values[c],Pt(l)&&(s||e===0||wi(e)===wi(l))&&(e+=l)}return!u&&!r.all?0:e}function Xle(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[i]:u,[s]:n[u]};return a}function aM(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function eue(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function tue(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function nue(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function k5(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function R5(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=eue(s,o,r),h=e.length,f;for(let p=0;p<h;++p){let y=e[p],{[c]:w,[l]:b}=y,A=y._stacks||(y._stacks={});f=A[l]=nue(i,u,w),f[a]=b,f._top=k5(f,o,!0,r.type),f._bottom=k5(f,o,!1,r.type);let P=f._visualValues||(f._visualValues={});P[a]=b}}function cM(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function rue(n,e){return Ps(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function iue(n,e,t){return Ps(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function lg(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}var lM=n=>n==="reset"||n==="none",F5=(n,e)=>e?n:Object.assign({},n),sue=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:S6(t,!0),values:null},Fa=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=aM(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&lg(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(f,p,y,w)=>f==="x"?p:f==="r"?w:y,o=r.xAxisID=ve(i.xAxisID,cM(t,"x")),a=r.yAxisID=ve(i.yAxisID,cM(t,"y")),c=r.rAxisID=ve(i.rAxisID,cM(t,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),h=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&jw(this._data,this),t._stacked&&lg(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Ne(r)){let s=this._cachedMeta;this._data=Xle(r,s)}else if(i!==r){if(i){jw(i,this);let s=this._cachedMeta;lg(s),s._parsed=[]}r&&Object.isExtensible(r)&&q2(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=aM(r.vScale,r),r.stack!==i.stack&&(s=!0,lg(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(R5(this,r._parsed),r._stacked=aM(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=t===0&&r===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],h,f,p;if(this._parsing===!1)i._parsed=s,i._sorted=!0,p=s;else{pt(s[t])?p=this.parseArrayData(i,s,t,r):Ne(s[t])?p=this.parseObjectData(i,s,t,r):p=this.parsePrimitiveData(i,s,t,r);let y=()=>f[c]===null||u&&f[c]<u[c];for(h=0;h<r;++h)i._parsed[h+t]=f=p[h],l&&(y()&&(l=!1),u=f);i._sorted=l}a&&R5(this,p)}parsePrimitiveData(t,r,i,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),h=o===a,f=new Array(s),p,y,w;for(p=0,y=s;p<y;++p)w=p+i,f[p]={[c]:h||o.parse(u[w],w),[l]:a.parse(r[w],w)};return f}parseArrayData(t,r,i,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,h,f;for(l=0,u=s;l<u;++l)h=l+i,f=r[h],c[l]={x:o.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,r,i,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),h,f,p,y;for(h=0,f=s;h<f;++h)p=h+i,y=r[p],u[h]={x:o.parse(Ms(y,c),p),y:a.parse(Ms(y,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let s=this.chart,o=this._cachedMeta,a=r[t.axis],c={keys:S6(s,!0),values:r._stacks[t.axis]._visualValues};return P5(c,a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=P5(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),l=sue(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=tue(c),p,y;function w(){y=s[p];let b=y[c.axis];return!Pt(y[t.axis])||h>b||f<b}for(p=0;p<a&&!(!w()&&(this.updateRangeFromParsed(u,t,y,l),o));++p);if(o){for(p=a-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(u,t,y,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],Pt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=Zle(ve(this.options.clip,Qle(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(t,o,c,l),h=c;h<c+l;++h){let f=s[h];f.hidden||(f.active&&u?a.push(f):f.draw(t,o))}for(h=0;h<a.length;++h)a[h].draw(t,o)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=iue(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=rue(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=t+"-"+r,c=o[a],l=this.enableOptionSharing&&il(i);if(c)return F5(c,l);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),y=Object.keys(mt.elements[t]),w=()=>this.getContext(i,s,r),b=u.resolveNamedOptions(p,y,w,f);return b.$shared&&(b.$shared=l,o[a]=Object.freeze(F5(b,l))),b}_resolveAnimations(t,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(t,i,r))}let u=new yb(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||lM(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){lM(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!lM(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){let s=this._cachedMeta,o=s.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,r);i._stacked&&lg(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function oue(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=$w(r.sort((i,s)=>i-s))}return n._cache.$bar}function aue(n){let e=n.iScale,t=oue(e,n.type),r=e._length,i,s,o,a,c=()=>{o===32767||o===-32768||(il(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function cue(n,e,t,r){let i=t.barThickness,s,o;return we(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function lue(n,e,t,r){let i=e.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:t.barPercentage,start:l}}function uue(n,e,t,r){let i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function M6(n,e,t,r){return pt(n)?uue(n,e,t,r):e[t.axis]=t.parse(n,r),e}function N5(n,e,t,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,c=[],l,u,h,f;for(l=t,u=t+r;l<u;++l)f=e[l],h={},h[i.axis]=a||i.parse(o[l],l),c.push(M6(f,h,s,l));return c}function uM(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function due(n,e,t){return n!==0?wi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function hue(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function fue(n,e,t,r){let i=e.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=hue(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(s[U5(u,o,a,c)]=!0,i=l)),s[U5(i,o,a,c)]=!0,n.borderSkipped=s}function U5(n,e,t,r){return r?(n=pue(n,e,t),n=O5(n,t,e)):n=O5(n,e,t),n}function pue(n,e,t){return n===e?t:n===t?e:n}function O5(n,e,t){return n==="start"?e:n==="end"?t:n}function gue(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var mue=(()=>{class n extends Fa{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return N5(t,r,i,s)}parseArrayData(t,r,i,s){return N5(t,r,i,s)}parseObjectData(t,r,i,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,h=a.axis==="x"?c:l,f=[],p,y,w,b;for(p=i,y=i+s;p<y;++p)b=r[p],w={},w[o.axis]=o.parse(Ms(b,u),p),f.push(M6(Ms(b,h),w,a,p));return f}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,c=uM(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,s);for(let y=r;y<r+i;y++){let w=this.getParsed(y),b=o||we(w[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),A=this._calculateBarIndexPixels(y,h),P=(w._stacks||{})[c.axis],U={horizontal:u,base:b.base,enableBorderRadius:!P||uM(w._custom)||a===P._top||a===P._bottom,x:u?b.head:A.center,y:u?A.center:b.head,height:u?A.size:Math.abs(b.size),width:u?Math.abs(b.size):A.size};p&&(U.options=f||this.resolveDataElementOptions(y,t[y].active?"active":s));let V=U.options||t[y].options;fue(U,V,P,a),gue(U,V,h.ratio),this.updateElement(t[y],y,U,s)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=h=>{let f=h._parsed.find(y=>y[i.axis]===l),p=f&&f[h.vScale.axis];if(we(p)||isNaN(p))return!0};for(let h of s)if(!(r!==void 0&&u(h))&&((o===!1||a.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[ve(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let s=this._getStacks(t,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let c=t.barThickness;return{min:c||aue(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,h=uM(u),f=l[r.axis],p=0,y=i?this.applyStack(r,l,i):f,w,b;y!==f&&(p=y-f,y=f),h&&(f=u.barStart,y=u.barEnd-u.barStart,f!==0&&wi(f)!==wi(u.barEnd)&&(p=0),p+=f);let A=!we(o)&&!h?o:p,P=r.getPixelForValue(A);if(this.chart.getDataVisibility(t)?w=r.getPixelForValue(p+y):w=P,b=w-P,Math.abs(b)<a){b=due(b,r,c)*a,f===c&&(P-=b/2);let U=r.getPixelForDecimal(0),V=r.getPixelForDecimal(1),B=Math.min(U,V),$=Math.max(U,V);P=Math.max(Math.min(P,$),B),w=P+b,i&&!h&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(w)-r.getValueForPixel(P))}if(P===r.getPixelForValue(c)){let U=wi(b)*r.getLineWidthForValue(c)/2;P+=U,b-=U}return{size:b,base:P,head:w,center:w+b/2}}_calculateBarIndexPixels(t,r){let i=r.scale,s=this.options,o=s.skipNull,a=ve(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(r.grouped){let h=o?this._getStackCount(t):r.stackCount,f=s.barThickness==="flex"?lue(t,r,s,h*u):cue(t,r,s,h*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(ve(p,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+y;c=f.start+f.chunk*w+f.chunk/2,l=Math.min(a,f.chunk*f.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})(),yue=(()=>{class n extends Fa{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){let o=super.parsePrimitiveData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(t,r,i,s){let o=super.parseArrayData(t,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=ve(c[2],this.resolveDataElementOptions(a+i).radius)}return o}parseObjectData(t,r,i,s){let o=super.parseObjectData(t,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=ve(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,s),h=a.axis,f=c.axis;for(let p=r;p<r+i;p++){let y=t[p],w=!o&&this.getParsed(p),b={},A=b[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(w[h]),P=b[f]=o?c.getBasePixel():c.getPixelForValue(w[f]);b.skip=isNaN(A)||isNaN(P),u&&(b.options=l||this.resolveDataElementOptions(p,y.active?"active":s),o&&(b.options.radius=0)),this.updateElement(y,p,b,s)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=ve(i&&i._custom,o),s}}return n})();function _ue(n,e,t){let r=1,i=1,s=0,o=0;if(e<gt){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),p=(U,V,B)=>ol(U,a,c,!0)?1:Math.max(V,V*t,B,B*t),y=(U,V,B)=>ol(U,a,c,!0)?-1:Math.min(V,V*t,B,B*t),w=p(0,l,h),b=p(Lt,u,f),A=y(Qe,l,h),P=y(Qe+Lt,u,f);r=(w-A)/2,i=(b-P)/2,s=-(w+A)/2,o=-(b+P)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}var OM=(()=>{class n extends Fa{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(Ne(i[t])){let{key:l="value"}=this._parsing;o=u=>+Ms(i[u],l)}let a,c;for(a=t,c=t+r;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Jr(this.options.rotation-90)}_getCircumference(){return Jr(this.options.circumference)}_getRotationExtents(){let t=gt,r=-gt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(V2(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:y,offsetX:w,offsetY:b}=_ue(f,h,l),A=(i.width-a)/p,P=(i.height-a)/y,U=Math.max(Math.min(A,P)/2,0),V=Nw(this.options.radius,U),B=Math.max(V*l,0),$=(V-B)/this._getVisibleDatasetWeightTotal();this.offsetX=w*V,this.offsetY=b*V,s.total=this.calculateTotal(),this.outerRadius=V-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){let i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/gt)}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=o&&u.animateScale,y=p?0:this.innerRadius,w=p?0:this.outerRadius,{sharedOptions:b,includeOptions:A}=this._getSharedOptions(r,s),P=this._getRotation(),U;for(U=0;U<r;++U)P+=this._circumference(U,o);for(U=r;U<r+i;++U){let V=this._circumference(U,o),B=t[U],$={x:h+this.offsetX,y:f+this.offsetY,startAngle:P,endAngle:P+V,circumference:V,outerRadius:w,innerRadius:y};A&&($.options=b||this.resolveDataElementOptions(U,B.active?"active":s)),P+=V,this.updateElement(B,U,$,s)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,s;for(s=0;s<r.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?gt*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=al(r._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0,i=this.chart,s,o,a,c,l;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){let o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(ve(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),vue=(()=>{class n extends Fa{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:c,count:l}=Ww(r,s,a);this._drawStart=c,this._drawCount=l,qw(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,s),p=a.axis,y=c.axis,{spanGaps:w,segment:b}=this.options,A=Ma(w)?w:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||o||s==="none",U=r+i,V=t.length,B=r>0&&this.getParsed(r-1);for(let $=0;$<V;++$){let S=t[$],D=P?S:{};if($<r||$>=U){D.skip=!0;continue}let T=this.getParsed($),k=we(T[y]),R=D[p]=a.getPixelForValue(T[p],$),N=D[y]=o||k?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,T,l):T[y],$);D.skip=isNaN(R)||isNaN(N)||k,D.stop=$>0&&Math.abs(T[p]-B[p])>A,b&&(D.parsed=T,D.raw=u.data[$]),f&&(D.options=h||this.resolveDataElementOptions($,S.active?"active":s)),P||this.updateElement(S,$,D,s),B=T}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),P6=(()=>{class n extends Fa{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=al(r._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return eb.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*Qe,y=p,w,b=360/this.countVisibleElements();for(w=0;w<r;++w)y+=this._computeAngle(w,s,b);for(w=r;w<r+i;w++){let A=t[w],P=y,U=y+this._computeAngle(w,s,b),V=a.getDataVisibility(w)?u.getDistanceFromCenterForValue(this.getParsed(w).r):0;y=U,o&&(l.animateScale&&(V=0),l.animateRotate&&(P=U=p));let B={x:h,y:f,innerRadius:0,outerRadius:V,startAngle:P,endAngle:U,options:this.resolveDataElementOptions(w,A.active?"active":s)};this.updateElement(A,w,B,s)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?Jr(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),wue=(()=>{class n extends OM{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),bue=(()=>{class n extends Fa{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return eb.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=r;c<r+i;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":s),h=o.getPointPositionForValue(c,this.getParsed(c).r),f=a?o.xCenter:h.x,p=a?o.yCenter:h.y,y={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(l,c,y,s)}}}return n})(),Cue=(()=>{class n extends Fa{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled,{start:o,count:a}=Ww(r,i,s);if(this._drawStart=o,this._drawCount=a,qw(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,s),f=this.getSharedOptions(h),p=this.includeOptions(s,f),y=a.axis,w=c.axis,{spanGaps:b,segment:A}=this.options,P=Ma(b)?b:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||o||s==="none",V=r>0&&this.getParsed(r-1);for(let B=r;B<r+i;++B){let $=t[B],S=this.getParsed(B),D=U?$:{},T=we(S[w]),k=D[y]=a.getPixelForValue(S[y],B),R=D[w]=o||T?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,S,l):S[w],B);D.skip=isNaN(k)||isNaN(R)||T,D.stop=B>0&&Math.abs(S[y]-V[y])>P,A&&(D.parsed=S,D.raw=u.data[B]),p&&(D.options=f||this.resolveDataElementOptions(B,$.active?"active":s)),U||this.updateElement($,B,D,s),V=S}this.updateSharedOptions(f,s,h)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}return n})(),Eue=Object.freeze({__proto__:null,BarController:mue,BubbleController:yue,DoughnutController:OM,LineController:vue,PieController:wue,PolarAreaController:P6,RadarController:bue,ScatterController:Cue});function ll(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var wM=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ll()}parse(){return ll()}format(){return ll()}add(){return ll()}diff(){return ll()}startOf(){return ll()}endOf(){return ll()}},Iue={_date:wM};function Due(n,e,t,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?z2:Wi;if(r){if(i._sharedOptions){let u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){let f=l(s,e,t-h),p=l(s,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:h}=i._cachedMeta,{_parsed:f}=n,p=f.slice(0,u.lo+1).reverse().findIndex(w=>!we(w[h.axis]));u.lo-=Math.max(0,p);let y=f.slice(u.hi).findIndex(w=>!we(w[h.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function bg(n,e,t,r,i){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:h,hi:f}=Due(s[a],e,o,i);for(let p=h;p<=f;++p){let y=u[p];y.skip||r(y,l,p)}}}function xue(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function dM(n,e,t,r,i){let s=[];return!i&&!n.isPointInArea(e)||bg(n,t,e,function(a,c,l){!i&&!qi(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function Tue(n,e,t,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=Bw(o,{x:e.x,y:e.y});ol(h,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return bg(n,t,e,s),i}function Aue(n,e,t,r,i,s){let o=[],a=xue(t),c=Number.POSITIVE_INFINITY;function l(u,h,f){let p=u.inRange(e.x,e.y,i);if(r&&!p)return;let y=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(y))&&!p)return;let b=a(e,y);b<c?(o=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:u,datasetIndex:h,index:f})}return bg(n,t,e,l),o}function hM(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?Tue(n,e,t,i):Aue(n,e,t,r,i,s)}function L5(n,e,t,r,i){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return bg(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var Sue={evaluateInteractionItems:bg,modes:{index(n,e,t,r){let i=xo(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?dM(n,i,s,r,o):hM(n,i,s,!1,r,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=xo(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?dM(n,i,s,r,o):hM(n,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=xo(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return dM(n,i,s,r,o)},nearest(n,e,t,r){let i=xo(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return hM(n,i,s,t.intersect,r,o)},x(n,e,t,r){let i=xo(e,n);return L5(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=xo(e,n);return L5(n,i,"y",t.intersect,r)}}},k6=["left","top","right","bottom"];function ug(n,e){return n.filter(t=>t.pos===e)}function V5(n,e){return n.filter(t=>k6.indexOf(t.pos)===-1&&t.box.axis===e)}function dg(n,e){return n.sort((t,r)=>{let i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Mue(n){let e=[],t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Pue(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:s}=t;if(!r||!k6.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function kue(n,e){let t=Pue(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function Rue(n){let e=Mue(n),t=dg(e.filter(l=>l.box.fullSize),!0),r=dg(ug(e,"left"),!0),i=dg(ug(e,"right")),s=dg(ug(e,"top"),!0),o=dg(ug(e,"bottom")),a=V5(e,"x"),c=V5(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:ug(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function B5(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function R6(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Fue(n,e,t,r){let{pos:i,box:s}=t,o=n.maxPadding;if(!Ne(i)){t.size&&(n[i]-=t.size);let h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[i]+=t.size}s.getPadding&&R6(o,s.getPadding());let a=Math.max(0,e.outerWidth-B5(o,n,"left","right")),c=Math.max(0,e.outerHeight-B5(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function Nue(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Uue(n,e){let t=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function pg(n,e,t,r){let i=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,Uue(a.horizontal,e));let{same:h,other:f}=Fue(e,t,a,r);l|=h&&i.length,u=u||f,c.fullSize||i.push(a)}return l&&pg(i,e,t,r)||u}function lb(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function j5(n,e,t,r){let i=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*u,f=l.size||c.height;il(l.start)&&(o=l.start),c.fullSize?lb(c,i.left,o,t.outerWidth-i.right-i.left,f):lb(c,e.left+l.placed,o,h,f),l.start=o,l.placed+=h,o=c.bottom}else{let h=e.h*u,f=l.size||c.width;il(l.start)&&(s=l.start),c.fullSize?lb(c,s,i.top,f,t.outerHeight-i.bottom-i.top):lb(c,s,e.top+l.placed,f,h),l.start=s,l.placed+=h,s=c.right}}e.x=s,e.y=o}var Zn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=ln(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=Rue(n.boxes),c=a.vertical,l=a.horizontal;Xe(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});let u=c.reduce((w,b)=>b.box.options&&b.box.options.display===!1?w:w+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);R6(f,ln(r));let p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=kue(c.concat(l),h);pg(a.fullSize,p,h,y),pg(c,p,h,y),pg(l,p,h,y)&&pg(c,p,h,y),Nue(p),j5(a.leftAndTop,p,h,y),p.x+=p.w,p.y+=p.h,j5(a.rightAndBottom,p,h,y),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Xe(a.chartArea,w=>{let b=w.box;Object.assign(b,n.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},_b=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},bM=class extends _b{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},gb="$chartjs",Oue={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$5=n=>n===null||n==="";function Lue(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[gb]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",$5(i)){let s=rb(n,"width");s!==void 0&&(n.width=s)}if($5(r))if(n.style.height==="")n.height=n.width/(e||2);else{let s=rb(n,"height");s!==void 0&&(n.height=s)}return n}var F6=rM?{passive:!0}:!1;function Vue(n,e,t){n&&n.addEventListener(e,t,F6)}function Bue(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,F6)}function jue(n,e){let t=Oue[n.type]||n.type,{x:r,y:i}=xo(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function vb(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function $ue(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||vb(a.addedNodes,r),o=o&&!vb(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Hue(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||vb(a.removedNodes,r),o=o&&!vb(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var mg=new Map,H5=0;function N6(){let n=window.devicePixelRatio;n!==H5&&(H5=n,mg.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function zue(n,e){mg.size||window.addEventListener("resize",N6),mg.set(n,e)}function Wue(n){mg.delete(n),mg.size||window.removeEventListener("resize",N6)}function que(n,e,t){let r=n.canvas,i=r&&cg(r);if(!i)return;let s=zw((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(i),zue(n,s),o}function fM(n,e,t){t&&t.disconnect(),e==="resize"&&Wue(n)}function Gue(n,e,t){let r=n.canvas,i=zw(s=>{n.ctx!==null&&t(jue(s,n))},n);return Vue(r,e,i),i}var CM=class extends _b{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Lue(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[gb])return!1;let r=t[gb].initial;["height","width"].forEach(s=>{let o=r[s];we(o)?t.removeAttribute(s):t.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[gb],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),o={attach:$ue,detach:Hue,resize:que}[t]||Gue;i[t]=o(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:fM,detach:fM,resize:fM}[t]||Bue)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return nM(e,t,r,i)}isAttached(e){let t=e&&cg(e);return!!(t&&t.isConnected)}};function Kue(n){return!ag()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bM:CM}var Yi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Ma(this.x)&&Ma(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Yue(n,e){let t=n.options.ticks,r=Jue(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Zue(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return Xue(e,l,s,o/i),l;let u=Que(s,e,i);if(o>0){let h,f,p=o>1?Math.round((c-a)/(o-1)):null;for(ub(e,l,u,we(p)?0:a-p,a),h=0,f=o-1;h<f;h++)ub(e,l,u,s[h],s[h+1]);return ub(e,l,u,c,we(p)?e.length:c+p),l}return ub(e,l,u),l}function Jue(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Que(n,e,t){let r=ede(n),i=e.length/t;if(!r)return Math.max(i,1);let s=j2(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function Zue(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Xue(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function ub(n,e,t,r,i){let s=ve(r,0),o=Math.min(ve(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function ede(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var tde=n=>n==="left"?"right":n==="right"?"left":n,z5=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,W5=(n,e)=>Math.min(e||n,n);function q5(n,e){let t=[],r=n.length/e,i=n.length,s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function nde(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function rde(n,e){Xe(n,t=>{let r=t.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function hg(n){return n.drawTicks?n.tickLength:0}function G5(n,e){if(!n.display)return 0;let t=Vt(n.font,e),r=ln(n.padding);return(pt(n.text)?n.text.length:1)*t.lineHeight+r.height}function ide(n,e){return Ps(n,{scale:e,type:"scale"})}function sde(n,e,t){return Ps(n,{tick:t,index:e,type:"tick"})}function ode(n,e,t){let r=ng(n);return(t&&e!=="right"||!t&&e==="right")&&(r=tde(r)),r}function ade(n,e,t,r){let{top:i,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,h=0,f,p,y,w=o-i,b=a-s;if(n.isHorizontal()){if(p=An(r,s,a),Ne(t)){let A=Object.keys(t)[0],P=t[A];y=u[A].getPixelForValue(P)+w-e}else t==="center"?y=(l.bottom+l.top)/2+w-e:y=z5(n,t,e);f=a-s}else{if(Ne(t)){let A=Object.keys(t)[0],P=t[A];p=u[A].getPixelForValue(P)-b+e}else t==="center"?p=(l.left+l.right)/2-b+e:p=z5(n,t,e);y=An(r,o,i),h=t==="left"?-Lt:Lt}return{titleX:p,titleY:y,maxWidth:f,rotation:h}}var dl=class n extends Yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=fr(e,Number.POSITIVE_INFINITY),t=fr(t,Number.NEGATIVE_INFINITY),r=fr(r,Number.POSITIVE_INFINITY),i=fr(i,Number.NEGATIVE_INFINITY),{min:fr(e,r),max:fr(t,i),minDefined:Pt(e),maxDefined:Pt(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:fr(t,fr(r,t)),max:fr(r,fr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Z2(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?q5(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Yue(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rt(this.options.afterUpdate,[this])}beforeSetDimensions(){rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=rt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=W5(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation,o=i,a,c,l;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=cn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-hg(e.grid)-t.padding-G5(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),o=eg(Math.min(Math.asin(cn((u.highest.height+6)/a,-1,1)),Math.asin(cn(c/l,-1,1))-Math.asin(cn(f/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=G5(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=hg(s)+c):(e.height=this.maxHeight,e.width=hg(s)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,y=Jr(this.labelRotation),w=Math.cos(y),b=Math.sin(y);if(a){let A=r.mirror?0:b*h.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+A+p)}else{let A=r.mirror?0:w*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+A+p)}this._calculatePadding(l,u,b,w)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;c?l?(f=i*e.width,p=r*t.height):(f=r*e.height,p=i*t.width):s==="start"?p=t.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)we(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=q5(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/W5(t,r)),l=0,u=0,h,f,p,y,w,b,A,P,U,V,B;for(h=0;h<t;h+=c){if(y=e[h].label,w=this._resolveTickFontOptions(h),i.font=b=w.string,A=s[b]=s[b]||{data:{},gc:[]},P=w.lineHeight,U=V=0,!we(y)&&!pt(y))U=Cd(i,A.data,A.gc,U,y),V=P;else if(pt(y))for(f=0,p=y.length;f<p;++f)B=y[f],!we(B)&&!pt(B)&&(U=Cd(i,A.data,A.gc,U,B),V+=P);o.push(U),a.push(V),l=Math.max(U,l),u=Math.max(V,u)}rde(s,t);let $=o.indexOf(l),S=a.indexOf(u),D=T=>({width:o[T]||0,height:a[T]||0});return{first:D(0),last:D(t-1),widest:D($),highest:D(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return H2(this._alignToPixels?Eo(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=sde(this.getContext(),e,r))}return this.$context||(this.$context=ide(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Jr(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=hg(s),p=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,b=w/2,A=function(yt){return Eo(r,yt,w)},P,U,V,B,$,S,D,T,k,R,N,M;if(o==="top")P=A(this.bottom),S=this.bottom-f,T=P-b,R=A(e.top)+b,M=e.bottom;else if(o==="bottom")P=A(this.top),R=e.top,M=A(e.bottom)-b,S=P+b,T=this.top+f;else if(o==="left")P=A(this.right),$=this.right-f,D=P-b,k=A(e.left)+b,N=e.right;else if(o==="right")P=A(this.left),k=e.left,N=A(e.right)-b,$=P+b,D=this.left+f;else if(t==="x"){if(o==="center")P=A((e.top+e.bottom)/2+.5);else if(Ne(o)){let yt=Object.keys(o)[0],dt=o[yt];P=A(this.chart.scales[yt].getPixelForValue(dt))}R=e.top,M=e.bottom,S=P+b,T=S+f}else if(t==="y"){if(o==="center")P=A((e.left+e.right)/2);else if(Ne(o)){let yt=Object.keys(o)[0],dt=o[yt];P=A(this.chart.scales[yt].getPixelForValue(dt))}$=P-b,D=$-f,k=e.left,N=e.right}let kt=ve(i.ticks.maxTicksLimit,h),Ke=Math.max(1,Math.ceil(h/kt));for(U=0;U<h;U+=Ke){let yt=this.getContext(U),dt=s.setContext(yt),Sn=a.setContext(yt),Xt=dt.lineWidth,Fs=dt.color,ml=Sn.dash||[],Xn=Sn.dashOffset,Bt=dt.tickWidth,Ns=dt.tickColor,bi=dt.tickBorderDash||[],Us=dt.tickBorderDashOffset;V=nde(this,U,c),V!==void 0&&(B=Eo(r,V,Xt),l?$=D=k=N=B:S=T=R=M=B,p.push({tx1:$,ty1:S,tx2:D,ty2:T,x1:k,y1:R,x2:N,y2:M,width:Xt,color:Fs,borderDash:ml,borderDashOffset:Xn,tickWidth:Bt,tickColor:Ns,tickBorderDash:bi,tickBorderDashOffset:Us}))}return this._ticksLength=h,this._borderValue=P,p}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=s,f=hg(r.grid),p=f+u,y=h?-u:p,w=-Jr(this.labelRotation),b=[],A,P,U,V,B,$,S,D,T,k,R,N,M="middle";if(i==="top")$=this.bottom-y,S=this._getXAxisLabelAlignment();else if(i==="bottom")$=this.top+y,S=this._getXAxisLabelAlignment();else if(i==="left"){let Ke=this._getYAxisLabelAlignment(f);S=Ke.textAlign,B=Ke.x}else if(i==="right"){let Ke=this._getYAxisLabelAlignment(f);S=Ke.textAlign,B=Ke.x}else if(t==="x"){if(i==="center")$=(e.top+e.bottom)/2+p;else if(Ne(i)){let Ke=Object.keys(i)[0],yt=i[Ke];$=this.chart.scales[Ke].getPixelForValue(yt)+p}S=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")B=(e.left+e.right)/2-p;else if(Ne(i)){let Ke=Object.keys(i)[0],yt=i[Ke];B=this.chart.scales[Ke].getPixelForValue(yt)}S=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));let kt=this._getLabelSizes();for(A=0,P=a.length;A<P;++A){U=a[A],V=U.label;let Ke=s.setContext(this.getContext(A));D=this.getPixelForTick(A)+s.labelOffset,T=this._resolveTickFontOptions(A),k=T.lineHeight,R=pt(V)?V.length:1;let yt=R/2,dt=Ke.color,Sn=Ke.textStrokeColor,Xt=Ke.textStrokeWidth,Fs=S;o?(B=D,S==="inner"&&(A===P-1?Fs=this.options.reverse?"left":"right":A===0?Fs=this.options.reverse?"right":"left":Fs="center"),i==="top"?l==="near"||w!==0?N=-R*k+k/2:l==="center"?N=-kt.highest.height/2-yt*k+k:N=-kt.highest.height+k/2:l==="near"||w!==0?N=k/2:l==="center"?N=kt.highest.height/2-yt*k:N=kt.highest.height-R*k,h&&(N*=-1),w!==0&&!Ke.showLabelBackdrop&&(B+=k/2*Math.sin(w))):($=D,N=(1-R)*k/2);let ml;if(Ke.showLabelBackdrop){let Xn=ln(Ke.backdropPadding),Bt=kt.heights[A],Ns=kt.widths[A],bi=N-Xn.top,Us=0-Xn.left;switch(M){case"middle":bi-=Bt/2;break;case"bottom":bi-=Bt;break}switch(S){case"center":Us-=Ns/2;break;case"right":Us-=Ns;break;case"inner":A===P-1?Us-=Ns:A>0&&(Us-=Ns/2);break}ml={left:Us,top:bi,width:Ns+Xn.width,height:Bt+Xn.height,color:Ke.backdropColor}}b.push({label:V,font:T,textOffset:N,options:{rotation:w,color:dt,strokeColor:Sn,strokeWidth:Xt,textAlign:Fs,textBaseline:M,translation:[B,$],backdrop:ml}})}return b}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Jr(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?i?(u=this.right+s,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){let c=i[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,h,f;this.isHorizontal()?(l=Eo(e,this.left,o)-o/2,u=Eo(e,this.right,a)+a/2,h=f=c):(h=Eo(e,this.top,o)-o/2,f=Eo(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&Dd(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;Io(r,l,0,u,c,a)}i&&xd(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let s=Vt(r.font),o=ln(r.padding),a=r.align,c=s.lineHeight/2;t==="bottom"||t==="center"||Ne(t)?(c+=o.bottom,pt(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:h,rotation:f}=ade(this,c,t,a);Io(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:f,textAlign:ode(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=ve(e.grid&&e.grid.z,-1),i=ve(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Vt(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Ad=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;ude(t)&&(r=this.register(t));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,cde(e,o,r),this.override&&mt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in mt[i]&&(delete mt[i][r],this.override&&delete Pa[r])}};function cde(n,e,t){let r=Yr(Object.create(null),[t?mt.get(t):{},mt.get(e),n.defaults]);mt.set(e,r),n.defaultRoutes&&lde(e,n.defaultRoutes),n.descriptors&&mt.describe(e,n.descriptors)}function lde(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");mt.route(s,i,c,a)})}function ude(n){return"id"in n&&"defaults"in n}var EM=class{constructor(){this.controllers=new Ad(Fa,"datasets",!0),this.elements=new Ad(Yi,"elements"),this.plugins=new Ad(Object,"plugins"),this.scales=new Ad(dl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Xe(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){let i=Xp(e);rt(r["before"+i],[],r),t[e](r),rt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Rs=new EM,IM=class{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[t,i,s.options];if(rt(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){we(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=ve(r.options&&r.options.plugins,{}),s=dde(r);return i===!1&&!t?[]:fde(e,s,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function dde(n){let e={},t=[],r=Object.keys(Rs.plugins.items);for(let s=0;s<r.length;s++)t.push(Rs.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function hde(n,e){return!e&&n===!1?null:n===!0?{}:n}function fde(n,{plugins:e,localIds:t},r,i){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=hde(r[c],i);l!==null&&s.push({plugin:a,options:pde(n.config,{plugin:a,local:t[c]},l,o)})}return s}function pde(n,{plugin:e,local:t},r,i){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function DM(n,e){let t=mt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gde(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function mde(n,e){return n===e?"_index_":"_value_"}function K5(n){if(n==="x"||n==="y"||n==="r")return n}function yde(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function xM(n,...e){if(K5(n))return n;for(let t of e){let r=t.axis||yde(t.position)||n.length>1&&K5(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Y5(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function _de(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Y5(n,"x",t[0])||Y5(n,"y",t[0])}return{}}function vde(n,e){let t=Pa[n.type]||{scales:{}},r=e.scales||{},i=DM(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Ne(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=xM(o,a,_de(o,n),mt.scales[a.type]),l=mde(c,i),u=t.scales||{};s[o]=rl(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||DM(a,e),u=(Pa[a]||{}).scales||{};Object.keys(u).forEach(h=>{let f=gde(h,c),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),rl(s[p],[{axis:f},r[p],u[h]])})}),Object.keys(s).forEach(o=>{let a=s[o];rl(a,[mt.scales[a.type],mt.scale])}),s}function U6(n){let e=n.options||(n.options={});e.plugins=ve(e.plugins,{}),e.scales=vde(n,e)}function O6(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function wde(n){return n=n||{},n.data=O6(n.data),U6(n),n}var J5=new Map,L6=new Set;function db(n,e){let t=J5.get(n);return t||(t=e(),J5.set(n,t),L6.add(t)),t}var fg=(n,e,t)=>{let r=Ms(e,t);r!==void 0&&n.add(r)},TM=class{constructor(e){this._config=wde(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=O6(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),U6(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return db(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return db(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return db(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return db(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>fg(c,e,h))),u.forEach(h=>fg(c,i,h)),u.forEach(h=>fg(c,Pa[s]||{},h)),u.forEach(h=>fg(c,mt,h)),u.forEach(h=>fg(c,Yw,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),L6.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,Pa[t]||{},mt.datasets[t]||{},{type:t},mt,Yw]}resolveNamedOptions(e,t,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=Q5(this._resolverCache,e,i),c=o;if(Cde(o,t)){s.$shared=!1,r=As(r)?r():r;let l=this.createResolver(e,r,a);c=Sa(o,r,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,r=[""],i){let{resolver:s}=Q5(this._resolverCache,e,r);return Ne(t)?Sa(s,t,void 0,i):s}};function Q5(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),s=r.get(i);return s||(s={resolver:og(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var bde=n=>Ne(n)&&Object.getOwnPropertyNames(n).some(e=>As(n[e]));function Cde(n,e){let{isScriptable:t,isIndexable:r}=Xw(n);for(let i of e){let s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(As(a)||bde(a))||o&&pt(a))return!0}return!1}var Ede="4.5.0",Ide=["top","bottom","left","right","chartArea"];function Z5(n,e){return n==="top"||n==="bottom"||Ide.indexOf(n)===-1&&e==="x"}function X5(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function e6(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),rt(t&&t.onComplete,[n],e)}function Dde(n){let e=n.chart,t=e.options.animation;rt(t&&t.onProgress,[n],e)}function V6(n){return ag()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var mb={},t6=n=>{let e=V6(n);return Object.values(mb).filter(t=>t.canvas===e).pop()};function xde(n,e,t){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=e){let o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function Tde(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var Na=(()=>{class n{static defaults=mt;static instances=mb;static overrides=Pa;static registry=Rs;static version=Ede;static getChart=t6;static register(...t){Rs.add(...t),n6()}static unregister(...t){Rs.remove(...t),n6()}constructor(t,r){let i=this.config=new TM(r),s=V6(t),o=t6(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Kue(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,h=l&&l.width;if(this.id=L2(),this.ctx=c,this.canvas=l,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new IM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=G2(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],mb[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}To.listen(this,"complete",e6),To.listen(this,"progress",Dde),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return we(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Rs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Jw(this.canvas,this.ctx),this}stop(){return To.stop(this),this}resize(t,r){To.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,nb(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),rt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};Xe(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=xM(a,c),u=l==="r",h=l==="x";return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Xe(o,a=>{let c=a.options,l=c.id,u=xM(l,c),h=ve(c.type,a.dtype);(c.position===void 0||Z5(c.position,u)!==Z5(a.dposition))&&(c.position=a.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{let p=Rs.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(c,t)}),Xe(s,(a,c)=>{a||delete i[c]}),Xe(i,a=>{Zn.configure(this,a,a.options),Zn.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(X5("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||DM(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Rs.getController(c),{datasetElementType:u,dataElementType:h}=mt.datasets[c];Object.assign(l,{dataElementType:Rs.getElement(h),datasetElementType:u&&Rs.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Xe(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){let{controller:f}=this.getDatasetMeta(u),p=!s&&o.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Xe(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(X5("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Xe(this.scales,t=>{Zn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Uw(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;xde(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!Uw(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zn.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Xe(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,As(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(To.has(this)?this.attached&&!To.running(this)&&To.start(this):(this.draw(),e6({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=cb(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Dd(r,s),t.controller.draw(),s&&xd(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return qi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){let o=Sue.modes[r];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ps(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);il(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),To.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Jw(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete mb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Xe(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){Xe(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Xe(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Id(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let s=this.options.hover,o=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=o(r,t),c=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(t,s,i,a),l=B2(t),u=Tde(t,this._lastEvent,i,l);i&&(this._lastEvent=null,rt(o.onHover,[t,c,this],this),l&&rt(o.onClick,[t,c,this],this));let h=!Id(c,s);return(h||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,h}_getActiveElements(t,r,i,s){if(t.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function n6(){return Xe(Na.instances,n=>n._plugins.invalidate())}function Ade(n,e,t){let{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:c}=e,{borderWidth:l,borderJoinStyle:u}=c,h=Math.min(l/o,Tn(r-t));if(n.beginPath(),n.arc(i,s,o-l/2,r+h/2,t-h/2),a>0){let f=Math.min(l/a,Tn(r-t));n.arc(i,s,a+l/2,t-f/2,r+f/2,!0)}else{let f=Math.min(l/2,o*Tn(r-t));if(u==="round")n.arc(i,s,f,t-Qe/2,r+Qe/2,!0);else if(u==="bevel"){let p=2*f*f,y=-p*Math.cos(t+Qe/2)+i,w=-p*Math.sin(t+Qe/2)+s,b=p*Math.cos(r+Qe/2)+i,A=p*Math.sin(r+Qe/2)+s;n.lineTo(y,w),n.lineTo(b,A)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function Sde(n,e,t){let{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=i/a;n.beginPath(),n.arc(s,o,a,r-l,t+l),c>i?(l=i/c,n.arc(s,o,c,t+l,r-l,!0)):n.arc(s,o,i,t+Lt,r-Lt),n.closePath(),n.clip()}function Mde(n){return sg(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Pde(n,e,t,r){let i=Mde(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=c=>{let l=(t-Math.min(s,c))*r/2;return cn(c,0,Math.min(s,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:cn(i.innerStart,0,o),innerEnd:cn(i.innerEnd,0,o)}}function Td(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function wb(n,e,t,r,i,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-l,0),f=u>0?u+r+t+l:0,p=0,y=i-c;if(r){let Ke=u>0?u-r:0,yt=h>0?h-r:0,dt=(Ke+yt)/2,Sn=dt!==0?y*dt/(dt+r):y;p=(y-Sn)/2}let w=Math.max(.001,y*h-t/Qe)/h,b=(y-w)/2,A=c+b+p,P=i-b-p,{outerStart:U,outerEnd:V,innerStart:B,innerEnd:$}=Pde(e,f,h,P-A),S=h-U,D=h-V,T=A+U/S,k=P-V/D,R=f+B,N=f+$,M=A+B/R,kt=P-$/N;if(n.beginPath(),s){let Ke=(T+k)/2;if(n.arc(o,a,h,T,Ke),n.arc(o,a,h,Ke,k),V>0){let Xt=Td(D,k,o,a);n.arc(Xt.x,Xt.y,V,k,P+Lt)}let yt=Td(N,P,o,a);if(n.lineTo(yt.x,yt.y),$>0){let Xt=Td(N,kt,o,a);n.arc(Xt.x,Xt.y,$,P+Lt,kt+Math.PI)}let dt=(P-$/f+(A+B/f))/2;if(n.arc(o,a,f,P-$/f,dt,!0),n.arc(o,a,f,dt,A+B/f,!0),B>0){let Xt=Td(R,M,o,a);n.arc(Xt.x,Xt.y,B,M+Math.PI,A-Lt)}let Sn=Td(S,A,o,a);if(n.lineTo(Sn.x,Sn.y),U>0){let Xt=Td(S,T,o,a);n.arc(Xt.x,Xt.y,U,A-Lt,T)}}else{n.moveTo(o,a);let Ke=Math.cos(T)*h+o,yt=Math.sin(T)*h+a;n.lineTo(Ke,yt);let dt=Math.cos(k)*h+o,Sn=Math.sin(k)*h+a;n.lineTo(dt,Sn)}n.closePath()}function kde(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){wb(n,e,t,r,c,i);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%gt||gt))}return wb(n,e,t,r,c,i),n.fill(),c}function Rde(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,y=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,y?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let w=e.endAngle;if(s){wb(n,e,t,r,w,i);for(let b=0;b<s;++b)n.stroke();isNaN(a)||(w=o+(a%gt||gt))}y&&Sde(n,e,w),c.selfJoin&&w-o>=Qe&&p===0&&u!=="miter"&&Ade(n,e,w),s||(wb(n,e,t,r,w,i),n.stroke())}var yg=class extends Yi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:s,distance:o}=Bw(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=ve(h,c-a),y=ol(s,a,c)&&a!==c,w=p>=gt||y,b=Ki(o,l+f,u+f);return w&&b}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+s)/2,h=(o+a+l+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>gt?Math.floor(r/gt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(Qe,r||0)),l=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,kde(e,this,l,s,o),Rde(e,this,l,s,o),e.restore()}};function B6(n,e,t=e){n.lineCap=ve(t.borderCapStyle,e.borderCapStyle),n.setLineDash(ve(t.borderDash,e.borderDash)),n.lineDashOffset=ve(t.borderDashOffset,e.borderDashOffset),n.lineJoin=ve(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=ve(t.borderWidth,e.borderWidth),n.strokeStyle=ve(t.borderColor,e.borderColor)}function Fde(n,e,t){n.lineTo(t.x,t.y)}function Nde(n){return n.stepped?J2:n.tension||n.cubicInterpolationMode==="monotone"?Q2:Fde}function j6(n,e,t={}){let r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function Ude(n,e,t,r){let{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=j6(i,t,r),u=Nde(s),{move:h=!0,reverse:f}=r||{},p,y,w;for(p=0;p<=l;++p)y=i[(a+(f?l-p:p))%o],!y.skip&&(h?(n.moveTo(y.x,y.y),h=!1):u(n,w,y,f,s.stepped),w=y);return c&&(y=i[(a+(f?l:0))%o],u(n,w,y,f,s.stepped)),!!c}function Ode(n,e,t,r){let i=e.points,{count:s,start:o,ilen:a}=j6(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,h=0,f,p,y,w,b,A,P=V=>(o+(l?a-V:V))%s,U=()=>{w!==b&&(n.lineTo(u,b),n.lineTo(u,w),n.lineTo(u,A))};for(c&&(p=i[P(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[P(f)],p.skip)continue;let V=p.x,B=p.y,$=V|0;$===y?(B<w?w=B:B>b&&(b=B),u=(h*u+V)/++h):(U(),n.lineTo(V,B),y=$,h=0,w=b=B),A=B}U()}function AM(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Ode:Ude}function Lde(n){return n.stepped?iM:n.tension||n.cubicInterpolationMode==="monotone"?sM:Co}function Vde(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),B6(n,e.options),n.stroke(i)}function Bde(n,e,t,r){let{segments:i,options:s}=e,o=AM(e);for(let a of i)B6(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var jde=typeof Path2D=="function";function $de(n,e,t,r){jde&&!e.options.segment?Vde(n,e,t,r):Bde(n,e,t,r)}var Eb=(()=>{class n extends Yi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;tM(this._points,i,t,s,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=oM(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,s=t[r],o=this.points,a=ab(this,{property:r,start:s,end:s});if(!a.length)return;let c=[],l=Lde(i),u,h;for(u=0,h=a.length;u<h;++u){let{start:f,end:p}=a[u],y=o[f],w=o[p];if(y===w){c.push(y);continue}let b=Math.abs((s-y[r])/(w[r]-y[r])),A=l(y,w,b,i.stepped);A[r]=t[r],c.push(A)}return c.length===1?c[0]:c}pathSegment(t,r,i){return AM(this)(t,this,r,i)}path(t,r,i){let s=this.segments,o=AM(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of s)a&=o(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),$de(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function r6(n,e,t,r){let i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}var LM=(()=>{class n extends Yi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return r6(this,t,"x",r)}inYRange(t,r){return r6(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!qi(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ig(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function $6(n,e){let{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,h;return n.horizontal?(h=o/2,a=Math.min(t,i),c=Math.max(t,i),l=r-h,u=r+h):(h=s/2,a=t-h,c=t+h,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function Ra(n,e,t,r){return n?0:cn(e,t,r)}function Hde(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,s=Zw(r);return{t:Ra(i.top,s.top,0,t),r:Ra(i.right,s.right,0,e),b:Ra(i.bottom,s.bottom,0,t),l:Ra(i.left,s.left,0,e)}}function zde(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Do(i),o=Math.min(e,t),a=n.borderSkipped,c=r||Ne(i);return{topLeft:Ra(!c||a.top||a.left,s.topLeft,0,o),topRight:Ra(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Ra(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ra(!c||a.bottom||a.right,s.bottomRight,0,o)}}function Wde(n){let e=$6(n),t=e.right-e.left,r=e.bottom-e.top,i=Hde(n,t/2,r/2),s=zde(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function pM(n,e,t,r){let i=e===null,s=t===null,a=n&&!(i&&s)&&$6(n,r);return a&&(i||Ki(e,a.left,a.right))&&(s||Ki(t,a.top,a.bottom))}function qde(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Gde(n,e){n.rect(e.x,e.y,e.w,e.h)}function gM(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var _g=class extends Yi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Wde(this),a=qde(o.radius)?cl:Gde;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,gM(o,t,s)),e.clip(),a(e,gM(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,gM(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return pM(this,e,t,r)}inXRange(e,t){return pM(this,e,null,t)}inYRange(e,t){return pM(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Kde=Object.freeze({__proto__:null,ArcElement:yg,BarElement:_g,LineElement:Eb,PointElement:LM}),SM=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],i6=SM.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function H6(n){return SM[n%SM.length]}function z6(n){return i6[n%i6.length]}function Yde(n,e){return n.borderColor=H6(e),n.backgroundColor=z6(e),++e}function Jde(n,e){return n.backgroundColor=n.data.map(()=>H6(e++)),e}function Qde(n,e){return n.backgroundColor=n.data.map(()=>z6(e++)),e}function Zde(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof OM?e=Jde(t,e):i instanceof P6?e=Qde(t,e):i&&(e=Yde(t,e))}}function s6(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Xde(n){return n&&(n.borderColor||n.backgroundColor)}function ehe(){return mt.borderColor!=="rgba(0,0,0,0.1)"||mt.backgroundColor!=="rgba(0,0,0,0.1)"}var the={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:s}=i,o=s6(r)||Xde(i)||s&&s6(s)||ehe();if(!t.forceOverride&&o)return;let a=Zde(n);r.forEach(a)}};function nhe(n,e,t,r,i){let s=i.samples||r;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),c=0,l=e+t-1,u=e,h,f,p,y,w;for(o[c++]=n[u],h=0;h<s-2;h++){let b=0,A=0,P,U=Math.floor((h+1)*a)+1+e,V=Math.min(Math.floor((h+2)*a)+1,t)+e,B=V-U;for(P=U;P<V;P++)b+=n[P].x,A+=n[P].y;b/=B,A/=B;let $=Math.floor(h*a)+1+e,S=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:D,y:T}=n[u];for(p=y=-1,P=$;P<S;P++)y=.5*Math.abs((D-b)*(n[P].y-T)-(D-n[P].x)*(A-T)),y>p&&(p=y,f=n[P],w=P);o[c++]=f,u=w}return o[c++]=n[l],o}function rhe(n,e,t,r){let i=0,s=0,o,a,c,l,u,h,f,p,y,w,b=[],A=e+t-1,P=n[e].x,V=n[A].x-P;for(o=e;o<e+t;++o){a=n[o],c=(a.x-P)/V*r,l=a.y;let B=c|0;if(B===u)l<y?(y=l,h=o):l>w&&(w=l,f=o),i=(s*i+a.x)/++s;else{let $=o-1;if(!we(h)&&!we(f)){let S=Math.min(h,f),D=Math.max(h,f);S!==p&&S!==$&&b.push(ue(H({},n[S]),{x:i})),D!==p&&D!==$&&b.push(ue(H({},n[D]),{x:i}))}o>0&&$!==p&&b.push(n[$]),b.push(a),u=B,s=0,y=w=l,h=f=p=o}}return b}function W6(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function o6(n){n.data.datasets.forEach(e=>{W6(e)})}function ihe(n,e){let t=e.length,r=0,i,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(r=cn(Wi(e,s.axis,o).lo,0,t-1)),l?i=cn(Wi(e,s.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var she={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){o6(n);return}let r=n.width;n.data.datasets.forEach((i,s)=>{let{_data:o,indexAxis:a}=i,c=n.getDatasetMeta(s),l=o||i.data;if(ut([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=ihe(c,l),p=t.threshold||4*r;if(f<=p){W6(i);return}we(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let y;switch(t.algorithm){case"lttb":y=nhe(l,h,f,r,t);break;case"min-max":y=rhe(l,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=y})},destroy(n){o6(n)}};function ohe(n,e,t){let r=n.segments,i=n.points,s=e.points,o=[];for(let a of r){let{start:c,end:l}=a;l=Ib(c,l,i);let u=MM(t,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}let h=ab(e,u);for(let f of h){let p=MM(t,s[f.start],s[f.end],f.loop),y=ob(a,i,p);for(let w of y)o.push({source:w,target:f,start:{[t]:a6(u,p,"start",Math.max)},end:{[t]:a6(u,p,"end",Math.min)}})}}return o}function MM(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=Tn(i),s=Tn(s)),{property:n,start:i,end:s}}function ahe(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Ib(o,a,i);let c=i[o],l=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function Ib(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function a6(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function q6(n,e){let t=[],r=!1;return pt(n)?(r=!0,t=n):t=ahe(n,e),t.length?new Eb({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function c6(n){return n&&n.fill!==!1}function che(n,e,t){let i=n[e].fill,s=[e],o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Pt(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function lhe(n,e,t){let r=fhe(n);if(Ne(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Pt(i)&&Math.floor(i)===i?uhe(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function uhe(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function dhe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ne(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function hhe(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Ne(n)?r=n.value:r=e.getBaseValue(),r}function fhe(n){let e=n.options,t=e.fill,r=ve(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function phe(n){let{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=ghe(e,t);a.push(q6({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)mhe(i,o[u],a)}return new Eb({points:i,options:{}})}function ghe(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function mhe(n,e,t){let r=[];for(let i=0;i<t.length;i++){let s=t[i],{first:o,last:a,point:c}=yhe(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function yhe(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],h=o[u.start][t],f=o[u.end][t];if(Ki(i,h,f)){a=i===h,c=i===f;break}}return{first:a,last:c,point:r}}var bb=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:s,radius:o}=this;return t=t||{start:0,end:gt},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function _he(n){let{chart:e,fill:t,line:r}=n;if(Pt(t))return vhe(e,t);if(t==="stack")return phe(n);if(t==="shape")return!0;let i=whe(n);return i instanceof bb?i:q6(i,r)}function vhe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function whe(n){return(n.scale||{}).getPointPositionForValue?Che(n):bhe(n)}function bhe(n){let{scale:e={},fill:t}=n,r=dhe(t,e);if(Pt(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Che(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=hhe(t,e,s),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,s);return new bb({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function mM(n,e,t){let r=_he(e),{chart:i,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,h=l.backgroundColor,{above:f=h,below:p=h}=u||{},y=i.getDatasetMeta(s),w=cb(i,y);r&&o.points.length&&(Dd(n,t),Ehe(n,{line:o,target:r,above:f,below:p,area:t,scale:a,axis:c,clip:w}),xd(n))}function Ehe(n,e){let{line:t,target:r,above:i,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==i&&(l==="x"?(l6(n,r,o.top),yM(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),l6(n,r,o.bottom)):l==="y"&&(u6(n,r,o.left),yM(n,{line:t,target:r,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),u6(n,r,o.right),u=i)),yM(n,{line:t,target:r,color:u,scale:a,property:l,clip:c}),n.restore()}function l6(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],h=i[Ib(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function u6(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],h=i[Ib(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,h.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function yM(n,e){let{line:t,target:r,property:i,color:s,scale:o,clip:a}=e,c=ohe(t,r,i);for(let{source:l,target:u,start:h,end:f}of c){let{style:{backgroundColor:p=s}={}}=l,y=r!==!0;n.save(),n.fillStyle=p,Ihe(n,o,a,y&&MM(i,h,f)),n.beginPath();let w=!!t.pathSegment(n,l),b;if(y){w?n.closePath():d6(n,r,f,i);let A=!!r.pathSegment(n,u,{move:w,reverse:!0});b=w&&A,b||d6(n,r,h,i)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function Ihe(n,e,t,r){let i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let c,l,u,h;s==="x"?(c=o,l=i.top,u=a,h=i.bottom):(c=i.left,l=o,u=i.right,h=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),h=Math.min(h,t.bottom)),n.rect(c,l,u-c,h-l),n.clip()}}function d6(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Dhe={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],s,o,a,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof Eb&&(c={visible:n.isDatasetVisible(o),index:o,fill:lhe(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=che(i,o,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&mM(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;c6(s)&&mM(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!c6(r)||t.drawTime!=="beforeDatasetDraw"||mM(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},h6=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},xhe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,Cb=class extends Yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=rt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=Vt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=h6(r,s),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((y,w)=>{let b=r+t/2+s.measureText(y.text).width;(w===0||l[l.length-1]+b+2*a>o)&&(h+=u,l[l.length-(w>0?0:1)]=0,p+=u,f++),c[w]={left:0,top:p,row:f,width:b,height:i},l[l.length-1]+=b+a}),h}_fitCols(e,t,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,h=a,f=0,p=0,y=0,w=0;return this.legendItems.forEach((b,A)=>{let{itemWidth:P,itemHeight:U}=The(r,t,s,b,i);A>0&&p+U+2*a>u&&(h+=f+a,l.push({width:f,height:p}),y+=f+a,w++,f=p=0),c[A]={left:y,top:p,col:w,width:P,height:U},f=Math.max(f,P),p+=U+a}),h+=f,l.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ka(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=An(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=An(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=An(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=An(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Dd(e,this),this._draw(),xd(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=mt.color,c=ka(e.rtl,this.left,this.width),l=Vt(o.font),{padding:u}=o,h=l.size,f=h/2,p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:y,boxHeight:w,itemHeight:b}=h6(o,h),A=function($,S,D){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;i.save();let T=ve(D.lineWidth,1);if(i.fillStyle=ve(D.fillStyle,a),i.lineCap=ve(D.lineCap,"butt"),i.lineDashOffset=ve(D.lineDashOffset,0),i.lineJoin=ve(D.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=ve(D.strokeStyle,a),i.setLineDash(ve(D.lineDash,[])),o.usePointStyle){let k={radius:w*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:T},R=c.xPlus($,y/2),N=S+f;Qw(i,k,R,N,o.pointStyleWidth&&y)}else{let k=S+Math.max((h-w)/2,0),R=c.leftForLtr($,y),N=Do(D.borderRadius);i.beginPath(),Object.values(N).some(M=>M!==0)?cl(i,{x:R,y:k,w:y,h:w,radius:N}):i.rect(R,k,y,w),i.fill(),T!==0&&i.stroke()}i.restore()},P=function($,S,D){Io(i,D.text,$,S+b/2,l,{strikethrough:D.hidden,textAlign:c.textAlign(D.textAlign)})},U=this.isHorizontal(),V=this._computeTitleHeight();U?p={x:An(s,this.left+u,this.right-r[0]),y:this.top+u+V,line:0}:p={x:this.left+u,y:An(s,this.top+V+u,this.bottom-t[0].height),line:0},ib(this.ctx,e.textDirection);let B=b+u;this.legendItems.forEach(($,S)=>{i.strokeStyle=$.fontColor,i.fillStyle=$.fontColor;let D=i.measureText($.text).width,T=c.textAlign($.textAlign||($.textAlign=o.textAlign)),k=y+f+D,R=p.x,N=p.y;c.setWidth(this.width),U?S>0&&R+k+u>this.right&&(N=p.y+=B,p.line++,R=p.x=An(s,this.left+u,this.right-r[p.line])):S>0&&N+B>this.bottom&&(R=p.x=R+t[p.line].width+u,p.line++,N=p.y=An(s,this.top+V+u,this.bottom-t[p.line].height));let M=c.x(R);if(A(M,N,$),R=K2(T,R+y+f,U?R+k:this.right,e.rtl),P(c.x(R),N,$),U)p.x+=k+u;else if(typeof $.text!="string"){let kt=l.lineHeight;p.y+=G6($,kt)+u}else p.y+=B}),sb(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=Vt(t.font),i=ln(t.padding);if(!t.display)return;let s=ka(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=An(e.align,h,this.right-f);else{let y=this.columnSizes.reduce((w,b)=>Math.max(w,b.height),0);u=l+An(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}let p=An(a,h,h+f);o.textAlign=s.textAlign(ng(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Io(o,t.text,p,u,r)}_computeTitleHeight(){let e=this.options.title,t=Vt(e.font),r=ln(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Ki(e,this.left,this.right)&&Ki(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ki(e,i.left,i.left+i.width)&&Ki(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!Mhe(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=xhe(i,r);i&&!s&&rt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&rt(t.onHover,[e,r,this],this)}else r&&rt(t.onClick,[e,r,this],this)}};function The(n,e,t,r,i){let s=Ahe(r,n,e,t),o=She(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Ahe(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function She(n,e,t){let r=n;return typeof e.text!="string"&&(r=G6(e,t)),r}function G6(n,e){let t=n.text?n.text.length:0;return e*t}function Mhe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Phe={id:"legend",_element:Cb,start(n,e,t){let r=n.legend=new Cb({ctx:n.ctx,options:t,chart:n});Zn.configure(n,r,t),Zn.addBox(n,r)},stop(n){Zn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;Zn.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=ln(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},vg=class extends Yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=pt(r.text)?r.text.length:1;this._padding=ln(r.padding);let s=i*Vt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align,c=0,l,u,h;return this.isHorizontal()?(u=An(a,r,s),h=t+e,l=s-r):(o.position==="left"?(u=r+e,h=An(a,i,t),c=Qe*-.5):(u=s-e,h=An(a,t,i),c=Qe*.5),l=i-t),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=Vt(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);Io(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:ng(t.align),textBaseline:"middle",translation:[o,a]})}};function khe(n,e){let t=new vg({ctx:n.ctx,options:e,chart:n});Zn.configure(n,t,e),Zn.addBox(n,t),n.titleBlock=t}var Rhe={id:"title",_element:vg,start(n,e,t){khe(n,t)},stop(n){let e=n.titleBlock;Zn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;Zn.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},hb=new WeakMap,Fhe={id:"subtitle",start(n,e,t){let r=new vg({ctx:n.ctx,options:t,chart:n});Zn.configure(n,r,t),Zn.addBox(n,r),hb.set(n,r)},stop(n){Zn.removeBox(n,hb.get(n)),hb.delete(n)},beforeUpdate(n,e,t){let r=hb.get(n);Zn.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},gg={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Zp(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function ks(n,e){return e&&(pt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ao(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Nhe(n,e){let{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function f6(n,e){let t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Vt(e.bodyFont),l=Vt(e.titleFont),u=Vt(e.footerFont),h=s.length,f=i.length,p=r.length,y=ln(e.padding),w=y.height,b=0,A=r.reduce((V,B)=>V+B.before.length+B.lines.length+B.after.length,0);if(A+=n.beforeBody.length+n.afterBody.length,h&&(w+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),A){let V=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;w+=p*V+(A-p)*c.lineHeight+(A-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let P=0,U=function(V){b=Math.max(b,t.measureText(V).width+P)};return t.save(),t.font=l.string,Xe(n.title,U),t.font=c.string,Xe(n.beforeBody.concat(n.afterBody),U),P=e.displayColors?o+2+e.boxPadding:0,Xe(r,V=>{Xe(V.before,U),Xe(V.lines,U),Xe(V.after,U)}),P=0,t.font=u.string,Xe(n.footer,U),t.restore(),b+=y.width,{width:b,height:w}}function Uhe(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Ohe(n,e,t,r){let{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function Lhe(n,e,t,r){let{x:i,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),Ohe(l,n,e,t)&&(l="center"),l}function p6(n,e,t){let r=t.yAlign||e.yAlign||Uhe(n,t);return{xAlign:t.xAlign||e.xAlign||Lhe(n,e,t,r),yAlign:r}}function Vhe(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Bhe(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function g6(n,e,t,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=i+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Do(o),y=Vhe(e,a),w=Bhe(e,c,l);return c==="center"?a==="left"?y+=l:a==="right"&&(y-=l):a==="left"?y-=Math.max(u,f)+i:a==="right"&&(y+=Math.max(h,p)+i),{x:cn(y,0,r.width-e.width),y:cn(w,0,r.height-e.height)}}function fb(n,e,t){let r=ln(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function m6(n){return ks([],Ao(n))}function jhe(n,e,t){return Ps(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function y6(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var K6={beforeTitle:Gi,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Gi,beforeBody:Gi,beforeLabel:Gi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return we(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Gi,afterBody:Gi,beforeFooter:Gi,footer:Gi,afterFooter:Gi};function Pr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?K6[e].call(t,r):i}var _6=(()=>{class n extends Yi{static positioners=gg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new yb(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=jhe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,s=Pr(i,"beforeTitle",this,t),o=Pr(i,"title",this,t),a=Pr(i,"afterTitle",this,t),c=[];return c=ks(c,Ao(s)),c=ks(c,Ao(o)),c=ks(c,Ao(a)),c}getBeforeBody(t,r){return m6(Pr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,s=[];return Xe(t,o=>{let a={before:[],lines:[],after:[]},c=y6(i,o);ks(a.before,Ao(Pr(c,"beforeLabel",this,o))),ks(a.lines,Pr(c,"label",this,o)),ks(a.after,Ao(Pr(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return m6(Pr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,s=Pr(i,"beforeFooter",this,t),o=Pr(i,"footer",this,t),a=Pr(i,"afterFooter",this,t),c=[];return c=ks(c,Ao(s)),c=ks(c,Ao(o)),c=ks(c,Ao(a)),c}_createItems(t){let r=this._active,i=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(Nhe(this.chart,r[l]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,i))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,i))),Xe(c,h=>{let f=y6(t.callbacks,h);s.push(Pr(f,"labelColor",this,h)),o.push(Pr(f,"labelPointStyle",this,h)),a.push(Pr(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=gg[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=f6(this,i),u=Object.assign({},c,l),h=p6(this.chart,i,u),f=g6(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){let o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=Do(c),{x:p,y}=t,{width:w,height:b}=r,A,P,U,V,B,$;return o==="center"?(B=y+b/2,s==="left"?(A=p,P=A-a,V=B+a,$=B-a):(A=p+w,P=A+a,V=B-a,$=B+a),U=A):(s==="left"?P=p+Math.max(l,h)+a:s==="right"?P=p+w-Math.max(u,f)-a:P=this.caretX,o==="top"?(V=y,B=V-a,A=P-a,U=P+a):(V=y+b,B=V+a,A=P+a,U=P-a),$=V),{x1:A,x2:P,x3:U,y1:V,y2:B,y3:$}}drawTitle(t,r,i){let s=this.title,o=s.length,a,c,l;if(o){let u=ka(i.rtl,this.x,this.width);for(t.x=fb(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=Vt(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,s,o){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,h=Vt(o.bodyFont),f=fb(this,"left",o),p=s.x(f),y=l<h.lineHeight?(h.lineHeight-l)/2:0,w=r.y+y;if(o.usePointStyle){let b={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},A=s.leftForLtr(p,u)+u/2,P=w+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ig(t,b,A,P),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ig(t,b,A,P)}else{t.lineWidth=Ne(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let b=s.leftForLtr(p,u),A=s.leftForLtr(s.xPlus(p,1),u-2),P=Do(a.borderRadius);Object.values(P).some(U=>U!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,cl(t,{x:b,y:w,w:u,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),cl(t,{x:A,y:w+1,w:u-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(b,w,u,l),t.strokeRect(b,w,u,l),t.fillStyle=a.backgroundColor,t.fillRect(A,w+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:h}=i,f=Vt(i.bodyFont),p=f.lineHeight,y=0,w=ka(i.rtl,this.x,this.width),b=function(T){r.fillText(T,w.x(t.x+y),t.y+p/2),t.y+=p+o},A=w.textAlign(a),P,U,V,B,$,S,D;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=fb(this,A,i),r.fillStyle=i.bodyColor,Xe(this.beforeBody,b),y=c&&A!=="right"?a==="center"?u/2+h:u+2+h:0,B=0,S=s.length;B<S;++B){for(P=s[B],U=this.labelTextColors[B],r.fillStyle=U,Xe(P.before,b),V=P.lines,c&&V.length&&(this._drawColorBox(r,t,B,w,i),p=Math.max(f.lineHeight,l)),$=0,D=V.length;$<D;++$)b(V[$]),p=f.lineHeight;Xe(P.after,b)}y=0,p=f.lineHeight,Xe(this.afterBody,b),t.y-=o}drawFooter(t,r,i){let s=this.footer,o=s.length,a,c;if(o){let l=ka(i.rtl,this.x,this.width);for(t.x=fb(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=Vt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:h}=i,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:w}=Do(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+f,l),a==="top"&&this.drawCaret(t,r,i,s),r.lineTo(c+u-p,l),r.quadraticCurveTo(c+u,l,c+u,l+p),a==="center"&&o==="right"&&this.drawCaret(t,r,i,s),r.lineTo(c+u,l+h-w),r.quadraticCurveTo(c+u,l+h,c+u-w,l+h),a==="bottom"&&this.drawCaret(t,r,i,s),r.lineTo(c+y,l+h),r.quadraticCurveTo(c,l+h,c,l+h-y),a==="center"&&o==="left"&&this.drawCaret(t,r,i,s),r.lineTo(c,l+f),r.quadraticCurveTo(c,l,c+f,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=gg[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=f6(this,t),l=Object.assign({},a,this._size),u=p6(r,t,l),h=g6(t,l,u,r);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=ln(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),ib(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),sb(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!Id(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),c=this._positionChanged(a,t),l=r||!Id(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:s,options:o}=this,a=gg[o.position].call(this,t,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),$he={id:"tooltip",_element:_6,positioners:gg,afterInit(n,e,t){t&&(n.tooltip=new _6({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",ue(H({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:K6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Hhe=Object.freeze({__proto__:null,Colors:the,Decimation:she,Filler:Dhe,Legend:Phe,SubTitle:Fhe,Title:Rhe,Tooltip:$he}),zhe=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Whe(n,e,t,r){let i=n.indexOf(e);if(i===-1)return zhe(n,e,t,r);let s=n.lastIndexOf(e);return i!==s?t:i}var qhe=(n,e)=>n===null?null:cn(Math.round(n),0,e);function v6(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Ghe=(()=>{class n extends dl{static id="category";static defaults={ticks:{callback:v6}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(we(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Whe(i,t,ve(r,t),this._addedLabels),qhe(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=t===0&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return v6.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Khe(n,e){let t=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=s||1,y=u-1,{min:w,max:b}=e,A=!we(o),P=!we(a),U=!we(l),V=(b-w)/(h+1),B=Ow((b-w)/y/p)*p,$,S,D,T;if(B<1e-14&&!A&&!P)return[{value:w},{value:b}];T=Math.ceil(b/B)-Math.floor(w/B),T>y&&(B=Ow(T*B/y/p)*p),we(c)||($=Math.pow(10,c),B=Math.ceil(B*$)/$),i==="ticks"?(S=Math.floor(w/B)*B,D=Math.ceil(b/B)*B):(S=w,D=b),A&&P&&s&&$2((a-o)/s,B/1e3)?(T=Math.round(Math.min((a-o)/B,u)),B=(a-o)/T,S=o,D=a):U?(S=A?o:S,D=P?a:D,T=l-1,B=(D-S)/T):(T=(D-S)/B,sl(T,Math.round(T),B/1e3)?T=Math.round(T):T=Math.ceil(T));let k=Math.max(Vw(B),Vw(S));$=Math.pow(10,we(c)?k:c),S=Math.round(S*$)/$,D=Math.round(D*$)/$;let R=0;for(A&&(f&&S!==o?(t.push({value:o}),S<o&&R++,sl(Math.round((S+R*B)*$)/$,o,w6(o,V,n))&&R++):S<o&&R++);R<T;++R){let N=Math.round((S+R*B)*$)/$;if(P&&N>a)break;t.push({value:N})}return P&&f&&D!==a?t.length&&sl(t[t.length-1].value,a,w6(a,V,n))?t[t.length-1].value=a:t.push({value:a}):(!P||D===a)&&t.push({value:D}),t}function w6(n,e,{horizontal:t,minRotation:r}){let i=Jr(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Sd=class extends dl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return we(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=t?i:c,a=c=>s=r?s:c;if(e){let c=wi(i),l=wi(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Khe(i,s);return e.bounds==="ticks"&&Lw(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return al(e,this.chart.options.locale,this.options.ticks.format)}},PM=class extends Sd{static id="linear";static defaults={ticks:{callback:rg.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Pt(e)?e:0,this.max=Pt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Jr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},wg=n=>Math.floor(Ss(n)),ul=(n,e)=>Math.pow(10,wg(n)+e);function b6(n){return n/Math.pow(10,wg(n))===1}function C6(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function Yhe(n,e){let t=e-n,r=wg(t);for(;C6(n,e,r)>10;)r++;for(;C6(n,e,r)<10;)r--;return Math.min(r,wg(n))}function Jhe(n,{min:e,max:t}){e=fr(n.min,e);let r=[],i=wg(e),s=Yhe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-u)/Math.pow(10,s)),f=fr(n.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);for(;f<t;)r.push({value:f,major:b6(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((c+u+h*Math.pow(10,s))*o)/o;let p=fr(n.max,f);return r.push({value:p,major:b6(p),significand:h}),r}var kM=class extends dl{static id="logarithmic";static defaults={ticks:{callback:rg.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Sd.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Pt(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Pt(e)?Math.max(0,e):null,this.max=Pt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pt(this._userMin)&&(this.min=e===ul(this.min,0)?ul(this.min,-1):ul(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(ul(r,-1)),o(ul(i,1)))),r<=0&&s(ul(i,-1)),i<=0&&o(ul(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=Jhe(t,this);return e.bounds==="ticks"&&Lw(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":al(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ss(e),this._valueRange=Ss(this.max)-Ss(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ss(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function RM(n){let e=n.ticks;if(e.display&&n.display){let t=ln(e.backdropPadding);return ve(e.font&&e.font.size,mt.font.size)+t.height}return 0}function Qhe(n,e,t){return t=pt(t)?t:[t],{w:Y2(n,e.string,t),h:t.length*e.lineHeight}}function E6(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Zhe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Qe/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),h=Vt(l.font),f=Qhe(n.ctx,h,n._pointLabels[c]);r[c]=f;let p=Tn(n.getIndexAngle(c)+a),y=Math.round(eg(p)),w=E6(y,u.x,f.w,0,180),b=E6(y,u.y,f.h,90,270);Xhe(t,e,p,w,b)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=nfe(n,r,i)}function Xhe(n,e,t,r,i){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function efe(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,r+i+o,s),l=Math.round(eg(Tn(c.angle+Lt))),u=sfe(c.y,a.h,l),h=rfe(l),f=ife(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function tfe(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:s}=n;return!(qi({x:t,y:r},e)||qi({x:t,y:s},e)||qi({x:i,y:r},e)||qi({x:i,y:s},e))}function nfe(n,e,t){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:RM(s)/2,additionalAngle:o?Qe/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let h=efe(n,u,c);r.push(h),a==="auto"&&(h.visible=tfe(h,l),h.visible&&(l=h))}return r}function rfe(n){return n===0||n===180?"center":n<180?"left":"right"}function ife(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function sfe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function ofe(n,e,t){let{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!we(a)){let c=Do(e.borderRadius),l=ln(e.backdropPadding);n.fillStyle=a;let u=r-l.left,h=i-l.top,f=s-r+l.width,p=o-i+l.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),cl(n,{x:u,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(u,h,f,p)}}function afe(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));ofe(t,o,s);let a=Vt(o.font),{x:c,y:l,textAlign:u}=s;Io(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function Y6(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,gt);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function cfe(n,e,t,r,i){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Y6(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function lfe(n,e,t){return Ps(n,{label:t,index:e,type:"pointLabel"})}var FM=class extends Sd{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=ln(RM(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Pt(e)&&!isNaN(e)?e:0,this.max=Pt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/RM(this.options))}generateTickLabels(e){Sd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=rt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?Zhe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=gt/(this._pointLabels.length||1),r=this.options.startAngle||0;return Tn(e*t+Jr(r))}getDistanceFromCenterForValue(e){if(we(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(we(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return lfe(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-Lt+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),Y6(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&afe(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),p=i.setContext(f),y=s.setContext(f);cfe(this,p,c,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=Vt(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=ln(l.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Io(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},Db={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kr=Object.keys(Db);function I6(n,e){return n-e}function D6(n,e){if(we(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),Pt(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ma(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function x6(n,e,t,r){let i=kr.length;for(let s=kr.indexOf(n);s<i-1;++s){let o=Db[kr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return kr[s]}return kr[i-1]}function ufe(n,e,t,r,i){for(let s=kr.length-1;s>=kr.indexOf(t);s--){let o=kr[s];if(Db[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return kr[t?kr.indexOf(t):0]}function dfe(n){for(let e=kr.indexOf(n)+1,t=kr.length;e<t;++e)if(Db[kr[e]].common)return kr[e]}function T6(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=tg(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function hfe(n,e,t,r){let i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function A6(n,e,t){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:hfe(n,r,i,t)}var NM=(()=>{class n extends dl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),s=this._adapter=new Iue._date(t.adapters.date);s.init(r),rl(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:D6(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Pt(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=Pt(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=W2(s,o,a);return this._unit=r.unit||(i.autoSkip?x6(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):ufe(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:dfe(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),A6(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?r=1-s:r=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=cn(r,0,a),i=cn(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||x6(o.minUnit,r,i,this._getLabelCapacity(r)),c=ve(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Ma(l)||l===!0,h={},f=r,p,y;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let w=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,y=0;p<i;p=+t.add(p,c,a),y++)T6(h,p,w);return(p===i||s.bounds==="ticks"||y===1)&&T6(h,p,w),Object.keys(h).sort(I6).map(b=>+b)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return rt(a,[t,r,i],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&c[l],f=u&&c[u],p=i[r],y=u&&f&&p&&p.major;return this._adapter.format(t,s||(y?f:h))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,s=Jr(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,A6(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(D6(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $w(t.sort(I6))}}return n})();function pb(n,e,t){let r=0,i=n.length-1,s,o,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Wi(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Wi(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:c}=n[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var UM=class extends NM{static id="timeseries";static defaults=NM.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=pb(t,this.min),this._tableRange=pb(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(pb(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return pb(this._table,r*this._tableRange+this._minPos,!0)}},ffe=Object.freeze({__proto__:null,CategoryScale:Ghe,LinearScale:PM,LogarithmicScale:kM,RadialLinearScale:FM,TimeScale:NM,TimeSeriesScale:UM}),J6=[Eue,Kde,Hhe,ffe];var jM={};F$(jM,{default:()=>Nfe});var Q6=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var n=window.screen;if(n)return(n.deviceXDPI||1)/(n.logicalXDPI||1)}return 1}(),Eg={toTextLines:function(n){var e=[],t;for(n=[].concat(n);n.length;)t=n.pop(),typeof t=="string"?e.unshift.apply(e,t.split(`
`)):Array.isArray(t)?n.push.apply(n,t):we(n)||e.unshift(""+t);return e},textSize:function(n,e,t){var r=[].concat(e),i=r.length,s=n.font,o=0,a;for(n.font=t.string,a=0;a<i;++a)o=Math.max(n.measureText(r[a]).width,o);return n.font=s,{height:i*t.lineHeight,width:o}},bound:function(n,e,t){return Math.max(n,Math.min(e,t))},arrayDiff:function(n,e){var t=n.slice(),r=[],i,s,o,a;for(i=0,o=e.length;i<o;++i)a=e[i],s=t.indexOf(a),s===-1?r.push([a,1]):t.splice(s,1);for(i=0,o=t.length;i<o;++i)r.push([t[i],-1]);return r},rasterize:function(n){return Math.round(n*Q6)/Q6}};function VM(n,e){var t=e.x,r=e.y;if(t===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var i=n.x-t,s=n.y-r,o=Math.sqrt(i*i+s*s);return{x:o?i/o:0,y:o?s/o:-1}}function pfe(n,e,t,r,i){switch(i){case"center":t=r=0;break;case"bottom":t=0,r=1;break;case"right":t=1,r=0;break;case"left":t=-1,r=0;break;case"top":t=0,r=-1;break;case"start":t=-t,r=-r;break;case"end":break;default:i*=Math.PI/180,t=Math.cos(i),r=Math.sin(i);break}return{x:n,y:e,vx:t,vy:r}}var gfe=0,X6=1,e9=2,t9=4,n9=8;function xb(n,e,t){var r=gfe;return n<t.left?r|=X6:n>t.right&&(r|=e9),e<t.top?r|=n9:e>t.bottom&&(r|=t9),r}function mfe(n,e){for(var t=n.x0,r=n.y0,i=n.x1,s=n.y1,o=xb(t,r,e),a=xb(i,s,e),c,l,u;!(!(o|a)||o&a);)c=o||a,c&n9?(l=t+(i-t)*(e.top-r)/(s-r),u=e.top):c&t9?(l=t+(i-t)*(e.bottom-r)/(s-r),u=e.bottom):c&e9?(u=r+(s-r)*(e.right-t)/(i-t),l=e.right):c&X6&&(u=r+(s-r)*(e.left-t)/(i-t),l=e.left),c===o?(t=l,r=u,o=xb(t,r,e)):(i=l,s=u,a=xb(i,s,e));return{x0:t,x1:i,y0:r,y1:s}}function Tb(n,e){var t=e.anchor,r=n,i,s;return e.clamp&&(r=mfe(r,e.area)),t==="start"?(i=r.x0,s=r.y0):t==="end"?(i=r.x1,s=r.y1):(i=(r.x0+r.x1)/2,s=(r.y0+r.y1)/2),pfe(i,s,n.vx,n.vy,e.align)}var Ab={arc:function(n,e){var t=(n.startAngle+n.endAngle)/2,r=Math.cos(t),i=Math.sin(t),s=n.innerRadius,o=n.outerRadius;return Tb({x0:n.x+r*s,y0:n.y+i*s,x1:n.x+r*o,y1:n.y+i*o,vx:r,vy:i},e)},point:function(n,e){var t=VM(n,e.origin),r=t.x*n.options.radius,i=t.y*n.options.radius;return Tb({x0:n.x-r,y0:n.y-i,x1:n.x+r,y1:n.y+i,vx:t.x,vy:t.y},e)},bar:function(n,e){var t=VM(n,e.origin),r=n.x,i=n.y,s=0,o=0;return n.horizontal?(r=Math.min(n.x,n.base),s=Math.abs(n.base-n.x)):(i=Math.min(n.y,n.base),o=Math.abs(n.base-n.y)),Tb({x0:r,y0:i+o,x1:r+s,y1:i,vx:t.x,vy:t.y},e)},fallback:function(n,e){var t=VM(n,e.origin);return Tb({x0:n.x,y0:n.y,x1:n.x+(n.width||0),y1:n.y+(n.height||0),vx:t.x,vy:t.y},e)}},So=Eg.rasterize;function yfe(n){var e=n.borderWidth||0,t=n.padding,r=n.size.height,i=n.size.width,s=-i/2,o=-r/2;return{frame:{x:s-t.left-e,y:o-t.top-e,w:i+t.width+e*2,h:r+t.height+e*2},text:{x:s,y:o,w:i,h:r}}}function _fe(n,e){var t=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var r=t.getBasePixel();return n.horizontal?{x:r,y:null}:{x:null,y:r}}function vfe(n){return n instanceof yg?Ab.arc:n instanceof LM?Ab.point:n instanceof _g?Ab.bar:Ab.fallback}function wfe(n,e,t,r,i,s){var o=Math.PI/2;if(s){var a=Math.min(s,i/2,r/2),c=e+a,l=t+a,u=e+r-a,h=t+i-a;n.moveTo(e,l),c<u&&l<h?(n.arc(c,l,a,-Math.PI,-o),n.arc(u,l,a,-o,0),n.arc(u,h,a,0,o),n.arc(c,h,a,o,Math.PI)):c<u?(n.moveTo(c,t),n.arc(u,l,a,-o,o),n.arc(c,l,a,o,Math.PI+o)):l<h?(n.arc(c,l,a,-Math.PI,0),n.arc(c,h,a,0,Math.PI)):n.arc(c,l,a,-Math.PI,Math.PI),n.closePath(),n.moveTo(e,t)}else n.rect(e,t,r,i)}function bfe(n,e,t){var r=t.backgroundColor,i=t.borderColor,s=t.borderWidth;!r&&(!i||!s)||(n.beginPath(),wfe(n,So(e.x)+s/2,So(e.y)+s/2,So(e.w)-s,So(e.h)-s,t.borderRadius),n.closePath(),r&&(n.fillStyle=r,n.fill()),i&&s&&(n.strokeStyle=i,n.lineWidth=s,n.lineJoin="miter",n.stroke()))}function Cfe(n,e,t){var r=t.lineHeight,i=n.w,s=n.x,o=n.y+r/2;return e==="center"?s+=i/2:(e==="end"||e==="right")&&(s+=i),{h:r,w:i,x:s,y:o}}function Efe(n,e,t){var r=n.shadowBlur,i=t.stroked,s=So(t.x),o=So(t.y),a=So(t.w);i&&n.strokeText(e,s,o,a),t.filled&&(r&&i&&(n.shadowBlur=0),n.fillText(e,s,o,a),r&&i&&(n.shadowBlur=r))}function Ife(n,e,t,r){var i=r.textAlign,s=r.color,o=!!s,a=r.font,c=e.length,l=r.textStrokeColor,u=r.textStrokeWidth,h=l&&u,f;if(!(!c||!o&&!h))for(t=Cfe(t,i,a),n.font=a.string,n.textAlign=i,n.textBaseline="middle",n.shadowBlur=r.textShadowBlur,n.shadowColor=r.textShadowColor,o&&(n.fillStyle=s),h&&(n.lineJoin="round",n.lineWidth=u,n.strokeStyle=l),f=0,c=e.length;f<c;++f)Efe(n,e[f],{stroked:h,filled:o,w:t.w,x:t.x,y:t.y+t.h*f})}var r9=function(n,e,t,r){var i=this;i._config=n,i._index=r,i._model=null,i._rects=null,i._ctx=e,i._el=t};Yr(r9.prototype,{_modelize:function(n,e,t,r){var i=this,s=i._index,o=Vt(ut([t.font,{}],r,s)),a=ut([t.color,mt.color],r,s);return{align:ut([t.align,"center"],r,s),anchor:ut([t.anchor,"center"],r,s),area:r.chart.chartArea,backgroundColor:ut([t.backgroundColor,null],r,s),borderColor:ut([t.borderColor,null],r,s),borderRadius:ut([t.borderRadius,0],r,s),borderWidth:ut([t.borderWidth,0],r,s),clamp:ut([t.clamp,!1],r,s),clip:ut([t.clip,!1],r,s),color:a,display:n,font:o,lines:e,offset:ut([t.offset,4],r,s),opacity:ut([t.opacity,1],r,s),origin:_fe(i._el,r),padding:ln(ut([t.padding,4],r,s)),positioner:vfe(i._el),rotation:ut([t.rotation,0],r,s)*(Math.PI/180),size:Eg.textSize(i._ctx,e,o),textAlign:ut([t.textAlign,"start"],r,s),textShadowBlur:ut([t.textShadowBlur,0],r,s),textShadowColor:ut([t.textShadowColor,a],r,s),textStrokeColor:ut([t.textStrokeColor,a],r,s),textStrokeWidth:ut([t.textStrokeWidth,0],r,s)}},update:function(n){var e=this,t=null,r=null,i=e._index,s=e._config,o,a,c,l=ut([s.display,!0],n,i);l&&(o=n.dataset.data[i],a=ve(rt(s.formatter,[o,n]),o),c=we(a)?[]:Eg.toTextLines(a),c.length&&(t=e._modelize(l,c,s,n),r=yfe(t))),e._model=t,e._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(n,e){var t=this,r=n.ctx,i=t._model,s=t._rects,o;this.visible()&&(r.save(),i.clip&&(o=i.area,r.beginPath(),r.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),r.clip()),r.globalAlpha=Eg.bound(0,i.opacity,1),r.translate(So(e.x),So(e.y)),r.rotate(i.rotation),bfe(r,s.frame,i),Ife(r,i.lines,s.text,i),r.restore())}});var Dfe=Number.MIN_SAFE_INTEGER||-9007199254740991,xfe=Number.MAX_SAFE_INTEGER||9007199254740991;function Cg(n,e,t){var r=Math.cos(t),i=Math.sin(t),s=e.x,o=e.y;return{x:s+r*(n.x-s)-i*(n.y-o),y:o+i*(n.x-s)+r*(n.y-o)}}function Z6(n,e){var t=xfe,r=Dfe,i=e.origin,s,o,a,c,l;for(s=0;s<n.length;++s)o=n[s],a=o.x-i.x,c=o.y-i.y,l=e.vx*a+e.vy*c,t=Math.min(t,l),r=Math.max(r,l);return{min:t,max:r}}function Sb(n,e){var t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);return{vx:(e.x-n.x)/i,vy:(e.y-n.y)/i,origin:n,ln:i}}var i9=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Yr(i9.prototype,{center:function(){var n=this._rect;return{x:n.x+n.w/2,y:n.y+n.h/2}},update:function(n,e,t){this._rotation=t,this._rect={x:e.x+n.x,y:e.y+n.y,w:e.w,h:e.h}},contains:function(n){var e=this,t=1,r=e._rect;return n=Cg(n,e.center(),-e._rotation),!(n.x<r.x-t||n.y<r.y-t||n.x>r.x+r.w+t*2||n.y>r.y+r.h+t*2)},intersects:function(n){var e=this._points(),t=n._points(),r=[Sb(e[0],e[1]),Sb(e[0],e[3])],i,s,o;for(this._rotation!==n._rotation&&r.push(Sb(t[0],t[1]),Sb(t[0],t[3])),i=0;i<r.length;++i)if(s=Z6(e,r[i]),o=Z6(t,r[i]),s.max<o.min||o.max<s.min)return!1;return!0},_points:function(){var n=this,e=n._rect,t=n._rotation,r=n.center();return[Cg({x:e.x,y:e.y},r,t),Cg({x:e.x+e.w,y:e.y},r,t),Cg({x:e.x+e.w,y:e.y+e.h},r,t),Cg({x:e.x,y:e.y+e.h},r,t)]}});function s9(n,e,t){var r=e.positioner(n,e),i=r.vx,s=r.vy;if(!i&&!s)return{x:r.x,y:r.y};var o=t.w,a=t.h,c=e.rotation,l=Math.abs(o/2*Math.cos(c))+Math.abs(a/2*Math.sin(c)),u=Math.abs(o/2*Math.sin(c))+Math.abs(a/2*Math.cos(c)),h=1/Math.max(Math.abs(i),Math.abs(s));return l*=i*h,u*=s*h,l+=e.offset*i,u+=e.offset*s,{x:r.x+l,y:r.y+u}}function Tfe(n,e){var t,r,i,s;for(t=n.length-1;t>=0;--t)for(i=n[t].$layout,r=t-1;r>=0&&i._visible;--r)s=n[r].$layout,s._visible&&i._box.intersects(s._box)&&e(i,s);return n}function Afe(n){var e,t,r,i,s,o,a;for(e=0,t=n.length;e<t;++e)r=n[e],i=r.$layout,i._visible&&(a=new Proxy(r._el,{get:(c,l)=>c.getProps([l],!0)[l]}),s=r.geometry(),o=s9(a,r.model(),s),i._box.update(o,s,r.rotation()));return Tfe(n,function(c,l){var u=c._hidable,h=l._hidable;u&&h||h?l._visible=!1:u&&(c._visible=!1)})}var Ig={prepare:function(n){var e=[],t,r,i,s,o;for(t=0,i=n.length;t<i;++t)for(r=0,s=n[t].length;r<s;++r)o=n[t][r],e.push(o),o.$layout={_box:new i9,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return e.sort(function(a,c){var l=a.$layout,u=c.$layout;return l._idx===u._idx?u._set-l._set:u._idx-l._idx}),this.update(e),e},update:function(n){var e=!1,t,r,i,s,o;for(t=0,r=n.length;t<r;++t)i=n[t],s=i.model(),o=i.$layout,o._hidable=s&&s.display==="auto",o._visible=i.visible(),e|=o._hidable;e&&Afe(n)},lookup:function(n,e){var t,r;for(t=n.length-1;t>=0;--t)if(r=n[t].$layout,r&&r._visible&&r._box.contains(e))return n[t];return null},draw:function(n,e){var t,r,i,s,o,a;for(t=0,r=e.length;t<r;++t)i=e[t],s=i.$layout,s._visible&&(o=i.geometry(),a=s9(i._el,i.model(),o),s._box.update(a,o,i.rotation()),i.draw(n,a))}},Sfe=function(n){if(we(n))return null;var e=n,t,r,i;if(Ne(n))if(!we(n.label))e=n.label;else if(!we(n.r))e=n.r;else for(e="",t=Object.keys(n),i=0,r=t.length;i<r;++i)e+=(i!==0?", ":"")+t[i]+": "+n[t[i]];return""+e},Mfe={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Sfe,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Rr="$datalabels",o9="$default";function Pfe(n,e){var t=n.datalabels,r={},i=[],s,o;return t===!1?null:(t===!0&&(t={}),e=Yr({},[e,t]),s=e.labels||{},o=Object.keys(s),delete e.labels,o.length?o.forEach(function(a){s[a]&&i.push(Yr({},[e,s[a],{_key:a}]))}):i.push(e),r=i.reduce(function(a,c){return Xe(c.listeners||{},function(l,u){a[u]=a[u]||{},a[u][c._key||o9]=l}),delete c.listeners,a},{}),{labels:i,listeners:r})}function BM(n,e,t,r){if(e){var i=t.$context,s=t.$groups,o;e[s._set]&&(o=e[s._set][s._key],o&&rt(o,[i,r])===!0&&(n[Rr]._dirty=!0,t.update(i)))}}function kfe(n,e,t,r,i){var s,o;!t&&!r||(t?r?t!==r&&(o=s=!0):o=!0:s=!0,o&&BM(n,e.leave,t,i),s&&BM(n,e.enter,r,i))}function Rfe(n,e){var t=n[Rr],r=t._listeners,i,s;if(!(!r.enter&&!r.leave)){if(e.type==="mousemove")s=Ig.lookup(t._labels,e);else if(e.type!=="mouseout")return;i=t._hovered,t._hovered=s,kfe(n,r,i,s,e)}}function Ffe(n,e){var t=n[Rr],r=t._listeners.click,i=r&&Ig.lookup(t._labels,e);i&&BM(n,r,i,e)}var Nfe={id:"datalabels",defaults:Mfe,beforeInit:function(n){n[Rr]={_actives:[]}},beforeUpdate:function(n){var e=n[Rr];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(n,e,t){var r=e.index,i=n[Rr],s=i._datasets[r]=[],o=n.isDatasetVisible(r),a=n.data.datasets[r],c=Pfe(a,t),l=e.meta.data||[],u=n.ctx,h,f,p,y,w,b,A,P;for(u.save(),h=0,p=l.length;h<p;++h)if(A=l[h],A[Rr]=[],o&&A&&n.getDataVisibility(h)&&!A.skip)for(f=0,y=c.labels.length;f<y;++f)w=c.labels[f],b=w._key,P=new r9(w,u,A,h),P.$groups={_set:r,_key:b||o9},P.$context={active:!1,chart:n,dataIndex:h,dataset:a,datasetIndex:r},P.update(P.$context),A[Rr].push(P),s.push(P);u.restore(),Yr(i._listeners,c.listeners,{merger:function(U,V,B){V[U]=V[U]||{},V[U][e.index]=B[U],i._listened=!0}})},afterUpdate:function(n){n[Rr]._labels=Ig.prepare(n[Rr]._datasets)},afterDatasetsDraw:function(n){Ig.draw(n,n[Rr]._labels)},beforeEvent:function(n,e){if(n[Rr]._listened){var t=e.event;switch(t.type){case"mousemove":case"mouseout":Rfe(n,t);break;case"click":Ffe(n,t);break}}},afterEvent:function(n){var e=n[Rr],t=e._actives,r=e._actives=n.getActiveElements(),i=Eg.arrayDiff(t,r),s,o,a,c,l,u,h;for(s=0,o=i.length;s<o;++s)if(l=i[s],l[1])for(h=l[0].element[Rr]||[],a=0,c=h.length;a<c;++a)u=h[a],u.$context.active=l[1]===1,u.update(u.$context);(e._dirty||i.length)&&(Ig.update(e._labels),n.render()),delete e._dirty}};function Ufe(n,e){if(n&1&&(m(0,"div",7),C(1),_()),n&2){let t=O();E(),le(" ",t.errorMessage," ")}}function Ofe(n,e){n&1&&(m(0,"div",8),re(1,"div",9),m(2,"p"),C(3,"Loading user data and tasks..."),_()())}function Lfe(n,e){if(n&1&&(ri(0),C(1),ii()),n&2){let t=O(2);E(),le(" ",t.logHtmlState("user-data-and-charts div is rendered. isLoading:",t.isLoading,"currentUser:",t.currentUser)," ")}}function Vfe(n,e){if(n&1&&(m(0,"p")(1,"strong"),C(2,"Customization:"),_(),C(3),_()),n&2){let t=O(2);E(3),U0(" Audit Log: ",!(t.currentUser==null||t.currentUser.customization==null)&&t.currentUser.customization.auditLog?"Enabled":"Disabled"," | Org Analytics: ",!(t.currentUser==null||t.currentUser.customization==null)&&t.currentUser.customization.orgAnalytics?"Enabled":"Disabled"," | User Analytics: ",!(t.currentUser==null||t.currentUser.customization==null)&&t.currentUser.customization.userAnalytics?"Enabled":"Disabled"," ")}}function Bfe(n,e){n&1&&(m(0,"div",23)(1,"p"),C(2,"No tasks found for this user."),_()())}function jfe(n,e){if(n&1&&(m(0,"p")(1,"strong"),C(2,"Reminder:"),_(),C(3),_()),n&2){let t=O().$implicit,r=O(3);E(3),le(" ",r.getLocalDateString(r.toDateObject(t.reminderDate)))}}function $fe(n,e){if(n&1&&(m(0,"li",26)(1,"p")(2,"strong"),C(3,"Detail:"),_(),C(4),_(),m(5,"p")(6,"strong"),C(7,"Status:"),_(),m(8,"span"),C(9),_()(),m(10,"p")(11,"strong"),C(12,"Created:"),_(),C(13),_(),G(14,jfe,4,1,"p",11),_()),n&2){let t=e.$implicit,r=O(3);E(4),le(" ",t.taskDetail||"N/A"),E(4),Gt("task-status-pending",t.status==="pending")("task-status-inprogress",t.status==="in-progress")("task-status-completed",t.status==="completed"),E(),Q(t.status||"N/A"),E(4),le(" ",r.getLocalDateString(r.toDateObject(t.createdAt))),E(),F("ngIf",t.reminderDate)}}function Hfe(n,e){if(n&1&&(m(0,"ul",24),G(1,$fe,15,10,"li",25),_()),n&2){let t=O(2);E(),F("ngForOf",t.currentUserTasks)}}function zfe(n,e){if(n&1&&(ri(0),C(1),ii()),n&2){let t=O(2);E(),le(" ",t.logHtmlState("charts-grid-container is rendered. Tasks:",t.currentUserTasks.length)," ")}}function Wfe(n,e){if(n&1&&(m(0,"div",10),G(1,Lfe,2,1,"ng-container",11),m(2,"div",12)(3,"h2"),C(4),_(),m(5,"p")(6,"strong"),C(7,"UID:"),_(),C(8),_(),m(9,"p")(10,"strong"),C(11,"Email:"),_(),C(12),_(),m(13,"p")(14,"strong"),C(15,"Role:"),_(),C(16),_(),m(17,"p")(18,"strong"),C(19,"Status:"),_(),m(20,"span"),C(21),_()(),m(22,"p")(23,"strong"),C(24,"Joined:"),_(),C(25),_(),G(26,Vfe,4,3,"p",11),_(),m(27,"div",13)(28,"h3"),C(29),_(),G(30,Bfe,3,0,"div",14)(31,Hfe,2,1,"ul",15),_(),m(32,"div",16),G(33,zfe,2,1,"ng-container",11),m(34,"div",17)(35,"h3"),C(36,"My Task Status Breakdown"),_(),m(37,"div",18),re(38,"canvas",19),_()(),m(39,"div",17)(40,"h3"),C(41,"My Task Load Over Time"),_(),m(42,"div",18),re(43,"canvas",20),_()(),m(44,"div",17)(45,"h3"),C(46,"My Task Completion Rate"),_(),m(47,"div",18),re(48,"canvas",21),_()(),m(49,"div",17)(50,"h3"),C(51,"My Overdue Tasks Glance"),_(),m(52,"div",18),re(53,"canvas",22),_()()()()),n&2){let t=O();E(),F("ngIf",!0),E(3),le("",t.currentUser==null?null:t.currentUser.name,"'s Profile"),E(4),le(" ",t.currentUser==null?null:t.currentUser.uid),E(4),le(" ",t.currentUser==null?null:t.currentUser.email),E(4),le(" ",t.currentUser==null?null:t.currentUser.role),E(4),Gt("active-status",t.currentUser==null?null:t.currentUser.isActive)("inactive-status",!(t.currentUser!=null&&t.currentUser.isActive)),E(),Q(t.currentUser!=null&&t.currentUser.isActive?"Active":"Inactive"),E(4),le(" ",t.getLocalDateString(t.toDateObject(t.currentUser==null?null:t.currentUser.createdAt))),E(),F("ngIf",t.currentUser==null?null:t.currentUser.customization),E(3),Zl("Tasks Assigned to ",t.currentUser==null?null:t.currentUser.name," (",t.currentUserTasks.length," tasks)"),E(),F("ngIf",t.currentUserTasks.length===0),E(),F("ngIf",t.currentUserTasks.length>0),E(2),F("ngIf",!0)}}Na.register(...J6,jM);var Mb=class n{constructor(e,t){this.firestore=e;this.cdr=t}logHtmlState(...e){return console.log("HTML State Debug:",...e),""}searchUserUidControl=new JA("");currentUser=null;currentUserTasks=[];isLoading=!1;errorMessage=null;chartInstances=[];userIdToNameMap={KwOHnPFUqkdzGwe1EUJHoGW7OFW2:"Alice Smith",JPrwv9v1QOY7FikzecZZcCU7s2G2:"Bob Johnson",uLddNu8LNqXdT4kIfVBVKm8z75k2:"Charlie Brown",uzfmMMxN7gT7tEru6nj843S5Xrx2:"David Lee",mVGeBxr3BeUQnEHU105Jj6fybNb2:"Eve Miller",mTP9tGGVkHdPnECRItZtFxFC83J2:"Demo User One"};ngOnInit(){console.log("[UserProductivityAnalyticsComponent] Component initialized."),this.searchUserUidControl.valueChanges.pipe(TC(500),eh()).subscribe(e=>{console.log(`[searchUserUidControl] Value changed: ${e}`),e&&typeof e=="string"&&e.length>=20?this.searchUser(e):this.resetView()})}ngOnDestroy(){console.log("[UserProductivityAnalyticsComponent] Component destroyed. Destroying charts."),this.destroyAllCharts()}destroyAllCharts(){this.chartInstances.forEach(e=>{e&&(e.destroy(),console.log(`[destroyAllCharts] Destroyed chart with ID: ${e.id}`))}),this.chartInstances=[]}resetView(){console.log("[resetView] Resetting component view."),this.currentUser=null,this.currentUserTasks=[],this.errorMessage=null,this.destroyAllCharts()}toDateObject(e){if(e){if(e instanceof Date)return e;if(typeof e=="object"&&e!==null&&"toDate"in e&&typeof e.toDate=="function")return e.toDate();if(typeof e=="object"&&e!==null&&typeof e.seconds=="number")return new Date(e.seconds*1e3+(e.nanoseconds||0)/1e6);if(typeof e=="string"){let t=new Date(e);if(!isNaN(t.getTime()))return t}}}getLocalDateString(e){return e?[e.getFullYear(),(e.getMonth()+1).toString().padStart(2,"0"),e.getDate().toString().padStart(2,"0")].join("-"):"N/A"}searchUser(e){return x(this,null,function*(){console.log(`[searchUser] Starting search for UID: ${e}`),this.isLoading=!0,this.errorMessage=null,this.resetView();let t=localStorage.getItem("orgId");if(console.log(`[searchUser] Retrieved orgId from localStorage: ${t}`),!t){this.errorMessage="Organization ID not found in local storage. Please ensure it is set.",this.isLoading=!1,console.error("[searchUser] Aborting: orgId not found.");return}try{let r=Fe(this.firestore,`organizations/${t}/users/${e}`);console.log(`[searchUser] Fetching user doc from path: users/${e}`);let i=yield At(r);if(!i.exists()){this.errorMessage=`User with UID: "${e}" not found. Please check the UID.`,this.isLoading=!1,console.warn(`[searchUser] User document for UID ${e} does not exist.`);return}this.currentUser=i.data(),this.currentUser.uid=e,console.log("User found:",this.currentUser);let s=`organizations/${t}/tasks`;console.log(`[searchUser] Fetching tasks from path: ${s} for assignedTo: ${e}`);let o=It(this.firestore,s),a=fi(o,gv("assignedTo","array-contains",e)),c=yield an(a);this.currentUserTasks=c.docs.map(l=>l.data()),console.log("Tasks fetched for user:",this.currentUserTasks.length,"tasks:",this.currentUserTasks),this.isLoading=!1,console.log(`[searchUser] isLoading set to false. currentUser is now: ${!!this.currentUser}`),this.cdr.detectChanges(),setTimeout(()=>{console.log("[searchUser] Attempting to draw charts after 100ms delay."),this.currentUserTasks.length>0?(this.drawMyTaskStatusChart(),this.drawMyTaskLoadChart(),this.drawMyTaskCompletionRateChart(),this.drawMyOverdueTasksChart()):console.warn(`[searchUser] No tasks found for user ${e} in organization ${t}. Charts will be empty.`)},100)}catch(r){this.errorMessage=`Error fetching data: ${r.message||"An unknown error occurred."}`,console.error("Error in searchUser:",r),this.isLoading=!1}finally{console.log("[searchUser] Search process finished (finally block).")}})}getChartContext(e){console.log(`[getChartContext] Attempting to get canvas context for ID: '${e}'`);let t=document.getElementById(e);if(t||(console.warn(`[getChartContext] getElementById('${e}') returned null. Trying querySelector...`),t=document.querySelector(`#${e}`)),!t)return console.error(`[getChartContext] Canvas element with ID '${e}' still NOT found after both attempts.`),null;if(!(t instanceof HTMLCanvasElement))return console.error(`[getChartContext] Element with ID '${e}' found, but it's not a canvas element!`,t),null;console.log(`[getChartContext] Canvas element with ID '${e}' found successfully.`);let r=t.getContext("2d");return r||(console.error(`[getChartContext] Failed to get 2D rendering context for canvas ID '${e}'.`),null)}drawMyTaskStatusChart(){console.log("[drawMyTaskStatusChart] Attempting to draw chart.");let e={pending:0,"in-progress":0,completed:0};this.currentUserTasks.forEach(c=>{let l=c.status?c.status.toLowerCase().trim():"";["pending","in-progress","completed"].includes(l)&&e[l]++});let t=Object.values(e).reduce((c,l)=>c+l,0);if(console.log(`[drawMyTaskStatusChart] Task status counts: ${JSON.stringify(e)}, Total: ${t}`),t===0){console.warn("[drawMyTaskStatusChart] No data for chart, destroying existing."),this.destroyChart("chart-user-status");return}this.destroyChart("chart-user-status");let r=this.getChartContext("chart-user-status");if(!r)return;let i=r.createLinearGradient(0,0,0,400),s=r.createLinearGradient(0,0,0,400),o=r.createLinearGradient(0,0,0,400);i&&s&&o?(i.addColorStop(0,"rgba(255, 204, 0, 0.9)"),i.addColorStop(1,"rgba(255, 153, 0, 0.9)"),s.addColorStop(0,"rgba(51, 153, 255, 0.9)"),s.addColorStop(1,"rgba(0, 102, 204, 0.9)"),o.addColorStop(0,"rgba(102, 204, 0, 0.9)"),o.addColorStop(1,"rgba(0, 102, 0, 0.9)")):console.warn("[drawMyTaskStatusChart] Could not create gradients. Using solid colors.");let a=new Na(r.canvas,{type:"doughnut",data:{labels:["Pending","In Progress","Completed"],datasets:[{data:[e.pending,e["in-progress"],e.completed],backgroundColor:[i||"rgba(255, 204, 0, 0.8)",s||"rgba(51, 153, 255, 0.8)",o||"rgba(102, 204, 0, 0.8)"],borderColor:["#fff","#fff","#fff"],borderWidth:2,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",animation:{animateScale:!0,animateRotate:!0,duration:1500,easing:"easeInOutQuart"},plugins:{legend:{position:"bottom",labels:{color:"#555",font:{weight:"normal",size:13}}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",bodyFont:{size:12},titleFont:{size:14,weight:"bold"},callbacks:{label:c=>`${c.label}: ${c.raw} tasks`}},datalabels:{color:"#fff",formatter:c=>c>0?`${(c/t*100).toFixed(1)}%`:"",font:{weight:"bold",size:14},rotation:30}}}});this.chartInstances.push(a),console.log("[drawMyTaskStatusChart] Chart created successfully.")}drawMyTaskLoadChart(){console.log("[drawMyTaskLoadChart] Attempting to draw chart.");let e={};this.currentUserTasks.forEach(o=>{let a=this.toDateObject(o.createdAt),c=this.getLocalDateString(a);c!=="N/A"&&(e[c]=(e[c]||0)+1)});let t=Object.keys(e).sort(),r=t.map(o=>e[o]);if(console.log(`[drawMyTaskLoadChart] Labels: ${t.join(", ")}, Data: ${r.join(", ")}`),r.length===0){console.warn("[drawMyTaskLoadChart] No data for chart, destroying existing."),this.destroyChart("chart-user-load");return}this.destroyChart("chart-user-load");let i=this.getChartContext("chart-user-load");if(!i)return;console.log("[drawMyTaskLoadChart] Canvas element found. Drawing...");let s=new Na(i.canvas,{type:"bar",data:{labels:t,datasets:[{label:"Tasks Assigned",data:r,backgroundColor:"rgba(70, 130, 180, 0.8)",borderColor:"rgba(70, 130, 180, 1)",borderWidth:1,borderRadius:8,barPercentage:.8,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutBounce"},plugins:{legend:{display:!1},tooltip:{callbacks:{label:o=>`${o.raw} tasks`}},datalabels:{color:"#333",anchor:"end",align:"top",offset:4,font:{weight:"bold"}}},scales:{x:{title:{display:!0,text:"Date Assigned",font:{weight:"bold"}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Task Count",font:{weight:"bold"}},ticks:{stepSize:1},grid:{color:"#e0e0e0",drawOnChartArea:!1}}}}});this.chartInstances.push(s),console.log("[drawMyTaskLoadChart] Chart created successfully.")}drawMyTaskCompletionRateChart(){console.log("[drawMyTaskCompletionRateChart] Attempting to draw chart.");let e=this.currentUserTasks.length,t=this.currentUserTasks.filter(o=>o.status==="completed").length,r=e-t;if(console.log(`[drawMyTaskCompletionRateChart] Completed: ${t}, Pending: ${r}, Total: ${e}`),e===0){console.warn("[drawMyTaskCompletionRateChart] No data for chart, destroying existing."),this.destroyChart("chart-user-completion");return}this.destroyChart("chart-user-completion");let i=this.getChartContext("chart-user-completion");if(!i)return;console.log("[drawMyTaskCompletionRateChart] Canvas element found. Drawing...");let s=new Na(i.canvas,{type:"bar",data:{labels:["Completed","Pending"],datasets:[{label:"Task Count",data:[t,r],backgroundColor:["rgba(144, 238, 144, 0.8)","rgba(255, 99, 132, 0.8)"],borderColor:["#fff","#fff"],borderWidth:1,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",animation:{duration:1500,easing:"easeOutElastic"},plugins:{legend:{display:!1},title:{display:!0,text:"My Task Completion Rate",font:{weight:"bold",size:16}},datalabels:{color:"#fff",anchor:"end",align:"right",offset:8,font:{weight:"bold",size:14},formatter:o=>o>0?`${(o/e*100).toFixed(1)}%`:""}}}});this.chartInstances.push(s),console.log("[drawMyTaskCompletionRateChart] Chart created successfully.")}drawMyOverdueTasksChart(){console.log("[drawMyOverdueTasksChart] Attempting to draw chart.");let e=Date.now(),t=this.currentUserTasks.filter(o=>{let a=this.toDateObject(o.reminderDate);return o.status!=="completed"&&a&&a.valueOf()<e}).length,r=this.currentUserTasks.length-t;if(console.log(`[drawMyOverdueTasksChart] Overdue: ${t}, On-Time: ${r}, Total: ${this.currentUserTasks.length}`),this.currentUserTasks.length===0){console.warn("[drawMyOverdueTasksChart] No data for chart, destroying existing."),this.destroyChart("chart-user-overdue");return}this.destroyChart("chart-user-overdue");let i=this.getChartContext("chart-user-overdue");if(!i)return;console.log("[drawMyOverdueTasksChart] Canvas element found. Drawing...");let s=new Na(i.canvas,{type:"doughnut",data:{labels:["Overdue Tasks","On-Time Tasks"],datasets:[{data:[t,r],backgroundColor:["rgba(255, 99, 132, 0.9)","rgba(54, 162, 235, 0.9)"],borderColor:["#fff","#fff"],borderWidth:2,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",animation:{animateScale:!0,animateRotate:!0,duration:1500,easing:"easeInOutQuart"},plugins:{legend:{position:"bottom",labels:{color:"#555",font:{weight:"normal",size:13}}},title:{display:!0,text:"My Overdue Tasks Glance",font:{weight:"bold",size:16}},datalabels:{color:"#fff",formatter:o=>o>0?`${(o/this.currentUserTasks.length*100).toFixed(1)}%`:"",font:{weight:"bold",size:14},rotation:30}}}});this.chartInstances.push(s),console.log("[drawMyOverdueTasksChart] Chart created successfully.")}destroyChart(e){let t=Na.getChart(e);t&&(t.destroy(),this.chartInstances=this.chartInstances.filter(r=>r.id!==t.id))}static \u0275fac=function(t){return new(t||n)(X(at),X(gc))};static \u0275cmp=Ve({type:n,selectors:[["app-user-productivity-analytics"]],decls:10,vars:6,consts:[[1,"analytics-page-container"],[1,"search-section"],["type","text","placeholder","Enter User UID (e.g., mTP9tGGVkHdPnECRItZtFxFC83J2)",3,"formControl"],[3,"click","disabled"],["class","error-message",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","user-data-and-charts",4,"ngIf"],[1,"error-message"],[1,"loading-spinner"],[1,"spinner"],[1,"user-data-and-charts"],[4,"ngIf"],[1,"user-details-card"],[1,"user-tasks-card"],["class","no-tasks-message",4,"ngIf"],["class","task-list",4,"ngIf"],[1,"charts-grid-container"],[1,"chart-card"],[1,"chart-canvas-container"],["id","chart-user-status"],["id","chart-user-load"],["id","chart-user-completion"],["id","chart-user-overdue"],[1,"no-tasks-message"],[1,"task-list"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"h1"),C(2,"User Productivity Analytics"),_(),m(3,"div",1),re(4,"input",2),m(5,"button",3),K("click",function(){return r.searchUser(r.searchUserUidControl.value||"")}),C(6),_()(),G(7,Ufe,2,1,"div",4)(8,Ofe,4,0,"div",5)(9,Wfe,54,17,"div",6),_()),t&2&&(E(4),F("formControl",r.searchUserUidControl),E(),F("disabled",r.isLoading),E(),le(" ",r.isLoading?"Searching...":"Search User"," "),E(),F("ngIf",r.errorMessage),E(),F("ngIf",r.isLoading&&!r.errorMessage),E(),F("ngIf",!r.isLoading&&r.currentUser))},dependencies:[Ye,Kt,Ze,Rj,St,Mt,QA],styles:[".analytics-page-container[_ngcontent-%COMP%]{max-width:1200px;margin:30px auto;padding:25px;background-color:#f8fafd;border-radius:12px;box-shadow:0 6px 20px #0000001a;font-family:Inter,sans-serif}h1[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:30px;font-size:2.2em;font-weight:700;letter-spacing:-.5px}.search-section[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:30px;padding:15px;background-color:#e0e7ff;border-radius:8px;box-shadow:inset 0 1px 3px #0000001a}.search-section[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex-grow:1;max-width:400px;padding:12px 18px;border:1px solid #a7b7d6;border-radius:6px;font-size:1em;outline:none;transition:border-color .3s ease,box-shadow .3s ease}.search-section[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#6a82fb;box-shadow:0 0 0 3px #6a82fb33}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 25px;background-color:#6a82fb;color:#fff;border:none;border-radius:6px;font-size:1em;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 3px 6px #0000001a}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#526af5;transform:translateY(-1px)}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a7b7d6;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:30px;color:#6a82fb;font-size:1.1em;font-weight:500}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #6a82fb;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:15px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{text-align:center;color:#e74c3c;background-color:#ffe0e0;border:1px solid #f0b0b0;padding:15px;border-radius:8px;margin-bottom:25px;font-weight:500}.user-data-and-charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:25px;margin-bottom:30px}@media (min-width: 768px){.user-data-and-charts[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.user-data-and-charts[_ngcontent-%COMP%]   .user-details-card[_ngcontent-%COMP%], .user-data-and-charts[_ngcontent-%COMP%]   .user-tasks-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 12px #00000014;padding:25px}.user-data-and-charts[_ngcontent-%COMP%]   .user-details-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3f51b5;margin-top:0;margin-bottom:15px;font-size:1.6em;font-weight:600}.user-data-and-charts[_ngcontent-%COMP%]   .user-details-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#555;font-size:.95em}.user-data-and-charts[_ngcontent-%COMP%]   .user-details-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.user-data-and-charts[_ngcontent-%COMP%]   .user-tasks-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3f51b5;margin-top:0;margin-bottom:15px;font-size:1.4em;font-weight:600}.active-status[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.inactive-status[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.no-tasks-message[_ngcontent-%COMP%]{color:#777;text-align:center;padding:20px;border:1px dashed #cccccc;border-radius:5px;margin-top:15px;background-color:#f0f0f0}.task-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:300px;overflow-y:auto;border:1px solid #eee;border-radius:5px;background-color:#fff}.task-item[_ngcontent-%COMP%]{padding:10px 15px;border-bottom:1px solid #f0f0f0;font-size:.9em;color:#444}.task-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.task-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;line-height:1.4}.task-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.task-status-pending[_ngcontent-%COMP%]{color:#ffc107;font-weight:700}.task-status-inprogress[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.task-status-completed[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.charts-grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;margin-top:30px}.charts-grid-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 12px #00000014;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.charts-grid-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-top:0;margin-bottom:15px;font-size:1.3em;font-weight:600;text-align:center}.charts-grid-container[_ngcontent-%COMP%]   .chart-canvas-container[_ngcontent-%COMP%]{width:100%;height:300px;display:flex;justify-content:center;align-items:center}.charts-grid-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}@media (max-width: 768px){.analytics-page-container[_ngcontent-%COMP%]{padding:15px}h1[_ngcontent-%COMP%]{font-size:1.8em}.search-section[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.user-data-and-charts[_ngcontent-%COMP%], .charts-grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var a9=[{path:"",component:Mv},{path:"root-signup",component:Pv},{path:"dashboard",component:Dw},{path:"organalytics",component:ad},{path:"useranalytics",component:Mb},{path:"auditlogs",component:cd}];var u9="@firebase/installations",WM="0.6.17";var d9=1e4,h9=`w:${WM}`,f9="FIS_v2",qfe="https://firebaseinstallations.googleapis.com/v1",Gfe=60*60*1e3,Kfe="installations",Yfe="Installations";var Jfe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fl=new lr(Kfe,Yfe,Jfe);function p9(n){return n instanceof Nn&&n.code.includes("request-failed")}function g9({projectId:n}){return`${qfe}/projects/${n}/installations`}function m9(n){return{token:n.token,requestStatus:2,expiresIn:Zfe(n.expiresIn),creationTime:Date.now()}}function y9(n,e){return x(this,null,function*(){let r=(yield e.json()).error;return fl.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function _9({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Qfe(n,{refreshToken:e}){let t=_9(n);return t.append("Authorization",Xfe(e)),t}function v9(n){return x(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function Zfe(n){return Number(n.replace("s","000"))}function Xfe(n){return`${f9} ${n}`}function epe(r,i){return x(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=g9(n),o=_9(n),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let c={fid:t,authVersion:f9,appId:n.appId,sdkVersion:h9},l={method:"POST",headers:o,body:JSON.stringify(c)},u=yield v9(()=>fetch(s,l));if(u.ok){let h=yield u.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:m9(h.authToken)}}else throw yield y9("Create Installation",u)})}function w9(n){return new Promise(e=>{setTimeout(e,n)})}function tpe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var npe=/^[cdef][\w-]{21}$/,zM="";function rpe(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=ipe(n);return npe.test(t)?t:zM}catch{return zM}}function ipe(n){return tpe(n).substr(0,22)}function kb(n){return`${n.appName}!${n.appId}`}var b9=new Map;function C9(n,e){let t=kb(n);E9(t,e),spe(t,e)}function E9(n,e){let t=b9.get(n);if(t)for(let r of t)r(e)}function spe(n,e){let t=ope();t&&t.postMessage({key:n,fid:e}),ape()}var hl=null;function ope(){return!hl&&"BroadcastChannel"in self&&(hl=new BroadcastChannel("[Firebase] FID Change"),hl.onmessage=n=>{E9(n.data.key,n.data.fid)}),hl}function ape(){b9.size===0&&hl&&(hl.close(),hl=null)}var cpe="firebase-installations-database",lpe=1,pl="firebase-installations-store",$M=null;function qM(){return $M||($M=$y(cpe,lpe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(pl)}}})),$M}function Pb(n,e){return x(this,null,function*(){let t=kb(n),i=(yield qM()).transaction(pl,"readwrite"),s=i.objectStore(pl),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&C9(n,e.fid),e})}function I9(n){return x(this,null,function*(){let e=kb(n),r=(yield qM()).transaction(pl,"readwrite");yield r.objectStore(pl).delete(e),yield r.done})}function Rb(n,e){return x(this,null,function*(){let t=kb(n),i=(yield qM()).transaction(pl,"readwrite"),s=i.objectStore(pl),o=yield s.get(t),a=e(o);return a===void 0?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&C9(n,a.fid),a})}function GM(n){return x(this,null,function*(){let e,t=yield Rb(n.appConfig,r=>{let i=upe(r),s=dpe(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===zM?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function upe(n){let e=n||{fid:rpe(),registrationStatus:0};return D9(e)}function dpe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(fl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=hpe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fpe(n)}:{installationEntry:e}}function hpe(n,e){return x(this,null,function*(){try{let t=yield epe(n,e);return Pb(n.appConfig,t)}catch(t){throw p9(t)&&t.customData.serverCode===409?yield I9(n.appConfig):yield Pb(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function fpe(n){return x(this,null,function*(){let e=yield c9(n.appConfig);for(;e.registrationStatus===1;)yield w9(100),e=yield c9(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield GM(n);return r||t}return e})}function c9(n){return Rb(n,e=>{if(!e)throw fl.create("installation-not-found");return D9(e)})}function D9(n){return ppe(n)?{fid:n.fid,registrationStatus:0}:n}function ppe(n){return n.registrationStatus===1&&n.registrationTime+d9<Date.now()}function gpe(r,i){return x(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=mpe(n,t),o=Qfe(n,t),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let c={installation:{sdkVersion:h9,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},u=yield v9(()=>fetch(s,l));if(u.ok){let h=yield u.json();return m9(h)}else throw yield y9("Generate Auth Token",u)})}function mpe(n,{fid:e}){return`${g9(n)}/${e}/authTokens:generate`}function KM(n,e=!1){return x(this,null,function*(){let t,r=yield Rb(n.appConfig,s=>{if(!x9(s))throw fl.create("not-registered");let o=s.authToken;if(!e&&vpe(o))return s;if(o.requestStatus===1)return t=ype(n,e),s;{if(!navigator.onLine)throw fl.create("app-offline");let a=bpe(s);return t=_pe(n,a),a}});return t?yield t:r.authToken})}function ype(n,e){return x(this,null,function*(){let t=yield l9(n.appConfig);for(;t.authToken.requestStatus===1;)yield w9(100),t=yield l9(n.appConfig);let r=t.authToken;return r.requestStatus===0?KM(n,e):r})}function l9(n){return Rb(n,e=>{if(!x9(e))throw fl.create("not-registered");let t=e.authToken;return Cpe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function _pe(n,e){return x(this,null,function*(){try{let t=yield gpe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Pb(n.appConfig,r),t}catch(t){if(p9(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield I9(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Pb(n.appConfig,r)}throw t}})}function x9(n){return n!==void 0&&n.registrationStatus===2}function vpe(n){return n.requestStatus===2&&!wpe(n)}function wpe(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Gfe}function bpe(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Cpe(n){return n.requestStatus===1&&n.requestTime+d9<Date.now()}function Epe(n){return x(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield GM(e);return r?r.catch(console.error):KM(e).catch(console.error),t.fid})}function Ipe(n,e=!1){return x(this,null,function*(){let t=n;return yield Dpe(t),(yield KM(t,e)).token})}function Dpe(n){return x(this,null,function*(){let{registrationPromise:e}=yield GM(n);e&&(yield e)})}function xpe(n){if(!n||!n.options)throw HM("App Configuration");if(!n.name)throw HM("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw HM(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function HM(n){return fl.create("missing-app-config-values",{valueName:n})}var T9="installations",Tpe="installations-internal",Ape=n=>{let e=n.getProvider("app").getImmediate(),t=xpe(e),r=xr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Spe=n=>{let e=n.getProvider("app").getImmediate(),t=xr(e,T9).getImmediate();return{getId:()=>Epe(t),getToken:i=>Ipe(t,i)}};function Mpe(){mn(new Ft(T9,Ape,"PUBLIC")),mn(new Ft(Tpe,Spe,"PRIVATE"))}Mpe();ze(u9,WM);ze(u9,WM,"esm2017");var Fb="analytics",Ppe="firebase_id",kpe="origin",Rpe=60*1e3,Fpe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tP="https://www.googletagmanager.com/gtag/js";var pr=new Dr("@firebase/analytics");var Npe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qr=new lr("analytics","Analytics",Npe);function Upe(n){if(!n.startsWith(tP)){let e=Qr.create("invalid-gtag-resource",{gtagURL:n});return pr.warn(e.message),""}return n}function F9(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ope(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Lpe(n,e){let t=Ope("firebase-js-sdk-policy",{createScriptURL:Upe}),r=document.createElement("script"),i=`${tP}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Vpe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function Bpe(n,e,t,r,i,s){return x(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield F9(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){pr.error(a)}n("config",i,s)})}function jpe(n,e,t,r,i){return x(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield F9(t);for(let c of o){let l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){pr.error(s)}})}function $pe(n,e,t,r){function i(s,...o){return x(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield jpe(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield Bpe(n,e,t,r,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){pr.error(a)}})}return i}function Hpe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=$pe(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function zpe(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(tP)&&t.src.includes(n))return t;return null}var Wpe=30,qpe=1e3,JM=class{constructor(e={},t=qpe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},N9=new JM;function Gpe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Kpe(n){return x(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Gpe(r)},s=Fpe.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function Ype(r){return x(this,arguments,function*(n,e=N9,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw Qr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Qr.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new QM;return setTimeout(()=>x(null,null,function*(){c.abort()}),t!==void 0?t:Rpe),U9({appId:i,apiKey:s,measurementId:o},a,c,e)})}function U9(s,o,a){return x(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=N9){var c;let{appId:l,measurementId:u}=n;try{yield Jpe(r,e)}catch(h){if(u)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:u};throw h}try{let h=yield Kpe(n);return i.deleteThrottleMetadata(l),h}catch(h){let f=h;if(!Qpe(f)){if(i.deleteThrottleMetadata(l),u)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:u};throw h}let p=Number((c=f?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Vy(t,i.intervalMillis,Wpe):Vy(t,i.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(l,y),pr.debug(`Calling attemptFetch again in ${p} millis`),U9(n,y,r,i)}})}function Jpe(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Qr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Qpe(n){if(!(n instanceof Nn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var QM=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var ZM;function Zpe(n,e,t,r,i){return x(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function Xpe(n,e,t,r){return x(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var XM;function ege(n){XM=n}function tge(n){ZM=n}function nge(){return x(this,null,function*(){if(sa())try{yield Tf()}catch(n){return pr.warn(Qr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return pr.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function rge(n,e,t,r,i,s,o){return x(this,null,function*(){var a;let c=Ype(n);c.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>pr.error(p)),e.push(c);let l=nge().then(p=>{if(p)return r.getId()}),[u,h]=yield Promise.all([c,l]);zpe(s)||Lpe(s,u.measurementId),XM&&(i("consent","default",XM),ege(void 0)),i("js",new Date);let f=(a=o?.config)!==null&&a!==void 0?a:{};return f[kpe]="firebase",f.update=!0,h!=null&&(f[Ppe]=h),i("config",u.measurementId,f),ZM&&(i("set",ZM),tge(void 0)),u.measurementId})}var eP=class{constructor(e){this.app=e}_delete(){return delete Md[this.app.options.appId],Promise.resolve()}},Md={},A9=[],S9={},YM="dataLayer",ige="gtag",M9,nP,P9=!1;function sge(){let n=[];if(xf()&&n.push("This is a browser extension environment."),dx()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Qr.create("invalid-analytics-context",{errorInfo:e});pr.warn(t.message)}}function oge(n,e,t){sge();let r=n.options.appId;if(!r)throw Qr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qr.create("no-api-key");if(Md[r]!=null)throw Qr.create("already-exists",{id:r});if(!P9){Vpe(YM);let{wrappedGtag:s,gtagCore:o}=Hpe(Md,A9,S9,YM,ige);nP=s,M9=o,P9=!0}return Md[r]=rge(n,A9,S9,e,M9,YM,t),new eP(n)}function O9(n=li()){n=We(n);let e=xr(n,Fb);return e.isInitialized()?e.getImmediate():L9(n)}function L9(n,e={}){let t=xr(n,Fb);if(t.isInitialized()){let i=t.getImmediate();if(ur(e,t.getOptions()))return i;throw Qr.create("already-initialized")}return t.initialize({options:e})}function V9(){return x(this,null,function*(){if(xf()||!dx()||!sa())return!1;try{return yield Tf()}catch{return!1}})}function B9(n,e,t){n=We(n),Xpe(nP,Md[n.app.options.appId],e,t).catch(r=>pr.error(r))}function rP(n,e,t,r){n=We(n),Zpe(nP,Md[n.app.options.appId],e,t,r).catch(i=>pr.error(i))}var k9="@firebase/analytics",R9="0.10.16";function age(){mn(new Ft(Fb,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return oge(r,i,t)},"PUBLIC")),mn(new Ft("analytics-internal",n,"PRIVATE")),ze(k9,R9),ze(k9,R9,"esm2017");function n(e){try{let t=e.getProvider(Fb).getImmediate();return{logEvent:(r,i,s)=>rP(t,r,i,s)}}catch(t){throw Qr.create("interop-component-reg-failed",{reason:t})}}}age();var gl=class{constructor(e){return e}},H9="analytics",sP=class{constructor(){return gs(H9)}};var z9=qe(O9,!0);var W9=qe(V9,!1),cge=qe(rP,!1,2);var lge=qe(B9,!0,2);var aP=(()=>{class n{initialized;disposables=[];constructor(t,r,i){ze("angularfire",Tr.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),W9().then(()=>{let o=i.get(gl);o?this.disposables=[_V(t).subscribe(a=>{lge(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(oe(yn),oe(Le),oe(vt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),uge="firebase_event_origin",dge="firebase_previous_class",hge="firebase_previous_id",fge="firebase_previous_screen",pge="firebase_screen_class",j9="firebase_screen_id",gge="firebase_screen",oP="outlet",mge="page_path",yge="page_title",Dg="screen_class",$9="screen_name",_ge="screen_view",vge="auto",wge="#",bge=Math.floor(Math.random()*(2**32-1))-2**31,iP={},Cge=n=>{let e=[n[Dg],n[oP]].join(wge);if(iP.hasOwnProperty(e))return iP[e];{let t=bge++;return iP[e]=t,t}},Ege=(n,e,t)=>n.events.pipe(hn(i=>i instanceof hu)).pipe(Pn(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(f=>f).find(f=>f.outlet===i.snapshot.outlet);if(!a)return fe(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",u={[$9]:l,[mge]:`/${o}`,[uge]:vge,[gge]:l,[oP]:i.snapshot.outlet};e&&(u[yge]=e.getTitle());let h=a.component;if(h){if(h===vf){let f=i.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=i.snapshot.component;if(typeof h=="string")return fe(ue(H({},u),{[Dg]:h}));if(h){let f=t.resolveComponentFactory(h);return fe(ue(H({},u),{[Dg]:f.selector}))}return fe(null)}),hn(i=>!!i),Ce(i=>H({[pge]:i[Dg],[j9]:Cge(i)},i)),AC(i=>i[oP]),Qt(i=>i.pipe(eh((s,o)=>JSON.stringify(s)===JSON.stringify(o)),th(void 0),MC(),Ce(([s,o])=>s?H({[dge]:s[Dg],[fge]:s[$9],[hge]:s[j9]},o):o)))),q9=(()=>{class n{disposable;constructor(t,r,i,s,o,a){ze("angularfire",Tr.full,"screen-tracking"),W9().then(()=>{let c=a.get(gl);!t||!c||s.runOutsideAngular(()=>{this.disposable=Ege(t,r,i).pipe(Pn(l=>x(this,null,function*(){return o&&(yield o.initialized),cge(c,_ge,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(oe(ci,8),oe(oy,8),oe(hc),oe(Le),oe(aP,8),oe(vt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),cP=new ee("angularfire2.analytics-instances");function Ige(n,e,t){if(!Wh(t))return null;let r=so(H9,n,e);return r&&new gl(r)}function Dge(n){return(e,t,r)=>{if(!Wh(r))return null;let i=e.runOutsideAngular(()=>n(t));return new gl(i)}}var xge={provide:sP,deps:[[new Wt,cP]]},Tge={provide:gl,useFactory:Ige,deps:[[new Wt,cP],Hr,Lr]};function G9(n,...e){return ze("angularfire",Tr.full,"analytics"),fn([Tge,xge,{provide:cP,useFactory:Dge(n),multi:!0,deps:[Le,vt,Lr,ui,Ui,...e]}])}var Age=new ee("recaptcha-language"),Sge=new ee("recaptcha-base-url"),Mge=new ee("recaptcha-nonce-tag"),K9=new ee("recaptcha-settings"),Pge=new ee("recaptcha-v3-site-key"),kge=new ee("recaptcha-loader-options");function Rge(n,e,t,{url:r,lang:i,nonce:s}={}){window.ng2recaptchaloaded=()=>{t(grecaptcha)};let o=document.createElement("script");o.innerHTML="";let{url:a,nonce:c}=e(new URL(r||"https://www.google.com/recaptcha/api.js"));a.searchParams.set("render",n==="explicit"?n:n.key),a.searchParams.set("onload","ng2recaptchaloaded"),a.searchParams.set("trustedtypes","true"),i&&a.searchParams.set("hl",i),o.src=a.href;let l=c||s;l&&o.setAttribute("nonce",l),o.async=!0,o.defer=!0,document.head.appendChild(o)}function Fge({v3SiteKey:n,onBeforeLoad:e,onLoaded:t}){let r=n?{key:n}:"explicit";Y9.loadScript(r,e,t)}var Y9={loadScript:Rge,newLoadScript:Fge};function Nge(n){return n.asObservable().pipe(hn(e=>e!==null))}var Uge=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.platformId=r,this.language=i,this.baseUrl=s,this.nonce=o,this.v3SiteKey=a,this.options=c;let l=this.init();this.ready=l?Nge(l):fe()}init(){if(e.ready)return e.ready;if(!Wh(this.platformId))return;let r=new dn(null);return e.ready=r,Y9.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:i=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(i);let s=new URL(this.baseUrl??i);return this.language&&s.searchParams.set("hl",this.language),{url:s,nonce:this.nonce}},onLoaded:i=>{let s=i;this.options?.onLoaded&&(s=this.options.onLoaded(i)),r.next(s)}}),r}};e.ready=null,e.\u0275fac=function(i){return new(i||e)(oe(Lr),oe(Age,8),oe(Sge,8),oe(Mge,8),oe(Pge,8),oe(kge,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})();var Oge=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wr({type:e}),e.\u0275inj=ir({});let n=e;return n})(),J9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wr({type:e}),e.\u0275inj=ir({providers:[Uge],imports:[Oge]});let n=e;return n})();var Q9={providers:[SE(),kD(),tD({eventCoalescing:!0}),tx(a9),uL(()=>Wy({projectId:"to-do-list-7259e",appId:"1:862659189621:web:9c93ad9d67870eb773113c",storageBucket:"to-do-list-7259e.firebasestorage.app",apiKey:"AIzaSyC1pwzlbRu0hDN8_i33mBqqURGO-tDXjoc",authDomain:"to-do-list-7259e.firebaseapp.com",messagingSenderId:"862659189621",measurementId:"G-10JS85S8EQ",databaseURL:"https://to-do-list-7259e-default-rtdb.firebaseio.com/"})),yV(()=>vV()),G9(()=>z9()),nj(()=>ij()),$8(()=>z8()),q9,aP,Lm(J9),{provide:K9,useValue:{siteKey:"6LcT33QrAAAAADYtebRWsQqSo9YA-W9uB3d8ekXA"}}]};var Nb=class n{title="POC";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&re(0,"router-outlet")},dependencies:[_f],styles:[".main-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:#f9f9f9;padding:2rem}.form-box[_ngcontent-%COMP%]{background:#fff;padding:2rem 2.5rem;border-radius:1rem;box-shadow:0 8px 16px #0000001a;width:100%;max-width:500px;display:flex;flex-direction:column;gap:1rem}.form-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem;font-weight:600;color:#333}.form-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ccc;border-radius:.5rem;font-size:1rem;transition:border-color .2s ease-in-out}.form-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .2s ease-in-out}.form-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};SD(Nb,Q9).catch(n=>console.error(n));
